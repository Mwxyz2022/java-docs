---
layout: default
title: "Performance implications –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—ñ–≤"
parent: "–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ"
grand_parent: "Java 8"
nav_order: 18
---

# Performance implications –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—ñ–≤

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—ñ–≤ —É JVM —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `invokedynamic` —Ç–∞ `method handles`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –¥–∏–Ω–∞–º—ñ—á–Ω–æ –∑–≤'—è–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥–∏. –¶–µ –º–æ–∂–µ –¥–∞—Ç–∏ –∫—Ä–∞—â—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –Ω—ñ–∂ –∞–Ω–æ–Ω—ñ–º–Ω—ñ –∫–ª–∞—Å–∏, –∑–∞–≤–¥—è–∫–∏ JIT-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è–º —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—é.
* –ø–æ–Ω—è—Ç—Ç—è: `invokedynamic`, `method handles`, `JIT`-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, `capture cost`.
* –ø—Ä–∏–∫–ª–∞–¥–∏: –õ—è–º–±–¥–∞ –±–µ–∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó (`Runnable r = () -> System.out.println("Hello");`) –º–æ–∂–µ –±—É—Ç–∏ –∫–µ—à–æ–≤–∞–Ω–∞. –õ—è–º–±–¥–∞ —ñ–∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è–º –∑–º—ñ–Ω–Ω–æ—ó –º–æ–∂–µ –º–∞—Ç–∏ –±—ñ–ª—å—à—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏.
* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `invokedynamic` –∑–∞–±–µ–∑–ø–µ—á—É—î –≥–Ω—É—á–∫—ñ—Å—Ç—å —ñ —à–≤–∏–¥–∫—ñ—Å—Ç—å. JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ —ñ–Ω–ª–∞–π–Ω–∏—Ç–∏ –ª—è–º–±–¥–∏. –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –º–æ–∂–µ –≤–ø–ª–∏–≤–∞—Ç–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.
* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –Ω–∞ —Ä—ñ–≤–Ω—ñ JVM.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–õ—è–º–±–¥–∞-–≤–∏—Ä–∞–∑–∏ –≤ Java ‚Äî —Ü–µ –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π —Å–ø–æ—Å—ñ–± –æ–ø–∏—Å—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É. –ó —Ç–æ—á–∫–∏ –∑–æ—Ä—É JVM, –≤–æ–Ω–∏ –º–∞—é—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **`invokedynamic`** —ñ method handles, —â–æ –º–æ–∂–µ –≤–ø–ª–∏–≤–∞—Ç–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–∏.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–õ—è–º–±–¥–∞ ‚Äî —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑—Ä—É—á–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. JVM —Å—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç–∏ —ñ –≤–∏–∫–ª–∏–∫–∏ –ø–æ-—ñ–Ω—à–æ–º—É, –Ω—ñ–∂ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –∞–Ω–æ–Ω—ñ–º–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤. –¶–µ –º–æ–∂–µ –¥–∞—Ç–∏ –ø—Ä–∏—Ä—ñ—Å—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ‚Ä¶ –∞–±–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—ñ –≥–∞–ª—å–º–∞, —è–∫—â–æ –ø–µ—Ä–µ–±–æ—Ä—â–∏—Ç–∏

---

## üìä **–¢–µ—Ö–Ω—ñ—á–Ω–∞ –∫—É—Ö–Ω—è:**

|       –ü–æ–Ω—è—Ç—Ç—è       |                                                    –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                                     |
|:-------------------:|:----------------------------------------------------------------------------------------------------------------:|
| **`invokedynamic`** | –ë–∞–π—Ç–∫–æ–¥-—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è JVM, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –≤–∏–∫–ª–∏–∫–∏ –º–µ—Ç–æ–¥—ñ–≤ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª—è–º–±–¥ |
| **Method handles**  |           –ü–æ—Ç—É–∂–Ω–∏–π —ñ –ª–µ–≥–∫–æ–≤–∞–≥–æ–≤–∏–π —Å–ø–æ—Å—ñ–± –∑–≤–µ—Ä—Ç–∞–Ω–Ω—è –¥–æ –º–µ—Ç–æ–¥—ñ–≤, —è–∫–∏–π JVM –æ–ø—Ç–∏–º—ñ–∑—É—î –∫—Ä–∞—â–µ –∑–∞ reflection            |
| **JIT-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó** |            Just-In-Time –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ —ñ–Ω–ª–∞–π–Ω–∏—Ç–∏, –∫–µ—à—É–≤–∞—Ç–∏ –π –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ª—è–º–±–¥–∏, –æ—Å–æ–±–ª–∏–≤–æ —Å—Ç–∞—Ç–∏—á–Ω—ñ             |
|  **Capture cost**   |               –Ø–∫—â–æ –ª—è–º–±–¥–∞ –∑–∞—Ö–æ–ø–ª—é—î –∑–º—ñ–Ω–Ω—ñ ‚Äî —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–∫—Ä–µ–º–∏–π –æ–±‚Äô—î–∫—Ç, —ñ —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ                |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —â–æ –∞–Ω–æ–Ω—ñ–º–Ω–∏–π –∫–ª–∞—Å ‚Äî —Ü–µ —Ü—ñ–ª–∏–π –∞–∫—Ç–æ—Ä, —è–∫–æ–≥–æ –æ–¥—Ä–∞–∑—É –∑–∞–ø—Ä–æ—à—É—é—Ç—å –Ω–∞ —Å—Ü–µ–Ω—É: "–û—Å—å —Ç–∏, –±–µ—Ä–∏ —Ä–æ–ª—å, –≥—Ä–∞–π".

–ê –ª—è–º–±–¥–∞ ‚Äî —Ü–µ —Å—Ü–µ–Ω–∞—Ä—ñ–π, —è–∫–∏–π –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –¥–∞—î –ø—Ä–æ–¥—é—Å–µ—Ä—É (JVM), –∞ –≤–∂–µ —Ç–æ–π –Ω–∞ –ª—å–æ—Ç—É –≤–∏—Ä—ñ—à—É—î: "–ó –∫–∏–º –∑—ñ–≥—Ä–∞—Ç–∏? –Ø–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏?" üé≠

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **‚úÖ –õ—è–º–±–¥–∞ –±–µ–∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó:**

```java
Runnable r = () -> System.out.println("Hello"); 
```

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ **–æ–¥–∏–Ω —î–¥–∏–Ω–∏–π –æ–±'—î–∫—Ç** —É –≤—Å—ñ–π –ø—Ä–æ–≥—Ä–∞–º—ñ ‚Äî JVM –∫–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

### **‚ùå –õ—è–º–±–¥–∞ —ñ–∑ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è–º –∑–º—ñ–Ω–Ω–æ—ó:**

```java
int x = 5;
Runnable r = () -> System.out.println(x); 
```

–¶–µ –≤–∂–µ **–æ–∫—Ä–µ–º–∏–π –æ–±'—î–∫—Ç** –Ω–∞ –∫–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ ‚Äî –º–µ–Ω—à–µ —à–∞–Ω—Å—ñ–≤ –Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é.

---

### **üß™ Benchmark (JMH):**

```java
@Benchmark
public void testLambda() {
    IntStream.range(0, 1000).map(i -> i * 2).sum();
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –æ–±‚Äô—î–º–∞—Ö –ª—è–º–±–¥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å **—Ç–∞–∫—É –∂ –∞–±–æ –∫—Ä–∞—â—É** –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –Ω—ñ–∂ –∞–Ω–æ–Ω—ñ–º–Ω—ñ –∫–ª–∞—Å–∏, –∑–∞–≤–¥—è–∫–∏ JIT.

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|         –ö—Ä–∏—Ç–µ—Ä—ñ–π          |           –õ—è–º–±–¥–∞-–≤–∏—Ä–∞–∑–∏            |     –ê–Ω–æ–Ω—ñ–º–Ω—ñ –∫–ª–∞—Å–∏     |
|:-------------------------:|:----------------------------------:|:----------------------:|
|       **–°–∏–Ω—Ç–∞–∫—Å–∏—Å**       |       –ö–æ—Ä–æ—Ç–∫–∏–π, —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–π        |      –ë–∞–≥–∞—Ç–æ –∫–æ–¥—É       |
| **–®–≤–∏–¥–∫–æ–¥—ñ—è –±–µ–∑ –∑–∞—Ö–æ–ø–ª.** |             üü¢ –í–∏—Å–æ–∫–∞              |       üü° –°–µ—Ä–µ–¥–Ω—è       |
|  **–®–≤–∏–¥–∫–æ–¥—ñ—è –∑ –∑–∞—Ö–æ–ø–ª.**  |             üü° –°–µ—Ä–µ–¥–Ω—è             |       üü° –°–µ—Ä–µ–¥–Ω—è       |
|  **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤**   | –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–µ (**`invokedynamic`**) | –ö–æ–∂–µ–Ω —Ä–∞–∑ ‚Äî –Ω–æ–≤–∏–π –∫–ª–∞—Å |
|     **JIT-—ñ–Ω–ª–∞–π–Ω—ñ–Ω–≥**     |         üü¢ –ß–∞—Å—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π         |        üü° –†—ñ–¥—à–µ        |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É –ª—è–º–±–¥–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —à–≤–∏–¥—à–∏–º–∏ –∑–∞ –∞–Ω–æ–Ω—ñ–º–Ω—ñ –∫–ª–∞—Å–∏?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –ó–∞–≤–¥—è–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é `invokedynamic` —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ JIT –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞ –∫–µ—à—É–≤–∞—Ç–∏ —Ç–∞ —ñ–Ω–ª–∞–π–Ω–∏—Ç–∏ –ª—è–º–±–¥–∏.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ö–æ–ª–∏ –ª—è–º–±–¥–∞ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω–æ—é?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –ö–æ–ª–∏ –∑–∞—Ö–æ–ø–ª—é—î –∑–º—ñ–Ω–Ω—ñ –∞–±–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ –≥–∞—Ä—è—á–æ–º—É —Ü–∏–∫–ª—ñ –∑ —á–∞—Å—Ç–∏–º–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º–∏ –Ω–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –º–æ—è –ª—è–º–±–¥–∞ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ –æ–±‚Äô—î–∫—Ç–∏?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –ú–æ–∂–Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—é–≤–∞—Ç–∏ JVM –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é JMH, JVisualVM –∞–±–æ Java Flight Recorder.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏ –∑–∞–≤–∂–¥–∏ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª—è–º–±–¥—É –∑–∞–º—ñ—Å—Ç—å –∞–Ω–æ–Ω—ñ–º–Ω–æ–≥–æ –∫–ª–∞—Å—É?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –£ 90% –≤–∏–ø–∞–¥–∫—ñ–≤ ‚Äî —Ç–∞–∫, —è–∫—â–æ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –≤ —Å–∫–ª–∞–¥–Ω—ñ–π –ª–æ–≥—ñ—Ü—ñ –∞–±–æ –¥–æ—Å—Ç—É–ø—ñ –¥–æ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö `this`.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"–õ—è–º–±–¥–∞ ‚Äî –ª—ñ–Ω–∏–≤–∏–π –≥–µ–Ω—ñ–π"** –í—ñ–Ω –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç—å —Å–∞–º, –ø–æ–∫–∏ –Ω–µ —Å–∫–∞–∂–µ—à. –ê–ª–µ –∫–æ–ª–∏ —Å–∫–∞–∂–µ—à ‚Äî –≤–∏–∫–ª–∞–¥–∞—î—Ç—å—Å—è –ø–æ –º–∞–∫—Å–∏–º—É–º—É (–æ—Å–æ–±–ª–∏–≤–æ –∑ JIT)

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –õ—è–º–±–¥–∞-–≤–∏—Ä–∞–∑–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **`invokedynamic`**, —â–æ –¥–æ–∑–≤–æ–ª—è—î **–µ—Ñ–µ–∫—Ç–∏–≤–Ω—É, –¥–∏–Ω–∞–º—ñ—á–Ω—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∫–æ–¥—É**.
* JVM —á–∞—Å—Ç–æ **–∫–µ—à—É—î –ª—è–º–±–¥–∏**, —è–∫—â–æ –≤–æ–Ω–∏ –Ω–µ –∑–∞—Ö–æ–ø–ª—é—é—Ç—å –∑–º—ñ–Ω–Ω—ñ ‚Äî —Ü–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.
* –õ—è–º–±–¥–∏ –∑–∞–∑–≤–∏—á–∞–π **—à–≤–∏–¥—à—ñ –∞–±–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω—ñ** –∞–Ω–æ–Ω—ñ–º–Ω–∏–º –∫–ª–∞—Å–∞–º, –æ—Å–æ–±–ª–∏–≤–æ –≤ **stream-–ø–∞–π–ø–ª–∞–π–Ω–∞—Ö**.
* –í–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏, **–¥–µ –º–æ–∂–ª–∏–≤—ñ –≤—Ç—Ä–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** ‚Äî –ø—Ä–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—ñ –∑–º—ñ–Ω–Ω–∏—Ö, –∞–±–æ —á–∞—Å—Ç–æ–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –Ω–æ–≤–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤.
* –Ü–Ω—Ç–µ—Ä–≤‚Äô—é–µ—Ä—É –±—É–¥–µ —Ü—ñ–∫–∞–≤–æ, —á–∏ –≤–∏ —Ä–æ–∑—É–º—ñ—î—Ç–µ **–≤–Ω—É—Ç—Ä—ñ—à–Ω—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é JVM**, –∞ –Ω–µ –ª–∏—à–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ª—è–º–±–¥.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Inside Java: Lambda performance talk by Brian Goetz**](https://www.youtube.com/watch?v=1OpAgZvYXLQ)
