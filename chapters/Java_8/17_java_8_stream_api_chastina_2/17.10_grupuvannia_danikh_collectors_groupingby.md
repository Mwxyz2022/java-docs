---
layout: default
title: "–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: Collectors.groupingBy()"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 10
---

# –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: Collectors.groupingBy()

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Collectors.groupingBy()` ‚Äì —Ü–µ –∫–æ–ª–µ–∫—Ç–æ—Ä, —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—ñ–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É `Map`, –¥–µ –∫–ª—é—á ‚Äì —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä—É–ø—É–≤–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó (classifier), –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äì –∫–æ–ª–µ–∫—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –Ω–∞–ª–µ–∂–∞—Ç—å –¥–æ —Ü—ñ—î—ó –≥—Ä—É–ø–∏.

* –ø–æ–Ω—è—Ç—Ç—è: `Collectors.groupingBy()`, `classifier` (—Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è), `downstream collector` (–¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –≤ –≥—Ä—É–ø—ñ).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `words.stream().collect(Collectors.groupingBy(String::length))` (–≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é), `groupingBy(String::length, Collectors.counting())` (–ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É –≥—Ä—É–ø—ñ).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ü–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö. –ü—ñ–¥—Ç—Ä–∏–º—É—î –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∑ –∞–≥—Ä–µ–≥—É—é—á–∏–º–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`Collectors.groupingBy()`** ‚Äî —Ü–µ –º–µ—Ç–æ–¥ —ñ–∑ –ø–∞–∫–µ—Ç—É **`java.util.stream.Collectors`**, —è–∫–∏–π –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—ñ–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –º–∞–ø—É, –¥–µ –∫–ª—é—á ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä—É–ø—É–≤–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó, –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –∫–æ–ª–µ–∫—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –Ω–∞–ª–µ–∂–∞—Ç—å –¥–æ —Ü—ñ—î—ó –≥—Ä—É–ø–∏.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ —Å–æ—Ä—Ç—É–≤–∞—Ç–∏ —è–±–ª—É–∫–∞ –ø–æ –∫–æ–ª—å–æ—Ä—É: —á–µ—Ä–≤–æ–Ω—ñ –≤ –æ–¥–∏–Ω –∫–æ—à–∏–∫, –∑–µ–ª–µ–Ω—ñ ‚Äî –≤ —ñ–Ω—à–∏–π. –¢—ñ–ª—å–∫–∏ —Ç–∏ —Å–∞–º –≤–∏—Ä—ñ—à—É—î—à, —â–æ –±—É–¥–µ "–∫–æ–ª—å–æ—Ä–æ–º" (–∫–ª—é—á–µ–º): –≤—ñ–∫, —ñ–º‚Äô—è, –¥–æ–≤–∂–∏–Ω–∞ —Ä—è–¥–∫–∞, —Ç–æ—â–æ

---

## üìä **–°–∏–≥–Ω–∞—Ç—É—Ä–∏ `groupingBy()`:**

```java
// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –æ–±—Ä–æ–±–∫–∏
groupingBy(Function classifier)

// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑ –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
groupingBy(Function classifier, Collector downstream)

// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑ —Ç–∏–ø–æ–º Map
groupingBy(Function classifier, Supplier mapFactory, Collector downstream)
```

üìå **–ü–æ–ø—É–ª—è—Ä–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∑ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏:**

* **`Collectors.counting()`** ‚Äî –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ
* **`Collectors.summingInt()`** ‚Äî —Å—É–º–∞ —á–∏—Å–ª–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å
* **`Collectors.averagingInt()`** ‚Äî —Å–µ—Ä–µ–¥–Ω—î
* **`Collectors.mapping()`** ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º
* **`Collectors.toList()`** ‚Äî –∑–±–∏—Ä–∞–Ω–Ω—è –≤ —Å–ø–∏—Å–æ–∫ (—Ç–∏–ø–æ–≤–æ)

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–ú–∞—î—à —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤? –ì—Ä—É–ø—É–π –∑–∞ –∫—É—Ä—Å–æ–º.

–ú–∞—î—à —Å–ø–∏—Å–æ–∫ —Å–ª—ñ–≤? –ì—Ä—É–ø—É–π –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é.

–ú–∞—î—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó? –ì—Ä—É–ø—É–π –∑–∞ —Ç–∏–ø–æ–º (–ø–æ–∫—É–ø–∫–∞, –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è) ‚Äî –∞ —â–µ –ø–æ—Ä–∞—Ö—É–π –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ\

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// üìå –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é
List<String> words = List.of("cat", "mouse", "rat", "elephant");

Map<Integer, List<String>> byLength = words.stream()
    .collect(Collectors.groupingBy(String::length));
```

```java
// üî¢ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –≥—Ä—É–ø—ñ
Map<Integer, Long> countByLength = words.stream()
    .collect(Collectors.groupingBy(
        String::length,
        Collectors.counting()
    ));
```

```java
// üí∏ –°—É–º–∞ —á–∏—Å–µ–ª –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é
class Purchase {
    String category;
    int amount;
    // constructor, getters...
}

List<Purchase> purchases = ...;

Map<String, Integer> totalByCategory = purchases.stream()
    .collect(Collectors.groupingBy(
        Purchase::getCategory,
        Collectors.summingInt(Purchase::getAmount)
    ));
```

```java
// üéØ –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è: –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
Map<String, Map<String, List<Purchase>>> grouped = purchases.stream()
    .collect(Collectors.groupingBy(
        Purchase::getCategory,
        Collectors.groupingBy(Purchase::getSubCategory)
    ));
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|               –ú–µ—Ç–æ–¥               |                –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                 |
|:---------------------------------:|:------------------------------------------:|
|           **`toMap()`**           |         –û–¥–∏–Ω –∫–ª—é—á ‚Äî –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è          |
|        **`groupingBy()`**         | –û–¥–∏–Ω –∫–ª—é—á ‚Äî —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω—å (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏) |
|  **`groupingBy() + counting()`**  |    –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ     |
| **`groupingBy() + summingInt()`** |        –°—É–º–∞ –∑–Ω–∞—á–µ–Ω—å —É –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ         |
|  **`groupingBy() + mapping()`**   |   –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω—å –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º    |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Group --> List, Add a Collector --> Count or Sum"**

–∞–±–æ –≤ —Å—Ç–∏–ª—ñ –∫–æ–¥—É:  

**`groupingBy(key, howToGroup)`**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`groupingBy()`** ‚Äî –Ω–∞–π–∫—Ä–∞—â–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –∞–≥—Ä–µ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö —É —Å—Ç—Ä—ñ–º–∞—Ö.
* –ö–æ–º–±—ñ–Ω—É—î—Ç—å—Å—è –∑ **`counting(), summingInt(), mapping()`** –¥–ª—è –ø–æ—Ç—É–∂–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å.
* –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤–∫–ª–∞–¥–µ–Ω–µ (–±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ) –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.
* –ö–ª—é—á–æ–≤–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –∑–∞–¥–∞—á —É Java.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Official JavaDoc: Collectors.groupingBy**](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `Collectors.groupingBy()` —ñ —è–∫–∞ –π–æ–≥–æ –æ—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`Collectors.groupingBy()`** ‚Äî —Ü–µ –æ–¥–∏–Ω –∑ –Ω–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∏—Ö —Ç–∞ –Ω–∞–π–≥–Ω—É—á–∫—ñ—à–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –∑ –∫–ª–∞—Å—É `java.util.stream.Collectors`.
>
> **–ô–æ–≥–æ –æ—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞** ‚Äî **–≥—Ä—É–ø—É–≤–∞—Ç–∏** –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Ç–æ–∫—É –≤ `Map` –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–∞–¥–∞–Ω–æ–≥–æ –∫—Ä–∏—Ç–µ—Ä—ñ—é.
>
> –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ —Ä–æ–±–æ—Ç–∏ —Ü—å–æ–≥–æ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞:
>
> * **–ö–ª—é—á–µ–º** —É `Map` —Å—Ç–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è, –ø–æ–≤–µ—Ä–Ω—É—Ç–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—é **—Ñ—É–Ω–∫—Ü—ñ—î—é-–∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–æ–º**.
> * **–ó–Ω–∞—á–µ–Ω–Ω—è–º** —É `Map` —Å—Ç–∞—î **–∫–æ–ª–µ–∫—Ü—ñ—è** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `List`) —É—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —è–∫—ñ –ø–æ—Ç—Ä–∞–ø–∏–ª–∏ –≤ —Ü—é –≥—Ä—É–ø—É.
>
> –ü–æ —Å—É—Ç—ñ, `groupingBy` —î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–º –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–æ–º SQL-–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `GROUP BY`.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ —Å–æ—Ä—Ç—É—î—Ç–µ —ñ–≥—Ä–∞—à–∫–∏ –ø–æ –∫–æ—Ä–æ–±–∫–∞—Ö.

* **–§—É–Ω–∫—Ü—ñ—è-–∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä** ‚Äî —Ü–µ –ø—Ä–∞–≤–∏–ª–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä., "—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º").
* `groupingBy` –±–µ—Ä–µ –∫–æ–∂–Ω—É —ñ–≥—Ä–∞—à–∫—É, –¥–∏–≤–∏—Ç—å—Å—è –Ω–∞ —ó—ó –∫–æ–ª—ñ—Ä (–∑–∞—Å—Ç–æ—Å–æ–≤—É—î –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä) —ñ –∫–ª–∞–¥–µ —ó—ó —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –∫–æ—Ä–æ–±–∫—É (–≤ `List` –¥–ª—è —Ü—å–æ–≥–æ –∫–æ–ª—å–æ—Ä—É).
* –í –∫—ñ–Ω—Ü—ñ –≤–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ –Ω–∞–±—ñ—Ä –∫–æ—Ä–æ–±–æ–∫ (`Map`), –¥–µ –∫–æ–∂–Ω–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–∞ –∫–æ–ª—å–æ—Ä–æ–º (`–∫–ª—é—á`) —ñ –º—ñ—Å—Ç–∏—Ç—å —ñ–≥—Ä–∞—à–∫–∏ —Ü—å–æ–≥–æ –∫–æ–ª—å–æ—Ä—É (`–∑–Ω–∞—á–µ–Ω–Ω—è`).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ë–∞–∑–æ–≤–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `groupingBy` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∞ –Ω–µ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è "–æ–¥–∏–Ω-–≤-–æ–¥–∏–Ω", —è–∫ `toMap`.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `groupingBy()`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–ª—ñ–≤ –∑–∞ —ó—Ö–Ω—å–æ—é –¥–æ–≤–∂–∏–Ω–æ—é.
>
> **–†—ñ—à–µ–Ω–Ω—è:**
>
> 1. –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ç—ñ–∫ –∑—ñ —Å–ø–∏—Å–∫—É —Å–ª—ñ–≤.
> 2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `Collectors.groupingBy()`.
> 3. –í —è–∫–æ—Å—Ç—ñ **—Ñ—É–Ω–∫—Ü—ñ—ó-–∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞** –ø–µ—Ä–µ–¥–∞—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –º–µ—Ç–æ–¥ `String::length`. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –ø–æ–≤–µ—Ä–Ω–µ –π–æ–≥–æ –¥–æ–≤–∂–∏–Ω—É, —è–∫–∞ —ñ —Å—Ç–∞–Ω–µ –∫–ª—é—á–µ–º —É —Ä–µ–∑—É–ª—å—Ç—É—é—á—ñ–π –º–∞–ø—ñ.
>
> –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ `Map<Integer, List<String>>`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

public class GroupingBySimpleExample {
    public static void main(String[] args) {
        List<String> words = List.of("apple", "banana", "cat", "dog", "elephant");

        Map<Integer, List<String>> wordsByLength = words.stream()
            .collect(Collectors.groupingBy(String::length));

        System.out.println(wordsByLength); 
        // {3=[cat, dog], 5=[apple], 6=[banana], 8=[elephant]}
    }
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è `groupingBy` –¥–ª—è –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä—ñ—é –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏–º `Collectors.groupingBy()` –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `Collectors.toMap()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ –æ–±–∏–¥–≤–∞ —Å—Ç–≤–æ—Ä—é—é—Ç—å `Map`, –≤–æ–Ω–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å —ñ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É –æ–±—Ä–æ–±–ª—è—é—Ç—å –¥—É–±–ª—ñ–∫–∞—Ç–∏ –∫–ª—é—á—ñ–≤.
>
> | **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞** | **`Collectors.toMap()`** | **`Collectors.groupingBy()`** |
> | :---: | :---: | :---: |
> | **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è** | **–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è** –ø–æ—Ç–æ–∫—É –≤ –º–∞–ø—É ("–æ–¥–∏–Ω-–≤-–æ–¥–∏–Ω"). | **–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—î–º. |
> | **–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**| `Map<K, V>` (–æ–¥–∏–Ω –∫–ª—é—á - –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è) | `Map<K, List<V>>` (–æ–¥–∏–Ω –∫–ª—é—á - —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω—å) |
> | **–û–±—Ä–æ–±–∫–∞ –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤ –∫–ª—é—á—ñ–≤**| –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∫–∏–¥–∞—î **`IllegalStateException`**. | –¶–µ **–æ—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞**. –î—É–±–ª—ñ–∫–∞—Ç–∏ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É. |
>
> **–ö–æ—Ä–æ—Ç–∫–æ:** `toMap` ‚Äî –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è "—Å–ª–æ–≤–Ω–∏–∫—ñ–≤" –∞–±–æ "—ñ–Ω–¥–µ–∫—Å—ñ–≤" (`ID -> –û–±'—î–∫—Ç`). `groupingBy` ‚Äî –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è "–∫–∞—Ç–µ–≥–æ—Ä—ñ–π" (`–ú—ñ—Å—Ç–æ -> –°–ø–∏—Å–æ–∫ –∂–∏—Ç–µ–ª—ñ–≤`).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –æ–±–∏—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ. –¶–µ –∫–ª—é—á–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≥–ª–∏–±–æ–∫–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `groupingBy` –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è `groupingBy`, —è–∫–∞ –ø—Ä–∏–π–º–∞—î –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî **–¥–æ–¥–∞—Ç–∫–æ–≤–∏–π (downstream) –∫–æ–ª–µ–∫—Ç–æ—Ä**. –¶–µ–π –∫–æ–ª–µ–∫—Ç–æ—Ä –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –æ–∫—Ä–µ–º–æ.
>
> –©–æ–± –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä **`Collectors.counting()`**.
>
> `groupingBy(classifier, downstreamCollector)`

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

–ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ —Å–ª—ñ–≤ –∫–æ–∂–Ω–æ—ó –¥–æ–≤–∂–∏–Ω–∏ —î —É —Å–ø–∏—Å–∫—É.

```java
List<String> words = List.of("apple", "banana", "cat", "dog", "elephant");

Map<Integer, Long> countByLength = words.stream()
    .collect(Collectors.groupingBy(
        String::length,         // 1. –ì—Ä—É–ø—É—î–º–æ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é
        Collectors.counting()   // 2. –î–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏
    ));

System.out.println(countByLength); // {3=2, 5=1, 6=1, 8=1}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ `Map<Integer, Long>`, –æ—Å–∫—ñ–ª—å–∫–∏ `counting()` –ø–æ–≤–µ—Ä—Ç–∞—î `Long`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π `groupingBy` —Ç–∞ –π–æ–≥–æ –∫–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è –∑ —ñ–Ω—à–∏–º–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö. –¶–µ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–∞ –∑–∞–¥–∞—á–∞.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ "downstream collector" —ñ —è–∫—ñ —â–µ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑ `groupingBy`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Downstream collector ("–∫–æ–ª–µ–∫—Ç–æ—Ä –Ω–∏–∂—á–æ–≥–æ —Ä—ñ–≤–Ω—è")** ‚Äî —Ü–µ –∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —ñ–Ω—à–æ–≥–æ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞. –£ –≤–∏–ø–∞–¥–∫—É `groupingBy`, –≤—ñ–Ω –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –ø–æ—Ç—Ä–∞–ø–∏–ª–∏ –≤ –∫–æ–∂–Ω—É –æ–∫—Ä–µ–º—É –≥—Ä—É–ø—É.
>
> –¶–µ –¥–æ–∑–≤–æ–ª—è—î –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–±–∏—Ä–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ `List`, –∞ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞–¥ –Ω–∏–º–∏ —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.
>
> **–ü–æ–ø—É–ª—è—Ä–Ω—ñ downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä–∏:**
>
> * **`Collectors.counting()`**: –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
> * **`Collectors.summingInt() / summingLong() / summingDouble()`**: –æ–±—á–∏—Å–ª—é—î —Å—É–º—É –ø–æ–ª—ñ–≤.
> * **`Collectors.averagingInt() / ...`**: –æ–±—á–∏—Å–ª—é—î —Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è.
> * **`Collectors.maxBy() / minBy()`**: –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π/–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç.
> * **`Collectors.mapping(...)`**: –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –∑—ñ–±—Ä–∞—Ç–∏ —ó—Ö —É –∫–æ–ª–µ–∫—Ü—ñ—é.
> * **`Collectors.toSet()`**: –∑–±–∏—Ä–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≥—Ä—É–ø–∏ –≤ `Set` (–¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å).

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∑ `summingInt`:**

```java
// –û–±—á–∏—Å–ª–∏—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
Map<String, Integer> totalValueByCategory = products.stream()
    .collect(Collectors.groupingBy(
        Product::getCategory,
        Collectors.summingInt(Product::getPrice)
    ));
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ `groupingBy` —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –±—É–¥—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –ª–∞–Ω—Ü—é–∂–∫–∏ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –≤–∏–∫–æ–Ω–∞—Ç–∏ –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–≥—Ä—É–ø—É–≤–∞—Ç–∏ –∑–∞ –æ–¥–Ω–∏–º –ø–æ–ª–µ–º, –∞ –ø–æ—Ç—ñ–º ‚Äî –∑–∞ —ñ–Ω—à–∏–º)?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–æ–≥–æ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ **—â–µ –æ–¥–∏–Ω `groupingBy`** —è–∫ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–µ—Ä—à–æ–≥–æ `groupingBy`.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —Å–ø–æ—á–∞—Ç–∫—É –∑–∞ –∫—É—Ä—Å–æ–º, –∞ –ø–æ—Ç—ñ–º, –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–∂–Ω–æ–≥–æ –∫—É—Ä—Å—É, ‚Äî –∑–∞ –æ—Ü—ñ–Ω–∫–æ—é.
>
> –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ `Map<Integer, Map<Character, List<Student>>>`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
Map<Integer, Map<Character, List<Student>>> studentsByCourseAndGrade =
    students.stream().collect(
        Collectors.groupingBy( // –ü–µ—Ä—à–∏–π —Ä—ñ–≤–µ–Ω—å –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è (–∑–∞ –∫—É—Ä—Å–æ–º)
            Student::getCourse,
            Collectors.groupingBy( // –î—Ä—É–≥–∏–π —Ä—ñ–≤–µ–Ω—å –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è (–∑–∞ –æ—Ü—ñ–Ω–∫–æ—é)
                Student::getGrade
            )
        )
    );
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å. –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –ø–æ—Ç—É–∂–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å `groupingBy`.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–∏–ø –∫–æ–ª–µ–∫—Ü—ñ—ó, –≤ —è–∫—É –∑–±–∏—Ä–∞—é—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è –≤ `groupingBy` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `TreeSet` –∑–∞–º—ñ—Å—Ç—å `List`)?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `groupingBy` –∑–±–∏—Ä–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ `List`. –©–æ–± –∑–º—ñ–Ω–∏—Ç–∏ —Ü–µ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é **`mapping`** —Ç–∞ **`toCollection`**.
>
> **`Collectors.mapping(mapper, downstream)`**: –°–ø–æ—á–∞—Ç–∫—É –∑–∞—Å—Ç–æ—Å–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é `mapper` –¥–æ –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, –∞ –ø–æ—Ç—ñ–º –∑–±–∏—Ä–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–∞.
>
> –©–æ–± –ø—Ä–æ—Å—Ç–æ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–∏–ø –∫–æ–ª–µ–∫—Ü—ñ—ó, `mapper`'–æ–º –±—É–¥–µ `Function.identity()`.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ª–æ–≤–∞ –∑–∞ –ø–µ—Ä—à–æ—é –ª—ñ—Ç–µ—Ä–æ—é, —ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ª—ñ—Ç–µ—Ä–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ **–≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π `TreeSet`** —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Å–ª—ñ–≤.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
Map<Character, Set<String>> wordsByFirstLetter = words.stream()
    .collect(Collectors.groupingBy(
        s -> s.charAt(0),
        Collectors.toCollection(TreeSet::new) // –í–∫–∞–∑—É—î–º–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ TreeSet –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏
    ));
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –±—ñ–ª—å—à –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ (`mapping`, `toCollection`) —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –≥–Ω—É—á–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –ø–æ–≤–µ—Ä–Ω–µ `Stream.empty().collect(Collectors.groupingBy(...))`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –≤–∏–∫–ª–∏–∫ –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø–æ–≤–µ—Ä–Ω–µ **–ø–æ—Ä–æ–∂–Ω—é `Map` (`{}`)**.
>
> `groupingBy`, —è–∫ —ñ —ñ–Ω—à—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–æ—Ä–æ–∂–Ω—ñ—Ö –ø–æ—Ç–æ–∫—ñ–≤. –í—ñ–Ω —Å–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä—é—î –ø–æ—Ä–æ–∂–Ω—ñ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–º–∞–ø—É), –∞ –ø–æ—Ç—ñ–º –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –¥–æ–¥–∞–≤–∞—Ç–∏ –≤ –Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏. –Ø–∫—â–æ –ø–æ—Ç—ñ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π, –∂–æ–¥–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –Ω–µ –±—É–¥–µ –æ–±—Ä–æ–±–ª–µ–Ω–æ, —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–æ—Ä–æ–∂–Ω—ñ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å –∫—Ä–∞–π–Ω—ñ –≤–∏–ø–∞–¥–∫–∏ (edge cases).*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—è-–∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —É `groupingBy` –ø–æ–≤–µ—Ä–Ω–µ `null`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î `null` –¥–ª—è —è–∫–æ–≥–æ—Å—å –µ–ª–µ–º–µ–Ω—Ç–∞, —Ü–µ–π –µ–ª–µ–º–µ–Ω—Ç –±—É–¥–µ –ø–æ–º—ñ—â–µ–Ω–æ –≤ –≥—Ä—É–ø—É –∑ **–∫–ª—é—á–µ–º `null`**.
>
> –¶–µ –≤–∞–ª—ñ–¥–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞. `groupingBy` –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—î `null` —è–∫ –∫–ª—é—á —É —Ä–µ–∑—É–ª—å—Ç—É—é—á—ñ–π –º–∞–ø—ñ.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
List<String> list = List.of("A", "B", null, "C");
Map<String, List<String>> map = list.stream()
    .collect(Collectors.groupingBy(s -> s)); // –ü—Ä–æ—Å—Ç–æ –≥—Ä—É–ø—É—î–º–æ –∑–∞ —Å–∞–º–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º

// map –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏ –∫–ª—é—á null
// {null=[null], A=[A], B=[B], C=[C]}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –ø–æ–≤–æ–¥—è—Ç—å—Å—è –∑ `null` –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏, —â–æ —î –≤–∞–∂–ª–∏–≤–∏–º –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –∫–æ–¥—É.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ —ñ—Å–Ω—É—î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–π –∞–Ω–∞–ª–æ–≥ `groupingBy` –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —ñ—Å–Ω—É—î.** –¶–µ **`Collectors.groupingByConcurrent()`**.
>
> * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –í—ñ–Ω –ø—Ä–∞—Ü—é—î —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ –∑–≤–∏—á–∞–π–Ω–∏–π `groupingBy`, –∞–ª–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ä–µ–∑—É–ª—å—Ç—É—é—á–∞ –º–∞–ø–∞ –±—É–¥–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é (–∑–∞–∑–≤–∏—á–∞–π —Ü–µ **`ConcurrentHashMap`**).
> * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –¶–µ–π –∫–æ–ª–µ–∫—Ç–æ—Ä –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑—ñ —Å–≤–æ—ó–º –ø—Ä–æ–º—ñ–∂–Ω–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º, –∞ –ø–æ—Ç—ñ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±'—î–¥–Ω—É—é—Ç—å—Å—è –≤ –æ–¥–Ω—É `ConcurrentHashMap`.
>
> **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
> –õ–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ **`parallelStream()`**, —ñ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ `Map`, –∑ —è–∫–æ—é –º–æ–∂–Ω–∞ –±—É–¥–µ –±–µ–∑–ø–µ—á–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤ –ø—ñ—Å–ª—è —ó—ó —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.
>
> –£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤, –Ω–∞–≤—ñ—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤, –∑–≤–∏—á–∞–π–Ω–æ–≥–æ `groupingBy` –¥–æ—Å—Ç–∞—Ç–Ω—å–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω —Ç–∞–∫–æ–∂ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ, –∞ —Ä–µ–∑—É–ª—å—Ç—É—é—á–∞ `HashMap` –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –ª–∏—à–µ –≤ –∫—ñ–Ω—Ü—ñ.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
ConcurrentMap<Integer, List<String>> result = words.parallelStream()
    .collect(Collectors.groupingByConcurrent(String::length));
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è API –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ `groupingBy` —Ç–∞ `groupingByConcurrent` –ø–æ–∫–∞–∑—É—î –≥–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è `Stream API`.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–ø–∏—à—ñ—Ç—å –∫–æ–¥, —â–æ –≥—Ä—É–ø—É—î —Ä—è–¥–∫–∏ –∑–∞ –ø–µ—Ä—à–∏–º —Å–∏–º–≤–æ–ª–æ–º, –∞ –≤ —è–∫–æ—Å—Ç—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–≤–µ—Ä—Ç–∞—î —ó—Ö –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—é —á–µ—Ä–µ–∑ –∫–æ–º—É. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è —Ü—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ `groupingBy` –∑ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º `Collectors.joining()`. –ê–ª–µ `joining()` –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –¥–æ –ø–æ—Ç–æ–∫—É —Ä—è–¥–∫—ñ–≤. –¢–æ–º—É –Ω–∞–º —Ç–∞–∫–æ–∂ –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è `mapping()`.
>
> **–õ–∞–Ω—Ü—é–∂–æ–∫ –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤:**
>
> 1. `groupingBy` –∑–∞ –ø–µ—Ä—à–∏–º —Å–∏–º–≤–æ–ª–æ–º.
> 2. `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä `mapping` –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç—å –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç-—Ä—è–¥–æ–∫ –Ω–∞ —Å–∞–º —Å–µ–±–µ (—â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ —Ä—è–¥–∫—ñ–≤ –¥–ª—è `joining`).
> 3. –î—Ä—É–≥–∏–π `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä `joining` –æ–±'—î–¥–Ω–∞—î —Ü—ñ —Ä—è–¥–∫–∏.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
List<String> names = List.of("Alice", "Anna", "Bob", "Bill", "Charlie");
Map<Character, String> namesByFirstLetter = names.stream()
    .collect(Collectors.groupingBy(
        s -> s.charAt(0),                   // 1. –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä: –ø–µ—Ä—à–∏–π —Å–∏–º–≤–æ–ª
        Collectors.mapping(                 // 2. Downstream-1: –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º–∞–ø–ø—ñ–Ω–≥
            name -> name,                   // (–ø—Ä–æ—Å—Ç–æ –∑–∞–ª–∏—à–∞—î–º–æ —è–∫ —î)
            Collectors.joining(", ")        // 3. Downstream-2: –æ–±'—î–¥–Ω–∞—Ç–∏
        )
    ));
    
System.out.println(namesByFirstLetter);
// {A=Alice, Anna, B=Bob, Bill, C=Charlie}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ —Ç—Ä–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ (`groupingBy`, `mapping`, `joining`) –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–æ—ó –∑–∞–¥–∞—á—ñ –∑ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–∏–ø –º–∞–ø–∏, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è `groupingBy` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞ `TreeMap`)? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞.** –î–ª—è —Ü—å–æ–≥–æ —ñ—Å–Ω—É—î —Ç—Ä–µ—Ç—è, –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è `groupingBy`, —è–∫–∞ –ø—Ä–∏–π–º–∞—î **–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –º–∞–ø–∏ (`mapFactory`)** —è–∫ –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç.
>
> `groupingBy(classifier, mapFactory, downstream)`
>
> * `mapFactory`: –¶–µ `Supplier`, —â–æ –Ω–∞–¥–∞—î –ø–æ—Ä–æ–∂–Ω—é –º–∞–ø—É –ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ —Ç–∏–ø—É, –≤ —è–∫—É –±—É–¥—É—Ç—å –∑–±–∏—Ä–∞—Ç–∏—Å—è –≥—Ä—É–ø–∏.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ª–æ–≤–∞ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é —ñ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏, —â–æ –∫–ª—é—á—ñ –≤ —Ä–µ–∑—É–ª—å—Ç—É—é—á—ñ–π –º–∞–ø—ñ (–¥–æ–≤–∂–∏–Ω–∏) –±—É–¥—É—Ç—å –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
Map<Integer, List<String>> sortedWordsByLength = words.stream()
    .collect(Collectors.groupingBy(
        String::length,        // –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
        TreeMap::new,          // –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ –º–∞–ø–∏ -> TreeMap
        Collectors.toList()    // Downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä (–∑–±–∏—Ä–∞—î–º–æ –≤ List)
    ));
```

–¢–µ–ø–µ—Ä –∫–ª—é—á—ñ –≤ `sortedWordsByLength` –±—É–¥—É—Ç—å –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ –∑–∞ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü–æ–≤–Ω–µ –∑–Ω–∞–Ω–Ω—è API `groupingBy` —Ç–∞ –≤–º—ñ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ –ª–æ–≥—ñ–∫—É –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è, –∞ –π –∫—ñ–Ω—Ü–µ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `groupingBy` —Ç–∞ `partitioningBy`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `partitioningBy` –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–ª—è–¥–∞—Ç–∏ —è–∫ **—Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫ `groupingBy`**.
>
> | **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞** | **`groupingBy`** | **`partitioningBy`** |
> | :--- | :--- | :--- |
> | **–ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä** | `Function<T, K>` | `Predicate<T>` |
> | **–¢–∏–ø –∫–ª—é—á–∞** | –ë—É–¥—å-—è–∫–∏–π —Ç–∏–ø `K` | –ó–∞–≤–∂–¥–∏ **`Boolean`** |
> | **–ö-—Å—Ç—å –≥—Ä—É–ø** | –ë—É–¥—å-—è–∫–∞ | –ó–∞–≤–∂–¥–∏ **–¥–≤—ñ**: `true` —ñ `false` |
> | **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞** | –Ø–∫—â–æ —è–∫–∞—Å—å –≥—Ä—É–ø–∞ –ø–æ—Ä–æ–∂–Ω—è, —ó—ó –∫–ª—é—á–∞ –Ω–µ –±—É–¥–µ –≤ –º–∞–ø—ñ. | –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞–ø—É –∑ **–æ–±–æ–º–∞ –∫–ª—é—á–∞–º–∏** (`true`, `false`), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –æ–¥–Ω–∞ –∑ –≥—Ä—É–ø –ø–æ—Ä–æ–∂–Ω—è. |
>
> **–ö–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
>
> * –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –¥–∞–Ω—ñ –Ω–∞ **–±—ñ–ª—å—à –Ω—ñ–∂ –¥–≤—ñ –≥—Ä—É–ø–∏** –∑–∞ —è–∫–∏–º–æ—Å—å –∫—Ä–∏—Ç–µ—Ä—ñ—î–º (–º—ñ—Å—Ç–æ, –∫–∞—Ç–µ–≥–æ—Ä—ñ—è) ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `groupingBy`.
> * –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –¥–∞–Ω—ñ **—Ä—ñ–≤–Ω–æ –Ω–∞ –¥–≤—ñ –≥—Ä—É–ø–∏** –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–º "–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —É–º–æ–≤—ñ" / "–Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —É–º–æ–≤—ñ" ‚Äî `partitioningBy` –±—É–¥–µ –±—ñ–ª—å—à —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º —Ç–∞, –º–æ–∂–ª–∏–≤–æ, —Ç—Ä–æ—Ö–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∑ `partitioningBy`:**

```java
// –†–æ–∑–¥—ñ–ª–∏—Ç–∏ —á–∏—Å–ª–∞ –Ω–∞ –ø–∞—Ä–Ω—ñ —Ç–∞ –Ω–µ–ø–∞—Ä–Ω—ñ
Map<Boolean, List<Integer>> partitions = numbers.stream()
    .collect(Collectors.partitioningBy(n -> n % 2 == 0));
// partitions.get(true) -> —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–Ω–∏—Ö
// partitions.get(false) -> —Å–ø–∏—Å–æ–∫ –Ω–µ–ø–∞—Ä–Ω–∏—Ö
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤. –†–æ–∑—É–º—ñ–Ω–Ω—è, —â–æ `partitioningBy` —î –æ–∫—Ä–µ–º–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `groupingBy` –∑ –±—É–ª–µ–≤–∏–º –∫–ª—é—á–µ–º.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —î `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö —É `groupingBy`? –ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `groupingBy` –¥—É–∂–µ –ø–æ—Ç—É–∂–Ω–æ –ø–æ—î–¥–Ω—É—î—Ç—å—Å—è –∑ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏, —â–æ –∑–±–∏—Ä–∞—é—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏.
>
> –î–ª—è —Ü—å–æ–≥–æ —ñ—Å–Ω—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –≤ –∫–ª–∞—Å—ñ `Collectors`, —è–∫—ñ –∑–∞–∑–≤–∏—á–∞–π –ø—Ä–∏–π–º–∞—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —á–∏—Å–ª–æ–≤–æ–≥–æ –ø–æ–ª—è.
>
> **–ü—Ä–∏–∫–ª–∞–¥:** –£ –Ω–∞—Å —î —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π `List<Transaction>`. –ú–∏ —Ö–æ—á–µ–º–æ –∑–Ω–∞–π—Ç–∏ **—Å—É–º—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º—ñ—Å—Ç–∞.
>
> ```java
> Map<String, Double> totalAmountByCity = transactions.stream()
>     .collect(Collectors.groupingBy(
>         Transaction::getCity,
>         Collectors.summingDouble(Transaction::getAmount) // Downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä
>     ));
> ```
>
> –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—ñ–±—Ä–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –æ–¥–Ω–æ—á–∞—Å–Ω–æ, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `summarizingInt/Long/Double`.
> **–ü—Ä–∏–∫–ª–∞–¥:** –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º—ñ—Å—Ç–∞ –∑–Ω–∞–π—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å, —Å—É–º—É, —Å–µ—Ä–µ–¥–Ω—î, min —Ç–∞ max —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π.
>
> ```java
> Map<String, DoubleSummaryStatistics> statsByCity = transactions.stream()
>     .collect(Collectors.groupingBy(
>         Transaction::getCity,
>         Collectors.summarizingDouble(Transaction::getAmount)
>     ));
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–í–º—ñ–Ω–Ω—è –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –∞–Ω–∞–ª—ñ—Ç–∏–∫—É –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó `groupingBy` —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤. –¶–µ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –∑–∞–¥–∞—á–∞ –≤ data-processing.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `groupingBy` "–≤—Ä—É—á–Ω—É" –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥—É `Map.computeIfAbsent`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `groupingBy` –ø—Ä–∞—Ü—é—î –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º. –ô–æ–≥–æ –ª–æ–≥—ñ–∫—É –º–æ–∂–Ω–∞ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–≤–∏—á–∞–π–Ω–æ–≥–æ —Ü–∏–∫–ª—É —Ç–∞ —Å—É—á–∞—Å–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ `Map`.
>
> –ú–µ—Ç–æ–¥ **`computeIfAbsent(K key, Function<K, V> mappingFunction)`** –ø—Ä–∞—Ü—é—î —Ç–∞–∫:
>
> 1. –í—ñ–Ω –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —ñ—Å–Ω—É—î –∫–ª—é—á `key` —É –º–∞–ø—ñ.
> 2. –Ø–∫—â–æ —Ç–∞–∫, –≤—ñ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î —ñ—Å–Ω—É—é—á–µ –∑–Ω–∞—á–µ–Ω–Ω—è.
> 3. –Ø–∫—â–æ –Ω—ñ, –≤—ñ–Ω **–≤–∏–∫–æ–Ω—É—î `mappingFunction`** –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è, **–¥–æ–¥–∞—î** —Ü—é –ø–∞—Ä—É (–∫–ª—é—á, –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è) –≤ –º–∞–ø—É —ñ **–ø–æ–≤–µ—Ä—Ç–∞—î** —Ü–µ –Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è.
>
> –¶–µ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.
>
> #### **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
>
> ```java
> public <T, K> Map<K, List<T>> groupByManual(List<T> list, Function<T, K> classifier) {
>     Map<K, List<T>> map = new HashMap<>();
>     for (T element : list) {
>         K key = classifier.apply(element);
>         // computeIfAbsent –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Å–ø–∏—Å–æ–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑.
>         List<T> group = map.computeIfAbsent(key, k -> new ArrayList<>());
>         group.add(element);
>     }
>     return map;
> }
> ```
>
> –¶–µ–π –∫–æ–¥ —Ä–æ–±–∏—Ç—å —Ç–µ –∂ —Å–∞–º–µ, —â–æ –π `stream().collect(groupingBy(...))`, –∞–ª–µ –≤ —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–º—É —Å—Ç–∏–ª—ñ. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —è–∫ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó `Stream API` –ø—Ä–∏—Ö–æ–≤—É—é—Ç—å —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ –∑–Ω–∞–Ω–Ω—è –Ω–µ —Ç—ñ–ª—å–∫–∏ `Stream API`, –∞ –π —Å—É—á–∞—Å–Ω–æ–≥–æ API –∫–ª–∞—Å—É `Map`. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –ø–æ–∫–∞–∑—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç —Ä–æ–∑—É–º—ñ—î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏, —è–∫—ñ –ª–µ–∂–∞—Ç—å –≤ –æ—Å–Ω–æ–≤—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.*

* * *
