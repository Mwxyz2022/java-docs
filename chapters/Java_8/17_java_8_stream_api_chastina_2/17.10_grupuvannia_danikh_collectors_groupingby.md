---
layout: default
title: "–ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: Collectors.groupingBy()"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 10
---

# –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: Collectors.groupingBy()

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Collectors.groupingBy()` ‚Äì —Ü–µ –∫–æ–ª–µ–∫—Ç–æ—Ä, —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—ñ–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É `Map`, –¥–µ –∫–ª—é—á ‚Äì —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä—É–ø—É–≤–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó (classifier), –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äì –∫–æ–ª–µ–∫—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –Ω–∞–ª–µ–∂–∞—Ç—å –¥–æ —Ü—ñ—î—ó –≥—Ä—É–ø–∏.




* –ø–æ–Ω—è—Ç—Ç—è: `Collectors.groupingBy()`, `classifier` (—Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è), `downstream collector` (–¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –≤ –≥—Ä—É–ø—ñ).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `words.stream().collect(Collectors.groupingBy(String::length))` (–≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é), `groupingBy(String::length, Collectors.counting())` (–ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É –≥—Ä—É–ø—ñ).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ü–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö. –ü—ñ–¥—Ç—Ä–∏–º—É—î –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∑ –∞–≥—Ä–µ–≥—É—é—á–∏–º–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`Collectors.groupingBy()`** ‚Äî —Ü–µ –º–µ—Ç–æ–¥ —ñ–∑ –ø–∞–∫–µ—Ç—É **`java.util.stream.Collectors`**, —è–∫–∏–π –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—ñ–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –º–∞–ø—É, –¥–µ –∫–ª—é—á ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥—Ä—É–ø—É–≤–∞–ª—å–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó, –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –∫–æ–ª–µ–∫—Ü—ñ—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –Ω–∞–ª–µ–∂–∞—Ç—å –¥–æ —Ü—ñ—î—ó –≥—Ä—É–ø–∏.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ —Å–æ—Ä—Ç—É–≤–∞—Ç–∏ —è–±–ª—É–∫–∞ –ø–æ –∫–æ–ª—å–æ—Ä—É: —á–µ—Ä–≤–æ–Ω—ñ –≤ –æ–¥–∏–Ω –∫–æ—à–∏–∫, –∑–µ–ª–µ–Ω—ñ ‚Äî –≤ —ñ–Ω—à–∏–π. –¢—ñ–ª—å–∫–∏ —Ç–∏ —Å–∞–º –≤–∏—Ä—ñ—à—É—î—à, —â–æ –±—É–¥–µ "–∫–æ–ª—å–æ—Ä–æ–º" (–∫–ª—é—á–µ–º): –≤—ñ–∫, —ñ–º‚Äô—è, –¥–æ–≤–∂–∏–Ω–∞ —Ä—è–¥–∫–∞, —Ç–æ—â–æ

---

## üìä **–°–∏–≥–Ω–∞—Ç—É—Ä–∏ `groupingBy()`:**

```java
// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –æ–±—Ä–æ–±–∫–∏
groupingBy(Function classifier)

// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑ –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
groupingBy(Function classifier, Collector downstream)

// –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑ —Ç–∏–ø–æ–º Map
groupingBy(Function classifier, Supplier mapFactory, Collector downstream)
```

üìå **–ü–æ–ø—É–ª—è—Ä–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∑ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏:**

* **`Collectors.counting()`** ‚Äî –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ
* **`Collectors.summingInt()`** ‚Äî —Å—É–º–∞ —á–∏—Å–ª–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å
* **`Collectors.averagingInt()`** ‚Äî —Å–µ—Ä–µ–¥–Ω—î
* **`Collectors.mapping()`** ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º
* **`Collectors.toList()`** ‚Äî –∑–±–∏—Ä–∞–Ω–Ω—è –≤ —Å–ø–∏—Å–æ–∫ (—Ç–∏–ø–æ–≤–æ)

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–ú–∞—î—à —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤? –ì—Ä—É–ø—É–π –∑–∞ –∫—É—Ä—Å–æ–º.

–ú–∞—î—à —Å–ø–∏—Å–æ–∫ —Å–ª—ñ–≤? –ì—Ä—É–ø—É–π –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é.

–ú–∞—î—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó? –ì—Ä—É–ø—É–π –∑–∞ —Ç–∏–ø–æ–º (–ø–æ–∫—É–ø–∫–∞, –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è) ‚Äî –∞ —â–µ –ø–æ—Ä–∞—Ö—É–π –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ\

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// üìå –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ –∑–∞ –¥–æ–≤–∂–∏–Ω–æ—é
List<String> words = List.of("cat", "mouse", "rat", "elephant");

Map<Integer, List<String>> byLength = words.stream()
    .collect(Collectors.groupingBy(String::length));
```

```java
// üî¢ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –≥—Ä—É–ø—ñ
Map<Integer, Long> countByLength = words.stream()
    .collect(Collectors.groupingBy(
        String::length,
        Collectors.counting()
    ));
```

```java
// üí∏ –°—É–º–∞ —á–∏—Å–µ–ª –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é
class Purchase {
    String category;
    int amount;
    // constructor, getters...
}

List<Purchase> purchases = ...;

Map<String, Integer> totalByCategory = purchases.stream()
    .collect(Collectors.groupingBy(
        Purchase::getCategory,
        Collectors.summingInt(Purchase::getAmount)
    ));
```

```java
// üéØ –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è: –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –ø—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
Map<String, Map<String, List<Purchase>>> grouped = purchases.stream()
    .collect(Collectors.groupingBy(
        Purchase::getCategory,
        Collectors.groupingBy(Purchase::getSubCategory)
    ));
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|               –ú–µ—Ç–æ–¥               |                –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                 |
|:---------------------------------:|:------------------------------------------:|
|           **`toMap()`**           |         –û–¥–∏–Ω –∫–ª—é—á ‚Äî –æ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è          |
|        **`groupingBy()`**         | –û–¥–∏–Ω –∫–ª—é—á ‚Äî —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω—å (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏) |
|  **`groupingBy() + counting()`**  |    –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ     |
| **`groupingBy() + summingInt()`** |        –°—É–º–∞ –∑–Ω–∞—á–µ–Ω—å —É –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ         |
|  **`groupingBy() + mapping()`**   |   –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω—å –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º    |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏–º `groupingBy()` –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `toMap()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

**`groupingBy()`** –∑–±–∏—Ä–∞—î –≤—Å—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –æ–¥–Ω–∞–∫–æ–≤–∏–º –∫–ª—é—á–µ–º —É —Å–ø–∏—Å–æ–∫, —Ç–æ–¥—ñ —è–∫ **`toMap()`** –æ—á—ñ–∫—É—î –ª–∏—à–µ –ø–æ –æ–¥–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—é –Ω–∞ –∫–ª—é—á (—ñ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫, —è–∫—â–æ –∫–ª—é—á –¥—É–±–ª—é—î—Ç—å—Å—è ‚Äî —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞—Ç–∏ merge-—Ñ—É–Ω–∫—Ü—ñ—é).

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏ –º–æ–∂–Ω–∞ –≤—ñ–¥—Ä–∞–∑—É –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å—É–º—É –∞–±–æ —Å–µ—Ä–µ–¥–Ω—î –ø—ñ–¥ —á–∞—Å –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–¢–∞–∫\! –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ **`summingInt(), averagingInt()`** –∞–±–æ **`reducing()`** —è–∫ downstream –∫–æ–ª–µ–∫—Ç–æ—Ä–∞.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—é —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –∑–Ω–∞—á–µ–Ω—å?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ö–æ–º–±—ñ–Ω—É–π **`groupingBy()`** –∑ **`mapping()`**:

```java
.collect(Collectors.groupingBy(
    Person::getDepartment,
    Collectors.mapping(Person::getName, Collectors.toList())
));
```

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Group --> List, Add a Collector --> Count or Sum"**

–∞–±–æ –≤ —Å—Ç–∏–ª—ñ –∫–æ–¥—É:  

**`groupingBy(key, howToGroup)`**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`groupingBy()`** ‚Äî –Ω–∞–π–∫—Ä–∞—â–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –∞–≥—Ä–µ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö —É —Å—Ç—Ä—ñ–º–∞—Ö.
* –ö–æ–º–±—ñ–Ω—É—î—Ç—å—Å—è –∑ **`counting(), summingInt(), mapping()`** –¥–ª—è –ø–æ—Ç—É–∂–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å.
* –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤–∫–ª–∞–¥–µ–Ω–µ (–±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ) –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.
* –ö–ª—é—á–æ–≤–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –∑–∞–¥–∞—á —É Java.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Official JavaDoc: Collectors.groupingBy**](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-)
