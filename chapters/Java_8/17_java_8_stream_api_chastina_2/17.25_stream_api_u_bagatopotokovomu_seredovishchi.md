---
layout: default
title: "Stream API —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 25
---

# Stream API —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: Stream API –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –¥–∞–Ω—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `parallelStream()` –∞–±–æ `stream().parallel()`,
  –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `ForkJoinPool.commonPool()`. –û–¥–Ω–∞–∫ —Å–∞–º —Å—Ç—Ä—ñ–º –Ω–µ —î `thread-safe`, —Ç–æ–º—É –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑—ñ
  `shared mutable state` –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ `race conditions`.
* –ø–æ–Ω—è—Ç—Ç—è: `parallelStream()`, `stream().parallel()`, `ForkJoinPool.commonPool()`, `race condition`,
  `shared mutable state`, `Collectors.toConcurrentMap()`.
* –ø—Ä–∏–∫–ª–∞–¥–∏: –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –∑–∞–ø–∏—Å —É `ArrayList` (–Ω–µ–±–µ–∑–ø–µ—á–Ω–æ), –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `ConcurrentHashMap` –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ
  –∑–±–æ—Ä—É.
* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å –Ω–µ –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à–µ (—î –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏). –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è. –í–∞–∂–ª–∏–≤–æ —É–Ω–∏–∫–∞—Ç–∏
  `shared mutable state` –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏.
* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ü—Ä–æ–±–ª–µ–º–∏ `thread-safety`, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `parallelStream()`.

#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

Stream API –≤ Java –¥–æ–∑–≤–æ–ª—è—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—ó –¥–∞–Ω–∏—Ö —É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É —Å—Ç–∏–ª—ñ. –£ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –º–æ–∂–Ω–∞
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`parallelStream()`** –∞–±–æ **`stream().parallel()`** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö —É –¥–µ–∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫–∞—Ö –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

Java Streams –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ, —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—á–∏ –æ–±—Ä–æ–±–∫—É –ø–æ –¥–µ–∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫–∞—Ö, –∞–ª–µ —Å–∞–º –ø–æ —Å–æ–±—ñ Stream *
*–Ω–µ —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º**. –Ø–∫—â–æ –≤–∏ –º–æ–¥–∏—Ñ—ñ–∫—É—î—Ç–µ –∑–∞–≥–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —á–∏ –æ–±'—î–∫—Ç–∏ ‚Äî –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –±–∞–≥–∏.
---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

üìä **–ö–ª—é—á–æ–≤—ñ –ø–æ–Ω—è—Ç—Ç—è:**

* **`parallelStream()`** ‚Äî —Å—Ç–≤–æ—Ä—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ —ñ–∑ –∫–æ–ª–µ–∫—Ü—ñ—ó.
* **`stream().parallel()`** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∑–≤–∏—á–∞–π–Ω–∏–π –ø–æ—Ç—ñ–∫ —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π.
* **`ForkJoinPool.commonPool()`** ‚Äî –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.
* **`System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism", "N")`** ‚Äî –∑–º—ñ–Ω–∞ —Ä—ñ–≤–Ω—è –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
* **`Collectors.toConcurrentMap()`** ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è toMap().
* **`ConcurrentHashMap, ConcurrentLinkedQueue`** ‚Äî –±–µ–∑–ø–µ—á–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º —Ä–æ–∑–¥—ñ–ª—è—î –≤–∞—à—É —Ä–æ–±–æ—Ç—É –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ —Ç–∞ –≤–∏–∫–æ–Ω—É—î —ó—Ö –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö —è–¥—Ä–∞—Ö –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞. –¶–µ **–º–æ–∂–µ
–ø—Ä–∏—à–≤–∏–¥—à–∏—Ç–∏
** –æ–±—Ä–æ–±–∫—É –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö. –ê–ª–µ —è–∫—â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑—ñ —Å–ø—ñ–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞—î—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–æ –æ–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É) ‚Äî –æ—Ç—Ä–∏–º—É—î—Ç–µ –≥–æ–Ω–∫–∏, —Ö–∞–æ—Å —ñ –±–∞–≥–∏. üé¢
---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// ‚ö†Ô∏è –ù–µ–±–µ–∑–ø–µ–∫–∞ –∑ –º—É—Ç–∞–±–µ–ª—å–Ω–∏–º —Å–ø—ñ–ª—å–Ω–∏–º –æ–±'—î–∫—Ç–æ–º
List<Integer> result = new ArrayList<>();
IntStream.range(0, 1000).parallel().forEach(i -> result.add(i)); // –Ω–µ thread-safe

// ‚úÖ –ü–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
List<Integer> safeResult = Collections.synchronizedList(new ArrayList<>());
IntStream.range(0, 1000).parallel().forEach(i -> safeResult.add(i));

// üîß –ó–º—ñ–Ω–∞ —Ä—ñ–≤–Ω—è –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É
System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism", "4");

// üîç –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ForkJoinPool –≤—Ä—É—á–Ω—É
ForkJoinPool customPool = new ForkJoinPool(4);
customPool.submit(() -> {
    IntStream.range(1, 100).parallel().forEach(System.out::println);
}).join();
```
---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|       –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å        |     –ó–≤–∏—á–∞–π–Ω–∏–π Stream      |      –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π Stream       |
|:------------------------:|:-------------------------:|:-----------------------------:|
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤** |           –û–¥–∏–Ω            |           –î–µ–∫—ñ–ª—å–∫–∞            |
|    **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**    | –°—Ç–∞–±—ñ–ª—å–Ω–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∞  | –ú–æ–∂–µ –±—É—Ç–∏ –∫—Ä–∞—â–æ—é (–∞–±–æ –≥—ñ—Ä—à–æ—é) |
|    **Thread-safety**     |        –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ        |       –ü–æ—Ç—Ä—ñ–±–Ω–∞ —É–≤–∞–≥–∞\!        |
|    **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è:**    | –ü—Ä–æ—Å—Ç–∏—Ö –∑–∞–¥–∞—á, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ–π |  –í–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å, –∞–≥—Ä–µ–≥–∞—Ü—ñ–π  |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ —î —Å—Ç—Ä—ñ–º–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º–∏?

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å**

–ù—ñ. –°–∞–º –ø–æ —Å–æ–±—ñ Stream API –Ω–µ —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º. –ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ–ø–µ—Ä–∞—Ü—ñ–π, —è–∫—ñ –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ. –ó–º—ñ–Ω–∏ —Å–ø—ñ–ª—å–Ω–æ–≥–æ
—Å—Ç–∞–Ω—É –ø—ñ–¥ —á–∞—Å **`parallelStream()`** –º–æ–∂—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏ race condition.

---

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è:**

–ö–æ–ª–∏ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`parallelStream()`**?

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å**

–ö–æ–ª–∏ —É –≤–∞—Å CPU-bound –∑–∞–¥–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫–ª–∞–¥–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è) —ñ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –æ–±—Å—è–≥–∞–º–∏ –¥–∞–Ω–∏—Ö, —â–æ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å
—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∞–±–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É.

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Parallel ‚Äî –ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é."**

–ó–∞–ø–∞–º‚Äô—è—Ç–∞–π: –ø–∞—Ä–∞–ª–µ–ª—å ‚Äî —Ü–µ —è–∫ –ª–æ–ø–∞—Ç–∞ –Ω–∞ –ø–æ–ª—ñ. –Ø–∫—â–æ –≤—Å—ñ –∫–æ–ø–∞—é—Ç—å –≤ –æ–¥–Ω—É —è–º—É ‚Äî —à–≤–∏–¥—à–µ, —è–∫—â–æ –∫–æ–ø–∞—é—Ç—å –æ–¥–Ω–µ –æ–¥–Ω–æ–≥–æ ‚Äî –ø—Ä–æ–±–ª–µ–º–∏.
---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

* **`parallelStream()`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–¥—ñ–ª—è—î —Ä–æ–±–æ—Ç—É –ø–æ –ø–æ—Ç–æ–∫–∞—Ö —á–µ—Ä–µ–∑ **`ForkJoinPool`**.
* –ü–æ—Ç—ñ–∫ –Ω–µ —î thread-safe. –û–±–µ—Ä–µ–∂–Ω–æ –∑ –º—É—Ç–∞–±–µ–ª—å–Ω–∏–º —Å–ø—ñ–ª—å–Ω–∏–º —Å—Ç–∞–Ω–æ–º\!
* –ü–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó —Ç–∞ Collector'–∏ ‚Äî –º–∞—Å—Ç-—Ö–µ–≤.
* –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å –Ω–µ –∑–∞–≤–∂–¥–∏ –æ–∑–Ω–∞—á–∞—î —à–≤–∏–¥—à–µ ‚Äî –ø—Ä–æ—Ñ—ñ–ª—é–π—Ç–µ\!
* –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–º–∞–≥–∞—î —Å–≤—ñ–¥–æ–º–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É.

---

**üîó –î–æ–¥–∞—Ç–∫–æ–≤–æ –ø–æ—á–∏—Ç–∞—Ç–∏:**

* [**Official Oracle Guide on Parallel Streams
  **](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Parallelism)
* [**ForkJoinPool Explained**](https://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)