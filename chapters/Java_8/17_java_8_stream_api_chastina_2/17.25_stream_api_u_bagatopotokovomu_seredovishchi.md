---
layout: default
title: "Stream API у багатопотоковому середовищі"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 25
---

# Stream API у багатопотоковому середовищі

*   короткий опис: Stream API може обробляти дані паралельно за допомогою `parallelStream()` або `stream().parallel()`, використовуючи `ForkJoinPool.commonPool()`. Однак сам стрім не є `thread-safe`, тому при роботі зі `shared mutable state` можуть виникнути `race conditions`.
*   поняття: `parallelStream()`, `stream().parallel()`, `ForkJoinPool.commonPool()`, `race condition`, `shared mutable state`, `Collectors.toConcurrentMap()`.
*   приклади: Паралельний запис у `ArrayList` (небезпечно), використання `ConcurrentHashMap` для безпечного паралельного збору.
*   ключові моменти: Паралельність не завжди швидше (є накладні витрати). Порядок обробки не гарантується. Важливо уникати `shared mutable state` або використовувати потокобезпечні колектори.
*   що важливо знати на співбесіді: Проблеми `thread-safety`, коли використовувати `parallelStream()`.
