---
layout: default
title: "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –¥–µ–±–∞–≥—ñ–Ω–≥"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 16
---

# –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –¥–µ–±–∞–≥—ñ–Ω–≥

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –û—Ü—ñ–Ω–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ Stream-–æ–ø–µ—Ä–∞—Ü—ñ–π (—á–∞—Å, –ø–∞–º'—è—Ç—å, –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å) —Ç–∞ –ø—Ä–æ—Ü–µ—Å –∞–Ω–∞–ª—ñ–∑—É —Ä–æ–±–æ—Ç–∏ —Å—Ç—Ä—ñ–º—É –¥–ª—è
  –ø–æ—à—É–∫—É –ø–æ–º–∏–ª–æ–∫ –∞–±–æ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π.

* –ø–æ–Ω—è—Ç—Ç—è: –ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏, `autoboxing`, `peek()` (–¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É), –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∏ (`JVisualVM`, `JFR`).

* –ø—Ä–∏–∫–ª–∞–¥–∏: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `peek()` –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å—Ç—Ä—ñ–º—ñ–≤ —Ç–∞ —Ü–∏–∫–ª—ñ–≤.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –°—Ç—Ä—ñ–º–∏ –Ω–µ –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à—ñ –∑–∞ —Ü–∏–∫–ª–∏. `peek()` –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É, –∞ –Ω–µ –¥–ª—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –í–∞–∂–ª–∏–≤–æ
  —É–Ω–∏–∫–∞—Ç–∏ `autoboxing` —Ç–∞ `shared mutable state`.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†–æ–∑—É–º—ñ–Ω–Ω—è –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç Stream API, —è–∫ –¥–µ–±–∞–∂–∏—Ç–∏ —Å—Ç—Ä—ñ–º–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —É –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ Stream API ‚Äî —Ü–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º-–æ–ø–µ—Ä–∞—Ü—ñ–π (—á–∞—Å, –ø–∞–º º—è—Ç—å,
–ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å). –î–µ–±–∞–≥—ñ–Ω–≥ ‚Äî –ø—Ä–æ—Ü–µ—Å –∞–Ω–∞–ª—ñ–∑—É —Ä–æ–±–æ—Ç–∏ —Å—Ç—Ä—ñ–º—É –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–ª—è –ø–æ—à—É–∫—É –ø–æ–º–∏–ª–æ–∫ –∞–±–æ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–°—Ç—Ä—ñ–º–∏ ‚Äî –ø–æ—Ç—É–∂–Ω—ñ, –∞–ª–µ —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –∞–±–∏—è–∫, –º–æ–∂–Ω–∞ "—Å–ø–∞–ª–∏—Ç–∏ –¥–≤–∏–≥—É–Ω". –ê —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Å–∞–º–µ –≥–∞–ª—å–º—É—î ‚Äî —Ç—Ä–µ–±–∞ –¥–µ–±–∞–∂–∏—Ç–∏ (—Ç–æ–±—Ç–æ "–∑–∞–∑–∏—Ä–Ω—É—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—É —Å—Ç—Ä—ñ–º—É")

---

## üìä **–©–æ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:**

* **–ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏** –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –ª–∞–Ω—Ü—é–∂–∫–∏ —Å—Ç—Ä—ñ–º—ñ–≤.
* **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–± º—î–∫—Ç—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤** (–∞–≤—Ç–æ-–±–æ–∫—Å–∏–Ω–≥).
* **–ü—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó** —Ç–∏–ø—É **`sorted()`** –∞–±–æ **`distinct()`** ‚Äî –¥—É–∂–µ —Ä–µ—Å—É—Ä—Å–æ–º—ñ—Å—Ç–∫—ñ.
* **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏** ‚Äî –Ω–µ –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à–µ\!
* **–ó–∞–π–≤—ñ map/filter** –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ.

üìä **–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:**

* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—ñ–≤ —É **–≥–∞—Ä—è—á–∏—Ö —Ü–∏–∫–ª–∞—Ö** –∞–±–æ **–º–∞–ª–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ—è—Ö**.
* –í–∏–∫–ª–∏–∫ **`.stream()`** —É –∫–æ–∂–Ω—ñ–π —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
* –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –æ–± º—î–∫—Ç—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó **`map()`**.

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

**–¶–∏–∫–ª** ‚Äî —Ü–µ —è–∫ –¥–æ—Ä–æ–≥–∞ –±–µ–∑ —Å–≤—ñ—Ç–ª–æ—Ñ–æ—Ä—ñ–≤: –ø—Ä–æ—Å—Ç–æ —ó–¥–µ—à.  
**–°—Ç—Ä—ñ–º** ‚Äî —Ü–µ —è–∫ –¥–æ—Ä–æ–≥–∞ –∑ —Ä–æ–∑–≤‚Äô—è–∑–∫–∞–º–∏: –≥–Ω—É—á–∫–∞, –∞–ª–µ –∫–æ–∂–µ–Ω –ø–æ–≤–æ—Ä–æ—Ç –¥–æ–¥–∞—î –∑–∞—Ç—Ä–∏–º–∫—É.  
**–¢–æ–º—É**:

* –î–ª—è **–ø—Ä–æ—Å—Ç–∏—Ö –∑–∞–¥–∞—á ‚Äî —Ü–∏–∫–ª** –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–π.
* –î–ª—è **—Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—Ä–æ–±–æ–∫ –∑ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—î—é ‚Äî —Å—Ç—Ä—ñ–º–∏** –∑—Ä—É—á–Ω—ñ—à—ñ —Ç–∞ —á–∏—Å—Ç—ñ—à—ñ, –∞–ª–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–º–∏.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –ø–æ–≤—ñ–ª—å–Ω–æ: –±–∞–≥–∞—Ç–æ map(), boxing
List<String> names = list.stream()
    .map(String::toUpperCase)
    .map(s -> s + "!")
    .collect(Collectors.toList());
```

```java
// –®–≤–∏–¥—à–µ -- –º–µ–Ω—à–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—å
List<String> names = new ArrayList<>();
for (String s : list) {
    names.add(s.toUpperCase() + "!");
}
```

```java
// –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º –Ω–µ –∑–∞–≤–∂–¥–∏ –≤–∏–≥—ñ–¥–Ω–∏–π
list.parallelStream()
    .map(MyService::process)
    .collect(Collectors.toList()); // –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ —á–µ—Ä–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|        –ü–∞—Ä–∞–º–µ—Ç—Ä         |            Stream API            |           –¶–∏–∫–ª–∏           |
|:-----------------------:|:--------------------------------:|:-------------------------:|
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤** |  –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫–∞—Ö   |     –®–≤–∏–¥—à–∏–π –Ω–∞ –º–∞–ª–∏—Ö      |
|    **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å**    | –í–∏—â–∞ –ø—Ä–∏ —Å–∫–ª–∞–¥–Ω–∏—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è—Ö |   –ö—Ä–∞—â–µ –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –¥—ñ–π   |
|   **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**    |  –ú–æ–∂–µ –±—É—Ç–∏ –Ω–∏–∂—á–æ—é —á–µ—Ä–µ–∑ –æ–± º—î–∫—Ç–∏  |        –ß–∞—Å—Ç–æ –≤–∏—â–∞         |
|    **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å**    |  –Ñ —á–µ—Ä–µ–∑ **`parallelStream()`**  | –ü–æ—Ç—Ä—ñ–±–Ω–∞ —Ä—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è |
|      **–î–µ–±–∞–≥—ñ–Ω–≥**       |            –°–∫–ª–∞–¥–Ω—ñ—à–∏–π            |     –ü—Ä—è–º–∏–π —ñ –ø—Ä–æ—Å—Ç–∏–π      |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

‚Äú–°—Ç—Ä—ñ–º ‚Äî —è–∫ –º–µ—Ç—Ä–æ: —à–≤–∏–¥–∫–æ, –∫–æ–ª–∏ –ø–æ—ó–∑–¥ –ø—Ä—è–º–∏–π. –ü–æ–≤—ñ–ª—å–Ω–æ, –∫–æ–ª–∏ –±–∞–≥–∞—Ç–æ –ø–µ—Ä–µ—Å–∞–¥–æ–∫.‚Äù

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –ù–µ –≤—Å–µ, —â–æ "—Å—Ç—Ä—ñ–º", –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —à–≤–∏–¥–∫–µ.
* –£ –ø—Ä–æ—Å—Ç–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–∏–∫–ª–∏.
* –î–µ–±–∞–≥ —Å—Ç—Ä—ñ–º—É ‚Äî —á–µ—Ä–µ–∑ **`peek()`** –∞–±–æ –ª–æ–≥–µ—Ä–∏.
* –ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è ‚Äî must-have –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –∫–æ–¥—É.
* –û–ø—Ç–∏–º—ñ–∑—É–π: –º–µ–Ω—à–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤, –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—å –∑ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—é.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Java Profiling Tools: JFR, VisualVM**](https://docs.oracle.com/en/java/javase/17/jfapi/index.html)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –∑–∞–≤–∂–¥–∏ `Stream API` —î –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–º, –Ω—ñ–∂ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ —Ü–∏–∫–ª–∏ `for`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ù—ñ, –Ω–µ –∑–∞–≤–∂–¥–∏.** –¶–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–æ–≤–∞ –¥—É–º–∫–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É.
>
> **–ö–æ–ª–∏ —Ü–∏–∫–ª–∏ `for` –∑–∞–∑–≤–∏—á–∞–π —à–≤–∏–¥—à—ñ:**
>
> * **–ú–∞–ª—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó:** –î–ª—è –Ω–µ–≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (–¥–µ—Å—è—Ç–∫–∏, —Å–æ—Ç–Ω—ñ) –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Ç–æ–∫—É, –ª—è–º–±–¥–∞-–æ–±'—î–∫—Ç—ñ–≤ —Ç–∞ –ø–æ–±—É–¥–æ–≤—É –ª–∞–Ω—Ü—é–∂–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ –≤–∏–≥–æ–¥—É. –ü—Ä–æ—Å—Ç–∏–π `for-each` —Ü–∏–∫–ª –±—É–¥–µ —à–≤–∏–¥—à–∏–º.
> * **–ü—Ä–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –º–∞—Å–∏–≤–∞–º–∏ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤:** –†—É–∫–æ–ø–∏—Å–Ω–∏–π —Ü–∏–∫–ª `for` –∑ —ñ–Ω–¥–µ–∫—Å–∞–º–∏ –¥–ª—è `int[]` –±—É–¥–µ –Ω–∞–π—à–≤–∏–¥—à–∏–º, –æ—Å–∫—ñ–ª—å–∫–∏ —É–Ω–∏–∫–∞—î –±—É–¥—å-—è–∫–∏—Ö –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.
>
> **–ö–æ–ª–∏ `Stream API` –º–æ–∂–µ –±—É—Ç–∏ —à–≤–∏–¥—à–∏–º –∞–±–æ —Ç–∞–∫–∏–º —Å–∞–º–∏–º:**
>
> * **–í–µ–ª–∏–∫—ñ –æ–±—Å—è–≥–∏ –¥–∞–Ω–∏—Ö:** –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ —Å—Ç–∞—é—Ç—å –Ω–µ–∑–Ω–∞—á–Ω–∏–º–∏.
> * **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞:** `parallelStream()` –º–æ–∂–µ –Ω–∞ –ø–æ—Ä—è–¥–∫–∏ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –Ω–∞ –±–∞–≥–∞—Ç–æ—è–¥–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞—Ö, —â–æ –¥—É–∂–µ —Å–∫–ª–∞–¥–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É.
> * **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞:** –î–ª—è "–≥–∞—Ä—è—á–æ–≥–æ" –∫–æ–¥—É JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ –¥—É–∂–µ –∞–≥—Ä–µ—Å–∏–≤–Ω–æ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–∫–∏ —Å—Ç—Ä—ñ–º—ñ–≤, —ñ–Ω–æ–¥—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—á–∏ —ó—Ö –Ω–∞ –∫–æ–¥, –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∏–π —Ü–∏–∫–ª—É `for`.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –¥–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥—ñ–ª—è–Ω–æ–∫ –∫–æ–¥—É —Å–ª—ñ–¥ –æ–±–∏—Ä–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±–µ–Ω—á–º–∞—Ä–∫—ñ–≤. –£ –±—ñ–ª—å—à–æ—Å—Ç—ñ —ñ–Ω—à–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –ø–µ—Ä–µ–≤–∞–≥–∏ `Stream API` –≤ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–≤–∞–∂–∞—é—Ç—å –Ω–µ–≤–µ–ª–∏–∫—ñ –º–æ–∂–ª–∏–≤—ñ –≤—Ç—Ä–∞—Ç–∏ –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

**–¶–∏–∫–ª `for`** ‚Äî —Ü–µ —è–∫ —ó—Ö–∞—Ç–∏ –Ω–∞ —Ä–æ–±–æ—Ç—É –Ω–∞ –≤–ª–∞—Å–Ω–æ–º—É –∞–≤—Ç–æ. –Ø–∫—â–æ —ó—Ö–∞—Ç–∏ –Ω–µ–¥–∞–ª–µ–∫–æ, —Ü–µ —à–≤–∏–¥–∫–æ —ñ –ø—Ä–æ—Å—Ç–æ.
**`Stream API`** ‚Äî —Ü–µ —è–∫ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —Å–∏—Å—Ç–µ–º–æ—é –≥—Ä–æ–º–∞–¥—Å—å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É –∑ –ø–µ—Ä–µ—Å–∞–¥–∫–∞–º–∏. –î–ª—è –∫–æ—Ä–æ—Ç–∫–æ—ó –ø–æ—ó–∑–¥–∫–∏ —Ü–µ –¥–æ–≤—à–µ —ñ —Å–∫–ª–∞–¥–Ω—ñ—à–µ, –∞–ª–µ –¥–ª—è –¥–æ–≤–≥–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É —á–µ—Ä–µ–∑ —É—Å–µ –º—ñ—Å—Ç–æ (—Å–∫–ª–∞–¥–Ω–∞ –æ–±—Ä–æ–±–∫–∞) –∑ –≤–∏–¥—ñ–ª–µ–Ω–∏–º–∏ —Å–º—É–≥–∞–º–∏ (–ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º) ‚Äî —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–Ω–∞—á–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–≥–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –Ω–µ —ñ—Å–Ω—É—î "—Å—Ä—ñ–±–Ω–æ—ó –∫—É–ª—ñ". –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–º–ø—Ä–æ–º—ñ—Å–∏ –º—ñ–∂ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—é, –∞ –Ω–µ —Å–ª—ñ–ø–æ —Å–ª—ñ–¥—É–≤–∞—Ç–∏ –æ–¥–Ω–æ–º—É –ø—ñ–¥—Ö–æ–¥—É.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –º–æ–∂–Ω–∞ "–∑–∞–∑–∏—Ä–Ω—É—Ç–∏" –≤—Å–µ—Ä–µ–¥–∏–Ω—É –ø–æ—Ç–æ–∫—É –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (–¥–µ–±–∞–≥—ñ–Ω–≥—É), –Ω–µ –ø–µ—Ä–µ—Ä–∏–≤–∞—é—á–∏ –ª–∞–Ω—Ü—é–∂–æ–∫?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è —Ü—å–æ–≥–æ —ñ—Å–Ω—É—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è **`peek(Consumer<T> action)`**.
>
> **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** `peek` —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —Å–∞–º–µ –¥–ª—è **–Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è**. –í—ñ–Ω –ø—Ä–∏–π–º–∞—î `Consumer` —ñ –≤–∏–∫–æ–Ω—É—î –π–æ–≥–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ü—é —Ç–æ—á–∫—É –≤ –ø–æ—Ç–æ—Ü—ñ. –ü—Ä–∏ —Ü—å–æ–º—É `peek` **–Ω–µ –∑–º—ñ–Ω—é—î** —Å–∞–º –µ–ª–µ–º–µ–Ω—Ç —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –π–æ–≥–æ –¥–∞–ª—ñ –ø–æ –ª–∞–Ω—Ü—é–∂–∫—É.
>
> –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–≤–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –∞–±–æ –ª–æ–≥ –ø—Ä–æ–º—ñ–∂–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –µ—Ç–∞–ø–∞—Ö –æ–±—Ä–æ–±–∫–∏, —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω–≤–µ—î—Ä–∞.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
import java.util.List;
import java.util.stream.Collectors;

public class PeekDemo {
    public static void main(String[] args) {
        List<String> names = List.of("Alice", "bob", "CHARLIE");
        
        List<String> result = names.stream()
            .map(s -> s.trim())
            .peek(s -> System.out.println("After trim: " + s))
            .map(String::toUpperCase)
            .peek(s -> System.out.println("After toUpperCase: " + s))
            .filter(s -> s.startsWith("A"))
            .peek(s -> System.out.println("After filter: " + s))
            .collect(Collectors.toList());
            
        System.out.println("Final result: " + result);
    }
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è `Stream API`. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏ –ø—Ä–æ `peek` —Ç–∞ –π–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ –æ—Å–Ω–æ–≤–Ω—ñ "–ø–∞—Å—Ç–∫–∏" –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —ñ—Å–Ω—É—é—Ç—å —É Stream API?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ü—Å–Ω—É—î –∫—ñ–ª—å–∫–∞ –ø–æ—à–∏—Ä–µ–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫, —è–∫—ñ –º–æ–∂—É—Ç—å –∑–Ω–∞—á–Ω–æ –ø–æ–≥—ñ—Ä—à–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ–¥—É –∑—ñ —Å—Ç—Ä—ñ–º–∞–º–∏:
>
> 1. **–ù–∞–¥–º—ñ—Ä–Ω–∏–π Boxing/Unboxing:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `Stream<Integer>` –∑–∞–º—ñ—Å—Ç—å `IntStream` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏. –¶–µ —Å—Ç–≤–æ—Ä—é—î –≤–µ–ª–∏—á–µ–∑–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–π–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ —ñ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É—î GC.
>
> 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π:** –í–∏–∫–æ–Ω–∞–Ω–Ω—è "–¥–æ—Ä–æ–≥–∏—Ö" –æ–ø–µ—Ä–∞—Ü—ñ–π, —è–∫-–æ—Ç `map`, **–ø–µ—Ä–µ–¥** "–¥–µ—à–µ–≤–∏–º–∏" —Ñ—ñ–ª—å—Ç—Ä—É—é—á–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏, —è–∫-–æ—Ç `filter`. –ó–∞–≤–∂–¥–∏ —Å–ª—ñ–¥ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ.
>
> 3. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Stateful-–æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö:** –û–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫-–æ—Ç `sorted()` —Ç–∞ `distinct()`, –≤–∏–º–∞–≥–∞—é—Ç—å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—ó –≤—Å—ñ—Ö –∞–±–æ –±–∞–≥–∞—Ç—å–æ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤–∏—Å–æ–∫–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —ñ –Ω–∞–≤—ñ—Ç—å `OutOfMemoryError`.
>
> 4. **–ù–µ–æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `parallelStream()`:** –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É –Ω–∞ –º–∞–ª–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ—è—Ö, "–¥–µ—à–µ–≤–∏—Ö" –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö –∞–±–æ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö, —â–æ –ø–æ–≥–∞–Ω–æ —Ä–æ–∑—â–µ–ø–ª—é—é—Ç—å—Å—è (—è–∫ `LinkedList`), –º–æ–∂–µ —Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏, –∞ –Ω–µ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –∫–æ–¥.
>
> 5. **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö:** –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Å–ø—ñ–ª—å–Ω–∏—Ö –º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π (–Ω–∞–ø—Ä., `ArrayList`) —É `forEach` –Ω–∞ `parallelStream` –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ "—É–º–æ–≤ –≥–æ–Ω–∏—Ç–≤–∏".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–æ—Å–≤—ñ–¥ —Ç–∞ –≤–º—ñ–Ω–Ω—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ –ø–æ—à–∏—Ä–µ–Ω—ñ –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–∏. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —è–∫–∏—Ö –ø–æ–º–∏–ª–æ–∫ —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥—É.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `parallelStream()` –Ω–µ –∑–∞–≤–∂–¥–∏ –ø—Ä–∏—Å–∫–æ—Ä—é—î –æ–±—Ä–æ–±–∫—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–æ–º—É —â–æ —Å–∞–º –ø–æ —Å–æ–±—ñ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º –º–∞—î **–Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ (overhead)**, —è–∫—ñ –º–æ–∂—É—Ç—å "–∑'—ó—Å—Ç–∏" –≤—Å—é –≤–∏–≥–æ–¥—É.
>
> **–¶—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—å:**
>
> * **–†–æ–∑–±–∏—Ç—Ç—è (Splitting):** –ß–∞—Å, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –¥–ª—è —Ä–æ–∑–±–∏—Ç—Ç—è –¥–∂–µ—Ä–µ–ª–∞ –¥–∞–Ω–∏—Ö –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.
> * **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏:** –í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏ —É `ForkJoinPool`.
> * **–û–±'—î–¥–Ω–∞–Ω–Ω—è (Combining):** –ß–∞—Å –Ω–∞ –∑–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –∑ —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –≤ –æ–¥–∏–Ω —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
>
> `parallelStream` –±—É–¥–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ **—á–∞—Å, –∑–∞–æ—â–∞–¥–∂–µ–Ω–∏–π –Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω–Ω—è—Ö, –±—É–¥–µ –±—ñ–ª—å—à–∏–º –∑–∞ —Ü—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏.**
>
> –¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞–∑–≤–∏—á–∞–π –ª–∏—à–µ –¥–ª—è:
>
> * –í–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö.
> * "–î–æ—Ä–æ–≥–∏—Ö", –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞–¥ –∫–æ–∂–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º –Ω–µ —î –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–º. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –º–∏—Å–ª–∏—Ç–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Å—Ç–∞–≤–∏—Ç–∏ —Ç–æ—á–∫–∏ –∑—É–ø–∏–Ω—É (breakpoints) –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—ñ–≤ –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Å—É—á–∞—Å–Ω—ñ IDE (IntelliJ IDEA, Eclipse) —á—É–¥–æ–≤–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å** —Ç–æ—á–∫–∏ –∑—É–ø–∏–Ω—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—ñ–≤.
>
> –í–∏ –º–æ–∂–µ—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ breakpoint –Ω–∞ —Ä—è–¥–∫—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∏, —ñ –¥–µ–±–∞–≥–µ—Ä –∑—É–ø–∏–Ω–∏—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∞–º–µ –≤ —Ü–µ–π –º–æ–º–µ–Ω—Ç, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –≤–∞–º —ñ–Ω—Å–ø–µ–∫—Ç—É–≤–∞—Ç–∏ —Å—Ç–∞–Ω –ª–æ–∫–∞–ª—å–Ω–∏—Ö —Ç–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.
>
> **–û–¥–Ω–∞–∫ —î –Ω—é–∞–Ω—Å–∏:**
>
> * –î–ª—è –æ–¥–Ω–æ—Ä—è–¥–∫–æ–≤–∏—Ö –ª—è–º–±–¥ (–±–µ–∑ `{}`) –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–∑—Ä—É—á–Ω–æ —Å—Ç–∞–≤–∏—Ç–∏ breakpoint. –ö—Ä–∞—â–µ —Ç–∏–º—á–∞—Å–æ–≤–æ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –ª—è–º–±–¥—É –≤ –ø–æ–≤–Ω–∏–π –±–ª–æ–∫.
>   * `s -> s.toUpperCase()` -> `s -> { return s.toUpperCase(); }`
> * –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —î –∑–Ω–∞—á–Ω–æ —Å–∫–ª–∞–¥–Ω—ñ—à–∏–º, –æ—Å–∫—ñ–ª—å–∫–∏ –¥–µ–±–∞–≥–µ—Ä –±—É–¥–µ –ø–µ—Ä–µ–º–∏–∫–∞—Ç–∏—Å—è –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–æ–∂–µ –±—É—Ç–∏ –∑—Ä—É—á–Ω—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `peek` –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º ID –ø–æ—Ç–æ–∫—É (`Thread.currentThread().getId()`).
>
> –í —Ü—ñ–ª–æ–º—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–µ–±–∞–≥–µ—Ä–∞ —î –ø–æ—Ç—É–∂–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É —Å—Ç—Ä—ñ–º—ñ–≤, –∞–ª–µ —ñ–Ω–æ–¥—ñ `peek` –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—à–∏–º —ñ —à–≤–∏–¥—à–∏–º –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫—É –¥–∞–Ω–∏—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–µ–±–∞–≥—ñ–Ω–≥—É –¥–æ–±—Ä–µ –ø—Ä–∞—Ü—é—é—Ç—å —ñ –∑ —Å—É—á–∞—Å–Ω–∏–º –∫–æ–¥–æ–º.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `peek()` –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∞–±–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> * **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:** –Ø–∫—â–æ `peek` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ª–∏—à–µ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è), –≤—ñ–Ω **–Ω–µ –ø–æ–≤–∏–Ω–µ–Ω** –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∞–±–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ê–ª–µ —è–∫—â–æ –≤ `peek` –¥–æ–¥–∞—Ç–∏ **–ø–æ–±—ñ—á–Ω–∏–π –µ—Ñ–µ–∫—Ç** (–∑–º—ñ–Ω—É —Å—Ç–∞–Ω—É –æ–±'—î–∫—Ç–∞), —Ç–æ –≤—ñ–Ω **–∑–º—ñ–Ω–∏—Ç—å** —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —â–æ —î –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º.
>
> * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** **–¢–∞–∫, `peek` –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.**
>   * –°–∞–º –≤–∏–∫–ª–∏–∫ `peek` —Ç–∞ `Consumer` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –Ω—å–æ–≥–æ –¥–æ–¥–∞—î –Ω–µ–≤–µ–ª–∏–∫—ñ, –∞–ª–µ —Ä–µ–∞–ª—å–Ω—ñ –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏.
>   * –©–æ –±—ñ–ª—å—à –≤–∞–∂–ª–∏–≤–æ, **`peek` –º–æ–∂–µ –∑–∞–≤–∞–¥–∏—Ç–∏ –¥–µ—è–∫–∏–º –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è–º JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, JIT –º–æ–∂–µ –±–∞—á–∏—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫ `map->filter` —ñ —Å–∏–ª—å–Ω–æ –π–æ–≥–æ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ ("—Å–ø–ª–∞–≤–∏—Ç–∏"). –î–æ–¥–∞–≤–∞–Ω–Ω—è `peek` –º–æ–∂–µ –∑–ª–∞–º–∞—Ç–∏ —Ü–µ–π –ø–∞—Ç–µ—Ä–Ω —ñ –∑–º—É—Å–∏—Ç–∏ JIT –±—É—Ç–∏ –º–µ–Ω—à –∞–≥—Ä–µ—Å–∏–≤–Ω–∏–º –≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** `peek()` ‚Äî —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **–Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è**, —è–∫–∏–π —Å–ª—ñ–¥ **–≤–∏–¥–∞–ª—è—Ç–∏ –∑ –≤–∏—Ä–æ–±–Ω–∏—á–æ–≥–æ –∫–æ–¥—É**.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –Ω–∞–≤—ñ—Ç—å "–Ω–µ—à–∫—ñ–¥–ª–∏–≤—ñ" –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –º–∞—Ç–∏ –≤–ø–ª–∏–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –∑–∞–≤–∞–∂–∞—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä—É.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑—ñ —Å–∫–ª–∞–¥–Ω–∏–º –ª–∞–Ω—Ü—é–∂–∫–æ–º —Å—Ç—Ä—ñ–º—É, —ñ –≤–∞–º –≤–∞–∂–∫–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, –Ω–∞ —è–∫–æ–º—É –µ—Ç–∞–ø—ñ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤—É—é—Ç—å—Å—è –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤–∞–º –¥–∞–Ω—ñ. –Ø–∫ –±–∏ –≤–∏ –ø—ñ–¥—ñ–π—à–ª–∏ –¥–æ –¥–µ–±–∞–≥—ñ–Ω–≥—É? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∫–ª–∞—Å–∏—á–Ω–∞ –∑–∞–¥–∞—á–∞, —ñ —î –∫—ñ–ª—å–∫–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤.
>
> 1. **"–†–æ–∑–±–∏—Ç—Ç—è" –ª–∞–Ω—Ü—é–∂–∫–∞ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏:**
>     –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Ç–∞ –Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± ‚Äî —Ç–∏–º—á–∞—Å–æ–≤–æ —Ä–æ–∑–±–∏—Ç–∏ –æ–¥–∏–Ω –¥–æ–≤–≥–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫ –Ω–∞ –∫—ñ–ª—å–∫–∞ –º–µ–Ω—à–∏—Ö, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–æ–º—ñ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ.
>
>     ```java
>     // –ë—É–ª–æ: stream().filter(..).map(..).filter(..).collect(..);
>
>     // –°—Ç–∞–ª–æ (–¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É):
>     Stream<T> s1 = stream().filter(...);
>     Stream<T> s2 = s1.map(...);
>     Stream<T> s3 = s2.filter(...);
>     // –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ breakpoint –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É —ñ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å –≤–º—ñ—Å—Ç –ø–æ—Ç–æ–∫—É.
>     // IDE –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Ç–æ–∫—É –≤ –¥–µ–±–∞–≥–µ—Ä—ñ.
>     ```
>
> 2. **–°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `peek()`:**
>     –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± —Ä–æ–∑–±–∏–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–æ–∫, –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ `.peek()` –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –ø—Ä–æ–º—ñ–∂–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ–± –≤–∏–≤–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å —Å—Ç–∞–Ω –µ–ª–µ–º–µ–Ω—Ç–∞.
>
>     ```java
>     .filter(user -> user.isActive())
>     .peek(u -> System.out.println("After first filter: " + u))
>     .filter(user -> user.getAge() > 18)
>     .peek(u -> System.out.println("After second filter: " + u))
>     ```
>
> –ü–µ—Ä—à–∏–π –ø—ñ–¥—Ö—ñ–¥ —î –∫—Ä–∞—â–∏–º –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ –¥–µ–±–∞–≥–µ—Ä–æ–º, –¥—Ä—É–≥–∏–π ‚Äî –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –ø–æ—Ç–æ–∫—É –¥–∞–Ω–∏—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–æ–≥–æ –∫–æ–¥—É.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–º —á–∏–Ω–æ–º `stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫-–æ—Ç `sorted()` —Ç–∞ `distinct()`, –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `Stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—ó —î –æ–¥–Ω–∏–º–∏ –∑ –Ω–∞–π–¥–æ—Ä–æ–∂—á–∏—Ö —É `Stream API`.
>
> **–ü—Ä–∏—á–∏–Ω–∏:**
>
> 1. **–ü–æ—Ç—Ä–µ–±–∞ –≤ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—ó:** –á–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–Ω–∞–∫–æ–ø–∏—á—É–≤–∞—Ç–∏ —Å—Ç–∞–Ω**.
>     * **`sorted()`**: –º—É—Å–∏—Ç—å –∑—ñ–±—Ä–∞—Ç–∏ **–≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏** –ø–æ—Ç–æ–∫—É –≤ –±—É—Ñ–µ—Ä, —â–æ–± —ó—Ö –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏.
>     * **`distinct()`**: –º—É—Å–∏—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ `HashSet` **–≤—Å—ñ—Ö —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤**, —è–∫—ñ –≤–∂–µ –±–∞—á–∏–ª–∞.
>
> 2. **–°–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ:** –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –∑–Ω–∞—á–Ω–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —ñ –Ω–∞–≤—ñ—Ç—å –¥–æ `OutOfMemoryError`.
>
> 3. **–í–ø–ª–∏–≤ –Ω–∞ –ª—ñ–Ω–∏–≤—ñ—Å—Ç—å —Ç–∞ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º:**
>     * `sorted()` –ø–æ–≤–Ω—ñ—Å—Ç—é "–ª–∞–º–∞—î" –ª—ñ–Ω–∏–≤–∏–π –ø–æ—Ç—ñ–∫ –ø–æ –µ–ª–µ–º–µ–Ω—Ç–∞—Ö ‚Äî –≤–æ–Ω–∞ –Ω–µ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∂–æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, –ø–æ–∫–∏ –Ω–µ –ø–æ–±–∞—á–∏—Ç—å —ó—Ö —É—Å—ñ.
>     * –£ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö `distinct()` –≤–∏–º–∞–≥–∞—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É, —â–æ –º–æ–∂–µ –Ω—ñ–≤–µ–ª—é–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `sorted()` —Ç–∞ `distinct()` –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é, –æ—Å–æ–±–ª–∏–≤–æ –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –∞–±–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è, —â–æ —Ä—ñ–∑–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–∞—é—Ç—å —Ä—ñ–∑–Ω—É "–≤–∞—Ä—Ç—ñ—Å—Ç—å", —ñ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ "–≤—É–∑—å–∫—ñ –º—ñ—Å—Ü—è" –≤ –ª–∞–Ω—Ü—é–∂–∫—É —Å—Ç—Ä—ñ–º—É.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ª–∞–Ω—Ü—é–∂–∫–∞ —Å—Ç—Ä—ñ–º—ñ–≤, –∑–º—ñ–Ω—é—é—á–∏ –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ì–æ–ª–æ–≤–Ω–µ –ø—Ä–∞–≤–∏–ª–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:** **–û–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ –∑–º–µ–Ω—à—É—é—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (`filter`, `limit`), –º–∞—é—Ç—å —Å—Ç–æ—è—Ç–∏ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ –≤ –ª–∞–Ω—Ü—é–∂–∫—É.**
>
> –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω–∞—Ç–∏ "–¥–æ—Ä–æ–≥—ñ" –æ–ø–µ—Ä–∞—Ü—ñ—ó (`map`, `sorted`, `distinct`) –Ω–∞ —è–∫–æ–º–æ–≥–∞ –º–µ–Ω—à—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> **–ü–æ–≥–∞–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫:**
>
> ```java
> users.stream()
>      .map(User::getName)   // 1. –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —ñ–º–µ–Ω–∞ –í–°–Ü–• 1 000 000 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
>      .sorted()             // 2. –°–æ—Ä—Ç—É—î–º–æ 1 000 000 —ñ–º–µ–Ω
>      .filter(name -> name.startsWith("A")) // 3. –Ü –ª–∏—à–µ –ø–æ—Ç—ñ–º —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ
> ```
>
> **–•–æ—Ä–æ—à–∏–π –ø–æ—Ä—è–¥–æ–∫:**
>
> ```java
> users.stream()
>      .filter(user -> user.getName().startsWith("A")) // 1. –§—ñ–ª—å—Ç—Ä—É—î–º–æ —Å–ø–æ—á–∞—Ç–∫—É. –ó–∞–ª–∏—à–∏–ª–æ—Å—å 10 000
>      .map(User::getName)                           // 2. –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –ª–∏—à–µ 10 000
>      .sorted()                                     // 3. –°–æ—Ä—Ç—É—î–º–æ –ª–∏—à–µ 10 000
> ```
>
> –†—ñ–∑–Ω–∏—Ü—è –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –±—É–¥–µ –≤–µ–ª–∏—á–µ–∑–Ω–æ—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –¥–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∫–æ–¥—É —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–±—á–∏—Å–ª–µ–Ω—å.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –±–µ–∑–ø–µ—á–Ω–æ –ª–æ–≥—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑—Å–µ—Ä–µ–¥–∏–Ω–∏ `parallelStream`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –±–µ–∑–ø–µ—á–Ω–æ, –∞–ª–µ –∑ –Ω—é–∞–Ω—Å–∞–º–∏.**
>
> –ë—ñ–ª—å—à—ñ—Å—Ç—å —Å—É—á–∞—Å–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è (Log4j2, Logback) —î **–ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º–∏**. –á—Ö–Ω—ñ –∞–ø–µ–Ω–¥–µ—Ä–∏ (`Appender`) —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤, –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ —á–µ—Ä–≥–∏ —Ç–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è.
>
> –¢–æ–º—É —Å–∞–º –≤–∏–∫–ª–∏–∫ `log.info(...)` –Ω–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.
>
> **–ù—é–∞–Ω—Å–∏:**
>
> 1. **–ü–æ—Ä—è–¥–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:** –õ–æ–≥–∏ –∑ `parallelStream` –±—É–¥—É—Ç—å –∑'—è–≤–ª—è—Ç–∏—Å—è —É —Ñ–∞–π–ª—ñ –≤ **–¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É**, –æ—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç–æ–∫–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ. –¶–µ –º–æ–∂–µ —É—Å–∫–ª–∞–¥–Ω–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –ø–æ–¥—ñ–π.
> 2. **–í—Ç—Ä–∞—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:** –Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —î –æ–ø–µ—Ä–∞—Ü—ñ—î—é –≤–≤–æ–¥—É-–≤–∏–≤–æ–¥—É (IO). –Ø–∫—â–æ –∫–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –±—É–¥–µ –ø–æ—Å—Ç—ñ–π–Ω–æ –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è —â–æ—Å—å –∑–∞–ø–∏—Å–∞—Ç–∏, —Ü–µ –º–æ–∂–µ —Å—Ç–∞—Ç–∏ "–≤—É–∑—å–∫–∏–º –º—ñ—Å—Ü–µ–º" —ñ –Ω—ñ–≤–µ–ª—é–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –õ–æ–≥—É–≤–∞—Ç–∏ –º–æ–∂–Ω–∞, –∞–ª–µ —Å–ª—ñ–¥ —Ä–æ–±–∏—Ç–∏ —Ü–µ —Ä–æ–∑—É–º–Ω–æ, –∞ –¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É —á–∞—Å—Ç–æ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `peek` –∞–±–æ –ø—Ä–æ—Å—Ç–æ —Ç–∏–º—á–∞—Å–æ–≤–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π —Å—Ç—Ä—ñ–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ç–∞ –∑–Ω–∞–Ω–Ω—è –∞—Å–ø–µ–∫—Ç—ñ–≤ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ JMH —ñ —á–æ–º—É –π–æ–≥–æ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å—Ç—Ä—ñ–º—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **JMH (Java Microbenchmark Harness)** ‚Äî —Ü–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π Oracle, –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–∏—Ö —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –º—ñ–∫—Ä–æ-–±–µ–Ω—á–º–∞—Ä–∫—ñ–≤ —É Java.
>
> **–ß–æ–º—É –∑–≤–∏—á–∞–π–Ω–∏–π `System.nanoTime()` –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å:**
>
> –ü—Ä–æ—Å—Ç—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É —î **–≤–∫—Ä–∞–π –Ω–µ–Ω–∞–¥—ñ–π–Ω–∏–º–∏**, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–ø–ª–∏–≤–∞—î –±–µ–∑–ª—ñ—á —Ñ–∞–∫—Ç–æ—Ä—ñ–≤, —è–∫—ñ –≤–æ–Ω–∏ –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å:
>
> * **"–ü—Ä–æ–≥—Ä—ñ–≤" JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞:** JVM –Ω–µ –æ–¥—Ä–∞–∑—É –∫–æ–º–ø—ñ–ª—é—î –∫–æ–¥. "–ì–∞—Ä—è—á–∏–π" –∫–æ–¥ –ø—ñ—Å–ª—è –∫—ñ–ª—å–∫–æ—Ö —Ç–∏—Å—è—á –≤–∏–∫–æ–Ω–∞–Ω—å –±—É–¥–µ –Ω–∞–±–∞–≥–∞—Ç–æ —à–≤–∏–¥—à–∏–º.
> * **–ó–±–∏—Ä–∞–Ω–Ω—è —Å–º—ñ—Ç—Ç—è (GC):** –ü–∞—É–∑–∏ –Ω–∞ GC –º–æ–∂—É—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤–æ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ —É –≤–∞—à –≤–∏–º—ñ—Ä.
> * **–Ü–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏ –≤ –û–°.**
>
> **–©–æ —Ä–æ–±–∏—Ç—å JMH:**
>
> JMH –≤–∏—Ä—ñ—à—É—î —Ü—ñ –ø—Ä–æ–±–ª–µ–º–∏. –í—ñ–Ω –ø—Ä–æ–≤–æ–¥–∏—Ç—å "–ø—Ä–æ–≥—Ä—ñ–≤", –≤–∏–∫–æ–Ω—É—î –∫–æ–¥ —É –∫—ñ–ª—å–∫–æ—Ö —Ñ–æ—Ä–∫–∞—Ö, –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–∏—Å—è—á—ñ —ñ—Ç–µ—Ä–∞—Ü—ñ–π —ñ —É—Å–µ—Ä–µ–¥–Ω—é—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –Ω–∞–¥–∞—é—á–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–æ –¥–æ—Å—Ç–æ–≤—ñ—Ä–Ω—É –æ—Ü—ñ–Ω–∫—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
>
> –î–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `stream` –ø—Ä–æ—Ç–∏ `parallelStream`, –∞–±–æ `stream` –ø—Ä–æ—Ç–∏ `for`-—Ü–∏–∫–ª—É, **JMH —î —î–¥–∏–Ω–∏–º –Ω–∞–¥—ñ–π–Ω–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º**.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–Ü–Ω–∂–µ–Ω–µ—Ä–Ω—É –∑—Ä—ñ–ª—ñ—Å—Ç—å —Ç–∞ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø—Ä–∏–π–º–∞—é—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö, –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –ø–∞–º'—è—Ç—ñ: `stream.sorted().distinct()`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –ª–∞–Ω—Ü—é–∂–æ–∫ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º —á–µ—Ä–µ–∑ **–ø–æ–¥–≤—ñ–π–Ω—É –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—é**.
>
> **–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
>
> 1. **`sorted()`**: –¶—è `stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—è –∑–º—É—à–µ–Ω–∞ –∑—ñ–±—Ä–∞—Ç–∏ **–≤—Å—ñ** –µ–ª–µ–º–µ–Ω—Ç–∏ –∑ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫—É —É –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –±—É—Ñ–µ—Ä (–Ω–∞–ø—Ä., `ArrayList`), –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ, —ñ –ª–∏—à–µ –ø–æ—Ç—ñ–º –ø–æ—á–∞—Ç–∏ –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–∞–ª—ñ.
> 2. **`distinct()`**: –¶—è `stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—è —Ç–∞–∫–æ–∂ –∑–º—É—à–µ–Ω–∞ –∑–±–∏—Ä–∞—Ç–∏ —Å—Ç–∞–Ω. –í–æ–Ω–∞ –æ—Ç—Ä–∏–º—É—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤—ñ–¥ `sorted()` —ñ –ø–æ—á–∏–Ω–∞—î –±—É–¥—É–≤–∞—Ç–∏ —Å–≤—ñ–π **–≤–ª–∞—Å–Ω–∏–π –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –±—É—Ñ–µ—Ä** (–Ω–∞–ø—Ä., `HashSet`), —â–æ–± –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏.
>
> **–ù–∞—Å–ª—ñ–¥–æ–∫:**
> –£ –ø–µ–≤–Ω–∏–π –º–æ–º–µ–Ω—Ç —á–∞—Å—É —É –≤–∞—Å –≤ –ø–∞–º'—è—Ç—ñ –±—É–¥—É—Ç—å –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏—Å—å **–¥–≤–∞ –≤–µ–ª–∏–∫–∏—Ö –±—É—Ñ–µ—Ä–∏**: –æ–¥–∏–Ω –¥–ª—è `sorted()` —ñ –æ–¥–∏–Ω –¥–ª—è `distinct()`. –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —Ü–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–∞–¥–º—ñ—Ä–Ω–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ.
>
> **–Ø–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏:**
>
> –Ø–∫—â–æ –≤–∏ –∑–Ω–∞—î—Ç–µ, —â–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —É–Ω—ñ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä–∞–∑–æ–º, —ñ–Ω–æ–¥—ñ –∫—Ä–∞—â–µ –ø—Ä–æ—Å—Ç–æ –∑—ñ–±—Ä–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ `TreeSet`, —è–∫–∏–π –≥–∞—Ä–∞–Ω—Ç—É—î —ñ —Ç–µ, —ñ —ñ–Ω—à–µ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑ —ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–¥–Ω—ñ—î—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö.
>
> ```java
> // –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –ø–∞–º'—è—Ç—ñ, —è–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç–∏ Comparable
> Set<T> sortedUnique = stream.collect(Collectors.toCollection(TreeSet::new));
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ –≤ –ª–∞–Ω—Ü—é–∂–∫–∞—Ö —Å—Ç—Ä—ñ–º—ñ–≤ —Ç–∞ —Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ `stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –æ–¥–Ω–∞ –∑ –æ–¥–Ω–æ—é.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏ –± –≤—ñ–¥–¥–∞–ª–∏ –ø–µ—Ä–µ–≤–∞–≥—É —ñ—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–º—É `for`-—Ü–∏–∫–ª—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ–¥ —Å—Ç–∞–Ω–µ –±—ñ–ª—å—à –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω–∏–º? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ü—Å–Ω—É—é—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—ó, –¥–µ —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–π —Ü–∏–∫–ª —î –∫—Ä–∞—â–∏–º –≤–∏–±–æ—Ä–æ–º.
>
> 1. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –Ω–∞ –º–∞–ª–∏—Ö –¥–∞–Ω–∏—Ö:** –Ø–∫—â–æ —è –ø—Ä–∞—Ü—é—é –∑ –Ω–µ–≤–µ–ª–∏–∫–æ—é –∫–æ–ª–µ–∫—Ü—ñ—î—é (–¥–æ –∫—ñ–ª—å–∫–æ—Ö —Ç–∏—Å—è—á –µ–ª–µ–º–µ–Ω—Ç—ñ–≤) —É "–≥–∞—Ä—è—á—ñ–π" –¥—ñ–ª—è–Ω—Ü—ñ –∫–æ–¥—É, –¥–µ –≤–∞–∂–ª–∏–≤–∞ –∫–æ–∂–Ω–∞ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞, `for`-—Ü–∏–∫–ª –±—É–¥–µ —à–≤–∏–¥—à–∏–º —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç.
>
> 2. **–ü–æ—Ç—Ä–µ–±–∞ –≤ —ñ–Ω–¥–µ–∫—Å—ñ:** –Ø–∫—â–æ –≤ –ª–æ–≥—ñ—Ü—ñ –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω–¥–µ–∫—Å—É –µ–ª–µ–º–µ–Ω—Ç–∞, —É `Stream API` –¥–ª—è —Ü—å–æ–≥–æ –Ω–µ–º–∞—î –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–∞ –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è. –ó–≤–∏—á–∞–π–Ω–∏–π `for`-—Ü–∏–∫–ª –∑ —ñ–Ω–¥–µ–∫—Å–æ–º (`for (int i=0;...)`) —î –Ω–∞–±–∞–≥–∞—Ç–æ —á–∏—Å—Ç—ñ—à–∏–º.
>
> 3. **–°–∫–ª–∞–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–æ–º:** –Ø–∫—â–æ –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `break` –∞–±–æ `continue` –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —É–º–æ–≤ –≤–∏—Ö–æ–¥—É –∑ —Ü–∏–∫–ª—É, –≤ `Stream API` —Ç–∞–∫–æ—ó –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –Ω–µ–º–∞—î. –•–æ—á–∞ —Ü–µ –º–æ–∂–Ω–∞ —ñ–º—ñ—Ç—É–≤–∞—Ç–∏, —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–π –∫–æ–¥ –±—É–¥–µ –∑–Ω–∞—á–Ω–æ –ø—Ä–æ—Å—Ç—ñ—à–∏–º —ñ –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à–∏–º.
>
> 4. **–í–∑–∞—î–º–æ–¥—ñ—è –∑ –ª–µ–≥–∞—Å—ñ-API:** –Ø–∫—â–æ —è –ø—Ä–∞—Ü—é—é –∑ API, —è–∫–µ –≤–∏–º–∞–≥–∞—î –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏ –∞–±–æ –º–∞–Ω—ñ–ø—É–ª—é–≤–∞—Ç–∏ –º–∞—Å–∏–≤–∞–º–∏ –Ω–∞–ø—Ä—è–º—É.
>
> 5. **–ö–æ–¥ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–º–∏ –≤–∏–Ω—è—Ç–∫–∞–º–∏:** –Ø–∫ –º–∏ –∑–Ω–∞—î–º–æ, –æ–±—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ —É –ª—è–º–±–¥–∞—Ö —î –≥—Ä–æ–º—ñ–∑–¥–∫–æ—é. –Ø–∫—â–æ –ª–æ–≥—ñ–∫–∞ —Ä—è—Å–Ω—ñ—î —Ç–∞–∫–∏–º–∏ –≤–∏–Ω—è—Ç–∫–∞–º–∏, –∑–≤–∏—á–∞–π–Ω–∏–π `try-catch` —É `for`-—Ü–∏–∫–ª—ñ –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞–±–∞–≥–∞—Ç–æ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—à–∏–º.
>
> –í–∏–±—ñ—Ä –º–∞—î –±—É—Ç–∏ –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω–∏–º, –∞ –Ω–µ –¥–æ–≥–º–∞—Ç–∏—á–Ω–∏–º. `Stream API` ‚Äî –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∞–ª–µ –Ω–µ –¥–ª—è –≤—Å—ñ—Ö –∑–∞–≤–¥–∞–Ω—å.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó—Ä—ñ–ª—ñ—Å—Ç—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å "—Ñ–∞–Ω–∞—Ç–∏–∑–º—É". –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –≤–º—ñ—Ç–∏ –æ–±–∏—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ, –∞ –Ω–µ —Å–ª—ñ–ø–æ —Å–ª—ñ–¥—É–≤–∞—Ç–∏ —Ç—Ä–µ–Ω–¥–∞–º.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∏ (JVisualVM, JFR) –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å —É –¥–µ–±–∞–≥—ñ–Ω–≥—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Å—Ç—Ä—ñ–º—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ü—Ä–æ—Ñ–∞–π–ª–µ—Ä–∏ —î –Ω–µ–∑–∞–º—ñ–Ω–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –∫–æ–ª–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ `peek()` –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ.
>
> **–Ø–∫ –≤–æ–Ω–∏ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å:**
>
> 1. **–ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è CPU:**
>     * –í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—ñ –º–µ—Ç–æ–¥–∏ –∑–∞–π–º–∞—é—Ç—å –Ω–∞–π–±—ñ–ª—å—à–µ —á–∞—Å—É –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞. –Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ, —â–æ –±–∞–≥–∞—Ç–æ —á–∞—Å—É –π–¥–µ –Ω–∞ `spliterator.trySplit()` –∞–±–æ `ForkJoinPool`, —Ü–µ –º–æ–∂–µ —Å–≤—ñ–¥—á–∏—Ç–∏ –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ `parallelStream`. –Ø–∫—â–æ "–≥–∞—Ä—è—á–∏–º–∏" —î –º–µ—Ç–æ–¥–∏ `Integer.valueOf` (boxing), —Ü–µ –≤–∫–∞–∑—É—î –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –æ–±'—î–∫—Ç–Ω–∏—Ö —Å—Ç—Ä—ñ–º—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö.
>
> 2. **–ü—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ (Heap Analysis):**
>     * –í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –≤ –∫—É–ø—ñ. –í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—â–æ –ø–µ–≤–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è (–Ω–∞–ø—Ä., `distinct` –∞–±–æ `sorted`) —Å—Ç–≤–æ—Ä—é—î –≤–µ–ª–∏—á–µ–∑–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ –∞–±–æ –≤–µ–ª–∏–∫—ñ –±—É—Ñ–µ—Ä–∏, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ `OutOfMemoryError`.
>     * –ú–æ–∂–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å GC —ñ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —á–∏ –Ω–µ —î –≤–∞—à—ñ —Å—Ç—Ä—ñ–º–∏ –ø—Ä–∏—á–∏–Ω–æ—é —á–∞—Å—Ç–∏—Ö —ñ –¥–æ–≤–≥–∏—Ö –ø–∞—É–∑ –Ω–∞ –∑–±–∏—Ä–∞–Ω–Ω—è —Å–º—ñ—Ç—Ç—è.
>
> 3. **–ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ–∫—ñ–≤ (Thread Analysis):**
>     * –£ –≤–∏–ø–∞–¥–∫—É –∑ `parallelStream` –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç–æ–∫—ñ–≤ –∑ `ForkJoinPool` —î –∞–∫—Ç–∏–≤–Ω–∏–º–∏, –∞ —Å–∫—ñ–ª—å–∫–∏ ‚Äî –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–º–∏, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –±–ª–æ–∫—É—é—á–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏.
>
> –ü—Ä–æ—Ñ–∞–π–ª–µ—Ä–∏ –¥–∞—é—Ç—å –æ–±'—î–∫—Ç–∏–≤–Ω—ñ –¥–∞–Ω—ñ, –Ω–∞ –æ—Å–Ω–æ–≤—ñ —è–∫–∏—Ö –º–æ–∂–Ω–∞ –ø—Ä–∏–π–º–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é, –∞ –Ω–µ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –∑ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ. –¶–µ –æ–∑–Ω–∞–∫–∞ Senior-—Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —è–∫–∏–π –≤–º—ñ—î –¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –Ω–∞ —Ä—ñ–≤–Ω—ñ JVM.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `peek()` —î –Ω–µ–Ω–∞–¥—ñ–π–Ω–∏–º –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∞–∂–ª–∏–≤–∏—Ö –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤, –æ—Å–æ–±–ª–∏–≤–æ –≤ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏—Ö –ª–∞–Ω—Ü—é–∂–∫–∞—Ö? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `peek` –¥–ª—è —á–æ–≥–æ—Å—å, –∫—Ä—ñ–º –¥–µ–±–∞–≥—ñ–Ω–≥—É, —î –Ω–µ–Ω–∞–¥—ñ–π–Ω–∏–º, –æ—Å–∫—ñ–ª—å–∫–∏ **–Ω–µ–º–∞—î –≥–∞—Ä–∞–Ω—Ç—ñ—ó, —â–æ –≤—ñ–Ω –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π**.
>
> **–ü—Ä–∏—á–∏–Ω–∞ ‚Äî –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó `Stream API`:**
>
> –ó–≥—ñ–¥–Ω–æ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é, `Stream API` –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, —è–∫—ñ "–≤–∏–∫–∏–¥–∞—é—Ç—å" –æ–ø–µ—Ä–∞—Ü—ñ—é `peek` –∑ –ª–∞–Ω—Ü—é–∂–∫–∞, —è–∫—â–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –±–∞—á–∏—Ç—å, —â–æ –≤–æ–Ω–∞ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ —Ç–∞–∫–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫:
>
> ```java
> long count = list.stream()
>                  .map(String::toUpperCase)
>                  .peek(System.out::println) // –ó–¥–∞–≤–∞–ª–æ—Å—è –±, –º–∞—î –≤–∏–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
>                  .count(); // –¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è, —è–∫–∞ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
> ```
>
> JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ "—Ä–æ–∑—É–º–Ω–∏–º", —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è `count()` –π–æ–º—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Å–∞–º—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏. –ô–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –ª–∏—à–µ –∑–Ω–∞—Ç–∏ —ó—Ö–Ω—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å. –í—ñ–Ω –º–æ–∂–µ "–≤–∏—Ä—ñ–∑–∞—Ç–∏" —ñ `map`, —ñ `peek` –∑ –ª–∞–Ω—Ü—é–∂–∫–∞ –æ–±—á–∏—Å–ª–µ–Ω—å, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ `count()`, —ñ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ `list.size()`. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ, `peek` –Ω–µ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π **–∂–æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É**.
>
> –¶—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ä–æ–±–∏—Ç—å `peek` —ñ–¥–µ–∞–ª—å–Ω–∏–º –¥–ª—è –¥–µ–±–∞–≥—ñ–Ω–≥—É (–±–æ –∫–æ–ª–∏ –≤–∏ –¥–µ–±–∞–∂–∏—Ç–µ, –≤–∏ –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `collect` –∞–±–æ `forEach`), –∞–ª–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–Ω–∞–¥—ñ–π–Ω–∏–º –¥–ª—è –±—É–¥—å-—è–∫–æ—ó –≤–∞–∂–ª–∏–≤–æ—ó –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏.
>
> **–ü—Ä–∞–≤–∏–ª–æ:** –Ø–∫—â–æ –¥—ñ—è —î –≤–∞–∂–ª–∏–≤–æ—é, –≤–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫-–æ—Ç `forEach`, –∞–±–æ –∑—ñ–±—Ä–∞–Ω–∞ —á–µ—Ä–µ–∑ `collect` –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ JIT-–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É, —ñ —â–æ –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É ‚Äî —Ü–µ –ø–æ–≥–∞–Ω–æ. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –µ–∫—Å–ø–µ—Ä—Ç–Ω–∏—Ö –∑–Ω–∞–Ω—å.*

* * *
