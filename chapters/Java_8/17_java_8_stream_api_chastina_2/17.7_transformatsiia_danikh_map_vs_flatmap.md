---
layout: default
title: "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö: map() vs flatMap()"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 7
---

# –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö: map() vs flatMap()

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `map()` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Å—Ç—Ä—ñ–º—É –Ω–∞ –æ–¥–∏–Ω —ñ–Ω—à–∏–π –æ–±'—î–∫—Ç (`–æ–¥–∏–Ω-–¥–æ-–æ–¥–Ω–æ–≥–æ`). `flatMap()` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î
  –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –ø–æ—Ç—ñ–∫ (—Å—Ç—Ä—ñ–º), –∞ –ø–æ—Ç—ñ–º —Å–ø–ª—é—â—É—î –≤—Å—ñ —Ü—ñ —Å—Ç—Ä—ñ–º–∏ –≤ –æ–¥–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π (`–±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ`, `flattening`).
* –ø–æ–Ω—è—Ç—Ç—è: `map()`, `flatMap()`, `flattening`.
* –ø—Ä–∏–∫–ª–∞–¥–∏: `lines.stream().map(line -> line.split(" "))` (–ø–æ–≤–µ—Ä–Ω–µ `Stream<String[]>`),
  `lines.stream().flatMap(line -> Arrays.stream(line.split(" ")))` (–ø–æ–≤–µ—Ä–Ω–µ `Stream<String>`).
* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `flatMap()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (—Å–ø–∏—Å–∫—ñ–≤ —Å–ø–∏—Å–∫—ñ–≤, –º–∞—Å–∏–≤—ñ–≤ –º–∞—Å–∏–≤—ñ–≤) —É
  —î–¥–∏–Ω–∏–π –ø–æ—Ç—ñ–∫.
* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ß—ñ—Ç–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è, –∫–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **`map()`** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Å—Ç—Ä—ñ–º—É –≤ —ñ–Ω—à–∏–π –æ–±‚Äô—î–∫—Ç, –ø–æ–≤–µ—Ä—Ç–∞—é—á–∏ **–æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç**.
* **`flatMap()`** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —É **–ø–æ—Ç—ñ–∫** (—Å—Ç—Ä—ñ–º), –∞ –ø–æ—Ç—ñ–º **—Å–ø–ª—é—â—É—î** –≤—Å—ñ —Å—Ç—Ä—ñ–º–∏ –≤ –æ–¥–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π.

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **`map()`** ‚Äî —Ü–µ —è–∫ *"–æ–±–≥–æ—Ä–Ω—É—Ç–∏ —Ü—É–∫–µ—Ä–∫—É –≤ –æ–±–≥–æ—Ä—Ç–∫—É"*.
* **`flatMap()`** ‚Äî *"—Ä–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏ –≤—Å—ñ —Ü—É–∫–µ—Ä–∫–∏ –∑ –∫–æ—Ä–æ–±–æ–∫ —ñ –≤–∏—Å–∏–ø–∞—Ç–∏ –Ω–∞ —Å—Ç—ñ–ª"*.  
  –ó–∞–º—ñ—Å—Ç—å **`Stream<Stream<T>>`** —Ç–∏ –æ—Ç—Ä–∏–º—É—î—à –ø—Ä–æ—Å—Ç–æ **`Stream<T>`**.

---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

üìä **–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è:**

|      –ú–µ—Ç–æ–¥      |          –©–æ –ø—Ä–∏–π–º–∞—î          |   –©–æ –ø–æ–≤–µ—Ä—Ç–∞—î   |          –î–ª—è —á–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è          |
|:---------------:|:----------------------------:|:---------------:|:-------------------------------------------:|
|   **`map()`**   |     **`Function<T, R>`**     | **`Stream<R>`** |        –ó–∞–º—ñ–Ω–∞/–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤        |
| **`flatMap()`** | **`Function<T, Stream<R>>`** | **`Stream<R>`** | –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (flattening) |

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —Ç–∏ –º–∞—î—à —Å–ø–∏—Å–æ–∫ —É—á–Ω—ñ–≤, –∞ –≤ –∫–æ–∂–Ω–æ–≥–æ —î —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤.

* **`map()`** –¥–∞—î —Ç–æ–±—ñ —Å–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫—ñ–≤ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤ (**`Stream<List<String>>`**)
* **`flatMap()`** –¥–∞—î —Ç–æ–±—ñ **–æ–¥–∏–Ω —Å—Ç—Ä—ñ–º —É—Å—ñ—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤**, –Ω—ñ–±–∏ —Ç–∏ –≤—Å—ñ—Ö —É—á–Ω—ñ–≤ "—Ä–æ–∑–ø–∞–∫—É–≤–∞–≤" —ñ –∑—ñ–±—Ä–∞–≤ –≤ –æ–¥–Ω—É –∫—É–ø—É.

---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**


```java
// –î–∞–Ω—ñ: —Å–ø–∏—Å–æ–∫ —Ä—è–¥–∫—ñ–≤ –∑—ñ —Å–ª–æ–≤–∞–º–∏
List<String> lines = List.of("hello world", "java stream");

// map() -- –¥–∞—î Stream<String[]>
Stream<String[]> mapped = lines.stream()
                               .map(line -> line.split(" "));

// flatMap() -- –¥–∞—î Stream<String>
Stream<String> flattened = lines.stream()
                                .flatMap(line -> Arrays.stream(line.split(" ")));
```

```java
// –ü—Ä–∏–∫–ª–∞–¥ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏
List<List<Integer>> nested = List.of(List.of(1, 2), List.of(3, 4));

// map ‚Üí Stream<List<Integer>>
Stream<List<Integer>> streamOfLists = nested.stream().map(x -> x);

// flatMap ‚Üí Stream<Integer>
Stream<Integer> streamOfInts = nested.stream().flatMap(List::stream);
```

```java
// map() –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç
List<String> names = List.of("John", "Jane");
names.stream()
     .map(String::toUpperCase)
     .forEach(System.out::println); // JOHN, JANE
```
---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|         –ö—Ä–∏—Ç–µ—Ä—ñ–π         |                `map()`                |                `flatMap()`                |
|:------------------------:|:-------------------------------------:|:-----------------------------------------:|
|       **–ü–æ–≤–µ—Ä—Ç–∞—î**       |            **`Stream<R>`**            |     **`Stream<R>`** (–ø—ñ—Å–ª—è —Å–ø–ª—é—â–µ–Ω–Ω—è)     |
|       **–ü—Ä–∞—Ü—é—î –∑**       |         –ü—Ä—è–º–∏–º –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è–º          |          –í–∫–ª–∞–¥–µ–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏           |
|  **–¢–∏–ø–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**   | **`Stream<List<T>>`, `Stream<T[]>`**  |              **`Stream<T>`**              |
| **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏** | –ö–æ–ª–∏ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤ 1 | –ö–æ–ª–∏ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —É —Å—Ç—Ä—ñ–º |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

#### **üîπ –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `flatMap()` –∑–∞–º—ñ—Å—Ç—å `map()`?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ö–æ–ª–∏ —Ç–∏ –º–∞—î—à **–≤–∫–ª–∞–¥–µ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó** (—Å–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫—ñ–≤, –º–∞—Å–∏–≤–∏ –º–∞—Å–∏–≤—ñ–≤) —ñ —Ö–æ—á–µ—à –æ—Ç—Ä–∏–º–∞—Ç–∏ **—î–¥–∏–Ω–∏–π –ø–æ—Ç—ñ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤**.

---

#### **üîπ –©–æ –±—É–¥–µ, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `map()` –∑–∞–º—ñ—Å—Ç—å `flatMap()` –∑ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–û—Ç—Ä–∏–º–∞—î—à —Å—Ç—Ä—ñ–º –∑ **–æ–±‚Äô—î–∫—Ç—ñ–≤ —Ç–∏–ø—É List/Stream**, –∞ –Ω–µ –∑ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ. –î–ª—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —â–µ –æ–¥–∏–Ω **`forEach`
** –∞–±–æ **`.flatMap(...)`**.

---

#### **üîπ –ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `flatMap()` –∑ Optional –∞–±–æ CompletableFuture?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–¢–∞–∫\! –Ü–¥–µ—è flatMap –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –Ω–µ –ª–∏—à–µ —É Stream API. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

* **`Optional<T>.flatMap()`** ‚Äî –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–∏—Ö **`Optional<Optional<T>>`**
* **`CompletableFuture<T>.thenCompose()`** ‚Äî –∞–Ω–∞–ª–æ–≥ flatMap –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω—â–∏–Ω–∏

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"map ‚Äî –∑–º—ñ–Ω—é–π, flatMap ‚Äî –≤–∏—Ç—Ä—É—à—É–π"**

üì¶ **`map()`** ‚Äî —Ç–∏ –∑–∞–ª–∏—à–∞—î—à –∫–æ—Ä–æ–±–∫–∏ –∑–∞–ø–∞–∫–æ–≤–∞–Ω–∏–º–∏  
üì§ **`flatMap()`** ‚Äî —Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—à –∫–æ—Ä–æ–±–∫–∏ —ñ –≤–∏–π–º–∞—î—à —É—Å–µ, —â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ

---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

* **`map()`** ‚Äî –∑–∞—Å—Ç–æ—Å–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é –¥–æ –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞, –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—ñ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.
* **`flatMap()`** ‚Äî –∑–∞—Å—Ç–æ—Å–æ–≤—É—î —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—ñ–º, —ñ **"—Å–ø–ª—é—â—É—î"** —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫.
* –ù–∞–π—á–∞—Å—Ç—ñ—à–µ **`flatMap()`** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –¥–ª—è **—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä** (—Å–ø–∏—Å–∫–∏, –º–∞—Å–∏–≤–∏, —Å—Ç—Ä—ñ–º–∏).
* –î–∞—î —á–∏—Å—Ç–∏–π, –ª–∞–∫–æ–Ω—ñ—á–Ω–∏–π —ñ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–¥ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑—ñ —Å–∫–ª–∞–¥–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏.

---

**üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Oracle Java 8 Stream Documentation
  **](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-)
* [**StackOverflow: map vs flatMap in Java Streams
  **](https://stackoverflow.com/questions/30627854/what-is-the-difference-between-map-and-flatmap-methods-in-java-8)