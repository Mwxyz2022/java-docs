---
layout: default
title: "mapToInt() —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 6
---

# mapToInt() —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ú–µ—Ç–æ–¥–∏ `mapToInt()`, `mapToLong()`, `mapToDouble()` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å –æ–±'—î–∫—Ç–Ω–∏–π —Å—Ç—Ä—ñ–º (`Stream<T>`) –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π —Å—Ç—Ä—ñ–º (`IntStream`, `LongStream`, `DoubleStream`), —â–æ –¥–æ–∑–≤–æ–ª—è—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —á–∏—Å–ª–∞–º–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.

* –ø–æ–Ω—è—Ç—Ç—è: `mapToInt()`, `mapToLong()`, `mapToDouble()`, `mapToObj()` (–¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `users.stream().mapToInt(User::getAge).sum()`, `words.stream().mapToInt(String::length)`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –£–Ω–∏–∫–∞—é—Ç—å `autoboxing`, –ø—ñ–¥–≤–∏—â—É—é—Ç—å –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —á–∏—Å–ª–æ–≤–∏—Ö –∞–≥—Ä–µ–≥–∞—Ü—ñ–π.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è `map()` vs `mapToInt()`, –∫–æ–ª–∏ –¥–æ—Ü—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–ú–µ—Ç–æ–¥ **`mapToInt()`** –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç–Ω–∏–π —Å—Ç—Ä—ñ–º (**`Stream<T>`**) –Ω–∞ **`IntStream`**, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏ **`int`**. –¶–µ —á–∞—Å—Ç–∏–Ω–∞ –Ω–∞–±–æ—Ä—É –º–µ—Ç–æ–¥—ñ–≤ –¥–ª—è **–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤** —É Stream API.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ **–∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä**: —Ç–∏ –±–µ—Ä–µ—à –æ–±‚Äô—î–∫—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **`User`**), –≤–∏—Ä—ñ–∑–∞—î—à –∑ –Ω–∏—Ö —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–∫), —ñ –æ—Ç—Ä–∏–º—É—î—à —Å—Ç—Ä—ñ–º —á–∏—Å–µ–ª (**`IntStream`**), —è–∫–∏–π –ø–æ—Ç—ñ–º –º–æ–∂–Ω–∞ —à–≤–∏–¥–∫–æ –æ–±—Ä–æ–±–∏—Ç–∏

---

## **–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ / —Ç–∏–ø–∏**

üìä **–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è:**

|        –ú–µ—Ç–æ–¥        | –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∑ |       –£ —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î       |
|:-------------------:|:------------:|:---------------------------:|
|  **`mapToInt()`**   | `Stream<T>`  |         `IntStream`         |
|  **`mapToLong()`**  | `Stream<T>`  |        `LongStream`         |
| **`mapToDouble()`** | `Stream<T>`  |       `DoubleStream`        |
|     **`map()`**     | `Stream<T>`  | `Stream<R>` (–±—É–¥—å-—è–∫–∏–π —Ç–∏–ø) |

üìå **–¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**

* –û—Ç—Ä–∏–º–∞–Ω–Ω—è —á–∏—Å–ª–æ–≤–æ–≥–æ –ø–æ–ª—è –∑ –æ–±‚Äô—î–∫—Ç—ñ–≤
* –®–≤–∏–¥–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü—ñ—è (**`sum(), average()`**)
* –†–æ–±–æ—Ç–∞ –∑ –¥—ñ–∞–ø–∞–∑–æ–Ω–∞–º–∏ (**`range()`** —Ç–æ—â–æ)

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —â–æ —É —Ç–µ–±–µ —î —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤, —ñ —Ç–∏ —Ö–æ—á–µ—à –¥—ñ–∑–Ω–∞—Ç–∏—Å—å –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É —Ü—ñ–Ω.

* –ß–µ—Ä–µ–∑ **`map()`** —Ç–∏ –æ—Ç—Ä–∏–º–∞—î—à **`Stream<Double>`** —ñ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`.reduce()`** —á–∏ —ñ–Ω—à—ñ —Ö–∞–∫—ñ.
* –ß–µ—Ä–µ–∑ **`mapToDouble()`** ‚Äî –æ—Ç—Ä–∏–º–∞—î—à **`DoubleStream`**, –∞ –¥–∞–ª—ñ –ø—Ä–æ—Å—Ç–æ **`.sum()`** üòé

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// –ü—Ä–∏–∫–ª–∞–¥ 1: –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è User --> –≤—ñ–∫ (int)
List<User> users = List.of(new User("Anna", 25), new User("Oleh", 30));
int totalAge = users.stream()
                    .mapToInt(User::getAge)
                    .sum(); // 55

// –ü—Ä–∏–∫–ª–∞–¥ 2: –†–æ–±–æ—Ç–∞ –∑ –¥–æ–≤–∂–∏–Ω–æ—é —Å–ª—ñ–≤
List<String> words = List.of("Java", "Stream", "API");
IntStream lengths = words.stream()
                         .mapToInt(String::length); // 4, 6, 3

// –ü—Ä–∏–∫–ª–∞–¥ 3: –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ DoubleStream —É Stream<String>
DoubleStream.of(1.1, 2.2, 3.3)
            .mapToObj(d -> String.format("%.1f", d))
            .forEach(System.out::println); // "1.1", "2.2", "3.3"
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|    –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞    |          `map()`           |  `mapToInt()`, `mapToLong()` —Ç–æ—â–æ   |
|:--------------------:|:--------------------------:|:-----------------------------------:|
|  **–¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É**  |      **`Stream<R>`**       | –ü—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π —Å—Ç—Ä—ñ–º (**`IntStream`**) |
|   **–ê–≤—Ç–æ–±–æ–∫—Å–∏–Ω–≥**    | –¢–∞–∫ (–º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ) |          –ù—ñ (–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ)           |
| **–ú–µ—Ç–æ–¥–∏ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó** |    –ß–µ—Ä–µ–∑ **`reduce()`**    |    **`sum(), average(), min()`**    |
| **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å**  |           –ë—ñ–ª—å—à–∞           |          –û–±–º–µ–∂–µ–Ω–∏–π –Ω–∞ —Ç–∏–ø           |
|  **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**  |           –ù–∏–∂—á–∞            |      –í–∏—â–∞ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ —á–∏—Å–ª–∞–º–∏      |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"ToInt, ToLong, ToDouble ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ —Å–∏–ª—É"**

–í–æ–Ω–∏ –¥–∞—é—Ç—å —Å–∏–ª—É –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º: —à–≤–∏–¥–∫—ñ—Å—Ç—å, —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏ —Ç–∞ –º—ñ–Ω—ñ–º—É–º —Å–º—ñ—Ç—Ç—è –≤ heap üßπ

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`mapToInt(), mapToLong(), mapToDouble()`** ‚Äî –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å –æ–±‚Äô—î–∫—Ç–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –≤ **–ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Å—Ç—Ä—ñ–º–∏**.
* –ö–æ—Ä–∏—Å–Ω–æ, –∫–æ–ª–∏ —Ç–∏ –ø—Ä–∞—Ü—é—î—à –∑ —á–∏—Å–ª–∞–º–∏ —ñ —Ö–æ—á–µ—à **–µ—Ñ–µ–∫—Ç–∏–≤–Ω—É –∞–≥—Ä–µ–≥–∞—Ü—ñ—é**.
* –ó–Ω–∞—á–Ω–æ **–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—à—ñ**, –Ω—ñ–∂ **`map()`** –∑ –æ–±–≥–æ—Ä—Ç–∫–∞–º–∏ (**`Integer`**, **`Double`**).
* –ú–æ–∂–Ω–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ **`.boxed()`**.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Oracle Java 8 IntStream Docs**](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html)
* [**Java Stream API ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –≥–∞–π–¥**](https://docs.oracle.com/javase/tutorial/collections/streams/)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –æ–ø–µ—Ä–∞—Ü—ñ—è `mapToInt()` —ñ —á–∏–º –≤–æ–Ω–∞ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –∑–≤–∏—á–∞–π–Ω–æ—ó `map()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`mapToInt(ToIntFunction<? super T> mapper)`** ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –≤ `Stream API`, —è–∫–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –ø–æ—Ç—ñ–∫ –æ–±'—î–∫—Ç—ñ–≤ (`Stream<T>`) –Ω–∞ –ø–æ—Ç—ñ–∫ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ **`IntStream`**.
>
> **–û—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –≤—ñ–¥ `map()`:**
>
> * **`map(Function<T, R> mapper)`:**
>   * –¶–µ **—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞** –æ–ø–µ—Ä–∞—Ü—ñ—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î –æ–±'—î–∫—Ç —Ç–∏–ø—É `T` —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç **–±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É `R`**.
>   * –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —á–∏—Å–ª–∞, –≤–æ–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç—å `Stream<Integer>` (–ø–æ—Ç—ñ–∫ –æ–±'—î–∫—Ç—ñ–≤-–æ–±–≥–æ—Ä—Ç–æ–∫).
>
> * **`mapToInt(ToIntFunction<T> mapper)`:**
>   * –¶–µ **—Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞** –æ–ø–µ—Ä–∞—Ü—ñ—è. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î –æ–±'—î–∫—Ç —Ç–∏–ø—É `T` —ñ **–∑–∞–≤–∂–¥–∏** –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∏–º—ñ—Ç–∏–≤ `int`.
>   * –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —î **`IntStream`**, –∞ –Ω–µ `Stream<Integer>`.
>
> –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ —ñ—Å–Ω—É—é—Ç—å `mapToLong()` —Ç–∞ `mapToDouble()`. –ì–æ–ª–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É ‚Äî **—É–Ω–∏–∫–Ω–µ–Ω–Ω—è boxing/unboxing** —Ç–∞ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

`map()` ‚Äî —Ü–µ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π —à–≤–µ–π—Ü–∞—Ä—Å—å–∫–∏–π –Ω—ñ–∂.
`mapToInt()` ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≥–∞–π–∫–æ–≤–∏–π –∫–ª—é—á, —è–∫–∏–π —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –æ–¥–Ω—ñ—î—ó –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ ‚Äî —Ä–æ–±–æ—Ç–∏ –∑ —Ü—ñ–ª–∏–º–∏ —á–∏—Å–ª–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ—é —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ `map` –ø–æ–≤–µ—Ä—Ç–∞—î `Stream<Integer>`, –∞ `mapToInt` ‚Äî `IntStream`, —ñ —Ä–æ–∑—É–º—ñ—Ç–∏ –Ω–∞—Å–ª—ñ–¥–∫–∏ —Ü—å–æ–≥–æ.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –¥–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `mapToInt()` —Ç–∞ —ñ–Ω—à–∏—Ö –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –º–∞–ø–ø–µ—Ä—ñ–≤?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `mapToInt()`, `mapToLong()` —Ç–∞ `mapToDouble()` –Ω–∞–¥–∞—î –¥–≤—ñ –∫–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:
>
> 1. **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:**
>     * –ù–∞–π–≥–æ–ª–æ–≤–Ω—ñ—à–∞ –ø–µ—Ä–µ–≤–∞–≥–∞. –í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å **—É–Ω–∏–∫–Ω—É—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π –∞–≤—Ç–æ–ø–∞–∫—É–≤–∞–Ω–Ω—è (autoboxing)**. –ü—Ä–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Stream<User>` –≤ –ø–æ—Ç—ñ–∫ –≤—ñ–∫—É, `mapToInt` –æ–¥—Ä–∞–∑—É —Å—Ç–≤–æ—Ä—é—î `IntStream`, —â–æ –ø—Ä–∞—Ü—é—î –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏ `int`.
>     * –ó–≤–∏—á–∞–π–Ω–∏–π `map` —Å—Ç–≤–æ—Ä–∏–≤ –±–∏ `Stream<Integer>`, "–∑–∞–≥–æ—Ä—Ç–∞—é—á–∏" –∫–æ–∂–µ–Ω `int` –≤ –æ–±'—î–∫—Ç `Integer`, —â–æ —Å—Ç–≤–æ—Ä—é—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø–∞–º'—è—Ç—å —Ç–∞ –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è.
>
> 2. **–î–æ—Å—Ç—É–ø –¥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤:**
>     * –ü—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ—Ç–æ–∫–∏ (`IntStream`, `LongStream`, `DoubleStream`) –º–∞—é—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —Ç–∞ –¥—É–∂–µ –∑—Ä—É—á–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å, —è–∫–∏—Ö –Ω–µ–º–∞—î —É –∑–≤–∏—á–∞–π–Ω–æ–º—É `Stream<T>`.
>     * **–ü—Ä–∏–∫–ª–∞–¥–∏:** `sum()`, `average()`, `summaryStatistics()`, `min()`, `max()`.
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –º–∞–ø–ø–µ—Ä—ñ–≤ —î –æ–±–æ–≤'—è–∑–∫–æ–≤–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –æ–±—Å—è–≥–∞–º–∏ —á–∏—Å–ª–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –≤–∏–≥–æ–¥–∏ –≤—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ ‚Äî —è–∫ –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —à–≤–∏–¥–∫–æ—Å—Ç—ñ, —Ç–∞–∫ —ñ –∑—Ä—É—á–Ω–æ—Å—Ç—ñ API.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥, –¥–µ `mapToInt()` —î –∫—Ä–∞—â–∏–º –≤–∏–±–æ—Ä–æ–º, –Ω—ñ–∂ `map()`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:** –£ –Ω–∞—Å —î —Å–ø–∏—Å–æ–∫ –æ–±'—î–∫—Ç—ñ–≤ `Product`, —ñ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—á–∏—Å–ª–∏—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤ –Ω–∞ —Å–∫–ª–∞–¥—ñ (—Å—É–º—É –ø–æ–ª—ñ–≤ `quantity`).
>
> **–í–∞—Ä—ñ–∞–Ω—Ç –∑ `map()` (–ø–æ–≥–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥):**
>
> ```java
> List<Product> products = ...;
> int totalQuantity = products.stream()
>     .map(Product::getQuantity) // –°—Ç–≤–æ—Ä—é—î Stream<Integer>
>     .reduce(0, Integer::sum);    // –ü–æ—Ç—Ä–µ–±—É—î reduce –¥–ª—è —Å—É–º—É–≤–∞–Ω–Ω—è, unboxing
> ```
>
> –¢—É—Ç –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –±–∞–≥–∞—Ç–æ –∑–∞–π–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ `Integer` —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ–Ω—à –æ—á–µ–≤–∏–¥–Ω–∏–π `reduce` –¥–ª—è –ø—ñ–¥—Å—É–º–æ–≤—É–≤–∞–Ω–Ω—è.
>
> **–í–∞—Ä—ñ–∞–Ω—Ç –∑ `mapToInt()` (—Ö–æ—Ä–æ—à–∏–π –ø—ñ–¥—Ö—ñ–¥):**
>
> ```java
> int totalQuantity = products.stream()
>     .mapToInt(Product::getQuantity) // –°—Ç–≤–æ—Ä—é—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π IntStream
>     .sum();                           // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ—Ç–æ–¥ sum()
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏ –¥—Ä—É–≥–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É:**
>
> * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—à–µ:** –ù–µ–º–∞—î boxing/unboxing.
> * **–ß–∏—Å—Ç—ñ—à–µ —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—à–µ:** `sum()` —á—ñ—Ç–∫–æ –≤–∏—Ä–∞–∂–∞—î –Ω–∞–º—ñ—Ä.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ –≤–º—ñ–Ω–Ω—è –æ–±–∏—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —á–∏ –¥—É–º–∞—î –∫–∞–Ω–¥–∏–¥–∞—Ç –ø—Ä–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `IntStream`) –Ω–∞–∑–∞–¥ –≤ –æ–±'—î–∫—Ç–Ω–∏–π (`Stream<T>`)?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ—Å–Ω—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó:
>
> 1. **`.boxed()`:**
>     * –¶–µ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±. –í—ñ–Ω –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –Ω–∞ –ø–æ—Ç—ñ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤-–æ–±–≥–æ—Ä—Ç–æ–∫.
>     * `IntStream` -> `Stream<Integer>`
>     * `LongStream` -> `Stream<Long>`
>     * `DoubleStream` -> `Stream<Double>`
>     –¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –≤–∏–∫–æ–Ω—É—î boxing –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞.
>
> 2. **`.mapToObj(IntFunction<U> mapper)`:**
>     * –¶–µ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–π –º–µ—Ç–æ–¥. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–∂–µ–Ω –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ **–æ–±'—î–∫—Ç –±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É**.
>     * –í—ñ–Ω –ø—Ä–∏–π–º–∞—î —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î —Ü–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è.
>
> **–ö–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
>
> * –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `boxed()`, —è–∫—â–æ –≤–∞–º –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ø–æ—Ç—ñ–∫ –æ–±'—î–∫—Ç—ñ–≤-–æ–±–≥–æ—Ä—Ç–æ–∫.
> * –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `mapToObj()`, —è–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω—à—ñ –æ–±'—î–∫—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å (–Ω–∞–ø—Ä., —Å—Ç–≤–æ—Ä–∏—Ç–∏ `List<User>` –∑ `IntStream`'—É ID).

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
// boxed(): IntStream -> Stream<Integer>
List<Integer> list = IntStream.range(1, 4).boxed().collect(Collectors.toList());

// mapToObj(): IntStream -> Stream<String>
List<String> strings = IntStream.range(1, 4)
                                .mapToObj(i -> "Number: " + i)
                                .collect(Collectors.toList());
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª—É –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω—å –º—ñ–∂ –æ–±'—î–∫—Ç–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –ø—Ä–∏–π–º–∞—é—Ç—å –º–µ—Ç–æ–¥–∏ `mapToInt`, `mapToLong` —Ç–∞ `mapToDouble`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–æ–Ω–∏ –ø—Ä–∏–π–º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `Function`, —É —è–∫–∏—Ö –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–∏–º—ñ—Ç–∏–≤:
>
> * **`mapToInt(ToIntFunction<? super T> mapper)`**:
>   * `ToIntFunction<T>` –º–∞—î –º–µ—Ç–æ–¥: `int applyAsInt(T value)`
>
> * **`mapToLong(ToLongFunction<? super T> mapper)`**:
>   * `ToLongFunction<T>` –º–∞—î –º–µ—Ç–æ–¥: `long applyAsLong(T value)`
>
> * **`mapToDouble(ToDoubleFunction<? super T> mapper)`**:
>   * `ToDoubleFunction<T>` –º–∞—î –º–µ—Ç–æ–¥: `double applyAsDouble(T value)`
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü–∏—Ö —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —ñ —î —Ç–∏–º –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º, —â–æ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ boxing'—É, –æ—Å–∫—ñ–ª—å–∫–∏ —ó—Ö–Ω—ñ –º–µ—Ç–æ–¥–∏ `applyAs...` –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Ç–∏–ø–∏.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∑ —è–≤–Ω–∏–º –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è–º:**

```java
List<String> list = List.of("a", "bb", "ccc");

// –Ø–≤–Ω–æ —Å—Ç–≤–æ—Ä—é—î–º–æ ToIntFunction
ToIntFunction<String> lengthFunction = s -> s.length();

IntStream intStream = list.stream().mapToInt(lengthFunction);
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è `java.util.function` —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è, —è–∫ —Ç–∏–ø–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É –º–µ—Ç–æ–¥—ñ–≤ Stream API.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î `Stream<String>`, –¥–µ –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ ‚Äî —Ü–µ —á–∏—Å–ª–æ ("1", "2", "3"). –Ø–∫ –Ω–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ –∑–Ω–∞–π—Ç–∏ —ó—Ö —Å—É–º—É? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º —Å–ø–æ—Å–æ–±–æ–º –±—É–¥–µ **–ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ `Stream<String>` –Ω–∞ `IntStream`, –∞ –ø–æ—Ç—ñ–º –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –Ω–∞ –Ω—å–æ–º—É `.sum()`**.
>
> **–õ–∞–Ω—Ü—é–∂–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π:**
>
> 1. –ü–æ—á–∏–Ω–∞—î–º–æ –∑ `Stream<String>`.
> 2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `mapToInt(Integer::parseInt)`. –¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è —Ä–æ–±–∏—Ç—å –¥–≤—ñ —Ä–µ—á—ñ:
>     –∞) –í–æ–Ω–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω `String` –Ω–∞ `int` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Integer.parseInt`.
>     –±) –í–æ–Ω–∞ —Å—Ç–≤–æ—Ä—é—î –Ω–∞ –≤–∏—Ö–æ–¥—ñ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π `IntStream`.
> 3. –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é `.sum()` –Ω–∞ `IntStream`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
Stream<String> numberStrings = Stream.of("10", "20", "30");

int sum = numberStrings.mapToInt(Integer::parseInt)
                       .sum();

System.out.println(sum); // 60
```

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –∑–Ω–∞—á–Ω–æ –∫—Ä–∞—â–∏–π, –Ω—ñ–∂, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `map(Integer::parseInt)` –∑ –ø–æ–¥–∞–ª—å—à–∏–º `reduce(0, Integer::sum)`, –æ—Å–∫—ñ–ª—å–∫–∏ —É–Ω–∏–∫–∞—î boxing'—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å —Å–∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –∑–∞–¥–∞—á—ñ –Ω–∞–π–±—ñ–ª—å—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º —à–ª—è—Ö–æ–º.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –æ–ø–µ—Ä–∞—Ü—ñ—è `flatMapToInt`? –ß–∏–º –≤–æ–Ω–∞ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `mapToInt`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `flatMapToInt` ‚Äî —Ü–µ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è —ñ–¥–µ–π `flatMap` —Ç–∞ `mapToInt`.
>
> * **`mapToInt`**: –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î **–æ–¥–∏–Ω –æ–±'—î–∫—Ç** –Ω–∞ **–æ–¥–∏–Ω `int`**. (`one-to-one`).
>
> * **`flatMapToInt(Function<T, IntStream> mapper)`**:
>   * **–©–æ —Ä–æ–±–∏—Ç—å:** –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î **–æ–¥–∏–Ω –æ–±'—î–∫—Ç** –Ω–∞ **–ø–æ—Ç—ñ–∫ `int`'—ñ–≤ (`IntStream`)** –∑ –Ω—É–ª—è, –æ–¥–Ω–æ–≥–æ –∞–±–æ –±—ñ–ª—å—à–µ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (`one-to-many`).
>   * –ü–æ—Ç—ñ–º –≤–æ–Ω–∞ "—Å–ø–ª—é—â—É—î" –≤—Å—ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ `IntStream`'–∏ –≤ –æ–¥–∏–Ω –≤–µ–ª–∏–∫–∏–π, p≈Çaski `IntStream`.
>
> **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
> –ö–æ–ª–∏ –∫–æ–∂–µ–Ω –æ–±'—î–∫—Ç –≤–∞—à–æ–≥–æ –ø–æ—Ç–æ–∫—É –º—ñ—Å—Ç–∏—Ç—å –∫–æ–ª–µ–∫—Ü—ñ—é –∞–±–æ –º–∞—Å–∏–≤ —á–∏—Å–µ–ª, —ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ —î–¥–∏–Ω–∏–π –ø–æ—Ç—ñ–∫ —É—Å—ñ—Ö —Ü–∏—Ö —á–∏—Å–µ–ª.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

–£ –Ω–∞—Å —î —Å–ø–∏—Å–æ–∫ "–∫–æ—Ä–æ–±–æ–∫", –∫–æ–∂–Ω–∞ –∑ —è–∫–∏—Ö –º—ñ—Å—Ç–∏—Ç—å –º–∞—Å–∏–≤ `int`'—ñ–≤.

```java
class Box {
    int[] numbers;
    // getter
}
List<Box> boxes = ...;

// –û—Ç—Ä–∏–º—É—î–º–æ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫ —É—Å—ñ—Ö —á–∏—Å–µ–ª –∑ —É—Å—ñ—Ö –∫–æ—Ä–æ–±–æ–∫
IntStream allNumbers = boxes.stream()
                            .flatMapToInt(box -> Arrays.stream(box.getNumbers()));
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è `flatMap` —Ç–∞ –π–æ–≥–æ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ–π. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–∏—Ö —É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É —Å—Ç–∏–ª—ñ.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–¥: `stream.map(MyObject::getIntValue).sum()`. –ß–æ–º—É —Ü–µ–π –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è —ñ —è–∫ –π–æ–≥–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –ø—Ä–∏—á–∏–Ω:
>
> 1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø –ø–æ—Ç–æ–∫—É:** `stream.map(MyObject::getIntValue)` –ø–æ–≤–µ—Ä–Ω–µ `Stream<Integer>` (–ø–æ—Ç—ñ–∫ –æ–±'—î–∫—Ç—ñ–≤), –∞ –Ω–µ `IntStream` (–ø–æ—Ç—ñ–∫ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤).
> 2. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–µ—Ç–æ–¥—É `sum()`:** –ú–µ—Ç–æ–¥ `.sum()` —î –ª–∏—à–µ —É **–ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö** (`IntStream`, `LongStream`, `DoubleStream`). –ó–≤–∏—á–∞–π–Ω–∏–π `Stream<T>` —Ç–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥—É –Ω–µ –º–∞—î.
>
> **–Ø–∫ –π–æ–≥–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏:**
> –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ `map()` –Ω–∞ **`mapToInt()`**. –¶–µ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –≤–∏—Ä—ñ—à–∏—Ç—å –æ–±–∏–¥–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏: —Å—Ç–≤–æ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø –ø–æ—Ç–æ–∫—É (`IntStream`) —ñ –Ω–∞–¥–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ –º–µ—Ç–æ–¥—É `sum()`.

#### **üìù –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –∫–æ–¥:**

```java
int sum = stream.mapToInt(MyObject::getIntValue).sum();
```

–¶—è –ø–æ–º–∏–ª–∫–∞ —î –¥—É–∂–µ —Ç–∏–ø–æ–≤–æ—é –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤, —è–∫—ñ —â–µ –Ω–µ —Ä–æ–∑—Ä—ñ–∑–Ω—è—é—Ç—å `map` —Ç–∞ `mapToInt`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–£–≤–∞–∂–Ω—ñ—Å—Ç—å —Ç–∞ —Ç–æ—á–Ω–µ –∑–Ω–∞–Ω–Ω—è API. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫—ñ –º–µ—Ç–æ–¥–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –¥–ª—è —è–∫–∏—Ö —Ç–∏–ø—ñ–≤ –ø–æ—Ç–æ–∫—ñ–≤.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É —Å—Ç–≤–æ—Ä–∏—Ç–∏ `Map`, –¥–µ –∫–ª—é—á ‚Äî —Ü–µ —á–∏—Å–ª–æ, –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –π–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–∫—ñ–ª—å–∫–∏ `collect` —î –º–µ—Ç–æ–¥–æ–º `Stream<T>`, –∞ –Ω–µ `IntStream`, –Ω–∞–º —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ **–ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ `IntStream` –Ω–∞–∑–∞–¥ –≤ –æ–±'—î–∫—Ç–Ω–∏–π –ø–æ—Ç—ñ–∫** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **`.boxed()`**.
>
> **–õ–∞–Ω—Ü—é–∂–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π:**
>
> 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ `IntStream` (–Ω–∞–ø—Ä., –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `IntStream.rangeClosed`).
> 2. –í–∏–∫–ª–∏–∫–∞—Ç–∏ `.boxed()`, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ `Stream<Integer>`.
> 3. –¢–µ–ø–µ—Ä –Ω–∞ `Stream<Integer>` –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `collect(Collectors.toMap(...))`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
Map<Integer, Integer> numberToSquareMap = IntStream.rangeClosed(1, 5) // 1. –°—Ç–≤–æ—Ä—é—î–º–æ IntStream
    .boxed() // 2. –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ IntStream –Ω–∞ Stream<Integer>
    .collect(Collectors.toMap( // 3. –ó–±–∏—Ä–∞—î–º–æ –≤ Map
        key -> key,          // –ö–ª—é—á - —Å–∞–º–µ —á–∏—Å–ª–æ
        value -> value * value // –ó–Ω–∞—á–µ–Ω–Ω—è - –π–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç
    ));

System.out.println(numberToSquareMap); // {1=1, 2=4, 3=9, 4=16, 5=25}
```

–¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –¥–ª—è –∑–±–æ—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —É —Å–∫–ª–∞–¥–Ω—ñ—à—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ –æ–±–∏–¥–≤–∞ –±–æ–∫–∏ (`mapToInt`, –∞ –ø–æ—Ç—ñ–º `boxed`) –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –∑–∞–≤–¥–∞–Ω—å –∑ –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥, –¥–µ –æ–ø–µ—Ä–∞—Ü—ñ—è `mapToObj` —î –∫–æ—Ä–∏—Å–Ω–æ—é. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`mapToObj`** ‚Äî —Ü–µ –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É (`IntStream`, `LongStream`, `DoubleStream`), —è–∫–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ **–æ–±'—î–∫—Ç** –±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É.
>
> –í–æ–Ω–∞ –∫–æ—Ä–∏—Å–Ω–∞, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±'—î–∫—Ç–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫ ID –∞–±–æ —ñ–Ω–¥–µ–∫—Å).
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:** –£ –Ω–∞—Å —î –¥—ñ–∞–ø–∞–∑–æ–Ω ID –≤—ñ–¥ 1 –¥–æ 3, —ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ ID –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±'—î–∫—Ç `User`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
import java.util.stream.IntStream;
import java.util.stream.Collectors;

class User {
    private final int id;
    public User(int id) { this.id = id; }
    // ...
}

public class MapToObjExample {
    public static void main(String[] args) {
        List<User> users = IntStream.rangeClosed(1, 3)
            .mapToObj(id -> new User(id)) // –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–∂–µ–Ω int –Ω–∞ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç User
            // –ê–±–æ —â–µ –∫–æ—Ä–æ—Ç—à–µ: .mapToObj(User::new)
            .collect(Collectors.toList());
        
        // –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –æ—Ç—Ä–∏–º–∞—î–º–æ List<User>
    }
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ —Å–ø–µ–∫—Ç—Ä—É –æ–ø–µ—Ä–∞—Ü—ñ–π –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è, –≤–∫–ª—é—á–∞—é—á–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –≤—ñ–¥ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ –¥–æ –æ–±'—î–∫—Ç—ñ–≤ –¥–ª—è —Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –∑–∞–≤–¥–∞–Ω—å, –Ω—ñ–∂ –ø—Ä–æ—Å—Ç–æ `boxing`.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ `summaryStatistics()` –Ω–∞ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –æ–ø—Ç–∏–º—ñ–∑—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º `min`, `max`, `sum` –æ–∫—Ä–µ–º–æ –Ω–∞ `Stream<Integer>`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `summaryStatistics()` –æ–ø—Ç–∏–º—ñ–∑—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —Ç–æ–º—É —â–æ –≤–æ–Ω–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ **–∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö—ñ–¥ –ø–æ –ø–æ—Ç–æ–∫—É**.
>
> **–ü—ñ–¥—Ö—ñ–¥ –∑ `Stream<Integer>` (–¥—É–∂–µ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π):**
>
> ```java
> Optional<Integer> min = stream.min(Comparator.naturalOrder());
> Optional<Integer> max = stream.max(Comparator.naturalOrder());
> // –Ü —Ç.–¥.
> ```
>
> –¢—É—Ç —î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: `min`, `max` ‚Äî —Ü–µ **—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó**. –ü—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `min()`, –ø–æ—Ç—ñ–∫ —Å—Ç–∞—î "—Å–ø–æ–∂–∏—Ç–∏–º". –©–æ–± –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `max()`, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **—Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫** –∑ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞. –û—Ç–∂–µ, –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è 5 –º–µ—Ç—Ä–∏–∫ –≤–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è 5 —Ä–∞–∑—ñ–≤ –ø—Ä–æ–π—Ç–∏ –ø–æ –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö.
>
> **–ü—ñ–¥—Ö—ñ–¥ –∑ `summaryStatistics()` –Ω–∞ `IntStream`:**
>
> ```java
> IntSummaryStatistics stats = intStream.summaryStatistics();
> ```
>
> –¶–µ–π –º–µ—Ç–æ–¥ —î —î–¥–∏–Ω–æ—é **—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é**. –í—ñ–Ω —Å—Ç–≤–æ—Ä—é—î —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç-–∞–∫—É–º—É–ª—è—Ç–æ—Ä (`IntSummaryStatistics`), —è–∫–∏–π —ñ—Ç–µ—Ä—É—î—Ç—å—Å—è –ø–æ –ø–æ—Ç–æ–∫—É –ª–∏—à–µ **–æ–¥–∏–Ω —Ä–∞–∑**, —ñ –ø—ñ–¥ —á–∞—Å —Ü—ñ—î—ó —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–Ω–æ–≤–ª—é—î —Å–≤–æ—ó –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏ –¥–ª—è `count`, `sum`, `min` —Ç–∞ `max`.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `summaryStatistics` —î –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑—Ä—É—á–Ω—ñ—à–∏–º, –∞ –π –Ω–∞ –ø–æ—Ä—è–¥–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—à–∏–º, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –¥–∞–Ω–∏—Ö, —è–∫—ñ –¥–æ—Ä–æ–≥–æ –æ–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –±–∞–≥–∞—Ç–æ —Ä–∞–∑—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –ø–æ–≤—Ç–æ—Ä–Ω–µ –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ –ø–æ—Ç–æ–∫—É —î –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º, —ñ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—é—Ç—å —Ü—å–æ–≥–æ —É–Ω–∏–∫–Ω—É—Ç–∏.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ `optional`-—Ç–∏–ø–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö, —ñ —á–∏–º –≤–æ–Ω–∏ –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è –≤—ñ–¥ `Optional<T>`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —ñ—Å–Ω—É—é—Ç—å —Å–≤–æ—ó —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ `optional`-–∫–ª–∞—Å–∏:
>
> * **`OptionalInt`** (–¥–ª—è `int`)
> * **`OptionalLong`** (–¥–ª—è `long`)
> * **`OptionalDouble`** (–¥–ª—è `double`)
>
> **–ß–∏–º –≤–æ–Ω–∏ –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è –≤—ñ–¥ `Optional<T>`:**
>
> –ì–æ–ª–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å ‚Äî –≤–æ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è —è–∫ **–ø—Ä–∏–º—ñ—Ç–∏–≤**, –∞ –Ω–µ —è–∫ –æ–±'—î–∫—Ç-–æ–±–≥–æ—Ä—Ç–∫—É.
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:**
>
> * **–£–Ω–∏–∫–Ω–µ–Ω–Ω—è boxing'—É:** –¶–µ —ó—Ö–Ω—è –≥–æ–ª–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞. `OptionalInt` –∑–±–µ—Ä—ñ–≥–∞—î `int` –Ω–∞–ø—Ä—è–º—É, —Ç–æ–¥—ñ —è–∫ `Optional<Integer>` –∑–±–µ—Ä—ñ–≥–∞–≤ –±–∏ –æ–±'—î–∫—Ç `Integer`, —â–æ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–æ –± –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏.
>
> **–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ API:**
> –ß–µ—Ä–µ–∑ —Ç–µ, —â–æ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏, —ó—Ö–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—é—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –Ω–∞–∑–≤–∏:
>
> * `getAsInt()`, `getAsLong()`, `getAsDouble()` –∑–∞–º—ñ—Å—Ç—å `get()`.
> * `orElse(int other)` –∑–∞–º—ñ—Å—Ç—å `orElse(T other)`.
>
> –í–æ–Ω–∏ –±—É–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∑ —Ç—ñ—î—ó –∂ –ø—Ä–∏—á–∏–Ω–∏, —â–æ –π –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ—Ç–æ–∫–∏ ‚Äî –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–µ—Ç–∞–ª—å–Ω—ñ –∑–Ω–∞–Ω–Ω—è Java API —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è, —è–∫ —ñ–¥–µ–æ–ª–æ–≥—ñ—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø–æ—à–∏—Ä—é—î—Ç—å—Å—è –Ω–µ —Ç—ñ–ª—å–∫–∏ –Ω–∞ —Å—Ç—Ä—ñ–º–∏, –∞ –π –Ω–∞ `Optional`-—Ç–∏–ø–∏.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–µ `mapToInt` –∫–∏–Ω—É—Ç–∏ `NullPointerException`? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ –∫–æ–ª–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–µ.**
>
> **`mapToInt`** —Å–∞–º–∞ –ø–æ —Å–æ–±—ñ –Ω–µ –∫–∏–Ω–µ `NPE`, –∞–ª–µ –≤–∏–Ω—è—Ç–æ–∫ –º–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ **–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—É**, —è–∫–∏–π –≤–∏ —ó–π –ø–µ—Ä–µ–¥–∞–ª–∏.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
> –£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î `Stream<User>`, —ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –≤—ñ–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
>
> ```java
> stream.mapToInt(User::getAge)
> ```
>
> **`NullPointerException` –º–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏, —è–∫—â–æ:**
>
> 1. –°–∞–º –ø–æ—Ç—ñ–∫ `stream` –º—ñ—Å—Ç–∏—Ç—å **`null`-–µ–ª–µ–º–µ–Ω—Ç**. –ö–æ–ª–∏ `mapToInt` —Å–ø—Ä–æ–±—É—î –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `User::getAge` (—â–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–æ `user -> user.getAge()`) –Ω–∞ `null`-–ø–æ—Å–∏–ª–∞–Ω–Ω—ñ `user`, —Ü–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `NPE`.
> 2. –ú–µ—Ç–æ–¥, –Ω–∞ —è–∫–∏–π –≤–∏ –ø–æ—Å–∏–ª–∞—î—Ç–µ—Å—å, –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ `NPE`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ `getAge()` –ø–æ–≤–µ—Ä—Ç–∞—î `Integer`, –∞ –Ω–µ `int`, —ñ –¥–ª—è —è–∫–æ–≥–æ—Å—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ü–µ –ø–æ–ª–µ —î `null`. –°–ø—Ä–æ–±–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ unboxing'—É** `null` –≤ `int` –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `NPE`.
>
> **–Ø–∫ —É–Ω–∏–∫–Ω—É—Ç–∏:**
>
> –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –ø—Ä–æ–º—ñ–∂–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é **`filter` –ø–µ—Ä–µ–¥ `mapToInt`**, —â–æ–± –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ `null`-–µ–ª–µ–º–µ–Ω—Ç–∏.
>
> ```java
> stream.filter(Objects::nonNull) // –§—ñ–ª—å—Ç—Ä—É—î–º–æ null-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
>       .mapToInt(User::getAge)
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–í–º—ñ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–¥ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö `NullPointerException` —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–∏—Å–∞—Ç–∏ "–∑–∞—Ö–∏—Å–Ω–∏–π" (defensive) –∫–æ–¥, –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –ø–æ—Ç–æ–∫–∞–º–∏, —â–æ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ `null`.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–¥: `Optional<Integer> sum = stream.mapToInt(MyObject::getValue).sum();`. –©–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫ —ñ —è–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢—É—Ç —î **–ø–æ–º–∏–ª–∫–∞ —Ç–∏–ø—ñ–≤**.
>
> 1. `stream.mapToInt(MyObject::getValue)` –ø–æ–≤–µ—Ä—Ç–∞—î **`IntStream`**.
> 2. –ú–µ—Ç–æ–¥ `.sum()` –Ω–∞ `IntStream` —î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é —ñ –ø–æ–≤–µ—Ä—Ç–∞—î **–ø—Ä–∏–º—ñ—Ç–∏–≤ `int`**, –∞ –Ω–µ `Optional<Integer>`.
>
> –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–¥–∞—Å—Ç—å –ø–æ–º–∏–ª–∫—É, —Ç–æ–º—É —â–æ —Ç–∏–ø `int` –Ω–µ –º–æ–∂–Ω–∞ –ø—Ä–∏—Å–≤–æ—ó—Ç–∏ –∑–º—ñ–Ω–Ω—ñ–π —Ç–∏–ø—É `Optional<Integer>`.
>
> **–ß–æ–º—É `sum()` –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î `Optional`?**
>
> –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `min()`, `max()`, `average()`, –¥–ª—è –æ–ø–µ—Ä–∞—Ü—ñ—ó `sum()` —ñ—Å–Ω—É—î –ª–æ–≥—ñ—á–Ω–µ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ –ø–æ—Ç–æ–∫—É ‚Äî **–Ω—É–ª—å (0)**. –¢–æ–º—É –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Optional` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–ø–∞–¥–∫—É –ø–æ—Ä–æ–∂–Ω—å–æ–≥–æ –ø–æ—Ç–æ–∫—É.
>
> **–Ø–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–¥:**
>
> –ó–º—ñ–Ω–Ω–∞, —â–æ –ø—Ä–∏–π–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ —Ç–∏–ø `int`.
>
> ```java
> int sum = stream.mapToInt(MyObject::getValue).sum();
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ —É–≤–∞–∂–Ω–µ –∑–Ω–∞–Ω–Ω—è API —Ç–∞ —Ç–∏–ø—ñ–≤, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –∑ –ø—ñ–¥—Å—Ç—É–ø–æ–º, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∑–Ω–∞—î –∫–∞–Ω–¥–∏–¥–∞—Ç, —è–∫—ñ —Å–∞–º–µ –º–µ—Ç–æ–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å `Optional`, –∞ —è–∫—ñ ‚Äî –Ω—ñ.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–æ—Ç—ñ–∫ –§—ñ–±–æ–Ω–∞—á—á—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Stream.iterate()` —ñ –∑–Ω–∞–π–¥—ñ—Ç—å —Å—É–º—É –ø–µ—Ä—à–∏—Ö 10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. –Ø–∫ —É —Ü—å–æ–º—É –¥–æ–ø–æ–º–æ–∂—É—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ—Ç–æ–∫–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –§—ñ–±–æ–Ω–∞—á—á—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ **—Å—Ç–∞–Ω**, —â–æ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –ø–∞—Ä–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —á–∏—Å–µ–ª. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `Stream.iterate` —É Java 8 –Ω–µ –¥—É–∂–µ –¥–æ–±—Ä–µ –¥–ª—è —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å, —Ç–æ–º—É –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç–∞–Ω—É.
>
> –ê–ª–µ —â–æ–± –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è, –º–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ `Stream` –∑ –ø–∞—Ä (–º–∞—Å–∏–≤—ñ–≤), –∞ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –π–æ–≥–æ –Ω–∞ `IntStream`.
>
> **–ö—Ä–æ–∫–∏:**
>
> 1. `Stream.iterate` –±—É–¥–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ `Stream<int[]>`, –¥–µ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç ‚Äî —Ü–µ –ø–∞—Ä–∞ `[f_n, f_{n+1}]`.
> 2. `limit(10)` –æ–±–º–µ–∂—É—î–º–æ –ø–æ—Ç—ñ–∫ –ø–µ—Ä—à–∏–º–∏ 10 –ø–∞—Ä–∞–º–∏.
> 3. `mapToInt` –≤–∏—Ç—è–≥—É—î–º–æ –ø–µ—Ä—à–µ —á–∏—Å–ª–æ –∑ –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –ø–µ—Ä—à–∏—Ö 10 —á–∏—Å–µ–ª –§—ñ–±–æ–Ω–∞—á—á—ñ.
> 4. `sum` –æ–±—á–∏—Å–ª—é—î —Å—É–º—É.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
public class FibonacciSum {
    public static void main(String[] args) {
        // –ì–µ–Ω–µ—Ä—É—î–º–æ –ø–æ—Ç—ñ–∫ –ø–∞—Ä (f_n, f_{n+1})
        Stream<int[]> fibonacciPairs = Stream.iterate(
            new int[]{0, 1},
            pair -> new int[]{pair[1], pair[0] + pair[1]}
        );
        
        int sum = fibonacciPairs
            .limit(10) // –ë–µ—Ä–µ–º–æ –ø–µ—Ä—à—ñ 10 –ø–∞—Ä
            .mapToInt(pair -> pair[0]) // –í–∏—Ç—è–≥—É—î–º–æ –ø–µ—Ä—à–µ —á–∏—Å–ª–æ –∑ –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏
            .sum(); // –û–±—á–∏—Å–ª—é—î–º–æ —Å—É–º—É

        System.out.println("–°—É–º–∞ –ø–µ—Ä—à–∏—Ö 10 —á–∏—Å–µ–ª –§—ñ–±–æ–Ω–∞—á—á—ñ: " + sum); // 88 (0+1+1+2+3+5+8+13+21+34)
    }
}
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `mapToInt` —ñ `sum` —Ç—É—Ç —î –∫–ª—é—á–æ–≤–∏–º –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞ —á–∏—Å—Ç–æ–≥–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –ë–µ–∑ `mapToInt` –¥–æ–≤–µ–ª–æ—Å—è –± –ø–∏—Å–∞—Ç–∏ –±—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∏–π `reduce` –Ω–∞ `Stream<Integer>`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ, –Ω–µ—Ç—Ä–∏–≤—ñ–∞–ª—å–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º—ñ—á–Ω—ñ –∑–∞–¥–∞—á—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Stream API`, –∫–æ–º–±—ñ–Ω—É—é—á–∏ –æ–±'—î–∫—Ç–Ω—ñ —Ç–∞ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ—Ç–æ–∫–∏.*

* * *
