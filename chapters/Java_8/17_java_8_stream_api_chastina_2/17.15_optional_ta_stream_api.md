---
layout: default
title: "Optional —Ç–∞ Stream API"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 15
---

# Optional —Ç–∞ Stream API

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è `Optional` –∑ Stream API –¥–æ–∑–≤–æ–ª—è—î –æ–±'—î–¥–Ω–∞—Ç–∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ—Ç–æ–∫—ñ–≤ —ñ–∑ –±–µ–∑–ø–µ—á–Ω–æ—é —Ä–æ–±–æ—Ç–æ—é –∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏. –ó Java 9, `Optional` –º–∞—î –º–µ—Ç–æ–¥ `stream()`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–∏–º —è–∫ –∑ –ø–æ—Ç–æ–∫–æ–º –∑ 0 –∞–±–æ 1 –µ–ª–µ–º–µ–Ω—Ç–∞.

* –ø–æ–Ω—è—Ç—Ç—è: `Optional.stream()`, `Stream.ofNullable()` (–∑ Java 9), `flatMap(Optional::stream)`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `Optional.of("Alice").stream().collect(Collectors.toList())`, `Stream.ofNullable(null)`, `list.stream().flatMap(Optional::stream)`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –î–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–∞—Ç–∏ `NullPointerException` —Ç–∞ `if`-–ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ —É Stream-–ø–∞–π–ø–ª–∞–π–Ω–∞—Ö, —Ä–æ–±–∏—Ç—å –∫–æ–¥ —á–∏—Å—Ç—ñ—à–∏–º.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Stream —Ç–∞ Optional, `flatMap` –¥–ª—è "—Ä–æ–∑–ø–∞–∫–æ–≤–∫–∏".

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`Optional<T>`** ‚Äî —Ü–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–æ–±–≥–æ—Ä—Ç–∫–∞, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ **–º–æ–∂–µ –±—É—Ç–∏ –∞–±–æ –Ω–µ –±—É—Ç–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º**. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–∞—Ç–∏ **`NullPointerException`** —ñ –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–¥ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–£—è–≤–∏ –∫–æ—Ä–æ–±–∫—É: —ñ–Ω–æ–¥—ñ –≤ –Ω—ñ–π —î —Ü—É–∫–µ—Ä–∫–∞ (–∑–Ω–∞—á–µ–Ω–Ω—è), –∞ —ñ–Ω–æ–¥—ñ ‚Äî –ø–æ—Ä–æ–∂–Ω—å–æ. –ê–ª–µ –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –ª—ñ–∑—Ç–∏ –≤ –Ω–µ—ó –Ω–∞–≤–ø–æ–º–∞—Ü–∫–∏ (—Ä–∏–∑–∏–∫ **`null`**), —Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—à —á–µ—Ä–µ–∑ –±–µ–∑–ø–µ—á–Ω–∏–π API

---

## üìä **–ü–æ–ø—É–ª—è—Ä–Ω—ñ –º–µ—Ç–æ–¥–∏ Optional:**

|           –ú–µ—Ç–æ–¥           |                        –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                         |
|:-------------------------:|:----------------------------------------------------------:|
|     **`isPresent()`**     |              –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è               |
| **`ifPresent(Consumer)`** |            –í–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏—Å—É—Ç–Ω—î            |
|      **`orElse(T)`**      |        –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∞–±–æ –¥–µ—Ñ–æ–ª—Ç, —è–∫—â–æ –ø–æ—Ä–æ–∂–Ω—ñ–π        |
| **`orElseGet(Supplier)`** |          –¢–µ —Å–∞–º–µ, –∞–ª–µ –¥–µ—Ñ–æ–ª—Ç –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –ª—ñ–Ω–∏–≤–æ           |
|    **`orElseThrow()`**    |           –ö–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—î           |
|    **`map(Function)`**    |            –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫—â–æ –≤–æ–Ω–æ —î            |
|  **`flatMap(Function)`**  |     –¢–µ —Å–∞–º–µ, –∞–ª–µ —è–∫—â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –∑–Ω–æ–≤—É **`Optional`**     |
|  **`filter(Predicate)`**  | –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ **`Optional.empty()`** —è–∫—â–æ —É–º–æ–≤–∞ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£ —Ç–µ–±–µ —î –∫–æ—Ä–æ–±–∫–∞ (**`Optional`**). –ü–µ—Ä—à –Ω—ñ–∂ —â–æ—Å—å –∑ –Ω–µ—ó –≤–∑—è—Ç–∏:

* –ü–µ—Ä–µ–≤—ñ—Ä—è—î—à, —á–∏ –≤–æ–Ω–∞ –Ω–µ –ø—É—Å—Ç–∞ (**`isPresent()`** / **`ifPresent()`**).
* –Ø–∫—â–æ –ø—É—Å—Ç–∞ ‚Äî –ø—ñ–¥—Å–æ–≤—É—î—à —ñ–Ω—à—É (**`orElse()`**).
* –Ø–∫—â–æ —î ‚Äî –º–æ–∂–µ—à —â–æ—Å—å —ñ–∑ —Ü–∏–º –∑—Ä–æ–±–∏—Ç–∏ (—á–µ—Ä–µ–∑ **`map()`** –∞–±–æ **`get()`** ‚Äî –∞–ª–µ **`get()`** –∫—Ä–∞—â–µ **–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏** –Ω–∞–ø—Ä—è–º—É).

üí° **`Optional`** ‚Äî —è–∫ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç –ø—Ä–æ—Ç–∏ **`null`**, –∞–ª–µ —è–∫—â–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–æ—Å–∏—Ç–∏ ‚Äî –Ω–µ –≤—Ä—è—Ç—É—î.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// ifPresent()
Optional<String> name = Optional.of("Alice");
name.ifPresent(n -> System.out.println("Hello, " + n)); // Hello, Alice
```

```java
// orElse()
String value = Optional.ofNullable(null).orElse("Default"); // "Default"
```

```java
// orElseThrow()
Optional<String> maybeName = Optional.ofNullable(null);
String name = maybeName.orElseThrow(() -> new IllegalArgumentException("No name"));
```

```java
// map() —ñ filter()
Optional<String> result = Optional.of(" stream ")
    .map(String::trim)
    .filter(s -> s.length() > 0); // Optional[stream]
```

```java
// –ß–µ–π–Ω—ñ–Ω–≥ –∑ flatMap
Optional<User> user = Optional.of(getUser());
Optional<String> email = user.flatMap(User::getEmail); // getEmail() –ø–æ–≤–µ—Ä—Ç–∞—î Optional
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|            `Optional<T>`             |           `Stream<T>`           |
|:------------------------------------:|:-------------------------------:|
|       –ú—ñ—Å—Ç–∏—Ç—å 0 –∞–±–æ 1 –∑–Ω–∞—á–µ–Ω–Ω—è       |  –ú–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –±–∞–≥–∞—Ç–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤  |
|        –ù–µ —ñ—Ç–µ—Ä—É—î—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É         | –õ–µ–≥–∫–æ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —Å—Ç—Ä—ñ–º–∏ |
|     **`map(), flatMap()`** —Å—Ö–æ–∂—ñ     |      –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∞       |
| –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É |   –ó–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ –∫–æ–ª–µ–∫—Ü—ñ–π    |

üí° –ß–∞—Å—Ç–æ –∑—É—Å—Ç—Ä—ñ—á–∞—é—Ç—å—Å—è —Ä–∞–∑–æ–º: **`findFirst()`** –ø–æ–≤–µ—Ä—Ç–∞—î **`Optional`**.

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ù–∞–≤—ñ—â–æ –≤–∑–∞–≥–∞–ª—ñ –ø–æ—Ç—Ä—ñ–±–µ–Ω Optional, —è–∫—â–æ —î null?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

**`Optional`** –∑–º—É—à—É—î –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞ —è–≤–Ω–æ –æ–±—Ä–æ–±–∏—Ç–∏ –º–æ–∂–ª–∏–≤—É –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ –∑–Ω–∏–∂—É—î —Ä–∏–∑–∏–∫ **`NullPointerException`**.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ orElse() —Ç–∞ orElseGet()?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* **`orElse()`** –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ–Ω—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∞—Ä–≥—É–º–µ–Ω—Ç—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è —î.
* **`orElseGet()`** –≤–∏–∫–æ–Ω—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ª–∏—à–µ —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—î (–ª—ñ–Ω–∏–≤–∞ –≤–µ—Ä—Å—ñ—è).

```java
Optional<String> opt = Optional.of("hi");
opt.orElse(getDefault());     // getDefault() –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è
opt.orElseGet(() -> getDefault()); // getDefault() –ù–ï –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è
```

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫–∞ –Ω–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ Optional?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* –£–Ω–∏–∫–∞—Ç–∏ **`get()`** –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`map(), flatMap(), orElse().`**
* –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –∞–±–æ –ø–æ–ª—è –∫–ª–∞—Å—ñ–≤ ‚Äî –ª–∏—à–µ —è–∫ **—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏** –º–µ—Ç–æ–¥—ñ–≤.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**‚ÄúOptional ‚Äî –∫—Ä–∞—â–µ, –Ω—ñ–∂ null. –ê–ª–µ –±–µ–∑ get()\!‚Äù**

–∞–±–æ

**‚ÄúifPresent, orElse ‚Äî –Ω–µ –∑–∞–≥–∏–Ω–µ—à —É NPE –ª—ñ—Å—ñ.‚Äù**
---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`Optional`** –¥–æ–∑–≤–æ–ª—è—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å –±–µ–∑ **`null`**.
* –ú–∞—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π API: **`map(), flatMap(), filter().`**
* –Ü–¥–µ–∞–ª—å–Ω–æ –ø–æ—î–¥–Ω—É—î—Ç—å—Å—è –∑—ñ —Å—Ç—Ä—ñ–º–∞–º–∏ (**`findFirst(), findAny()`**).
* –ë–µ–∑–ø–µ—á–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ null, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Official Java Docs ‚Äî Optional**](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html)
* [**Optional vs Null ‚Äî StackOverflow discussion**](https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type)
