---
layout: default
title: "–ü–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ –ø–æ Stream API"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 28
---

# –ü–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ –ø–æ Stream API

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –û–≥–ª—è–¥ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏—Ö –ø–∏—Ç–∞–Ω—å –Ω–∞ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö —Å–ø—ñ–≤–±–µ—Å—ñ–¥–∞—Ö –ø–æ Stream API, —â–æ –æ—Ö–æ–ø–ª—é—é—Ç—å –±–∞–∑–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó, –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, –æ–±—Ä–æ–±–∫—É –≤–∏–Ω—è—Ç–∫—ñ–≤, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ —Ç–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏.

* –ø–æ–Ω—è—Ç—Ç—è: `map()` vs `flatMap()`, Lazy Evaluation, `parallelStream()`, Checked Exceptions —É –ª—è–º–±–¥–∞—Ö, –í–ª–∞—Å–Ω—ñ `Collectors`, `reduce()` vs `collect()`, `peek()`, `shared mutable state`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `Stream.of(...).flatMap(Arrays::stream)`, `stream.peek(System.out::println)`, `stream.parallel().forEach(list::add)` (–ø—Ä–æ–±–ª–µ–º–Ω–æ).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ—è—Å–Ω–∏—Ç–∏ –∫–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ, —Ä–æ–∑—É–º—ñ–Ω–Ω—è lazy evaluation, —Ä–∏–∑–∏–∫–∏ `parallelStream()`, –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏, –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è, –ø—Ä–æ–±–ª–µ–º–Ω—ñ –º—ñ—Å—Ü—è.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

Stream API ‚Äî —Ü–µ —á–∞—Å—Ç–∏–Ω–∞ Java, —â–æ –Ω–∞–¥–∞—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –æ–±—Ä–æ–±–∫–∏ –∫–æ–ª–µ–∫—Ü—ñ–π –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π, —è–∫—ñ –º–æ–∂–Ω–∞ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏, —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ —Ç–∞ –∑–±–∏—Ä–∞—Ç–∏.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–ù–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ –≤—ñ–¥ —Ç–µ–±–µ —á–∞—Å—Ç–æ —á–µ–∫–∞—é—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ "–∑–Ω–∞—é —Å—Ç—Ä—ñ–º–∏", –∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ—è—Å–Ω–∏—Ç–∏, –∫–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, —è–∫ —É–Ω–∏–∫–∞—Ç–∏ –ø–æ–º–∏–ª–æ–∫ —ñ —è–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–¥. –í–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏ –¥–µ—Ç–∞–ª—ñ –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º.

---

## **üìä –ù–∞–π—á–∞—Å—Ç—ñ—à—ñ –ø–∏—Ç–∞–Ω–Ω—è —ñ —Ç–µ–º–∏ –Ω–∞ —ñ–Ω—Ç–µ—Ä–≤‚Äô—é:**

* **`map()`** vs **`flatMap()`** ‚Äî —Ä—ñ–∑–Ω–∏—Ü—è —ñ –ø—Ä–∏–∫–ª–∞–¥–∏
* **Lazy evaluation** ‚Äî —Å—Ç—Ä—ñ–º–∏ "–≤—ñ–¥–∫–ª–∞–¥–∞—é—Ç—å" –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –¥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó
* **`parallelStream()`** ‚Äî –∫–æ–ª–∏ –π–æ–≥–æ –¥—ñ–π—Å–Ω–æ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏
* –í–∏–Ω—è—Ç–∫–∏ (**`try-catch`**) —É –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑–∞—Ö
* –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ **`Collector`**
* **`reduce()`** vs **`collect()`**
* –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å: **boxing**, **statefulness**, **combiner**

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **`map()`** –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –µ–ª–µ–º–µ–Ω—Ç --> –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç
* **`flatMap()`** –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –µ–ª–µ–º–µ–Ω—Ç --> –∫—ñ–ª—å–∫–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (–ø–æ—Ç—ñ–∫), —ñ "—Å–ø–ª—é—â—É—î" —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```java
List<String> words = Arrays.asList("hello", "world");
words.stream()
     .map(s -> s.split(""))        // Stream<String[]>
     .flatMap(Arrays::stream)      // Stream<String>
     .distinct()
     .forEach(System.out::print); // h e l o w r d
```

* **Lazy evaluation**: –∂–æ–¥–Ω–∞ intermediate-–æ–ø–µ—Ä–∞—Ü—ñ—è (**`map`**, **`filter`**, —Ç–æ—â–æ) –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –±–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó (*
  *`collect`**, **`forEach`**, **`reduce`**...)
* **`parallelStream()`** ‚â† –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à–µ\! –í—ñ–Ω –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è:
  * –≤–µ–ª–∏–∫–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π
  * –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å
  * –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ side-effects

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// map vs flatMap
Stream.of("java", "stream")
      .map(s -> s.chars()) // Stream<IntStream>
      .forEach(System.out::println);

Stream.of("java", "stream")
      .flatMapToInt(String::chars) // IntStream
      .forEach(c -> System.out.print((char)c));
```

```java
// –û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ —É –ª—è–º–±–¥—ñ
list.stream()
    .map(item -> {
        try {
            return riskyOperation(item);
        } catch (Exception e) {
            return defaultValue;
        }
    })
    .forEach(System.out::println);
```

```java
// –í–ª–∞—Å–Ω–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä -- –∑–±–∏—Ä–∞–Ω–Ω—è –≤ —Ä—è–¥–æ–∫ —ñ–∑ –¥—É–∂–∫–∞–º–∏
Collector<String, ?, String> bracketedJoiner =
    Collector.of(
        () -> new StringBuilder("["),
        (sb, s) -> sb.append(s).append(","),
        (sb1, sb2) -> sb1.append(sb2),
        sb -> {
            if (sb.length() > 1) sb.setLength(sb.length() - 1); // remove last comma
            return sb.append("]").toString();
        }
    );
List.of("a", "b", "c").stream().collect(bracketedJoiner); // "[a,b,c]"
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|                 –¢–µ–º–∞                 |                             –ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ                             |
|:------------------------------------:|:---------------------------------------------------------------------------:|
|      **`map()` vs `flatMap()`**      |              map --> –æ–¥–∏–Ω-–¥–æ-–æ–¥–Ω–æ–≥–æ, flatMap --> –±–∞–≥–∞—Ç–æ-–¥–æ-–æ–¥–Ω–æ–≥–æ               |
|    **`reduce()` vs `collect()`**     | reduce ‚Äî —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è; collect ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥—å-—è–∫–æ—ó —Ñ–æ—Ä–º–∏ |
| **`stream()` vs `parallelStream()`** | stream ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞, parallelStream ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ —á–µ—Ä–µ–∑ ForkJoinPool |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**MAP-FLAT-TRY-PAR-COLLECT**

* **MAP** vs **FLAT** ‚Äî —Ä—ñ–∑–Ω–∏—Ü—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ–π
* **TRY** ‚Äî –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤
* **PAR** ‚Äî –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å ‚â† –∑–∞–≤–∂–¥–∏ –¥–æ–±—Ä–∞
* **COLLECT** ‚Äî –∑–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–≤–ª–∞—Å–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ —Ç–µ–∂)

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –†–æ–∑—É–º—ñ–Ω–Ω—è **`map()`** vs **`flatMap()`** ‚Äî –º–∞—Å—Ç-—Ö–µ–≤
* **`lazy evaluation`** –¥–æ–∑–≤–æ–ª—è—î —Å—Ç—Ä—ñ–º–∞–º –±—É—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º–∏
* **`parallelStream()`** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±–µ—Ä–µ–∂–Ω–æ
* –í–∏–Ω—è—Ç–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤—Ä—É—á–Ω—É —É —Å—Ç—Ä—ñ–º–∞—Ö
* –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –Ω–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
* –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Å—Ç—Ä—ñ–º—ñ–≤ –≤–∏–º–∞–≥–∞—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –æ–±–º–µ–∂–µ–Ω—å

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É –æ—Å–Ω–æ–≤–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `map()` —Ç–∞ `flatMap()`? –ù–∞–≤–µ–¥—ñ—Ç—å –∫–∞–Ω–æ–Ω—ñ—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥–∞—Ö –ø–æ `Stream API`. –û—Å–Ω–æ–≤–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —è–∫ –≤–æ–Ω–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏:
>
> * **`map()` (–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è "–æ–¥–∏–Ω-–≤-–æ–¥–∏–Ω"):**
>     –ü—Ä–∏–π–º–∞—î –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç —ñ –ø–æ–≤–µ—Ä—Ç–∞—î **–æ–¥–∏–Ω** –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç. –Ø–∫—â–æ –≤–∏ –∑–∞—Å—Ç–æ—Å—É—î—Ç–µ `map` –¥–æ –ø–æ—Ç–æ–∫—É, –¥–µ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —î –∫–æ–ª–µ–∫—Ü—ñ—î—é, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ—Ç—ñ–∫ –∫–æ–ª–µ–∫—Ü—ñ–π (`Stream<List<T>>`).
>
> * **`flatMap()` (–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è "–æ–¥–∏–Ω-–≤-–±–∞–≥–∞—Ç–æ"):**
>     –ü—Ä–∏–π–º–∞—î –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç —ñ –ø–æ–≤–µ—Ä—Ç–∞—î **–ø–æ—Ç—ñ–∫** –∑ –Ω—É–ª—è, –æ–¥–Ω–æ–≥–æ –∞–±–æ –±—ñ–ª—å—à–µ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. –ü–æ—Ç—ñ–º –≤—ñ–Ω **"—Å–ø–ª—é—â—É—î" (flattens)** –≤—Å—ñ —Ü—ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ –ø–æ—Ç–æ–∫–∏ –≤ –æ–¥–∏–Ω —î–¥–∏–Ω–∏–π –ø–æ—Ç—ñ–∫.
>
> `flatMap` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è "—Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è" –≤–∫–ª–∞–¥–µ–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î –∫—ñ–ª—å–∫–∞ –∫–æ—à–∏–∫—ñ–≤ –∑ —è–±–ª—É–∫–∞–º–∏.

* `map` –¥–∞—Å—Ç—å –≤–∞–º –ø–æ—Ç—ñ–∫ –∫–æ—à–∏–∫—ñ–≤ (`Stream<List<Apple>>`).
* `flatMap` "–≤–∏—Ç—Ä—É—Å–∏—Ç—å" —è–±–ª—É–∫–∞ –∑ –∫–æ–∂–Ω–æ–≥–æ –∫–æ—à–∏–∫–∞ —ñ –¥–∞—Å—Ç—å –≤–∞–º –æ–¥–∏–Ω –≤–µ–ª–∏–∫–∏–π –ø–æ—Ç—ñ–∫ —è–±–ª—É–∫ (`Stream<Apple>`).

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

–†–æ–∑–±–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ä–µ—á–µ–Ω—å –Ω–∞ —Å–ø–∏—Å–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Å–ª—ñ–≤.

```java
List<String> sentences = List.of("hello world", "java stream world");

List<String> uniqueWords = sentences.stream()
    // map(s -> s.split(" ")) -> —Å—Ç–≤–æ—Ä–∏–≤ –±–∏ Stream<String[]>
    .flatMap(sentence -> Arrays.stream(sentence.split(" "))) // "—Å–ø–ª—é—â—É—î" –¥–æ Stream<String>
    .distinct()
    .collect(Collectors.toList());

System.out.println(uniqueWords); // [hello, world, java, stream]
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è–º "–æ–¥–∏–Ω-–≤-–æ–¥–∏–Ω" —Ç–∞ "–æ–¥–∏–Ω-–≤-–±–∞–≥–∞—Ç–æ". –¶–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –ª—ñ–Ω–∏–≤–∞ –æ—Ü—ñ–Ω–∫–∞ (Lazy Evaluation) —ñ —á–æ–º—É –≤–æ–Ω–∞ —î –∫–ª—é—á–æ–≤–æ—é –ø–µ—Ä–µ–≤–∞–≥–æ—é `Stream API`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–õ–µ–¥–∞—á–∞ –æ—Ü—ñ–Ω–∫–∞** ‚Äî —Ü–µ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è, –ø—Ä–∏ —è–∫—ñ–π –æ–±—á–∏—Å–ª–µ–Ω–Ω—è **–ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π** (`filter`, `map` —Ç–æ—â–æ) –≤—ñ–¥–∫–ª–∞–¥–∞—é—Ç—å—Å—è –¥–æ –º–æ–º–µ–Ω—Ç—É –≤–∏–∫–ª–∏–∫—É **—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó** (`collect`, `forEach` —Ç–æ—â–æ).
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:**
>
> 1. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –£–Ω–∏–∫–∞—é—Ç—å—Å—è –∑–∞–π–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –Ø–∫—â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è —î `short-circuiting` (–Ω–∞–ø—Ä., `findFirst`), –æ–±—Ä–æ–±–∫–∞ –ø–æ—Ç–æ–∫—É –ø—Ä–∏–ø–∏–Ω–∏—Ç—å—Å—è, —è–∫ —Ç—ñ–ª—å–∫–∏ –±—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
> 2. **–û–±'—î–¥–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π (Fusion):** –ï–ª–µ–º–µ–Ω—Ç–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è "–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ", —Ç–æ–±—Ç–æ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤–µ—Å—å –ª–∞–Ω—Ü—é–∂–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑, –∞ –Ω–µ "–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ", –∫–æ–ª–∏ –∫–æ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ –≤—Å—ñ–π –∫–æ–ª–µ–∫—Ü—ñ—ó. –¶–µ –∑–º–µ–Ω—à—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Ç–µ—Ä–∞—Ü—ñ–π.
> 3. **–†–æ–±–æ—Ç–∞ –∑ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏:** –õ–µ–¥–∞—á—ñ—Å—Ç—å –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ –ø–æ—Ç–æ–∫–∏, –æ–±–º–µ–∂—É—é—á–∏ —ó—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `limit()` –∞–±–æ `takeWhile()`.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–ë–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó –∂–æ–¥–Ω–∞ –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ –≤–∑–∞–≥–∞–ª—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –ø—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –ª–∏—à–µ –±—É–¥—É—é—Ç—å "–ø–ª–∞–Ω", –∞ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ ‚Äî –∑–∞–ø—É—Å–∫–∞—é—Ç—å –π–æ–≥–æ. –¶–µ –æ—Å–Ω–æ–≤–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ `Stream API`.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ —Ç–∞–∫–µ `reduce()` —ñ —á–∏–º –≤—ñ–Ω –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `collect()`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û–±–∏–¥–≤—ñ —î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏, –∞–ª–µ –≤–æ–Ω–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.
>
> * **`reduce()`:**
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** "–ó–≥–æ—Ä–Ω—É—Ç–∏" –ø–æ—Ç—ñ–∫ –¥–æ **–æ–¥–Ω–æ–≥–æ-—î–¥–∏–Ω–æ–≥–æ** –∑–Ω–∞—á–µ–Ω–Ω—è (–Ω–∞–ø—Ä., `int`, `String`, `User`).
>   * **–Ø–∫ –ø—Ä–∞—Ü—é—î:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é-–∞–∫—É–º—É–ª—è—Ç–æ—Ä –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>   * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–∑–≤–∏—á–∞–π —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π.
>
> * **`collect()`:**
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ó—ñ–±—Ä–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Ç–æ–∫—É –≤ **–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (–Ω–∞–ø—Ä., `List`, `Set`, `Map`).
>   * **–Ø–∫ –ø—Ä–∞—Ü—é—î:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `Collector`, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—î, —è–∫ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –¥–æ–¥–∞–≤–∞—Ç–∏ –≤ –Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏ —Ç–∞ –æ–±'—î–¥–Ω—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.
>   * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú—É—Ç–∞–±–µ–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –∞–±–æ —Å–∫–ª–∞–¥–Ω–∏–π –æ–±'—î–∫—Ç.
>
> **–ö–æ—Ä–æ—Ç–∫–æ:** `reduce` ‚Äî –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –∞–≥—Ä–µ–≥–∞—Ü—ñ–π –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è. `collect` ‚Äî –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è –≤ —Å–∫–ª–∞–¥–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
// reduce: –∑–Ω–∞–π—Ç–∏ —Å—É–º—É
int sum = numbers.stream().reduce(0, Integer::sum);

// collect: –∑—ñ–±—Ä–∞—Ç–∏ –ø–∞—Ä–Ω—ñ —á–∏—Å–ª–∞ –≤ —Å–ø–∏—Å–æ–∫
List<Integer> evens = numbers.stream().filter(n -> n % 2 == 0).collect(Collectors.toList());
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `reduce` (–¥–ª—è –∑–≥–æ—Ä—Ç–∞–Ω–Ω—è) —Ç–∞ `collect` (–¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è).*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —î —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –æ–±—Ä–æ–±–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ (checked exceptions) –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–∫—ñ–ª—å–∫–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –Ω–µ –æ–≥–æ–ª–æ—à—É—é—Ç—å `throws`, –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –Ω–∞–ø—Ä—è–º—É –∫–∏–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ –∑ –ª—è–º–±–¥. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏:
>
> 1. **–û–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ `try-catch`:**
>     –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—ñ–¥—Ö—ñ–¥. –õ–æ–≥—ñ–∫–∞, —â–æ –º–æ–∂–µ –∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫, –æ–±–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –≤ `try-catch` –±–ª–æ–∫ –ø—Ä—è–º–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª—è–º–±–¥–∏. –£ –±–ª–æ—Ü—ñ `catch` –≤–∏ –º–æ–∂–µ—Ç–µ –∞–±–æ –∑–∞–ª–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É, –∞–±–æ –∫–∏–Ω—É—Ç–∏ `RuntimeException`.
>
> 2. **–û–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—É (Exception Wrapping):**
>     –°—Ç–≤–æ—Ä–∏—Ç–∏ –º–µ—Ç–æ–¥-–æ–±–≥–æ—Ä—Ç–∫—É, —è–∫–∏–π –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ —ñ –∫–∏–¥–∞—î –∑–∞–º—ñ—Å—Ç—å –Ω—å–æ–≥–æ –Ω–µ–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π (–Ω–∞–ø—Ä., `UncheckedIOException`). –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ —É —Å—Ç—Ä—ñ–º—ñ —á–∏—Å—Ç—ñ—à–∏–º.
>
> 3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:**
>     –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π `ThrowingFunction<T, R, E extends Exception>`, —É –º–µ—Ç–æ–¥—ñ `apply` —è–∫–æ–≥–æ –±—É–¥–µ –æ–≥–æ–ª–æ—à–µ–Ω–æ `throws E`. –¶–µ –Ω–∞–π–±—ñ–ª—å—à —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π, –∞–ª–µ —ñ –Ω–∞–π–±—ñ–ª—å—à –≥—Ä–æ–º—ñ–∑–¥–∫–∏–π –ø—ñ–¥—Ö—ñ–¥.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–æ—ó –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Å–ø–æ—Å–æ–±—ñ–≤ —ó—ó –≤–∏—Ä—ñ—à–µ–Ω–Ω—è. –¶–µ –ø–æ–∫–∞–∑—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç —Å—Ç–∏–∫–∞–≤—Å—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º –∫–æ–¥–æ–º, –∞ –Ω–µ –ª–∏—à–µ –∑ —ñ–¥–µ–∞–ª—å–Ω–∏–º–∏ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º –¥–ª—è `parallelStream()`?

```java
List<Integer> results = new ArrayList<>();
IntStream.range(0, 100).parallel().forEach(i -> results.add(i));
```

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ —î **–∫–ª–∞—Å–∏—á–Ω–∏–º –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º** —ñ –º–∞–π–∂–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–æ–∫.
>
> **–ü—Ä–∏—á–∏–Ω–∞:**
> –õ—è–º–±–¥–∞ `i -> results.add(i)` –º–∞—î **–ø–æ–±—ñ—á–Ω–∏–π –µ—Ñ–µ–∫—Ç** ‚Äî –≤–æ–Ω–∞ –∑–º—ñ–Ω—é—î **—Å–ø—ñ–ª—å–Ω–∏–π –∑–º—ñ–Ω–Ω–∏–π —Å—Ç–∞–Ω (shared mutable state)**, —è–∫–∏–º —î `ArrayList`.
>
> 1. `ArrayList` **–Ω–µ —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é** –∫–æ–ª–µ–∫—Ü—ñ—î—é.
> 2. `parallelStream()` –≤–∏–∫–æ–Ω—É—î `forEach` –æ–¥–Ω–æ—á–∞—Å–Ω–æ –≤ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫–∞—Ö.
> 3. –ö–æ–ª–∏ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `results.add()`, —Ü–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ **"—É–º–æ–≤–∏ –≥–æ–Ω–∏—Ç–≤–∏" (race condition)**.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏:** –ù–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Å–ø–∏—Å–∫—É, –≤—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö, `ArrayIndexOutOfBoundsException`.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è:** –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –∑–±–æ—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤: `.collect(Collectors.toList())`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –∑ `parallelStream`. –¶–µ –∫–ª—é—á–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–Ω–∞–Ω—å `concurrency`.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `parallelStream()` –º–æ–∂–µ —Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏, –∞ –Ω–µ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `parallelStream()` –Ω–µ —î —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º –ø—Ä–∏—Å–∫–æ—Ä—é–≤–∞—á–µ–º. –í—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–º, —è–∫—â–æ:
>
> 1. **–ú–∞–ª–∏–π –æ–±—Å—è–≥ –¥–∞–Ω–∏—Ö:** –ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ä–æ–∑–±–∏—Ç—Ç—è –¥–∞–Ω–∏—Ö, –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏ (`ForkJoinPool`) —Ç–∞ –æ–±'—î–¥–Ω–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–µ—Ä–µ–≤–∏—â—É—é—Ç—å –≤–∏–≥–æ–¥—É –≤—ñ–¥ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
> 2. **"–î–µ—à–µ–≤—ñ" –æ–ø–µ—Ä–∞—Ü—ñ—ó:** –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –¥—É–∂–µ —à–≤–∏–¥–∫—ñ, –≤—É–∑—å–∫–∏–º –º—ñ—Å—Ü–µ–º —Å—Ç–∞—î —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏, –∞ –Ω–µ —Å–∞–º—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è.
> 3. **–ü–æ–≥–∞–Ω–æ —Ä–æ–∑—â–µ–ø–ª—é–≤–∞–Ω–µ –¥–∂–µ—Ä–µ–ª–æ:** `LinkedList` —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ –∑–Ω–∞—á–Ω–æ –≥—ñ—Ä—à–µ, –Ω—ñ–∂ `ArrayList`, —â–æ —Ä–æ–±–∏—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω—É –æ–±—Ä–æ–±–∫—É –Ω–∞ –Ω—å–æ–º—É –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—é.
> 4. **–ë–ª–æ–∫—É—é—á—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (IO):** –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ –º–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏ –∞–±–æ –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—ñ–≤, –≤–∏ "–∑–∞–±–ª–æ–∫—É—î—Ç–µ" –≤—Å—ñ –ø–æ—Ç–æ–∫–∏ —Å–ø—ñ–ª—å–Ω–æ–≥–æ `ForkJoinPool`, —â–æ –º–æ–∂–µ "–∑–∞–º–æ—Ä–æ–∑–∏—Ç–∏" –≤–µ—Å—å –¥–æ–¥–∞—Ç–æ–∫.

#### **üìù –ü—Ä–∞–≤–∏–ª–æ:**

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `parallelStream` –¥–ª—è **–≤–µ–ª–∏–∫–∏—Ö** –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö —Ç–∞ **CPU-bound** (–æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏—Ö) –∑–∞–¥–∞—á.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, –∫–æ–ª–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º —î –¥–æ—Ü—ñ–ª—å–Ω–∏–º, –∞ –∫–æ–ª–∏ ‚Äî –Ω—ñ.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ —Ä–æ–±–∏—Ç—å `peek()`, —ñ —á–æ–º—É –π–æ–≥–æ –Ω–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É –æ–±'—î–∫—Ç—ñ–≤.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`peek(Consumer<T> action)`** ‚Äî —Ü–µ –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è, —Å—Ç–≤–æ—Ä–µ–Ω–∞ –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è **–Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (–¥–µ–±–∞–≥—ñ–Ω–≥—É)**. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î "–ø—ñ–¥–≥–ª—è–Ω—É—Ç–∏" –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–æ—Ç–æ–∫—É –≤ –ø–µ–≤–Ω—ñ–π —Ç–æ—á—Ü—ñ, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ —ó—Ö.
>
> **–ß–æ–º—É –π–æ–≥–æ –Ω–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É:**
>
> 1. **–¶–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏:** –î–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ—Å–Ω—É—î –æ–ø–µ—Ä–∞—Ü—ñ—è `map()`.
> 2. **–ù–µ–Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å:** `Stream API` **–Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î**, —â–æ `peek` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ. –ß–µ—Ä–µ–∑ –ª—ñ–Ω–∏–≤—ñ—Å—Ç—å —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, —è–∫—â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –≤–∏–º–∞–≥–∞—î –æ–±—Ä–æ–±–∫–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä., `count()`), —Ç–æ –ª–∞–Ω—Ü—é–∂–æ–∫ –º–æ–∂–µ –±—É—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ, —ñ `peek` –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ—ñ–≥–Ω–æ—Ä–æ–≤–∞–Ω–æ.
>
> –ö–æ–¥ `stream.peek(user -> user.setStatus("active"))` –º–æ–∂–µ –Ω–µ –≤–∏–∫–æ–Ω–∞—Ç–∏—Å—è –≤–∑–∞–≥–∞–ª—ñ, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –≤–∞–∂–∫–∏—Ö –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –±–∞–≥—ñ–≤.
>
> **–ü—Ä–∞–≤–∏–ª–æ:** `peek` ‚Äî –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è, `map` ‚Äî –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è `peek` —Ç–∞ –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ –Ω–∏–º –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω—ñ–≤.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Stream API` –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ `Map` –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–∫—ñ–ª—å–∫–∏ `HashMap` –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Ä—è–¥–æ–∫, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –º–∞—î –±—É—Ç–∏ `LinkedHashMap`, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—Ä—è–¥–æ–∫ –≤—Å—Ç–∞–≤–∫–∏.
>
> **–ö—Ä–æ–∫–∏:**
>
> 1. –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –∑ `map.entrySet()`.
> 2. –í—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –∑–∞–ø–∏—Å—ñ–≤ (`Map.Entry`) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `sorted()`. –Ø–∫ `Comparator` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `Map.Entry.comparingByValue()`.
> 3. –ó—ñ–±—Ä–∞—Ç–∏ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ –ø–∞—Ä–∏ –≤ `LinkedHashMap`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
Map<String, Integer> map = Map.of("B", 3, "A", 1, "C", 2);

LinkedHashMap<String, Integer> sortedMap = map.entrySet().stream()
    .sorted(Map.Entry.comparingByValue())
    .collect(Collectors.toMap(
        Map.Entry::getKey,
        Map.Entry::getValue,
        (v1, v2) -> v1, // mergeFunction, —è–∫–∞ —Ç—É—Ç –Ω–µ –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è
        LinkedHashMap::new  // –í–∫–∞–∑—É—î–º–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ LinkedHashMap
    ));
    
// sortedMap –±—É–¥–µ: {A=1, C=2, B=3}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ —Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –º–∞–ø—É (–ø–æ—à–∏—Ä–µ–Ω–∞ –∑–∞–¥–∞—á–∞) —Ç–∞ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ `LinkedHashMap` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Å—Ç—Ä—ñ–º–∏ (`IntStream` —ñ —Ç.–¥.) –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—à—ñ –∑–∞ –æ–±'—î–∫—Ç–Ω—ñ (`Stream<Integer>`)? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ß–µ—Ä–µ–∑ —É–Ω–∏–∫–Ω–µ–Ω–Ω—è **boxing/unboxing**.
>
> * `Stream<Integer>` –ø—Ä–∞—Ü—é—î –∑ –æ–±'—î–∫—Ç–∞–º–∏. –ö–æ–ª–∏ –≤–∏ –æ–±—Ä–æ–±–ª—è—î—Ç–µ –º–∞—Å–∏–≤ `int[]`, –∫–æ–∂–µ–Ω –ø—Ä–∏–º—ñ—Ç–∏–≤ "–ø–∞–∫—É—î—Ç—å—Å—è" (boxing) –≤ –æ–±'—î–∫—Ç `Integer`, —â–æ —Å—Ç–≤–æ—Ä—é—î –±–∞–≥–∞—Ç–æ –æ–±'—î–∫—Ç—ñ–≤ —É –∫—É–ø—ñ.
> * `IntStream` –ø—Ä–∞—Ü—é—î –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏ `int`, —É–Ω–∏–∫–∞—é—á–∏ —Ü–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç.
>
> –ö—Ä—ñ–º —Ç–æ–≥–æ, –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –Ω–∞–¥–∞—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫-–æ—Ç `sum()`, `average()`, `summaryStatistics()`, —è–∫—ñ —î –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º–∏ –∑–∞ —ó—Ö –∞–Ω–∞–ª–æ–≥–∏, —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ `reduce`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∞–≤—Ç–æ–ø–∞–∫—É–≤–∞–Ω–Ω—è —Ç–∞ —Å–ø–æ—Å–æ–±—ñ–≤ —ó—ó —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–∑–≤—ñ—Ç—å —Ç—Ä–∏ "stateful" –ø—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó —Ç–∞ –ø–æ—è—Å–Ω—ñ—Ç—å, —á–æ–º—É –≤–æ–Ω–∏ —Ç–∞–∫–∏–º–∏ —î. ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `Stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—ó ‚Äî —Ü–µ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫–∏–º –¥–ª—è —Å–≤–æ—î—ó —Ä–æ–±–æ—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω (—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–∂–µ –æ–±—Ä–æ–±–ª–µ–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏).
>
> 1. **`distinct()`**: –ü–æ–≤–∏–Ω–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–∞–±—ñ—Ä —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —è–∫—ñ –≤—ñ–Ω –≤–∂–µ –±–∞—á–∏–≤, —â–æ–± –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –∑ –Ω–∏–º–∏ –Ω–æ–≤—ñ.
>
> 2. **`sorted()`**: –ü–æ–≤–∏–Ω–µ–Ω –Ω–∞–∫–æ–ø–∏—á–∏—Ç–∏ **–≤—Å—ñ** –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Ç–æ–∫—É, —â–æ–± —ó—Ö –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏.
>
> 3. **`limit()` / `skip()`**: –ü–æ–≤–∏–Ω–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ **–ª—ñ—á–∏–ª—å–Ω–∏–∫** –æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö/–ø—Ä–æ–ø—É—â–µ–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> –¢–∞–∫—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –≤–∏–º–∞–≥–∞—Ç–∏ –±–∞–≥–∞—Ç–æ –ø–∞–º'—è—Ç—ñ (`distinct`, `sorted`) –∞–±–æ –æ–±–º–µ–∂—É–≤–∞—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è, —â–æ —Ä—ñ–∑–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–∞—é—Ç—å —Ä—ñ–∑–Ω—É "–≤–∞—Ä—Ç—ñ—Å—Ç—å" —Ç–∞ –≤–ø–ª–∏–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø–∞–º'—è—Ç—å.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –ø–æ–≤–µ—Ä–Ω–µ `Optional.ofNullable(null).stream()` —ñ —á–æ–º—É? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –≤–∏—Ä–∞–∑ –ø–æ–≤–µ—Ä–Ω–µ **–ø–æ—Ä–æ–∂–Ω—ñ–π –ø–æ—Ç—ñ–∫ (`Stream.empty()`)**.
>
> **–ü–æ–∫—Ä–æ–∫–æ–≤–æ:**
>
> 1. `Optional.ofNullable(null)` —Å—Ç–≤–æ—Ä—é—î –ø–æ—Ä–æ–∂–Ω—ñ–π `Optional`.
> 2. –ú–µ—Ç–æ–¥ `.stream()` (–∑ Java 9) –Ω–∞ –ø–æ—Ä–æ–∂–Ω—å–æ–º—É `Optional` –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ä–æ–∂–Ω—ñ–π `Stream`.
>
> –¶–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ `null`-–∑–Ω–∞—á–µ–Ω–Ω—è –≤ –ø–æ—Ç—ñ–∫ (–∑ 0 –∞–±–æ 1 –µ–ª–µ–º–µ–Ω—Ç–∞), —É–Ω–∏–∫–∞—é—á–∏ `NullPointerException`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó `Optional` —Ç–∞ `Stream API` –∑ Java 9 —Ç–∞ –≤–º—ñ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `collect(Collectors.groupingBy(...))` –≤—Ä—É—á–Ω—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ª–∏—à–µ `collect(supplier, accumulator, combiner)`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ–ª–µ–∫—Ç–æ—Ä–∏.
>
> **–Ü–¥–µ—è:**
>
> * **Supplier:** —Å—Ç–≤–æ—Ä—é—î –ø–æ—Ä–æ–∂–Ω—é `HashMap`.
> * **Accumulator:** –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Ç–æ–∫—É –æ–±—á–∏—Å–ª—é—î –∫–ª—é—á, –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —î —Ç–∞–∫–∏–π –∫–ª—é—á —É –º–∞–ø—ñ. –Ø–∫—â–æ –Ω–µ–º–∞—î, —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫; –ø–æ—Ç—ñ–º –¥–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç —É —Ü–µ–π —Å–ø–∏—Å–æ–∫. –î–ª—è —Ü—å–æ–≥–æ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å `Map.computeIfAbsent`.
> * **Combiner:** –æ–±'—î–¥–Ω—É—î –¥–≤—ñ –º–∞–ø–∏, –¥–æ–¥–∞—é—á–∏ —Å–ø–∏—Å–∫–∏ –∑ –æ–¥–Ω—ñ—î—ó –¥–æ —ñ–Ω—à–æ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª—é—á–∞.

#### **üìù –ü—Å–µ–≤–¥–æ–∫–æ–¥:**

```java
collect(
    HashMap::new, // supplier
    (map, element) -> { // accumulator
        K key = classifier.apply(element);
        List<T> list = map.computeIfAbsent(key, k -> new ArrayList<>());
        list.add(element);
    },
    (map1, map2) -> { // combiner
        map2.forEach((key, valueList) -> 
            map1.merge(key, valueList, (list1, list2) -> { 
                list1.addAll(list2); 
                return list1; 
            })
        );
    }
);
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è `Stream API`. –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –ª–æ–≥—ñ–∫—É `groupingBy` –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –∑–±–∏—Ä–∞–Ω–Ω—è.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `reduce` —ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é `forEach`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–æ–Ω–∏ –≤–∏—Ä—ñ—à—É—é—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤–æ —Ä—ñ–∑–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è.
>
> * **`reduce`**:
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** **–ê–≥—Ä–µ–≥–∞—Ü—ñ—è**. –ó–≥–æ—Ä—Ç–∞—î –ø–æ—Ç—ñ–∫ –¥–æ **–æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è**.
>   * **–°—Ç–∏–ª—å:** **–ß–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è**. –ü–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–µ –º–∞—î –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤.
>
> * **`forEach`**:
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** **–î—ñ—è**. –í–∏–∫–æ–Ω—É—î –æ–ø–µ—Ä–∞—Ü—ñ—é –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞.
>   * **–°—Ç–∏–ª—å:** **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏**. –ù–µ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω—ñ—á–æ–≥–æ (`void`). –á—ó —î–¥–∏–Ω–∞ –º–µ—Ç–∞ ‚Äî —â–æ—Å—å –∑–º—ñ–Ω–∏—Ç–∏ –∑–∑–æ–≤–Ω—ñ (–≤–∏–≤–µ—Å—Ç–∏ –Ω–∞ –µ–∫—Ä–∞–Ω, –∑–∞–ø–∏—Å–∞—Ç–∏ –≤ –ª–æ–≥).
>
> `reduce` —î —ñ–¥—ñ–æ–º–∞—Ç–∏—á–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é –¥–ª—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è. `forEach` —î –±—ñ–ª—å—à —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—é "–≤—Ç–µ—á–µ—é" –∑ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—é —ñ –º–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é, –æ—Å–æ–±–ª–∏–≤–æ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∏—Ö–∏–ª—å–Ω—ñ—Å—Ç—å –¥–æ —á–∏—Å—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥—É —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è, –∫–æ–ª–∏ —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–∑–≤—ñ—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—ó Stream API, —è–∫—ñ —î "short-circuiting". –©–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Short-circuiting –æ–ø–µ—Ä–∞—Ü—ñ—ó** ‚Äî —Ü–µ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫—ñ –º–æ–∂—É—Ç—å –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ—Ç–æ–∫—É, **–Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—é—á–∏ –≤—Å—ñ –π–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏**, —è–∫—â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∂–µ –≤—ñ–¥–æ–º–∏–π.
>
> **–ü—Ä–æ–º—ñ–∂–Ω—ñ short-circuiting –æ–ø–µ—Ä–∞—Ü—ñ—ó:**
>
> * `limit(n)`
> * `takeWhile(predicate)` (Java 9+)
>
> **–¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ short-circuiting –æ–ø–µ—Ä–∞—Ü—ñ—ó:**
>
> * `findFirst()`, `findAny()`
> * `anyMatch()`, `allMatch()`, `noneMatch()`
>
> –¶–µ –∫–ª—é—á–æ–≤–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –≤–µ–ª–∏–∫–∏–º–∏ —Ç–∞ –Ω–∞–≤—ñ—Ç—å –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –≤ `Stream API`. –†–æ–∑—É–º—ñ–Ω–Ω—è `short-circuiting` —î –≤–∞–∂–ª–∏–≤–∏–º –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥—É.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ–π –æ–±—Ä–æ–±—Ü—ñ? `list.parallelStream().findFirst()` ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º, –∞–ª–µ —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.**
>
> **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:**
> `findFirst()` **–≥–∞—Ä–∞–Ω—Ç—É—î**, —â–æ –ø–æ–≤–µ—Ä–Ω–µ —Å–∞–º–µ **–ø–µ—Ä—à–∏–π –µ–ª–µ–º–µ–Ω—Ç** –ø–æ—Ç–æ–∫—É, –Ω–∞–≤—ñ—Ç—å —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ.
>
> **–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:**
>
> –©–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ —Ü—é –ø–æ–≤–µ–¥—ñ–Ω–∫—É, `parallelStream` –∑–º—É—à–µ–Ω–∏–π **—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏** —Ä–æ–±–æ—Ç—É –≤—Å—ñ—Ö —Å–≤–æ—ó—Ö –ø–æ—Ç–æ–∫—ñ–≤. –ù–∞–≤—ñ—Ç—å —è–∫—â–æ —è–∫–∏–π—Å—å –∑ "–ø—ñ–∑–Ω—ñ—Ö" –ø–æ—Ç–æ–∫—ñ–≤ –∑–Ω–∞–π–¥–µ –µ–ª–µ–º–µ–Ω—Ç –ø–µ—Ä—à–∏–º, `findFirst` –Ω–µ –º–æ–∂–µ –π–æ–≥–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏, –¥–æ–∫–∏ –Ω–µ –ø–µ—Ä–µ–∫–æ–Ω–∞—î—Ç—å—Å—è, —â–æ –∂–æ–¥–µ–Ω –∑ "—Ä–∞–Ω–Ω—ñ—Ö" –ø–æ—Ç–æ–∫—ñ–≤ –Ω–µ –º–∞–≤ —Å–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. –¶—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è –º–æ–∂–µ **–Ω—ñ–≤–µ–ª—é–≤–∞—Ç–∏** –≤—Å—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> **–ö—Ä–∞—â–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
>
> –Ø–∫—â–æ –≤–∞–º –Ω–µ–≤–∞–∂–ª–∏–≤–∏–π –ø–æ—Ä—è–¥–æ–∫, —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö **–∑–∞–≤–∂–¥–∏** —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `findAny()`. –í—ñ–Ω –ø–æ–≤–µ—Ä–Ω–µ –ø–µ—Ä—à–∏–π-–ª—ñ–ø—à–∏–π –∑–Ω–∞–π–¥–µ–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –±–µ–∑ –∑–∞–π–≤–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —ñ –±—É–¥–µ –Ω–∞–±–∞–≥–∞—Ç–æ —à–≤–∏–¥—à–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤ –º—ñ–∂ –¥–µ—Ç–µ—Ä–º—ñ–Ω—ñ–∑–º–æ–º —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.*

* * *
