---
layout: default
title: "–í–ª–∞—Å–Ω—ñ Collector'–∏"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 18
---

# –í–ª–∞—Å–Ω—ñ Collector'–∏

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Collector` ‚Äì —Ü–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —â–æ –æ–ø–∏—Å—É—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –∑–±–∏—Ä–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É –≤ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –î–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ `supplier`, `accumulator`, `combiner`, `finisher`.

* –ø–æ–Ω—è—Ç—Ç—è: `Collector<T, A, R>`, `Collector.of()`, `supplier`, `accumulator`, `combiner`, `finisher`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ —É –ø–µ–≤–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ (`(APPLE, BANANA, CHERRY)`).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è, –∫–æ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ. `combiner` –≤–∞–∂–ª–∏–≤–∏–π –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö —Å—Ç—Ä—ñ–º–∞—Ö.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –∫–æ–ª–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**Collector** ‚Äî —Ü–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É Java Stream API, —è–∫–∏–π –æ–ø–∏—Å—É—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –∑–±–æ—Ä—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É –≤ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í—ñ–Ω —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –∫—ñ–ª—å–∫–æ—Ö —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤: **supplier**, **accumulator**, **combiner**, **finisher**, –∞ —Ç–∞–∫–æ–∂ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

**`Collector`** ‚Äî —Ü–µ —è–∫ –ø–ª–∞–Ω: —è–∫ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ—Ç—ñ–∫ —É —â–æ—Å—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–ø–∏—Å–æ–∫, –º–∞–ø—É, —Ä—è–¥–æ–∫...). –Ø–∫—â–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö **`.toList(), .toMap()`** —Ç–æ—â–æ –∑–∞–º–∞–ª–æ, –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—Å–≤—ñ–π –∫–æ–ª–µ–∫—Ç–æ—Ä** ‚Äî —ñ –∑—Ä–æ–±–∏—Ç–∏ —Å–∞–º–µ —Ç–∞–∫, —è–∫ —Ö–æ—á–µ—à

---

## üìä **–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**

**–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**  
  **`Collector<T, A, R>`**
    ***`T`** ‚Äî —Ç–∏–ø –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É
    * **`A`** ‚Äî —Ç–∏–ø –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (mutable accumulator)
    * **`R`** ‚Äî —Ç–∏–ø –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

**–°—Ç–∞—Ç–∏—á–Ω–∏–π –º–µ—Ç–æ–¥:**  
  **`Collector.of(supplier, accumulator, combiner, finisher)`**

üìå **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**

|     –ö–æ–º–ø–æ–Ω–µ–Ω—Ç     |                        –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                        |
|:-----------------:|:---------------------------------------------------------:|
|  **`supplier`**   |                  –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä                  |
| **`accumulator`** |            –î–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç –ø–æ—Ç–æ–∫—É –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞             |
|  **`combiner`**   | –û–± º—î–¥–Ω—É—î –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–≤–∞–∂–ª–∏–≤–æ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö —Å—Ç—Ä—ñ–º—ñ–≤) |
|  **`finisher`**   |        –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç         |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —Ç–∏ —Ö–æ—á–µ—à –∑—ñ–±—Ä–∞—Ç–∏ –≤—Å—ñ —Å–ª–æ–≤–∞ –∑ –ø–æ—Ç–æ–∫—É —É **—Ä—è–¥–æ–∫ —á–µ—Ä–µ–∑ –∫–æ–º—É**, –∞–ª–µ **`.joining(", ")`** —Ç–µ–±–µ –Ω–µ –≤–ª–∞—à—Ç–æ–≤—É—î ‚Äî —Ç–∏ —Ö–æ—á–µ—à
—â–µ –æ–±–µ—Ä–Ω—É—Ç–∏ –≤—Å–µ —É –¥—É–∂–∫–∏ –π –∑—Ä–æ–±–∏—Ç–∏ upper-case. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –¥–ª—è —Ü—å–æ–≥–æ –Ω–µ–º–∞—î.

üéØ –¢–æ–∂ —Ç–∏ –ø–∏—à–µ—à **—Å–≤—ñ–π**

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üîπ –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥: –∑—ñ–±—Ä–∞—Ç–∏ —Ä—è–¥–∫–∏ —É –¥—É–∂–∫–∞—Ö —Ç–∞ –≤–µ–ª–∏–∫–∏–º–∏ –ª—ñ—Ç–µ—Ä–∞–º–∏**

```java
Collector<String, StringBuilder, String> customCollector = Collector.of(
    () -> new StringBuilder("("),                       // supplier
    (sb, s) -> {
        if (sb.length() > 1) sb.append(", ");
        sb.append(s.toUpperCase());
    },                                                  // accumulator
    (sb1, sb2) -> {
        if (sb2.length() > 1) sb1.append(", ").append(sb2.substring(1));
        return sb1;
    },                                                  // combiner
    sb -> sb.append(")").toString()                     // finisher
);

List<String> items = List.of("apple", "banana", "cherry");
String result = items.stream().collect(customCollector);
System.out.println(result); // (APPLE, BANANA, CHERRY)
```

---

### **üîπ –ö–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –¥–æ–≤–∂–∏–Ω —Ä—è–¥–∫—ñ–≤**

```java
Collector<String, ?, Map<Integer, Long>> lengthHistogram = Collector.of(
    HashMap::new,
    (map, s) -> map.merge(s.length(), 1L, Long::sum),
    (m1, m2) -> { 
        m2.forEach((k, v) -> m1.merge(k, v, Long::sum));
        return m1;
    }
);

List<String> words = List.of("hi", "hello", "hey", "hola");
Map<Integer, Long> histogram = words.stream().collect(lengthHistogram);
// {2=1, 4=2, 5=1}
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|              –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å               |         –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ Collector'–∏         |         –í–ª–∞—Å–Ω—ñ Collector'–∏          |
|:--------------------------------------:|:--------------------------------------:|:-----------------------------------:|
|             **–ì–Ω—É—á–∫—ñ—Å—Ç—å**              | –û–±–º–µ–∂–µ–Ω–∞ –¥–æ –ø–µ—Ä–µ–¥–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ ‚Äî –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Å–µ |
|       **–ó—Ä—É—á–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**       |    –ü—Ä–æ—Å—Ç–∏–π **`.collect(toList())`**    |    –ë—ñ–ª—å—à–µ –∫–æ–¥—É, –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é     |
|           **–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å**            |         –ü–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è         |  –¢—Ä–µ–±–∞ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ **`combiner`**   |
| **–ü—Ä–∏–¥–∞—Ç–Ω—ñ—Å—Ç—å –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤** |                 –ù–∏–∑—å–∫–∞                 |               –í–∏—Å–æ–∫–∞                |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"SACF" \= Supplier, Accumulator, Combiner, Finisher**  
–Ø–∫ —Ä–µ—Ü–µ–ø—Ç:

* –°—Ç–≤–æ—Ä–∏ –º–∏—Å–∫—É (S)
* –ö–ª–∞–¥–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ (A)
* –û–±‚Äô—î–¥–Ω–∞–π –∑ —ñ–Ω—à–∏–º–∏ –º–∏—Å–∫–∞–º–∏ (C)
* –ü–æ–¥–∞–π –Ω–∞ —Å—Ç—ñ–ª (F)

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –í–ª–∞—Å–Ω—ñ **`Collector`**'–∏ ‚Äî –ø–æ—Ç—É–∂–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –∑–±–∏—Ä–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.
* –í–æ–Ω–∏ —Å–∫–ª–∞–¥–∞—é—Ç—å—Å—è –∑ 4 –æ—Å–Ω–æ–≤–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω: **supplier**, **accumulator**, **combiner**, **finisher**.
* –Ü–¥–µ–∞–ª—å–Ω—ñ –¥–ª—è —Å–∏—Ç—É–∞—Ü—ñ–π, –∫–æ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ **`.toList(), .toMap(), joining()`** –Ω–µ –ø—ñ–¥—Ö–æ–¥—è—Ç—å.
* –ü–æ—Ç—Ä—ñ–±–Ω–∞ —É–≤–∞–∂–Ω—ñ—Å—Ç—å –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ **–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º–∏ —Å—Ç—Ä—ñ–º–∞–º–∏** ‚Äî –≤–∞–∂–ª–∏–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **`combiner`**.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Collector (Oracle)**](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `Collector` –≤ Java Stream API —ñ –Ω–∞–≤—ñ—â–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`Collector<T, A, R>`** ‚Äî —Ü–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —è–∫–∏–π –æ–ø–∏—Å—É—î **—Å—Ç—Ä–∞—Ç–µ–≥—ñ—é** –∑–±–∏—Ä–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É (`Stream`) –≤ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¶–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –º–æ–∂–µ –±—É—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—è (`List`, `Set`), –º–∞–ø–∞ (`Map`) –∞–±–æ –±—É–¥—å-—è–∫–µ —ñ–Ω—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è.
>
> –ö–ª–∞—Å `java.util.stream.Collectors` –Ω–∞–¥–∞—î –±–∞–≥–∞—Ç–æ –≥–æ—Ç–æ–≤–∏—Ö, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π (`toList()`, `toMap()`, `joining()` —Ç–æ—â–æ).
>
> **–í–ª–∞—Å–Ω–∏–π `Collector` —Å—Ç–≤–æ—Ä—é—é—Ç—å —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ** –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó –∑–∞–¥–∞—á—ñ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ:
>
> * –ó—ñ–±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ –≤ –∫–∞—Å—Ç–æ–º–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é –∞–±–æ –æ–±'—î–∫—Ç.
> * –í–∏–∫–æ–Ω–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –∞–≥—Ä–µ–≥–∞—Ü—ñ—é, –¥–ª—è —è–∫–æ—ó –Ω–µ–º–∞—î –≥–æ—Ç–æ–≤–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è.
> * –û–±'—î–¥–Ω–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –æ–±—á–∏—Å–ª–µ–Ω—å –≤ –æ–¥–∏–Ω –ø—Ä–æ—Ö—ñ–¥ –ø–æ –ø–æ—Ç–æ–∫—É –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó.
>
> –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞ –¥–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å–æ–º –∑–±–æ—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

`Collectors` ‚Äî —Ü–µ —è–∫ –Ω–∞–±—ñ—Ä –≥–æ—Ç–æ–≤–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è –≤—Ä–æ–∂–∞—é (—è–±–ª—É–∫): —î –∫–æ—à–∏–∫ –¥–ª—è —Å–ø–∏—Å–∫—É (`toList`), —è—â–∏–∫–∏ –¥–ª—è –≥—Ä—É–ø (`groupingBy`). –í–ª–∞—Å–Ω–∏–π `Collector` ‚Äî —Ü–µ —è–∫ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ —Å–≤—ñ–π —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π, —è–∫–∏–π –æ–¥–Ω–æ—á–∞—Å–Ω–æ —ñ –º–∏—î, —ñ —Å–æ—Ä—Ç—É—î, —ñ –ø–∞–∫—É—î —è–±–ª—É–∫–∞ —É —Ñ—ñ—Ä–º–æ–≤—ñ –∫–æ—Ä–æ–±–∫–∏ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `Stream API` —î —Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω–∏–º. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ –º–æ–∂–Ω–∞ –≤–∏—Ö–æ–¥–∏—Ç–∏ –∑–∞ –º–µ–∂—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ —ñ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ó —è–∫–∏—Ö —á–æ—Ç–∏—Ä—å–æ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è `Collector`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ë—É–¥—å-—è–∫–∏–π `Collector` –æ–ø–∏—Å—É—î—Ç—å—Å—è —á–æ—Ç–∏—Ä–º–∞ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏, —è–∫—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –π–æ–≥–æ –ø–æ–≤–µ–¥—ñ–Ω–∫—É. –ó–∞–∑–≤–∏—á–∞–π –≤–æ–Ω–∏ –Ω–∞–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ `Collector.of()`:
>
> 1. **`supplier` (–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫):**
>     * **–©–æ —Ä–æ–±–∏—Ç—å:** –°—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π, –ø–æ—Ä–æ–∂–Ω—ñ–π** –ø—Ä–æ–º—ñ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤ —è–∫–∏–π –±—É–¥—É—Ç—å –Ω–∞–∫–æ–ø–∏—á—É–≤–∞—Ç–∏—Å—è –µ–ª–µ–º–µ–Ω—Ç–∏.
>     * **–¢–∏–ø:** `Supplier<A>`
>
> 2. **`accumulator` (–∞–∫—É–º—É–ª—è—Ç–æ—Ä):**
>     * **–©–æ —Ä–æ–±–∏—Ç—å:** –û–ø–∏—Å—É—î, —è–∫ **–¥–æ–¥–∞—Ç–∏ –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç** –ø–æ—Ç–æ–∫—É –≤ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
>     * **–¢–∏–ø:** `BiConsumer<A, T>`
>
> 3. **`combiner` (–∫–æ–º–±–∞–π–Ω–µ—Ä):**
>     * **–©–æ —Ä–æ–±–∏—Ç—å:** –û–ø–∏—Å—É—î, —è–∫ **–æ–±'—î–¥–Ω–∞—Ç–∏ –¥–≤–∞ –ø—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏** –≤ –æ–¥–∏–Ω. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ—é –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤.
>     * **–¢–∏–ø:** `BinaryOperator<A>`
>
> 4. **`finisher` (—Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä):**
>     * **–©–æ —Ä–æ–±–∏—Ç—å:** –í–∏–∫–æ–Ω—É—î **—Ñ—ñ–Ω–∞–ª—å–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è** –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¶–µ–π –∫—Ä–æ–∫ —î –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–º.
>     * **–¢–∏–ø:** `Function<A, R>`

#### **üìù –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ (SACF):**

* **S**upplier: **S**—Ç–≤–æ—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
* **A**ccumulator: **A**–∫—É–º—É–ª—é–π –µ–ª–µ–º–µ–Ω—Ç–∏.
* **C**ombiner: **C**–∫–æ–º–±—ñ–Ω—É–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏.
* **F**inisher: **F**—ñ–Ω–∞–ª—ñ–∑—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `Collector`. –¶–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ç–µ–º–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ —É —Ñ–æ—Ä–º–∞—Ç—ñ `[A, B, C]`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ –¥–ª—è —Ü—å–æ–≥–æ —ñ—Å–Ω—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `Collectors.joining()`, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –π–æ–≥–æ —Å–ø—Ä–æ—â–µ–Ω–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ —î —á—É–¥–æ–≤–∏–º –ø—Ä–∏–∫–ª–∞–¥–æ–º.
>
> **–ó–∞–¥–∞—á–∞:** –ó—ñ–±—Ä–∞—Ç–∏ `Stream<String>` —É –æ–¥–∏–Ω `String` –≤–∏–≥–ª—è–¥—É `[elem1, elem2, ...]`.
>
> **–†–æ–∑–±–∏—Ä–∞—î–º–æ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
>
> * `supplier`: –ü–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è —Ä—è–¥–∫—ñ–≤. –ù–∞–π–∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å `StringBuilder`. –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π `new StringBuilder("[")`.
> * `accumulator`: –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –π–æ–≥–æ –¥–æ `StringBuilder` –∑ –∫–æ–º–æ—é.
> * `combiner`: –î–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±'—î–¥–Ω–∞—Ç–∏ –¥–≤–∞ `StringBuilder`.
> * `finisher`: –í –∫—ñ–Ω—Ü—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–∫—Ä–∏—Ç–∏ –¥—É–∂–∫—É `]` —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ `StringBuilder` –Ω–∞ `String`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
Collector<String, StringBuilder, String> customJoiningCollector = Collector.of(
    () -> new StringBuilder("["), // 1. supplier
    (sb, s) -> {                  // 2. accumulator
        if (sb.length() > 1) {
            sb.append(", ");
        }
        sb.append(s);
    },
    (sb1, sb2) -> {               // 3. combiner
        sb1.append(sb2.substring(1)); // –û–±'—î–¥–Ω—É—î–º–æ, —ñ–≥–Ω–æ—Ä—É—é—á–∏ `[` —É –¥—Ä—É–≥–æ–≥–æ
        return sb1;
    },
    sb -> sb.append("]").toString() // 4. finisher
);

List<String> items = List.of("Apple", "Banana", "Cherry");
String result = items.stream().collect(customJoiningCollector);

System.out.println(result); // [Apple, Banana, Cherry]
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏: –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ —á–æ—Ç–∏—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ, —Ö–æ—á —ñ –ø—Ä–æ—Å—Ç–æ–≥–æ, –∫–æ–ª–µ–∫—Ç–æ—Ä–∞.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å —Ä–æ–ª—å `combiner`'–∞. –ö–æ–ª–∏ –≤—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, –∞ –∫–æ–ª–∏ ‚Äî –Ω—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ö–æ–º–±–∞–π–Ω–µ—Ä (`combiner`)** ‚Äî —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∑–Ω–∞—î, —è–∫ –æ–±'—î–¥–Ω–∞—Ç–∏ –¥–≤–∞ –ø—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.
>
> **–ö–æ–ª–∏ –≤—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:**
>
> `combiner` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É (`parallelStream()`)**.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ:**
>
> 1. –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏.
> 2. –î–ª—è –∫–æ–∂–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏ –≤ **–æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ—Ü—ñ** —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `supplier`) —ñ –Ω–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è (–∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `accumulator`).
> 3. –ö–æ–ª–∏ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Å–≤–æ—é —Ä–æ–±–æ—Ç—É, `combiner` –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ **–æ–±'—î–¥–Ω—É—î** —Ü—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤ –æ–¥–∏–Ω.
>
> **–ö–æ–ª–∏ –≤—ñ–Ω –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è:**
>
> –£ **–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ (`stream()`)** `combiner` **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è**, –æ—Å–∫—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —ñ –æ–±'—î–¥–Ω—É–≤–∞—Ç–∏ –π–æ–≥–æ –Ω–µ–º–∞ –∑ —á–∏–º. –û–¥–Ω–∞–∫, –Ω–∞–¥–∞–≤–∞—Ç–∏ –π–æ–≥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –≤—Å–µ –æ–¥–Ω–æ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ, —â–æ–± –∫–æ–ª–µ–∫—Ç–æ—Ä –±—É–≤ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —ñ –º—ñ–≥ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤ `Stream API`, —Ç–∞ –∫–ª—é—á–æ–≤–æ—ó —Ä–æ–ª—ñ –∫–æ–º–±–∞–π–Ω–µ—Ä–∞ –≤ —Ü—å–æ–º—É –ø—Ä–æ—Ü–µ—Å—ñ. –¶–µ –æ–¥–Ω–∞ –∑ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏—Ö –¥–µ—Ç–∞–ª–µ–π –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `finisher` —ñ –∫–æ–ª–∏ –π–æ–≥–æ –º–æ–∂–Ω–∞ –æ–ø—É—Å—Ç–∏—Ç–∏?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–§—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä (`finisher`)** ‚Äî —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î **—Ñ—ñ–Ω–∞–ª—å–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è** –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`A`) –Ω–∞ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (`R`).
>
> –í—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ç–∏–ø –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤ —è–∫–∏–π –º–∏ –∑–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ, **–≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è** –≤—ñ–¥ —Ç–∏–ø—É, —è–∫–∏–π –º–∏ —Ö–æ—á–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤ –∫—ñ–Ω—Ü—ñ.
>
> **–ü—Ä–∏–∫–ª–∞–¥, –¥–µ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω:**
> –£ –Ω–∞—à–æ–º—É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ `customJoiningCollector` –º–∏ –∑–±–∏—Ä–∞–ª–∏ –¥–∞–Ω—ñ –≤ `StringBuilder` (—Ç–∏–ø `A`), –∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ö–æ—Ç—ñ–ª–∏ `String` (—Ç–∏–ø `R`). –¢–æ–º—É —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä `sb -> sb.append("]").toString()` –±—É–≤ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π.
>
> **–ö–æ–ª–∏ –π–æ–≥–æ –º–æ–∂–Ω–∞ –æ–ø—É—Å—Ç–∏—Ç–∏:**
>
> –Ø–∫—â–æ —Ç–∏–ø –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ **–∑–±—ñ–≥–∞—î—Ç—å—Å—è** –∑ –∫—ñ–Ω—Ü–µ–≤–∏–º —Ç–∏–ø–æ–º (`A` == `R`), —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –º–∏ –∑–±–∏—Ä–∞—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ `List` —ñ —Ö–æ—á–µ–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ `List`.
>
> –£ —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É, –∑–∞–º—ñ—Å—Ç—å –Ω–∞–¥–∞–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `finisher`, –º–∏ –º–æ–∂–µ–º–æ –≤–∫–∞–∑–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É **`Collector.Characteristics.IDENTITY_FINISH`**. –¶–µ –≥–æ–≤–æ—Ä–∏—Ç—å —Å—Ç—Ä—ñ–º—É, —â–æ —Ñ—ñ–Ω–∞–ª—å–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–µ, —ñ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –ø—Ä–∏–≤—ñ–≤—à–∏ –π–æ–≥–æ –¥–æ —Ç–∏–ø—É `R`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `toList()`:**

```java
public static <T> Collector<T, ?, List<T>> toList() {
    return Collector.of(
        ArrayList::new,          // supplier
        List::add,               // accumulator
        (list1, list2) -> {      // combiner
            list1.addAll(list2);
            return list1;
        },
        Collector.Characteristics.IDENTITY_FINISH // —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω
    );
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó `finisher` —Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ `IDENTITY_FINISH`. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ API —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å —Ç—Ä–∏ generics-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤ `Collector<T, A, R>`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Collector` —î —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–º —ñ –ø—Ä–∏–π–º–∞—î —Ç—Ä–∏ —Ç–∏–ø–∏:
>
> 1. **`T` ‚Äî —Ç–∏–ø –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤—Ö—ñ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.**
>     –¶–µ —Ç–∏–ø –¥–∞–Ω–∏—Ö, –∑ —è–∫–∏–º–∏ –ø—Ä–∞—Ü—é—î –∫–æ–ª–µ–∫—Ç–æ—Ä (–Ω–∞–ø—Ä., `String`, `User`).
>
> 2. **`A` ‚Äî —Ç–∏–ø –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (accumulator).**
>     –¶–µ —Ç–∏–ø –º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞, –≤ —è–∫–∏–π –±—É–¥—É—Ç—å –Ω–∞–∫–æ–ø–∏—á—É–≤–∞—Ç–∏—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏. –í—ñ–Ω —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `supplier`'–æ–º —ñ –∑–º—ñ–Ω—é—î—Ç—å—Å—è `accumulator`'–æ–º.
>     (–Ω–∞–ø—Ä., `StringBuilder`, `ArrayList<T>`, `int[]`).
>
> 3. **`R` ‚Äî —Ç–∏–ø –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.**
>     –¶–µ —Ç–∏–ø, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è `collect`. –í—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ —Ç–∞–∫–∏–º —Å–∞–º–∏–º, —è–∫ `A`, –∞–±–æ —ñ–Ω—à–∏–º, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `finisher`.
>     (–Ω–∞–ø—Ä., `String`, `List<T>`, `Integer`).

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

–î–ª—è –Ω–∞—à–æ–≥–æ `customJoiningCollector`:

* `T`: `String` (–º–∏ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –∑—ñ `Stream<String>`)
* `A`: `StringBuilder` (–º–∏ –∑–±–∏—Ä–∞–ª–∏ –≤—Å–µ –≤ `StringBuilder`)
* `R`: `String` (–≤ –∫—ñ–Ω—Ü—ñ –º–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ `String`)
>
> –û—Ç–∂–µ, –ø–æ–≤–Ω–∏–π —Ç–∏–ø –±—É–≤ –±–∏ `Collector<String, StringBuilder, String>`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω—å (generics) —Ç–∞ —ó—Ö –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ `Collector`'—ñ–≤. –¶–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑—ñ —Å–∫–ª–∞–¥–Ω–∏–º–∏ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–º–∏ API.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ `Characteristics` –º–æ–∂–µ –º–∞—Ç–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä —ñ —è–∫ –≤–æ–Ω–∏ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –π–æ–≥–æ —Ä–æ–±–æ—Ç—É? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (`Characteristics`)** ‚Äî —Ü–µ –Ω–∞–±—ñ—Ä –ø—Ä–∞–ø–æ—Ä—Ü—ñ–≤ (enum), —è–∫—ñ –Ω–∞–¥–∞—é—Ç—å `Stream API` –ø—ñ–¥–∫–∞–∑–∫–∏ –ø—Ä–æ —Ç–µ, —è–∫ —Ü–µ–π –∫–æ–ª–µ–∫—Ç–æ—Ä –º–æ–∂–Ω–∞ **–æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏**.
>
> –Ü—Å–Ω—É—é—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
>
> 1. **`CONCURRENT`:**
>     * –í–∫–∞–∑—É—î, —â–æ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —î **–ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º** —ñ –π–æ–≥–æ –º–æ–∂–Ω–∞ **–º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ**.
>     * –Ø–∫—â–æ —î —Ü–µ–π –ø—Ä–∞–ø–æ—Ä–µ—Ü—å, —Ç–æ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ `Stream API` –º–æ–∂–µ –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É, –∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω —Å–ø—ñ–ª—å–Ω–∏–π. **–ö–æ–º–±–∞–π–Ω–µ—Ä –ø—Ä–∏ —Ü—å–æ–º—É –Ω–µ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—è.**
>     * –ü—Ä–∏–∫–ª–∞–¥: `Collectors.toConcurrentMap()`.
>
> 2. **`UNORDERED`:**
>     * –í–∫–∞–∑—É—î, —â–æ –∫–æ–ª–µ–∫—Ç–æ—Ä—É **–Ω–µ –≤–∞–∂–ª–∏–≤–∏–π –ø–æ—Ä—è–¥–æ–∫** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, —ñ –≤—ñ–Ω –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ —ó—Ö —É –±—É–¥—å-—è–∫—ñ–π –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
>     * –ü—Ä–∏–∫–ª–∞–¥: `Collectors.toSet()` (–¥–ª—è `HashSet`).
>
> 3. **`IDENTITY_FINISH`:**
>     * –í–∫–∞–∑—É—î, —â–æ **—Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä (`finisher`) –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω**, —ñ –ø—Ä–æ–º—ñ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `A` –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –¥–æ –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ —Ç–∏–ø—É `R`.
>     * –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–∞–π–≤–æ–≥–æ –≤–∏–∫–ª–∏–∫—É `finisher`.
>     * –ü—Ä–∏–∫–ª–∞–¥: `Collectors.toList()`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è `Collector API`. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ ‚Äî —Ü–µ –ø—Ä–æ—Å—É–Ω—É—Ç–∞ —Ç–µ–º–∞, —â–æ –ø–æ–∫–∞–∑—É—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Å—Ç—Ä—ñ–º—ñ–≤.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è `double` –∑ –ø–æ—Ç–æ–∫—É –æ–±'—î–∫—Ç—ñ–≤ `Product` (–∑–∞ –ø–æ–ª–µ–º `price`)? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —è–∫–∏–π –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ —Å—É–º—É, —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> 1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (`A`):** –°—Ç–≤–æ—Ä–∏–º–æ –ø—Ä–æ—Å—Ç–∏–π –∫–ª–∞—Å, —â–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ —Å—É–º—É —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å. `class AvgContainer { double sum = 0; int count = 0; }`
> 2. **`supplier`**: `() -> new AvgContainer()`
> 3. **`accumulator`**: `(container, product) -> { container.sum += product.getPrice(); container.count++; }`
> 4. **`combiner`**: `(c1, c2) -> { c1.sum += c2.sum; c1.count += c2.count; return c1; }`
> 5. **`finisher`**: `container -> (container.count > 0) ? container.sum / container.count : 0.0`
> 6. **–†–µ–∑—É–ª—å—Ç–∞—Ç (`R`):** `Double`

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
class AvgContainer {
    double sum = 0.0;
    int count = 0;
}

Collector<Product, ?, Double> averagingPrice = Collector.of(
    AvgContainer::new,
    (container, product) -> {
        container.sum += product.getPrice();
        container.count++;
    },
    (container1, container2) -> {
        container1.sum += container2.sum;
        container1.count += container2.count;
        return container1;
    },
    container -> (container.count > 0) ? container.sum / container.count : 0.0
);
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ—à—É –ª–æ–≥—ñ–∫—É –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó, –≤–∫–ª—é—á–∞—é—á–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ç–∞ —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–î–ª—è —á–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω `combiner`, —è–∫—â–æ –º—ñ–π –∫–æ–¥ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ª–∏—à–µ –Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö? –ß–∏ –º–æ–∂—É —è –ø–µ—Ä–µ–¥–∞—Ç–∏ `null`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ `null` –Ω–µ –º–æ–∂–Ω–∞.** –•–æ—á–∞ –≤ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ `combiner` –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, –π–æ–≥–æ **–Ω–∞—è–≤–Ω—ñ—Å—Ç—å —î –æ–±–æ–≤'—è–∑–∫–æ–≤–æ—é** —á–∞—Å—Ç–∏–Ω–æ—é –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É `Collector`. –ö–æ–ª–µ–∫—Ç–æ—Ä –º–∞—î –±—É—Ç–∏ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —ñ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –ø—Ä–∏–¥–∞—Ç–Ω–∏–º –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.
>
> **–©–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ –≤–∏ "–≤–ø–µ–≤–Ω–µ–Ω—ñ", —â–æ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É –Ω–µ –±—É–¥–µ?**
>
> –í–∏ –≤—Å–µ –æ–¥–Ω–æ –ø–æ–≤–∏–Ω–Ω—ñ –Ω–∞–¥–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é `combiner`. –ó–∞–∑–≤–∏—á–∞–π —É —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –ø–∏—à—É—Ç—å –∑–∞–≥–ª—É—à–∫—É, —è–∫–∞ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫, —â–æ–± —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É –Ω—ñ—Ö—Ç–æ –ø–æ–º–∏–ª–∫–æ–≤–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ —Ç–∞–∫–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ.
>
> ```java
> (sb1, sb2) -> { 
>     throw new UnsupportedOperationException("Parallel stream is not supported"); 
> }
> ```
>
> –û–¥–Ω–∞–∫, –∫—Ä–∞—â–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é —î –∑–∞–≤–∂–¥–∏ –ø–∏—Å–∞—Ç–∏ **–∫–æ—Ä–µ–∫—Ç–Ω–∏–π `combiner`**, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ —Ä–æ–±–∏—Ç—å –≤–∞—à –∫–æ–ª–µ–∫—Ç–æ—Ä –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–º —Ç–∞ –±–µ–∑–ø–µ—á–Ω–∏–º –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ API –º–∞—î –±—É—Ç–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —É—Å—ñ—Ö –º–æ–∂–ª–∏–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ (–≤–∫–ª—é—á–∞—é—á–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏ –ø–ª–∞–Ω—É—î—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ñ—É–Ω–∫—Ü—ñ—è-–∞–∫—É–º—É–ª—è—Ç–æ—Ä –≤ `combiner` –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—é? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å** —î –∫–ª—é—á–æ–≤–æ—é –≤–∏–º–æ–≥–æ—é, –æ—Å–∫—ñ–ª—å–∫–∏ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ `Stream API` **–Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Ä—è–¥–æ–∫**, –≤ —è–∫–æ–º—É –±—É–¥—É—Ç—å –æ–±'—î–¥–Ω—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ–º—ñ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.
>
> **–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å** –æ–∑–Ω–∞—á–∞—î, —â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–æ—Ä—è–¥–∫—É –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è: `(a + b) + c` –¥–æ—Ä—ñ–≤–Ω—é—î `a + (b + c)`.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ:**
>
> –£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å 4 –ø—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (`A, B, C, D`), —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±'—î–¥–Ω–∞—Ç–∏. –§—Ä–µ–π–º–≤–æ—Ä–∫ –º–æ–∂–µ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ —Ä—ñ–∑–Ω–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
>
> * `((A+B) + C) + D`
> * `(A+B) + (C+D)`
>
> –Ø–∫—â–æ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–∫–æ–º–±–∞–π–Ω–µ—Ä –Ω–µ —î –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—é (–Ω–∞–ø—Ä., –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è), —Ç–æ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫–∏–π —à–ª—è—Ö –æ–±'—î–¥–Ω–∞–Ω–Ω—è –æ–±—Ä–∞–≤ `ForkJoinPool`, —â–æ —Ä–æ–±–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç **–Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º**.
>
> –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–∞ –º–Ω–æ–∂–µ–Ω–Ω—è —î –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–∏–º–∏. –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è —Ç–∞ –¥—ñ–ª–µ–Ω–Ω—è ‚Äî –Ω—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è –≤–∏–º–æ–≥ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å. –†–æ–∑—É–º—ñ–Ω–Ω—è –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —Ñ—É–Ω–∫—Ü—ñ–π, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ `reduce` —Ç–∞ `collect`.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `Collectors.toList()` "–≤—Ä—É—á–Ω—É" –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Collector.of()`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Ü–µ –∫–ª–∞—Å–∏—á–Ω–∞ –≤–ø—Ä–∞–≤–∞** –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ–ª–µ–∫—Ç–æ—Ä–∏.
>
> **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
>
> 1. **`supplier`**: –ù–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. `ArrayList::new` —î —ñ–¥–µ–∞–ª—å–Ω–∏–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º.
> 2. **`accumulator`**: –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞—Ç–∏ –π–æ–≥–æ –¥–æ –Ω–∞—à–æ–≥–æ —Å–ø–∏—Å–∫—É. `List::add`.
> 3. **`combiner`**: –Ø–∫—â–æ —î –¥–≤–∞ —Å–ø–∏—Å–∫–∏ (–∑ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤), —ó—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±'—î–¥–Ω–∞—Ç–∏ –≤ –æ–¥–∏–Ω. –ú–∏ –¥–æ–¥–∞—î–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥—Ä—É–≥–æ–≥–æ —Å–ø–∏—Å–∫—É –¥–æ –ø–µ—Ä—à–æ–≥–æ: `(list1, list2) -> { list1.addAll(list2); return list1; }`.
> 4. **`finisher`**: –¢–∏–ø –Ω–∞—à–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`ArrayList`, —â–æ —î `List`) –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –±–∞–∂–∞–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (`List`). –¢–æ–º—É —Ñ—ñ–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω. –í–∫–∞–∑—É—î–º–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É `IDENTITY_FINISH`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**

```java
public static <T> Collector<T, ?, List<T>> toListCollector() {
    return Collector.of(
        ArrayList::new,
        List::add,
        (list1, list2) -> {
            list1.addAll(list2);
            return list1;
        },
        Collector.Characteristics.IDENTITY_FINISH
    );
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –ª–æ–≥—ñ–∫—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—á–∏ –ø–æ–≤–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –≤—Å—ñ—Ö –π–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ –≤–∞—à `combiner` –æ–±'—î–¥–Ω—É—î –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏, —á–∏ –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–Ω —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á–∏ –º–æ–∂–Ω–∞ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –∑ —ñ—Å–Ω—É—é—á–∏—Ö? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ö–æ–Ω—Ç—Ä–∞–∫—Ç `Collector` **–¥–æ–∑–≤–æ–ª—è—î –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏** –æ–¥–∏–Ω –∑ —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –π–æ–≥–æ. –ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, —Ü–µ —î **—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é** –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –∑–Ω–∞—á–Ω–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç –Ω–∞ –ø–∞–º'—è—Ç—å —Ç–∞ —Ä–æ–±–æ—Ç—É –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è.
>
> –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É –Ω–∞—à—ñ–π —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `toListCollector`, –∫–æ–º–±–∞–π–Ω–µ—Ä `(list1, list2) -> { list1.addAll(list2); return list1; }` –º–æ–¥–∏—Ñ—ñ–∫—É—î `list1` —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –π–æ–≥–æ –∂.
>
> **–í–∞–∂–ª–∏–≤–∏–π –Ω—é–∞–Ω—Å:**
>
> –§—Ä–µ–π–º–≤–æ—Ä–∫ `Stream` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ `combiner` –≤—ñ–Ω **–±—ñ–ª—å—à–µ –Ω–µ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è**. –¶–µ —Ä–æ–±–∏—Ç—å —Ç–∞–∫—É –º—É—Ç–∞—Ü—ñ—é –±–µ–∑–ø–µ—á–Ω–æ—é –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏. –¢–æ–±—Ç–æ, –≤–∏ –º–æ–∂–µ—Ç–µ –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ –ø–æ–∫–∏ –≤–∏ –∑–º—ñ–Ω—é—î—Ç–µ `list1`, –∂–æ–¥–µ–Ω —ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫ –Ω–µ –±—É–¥–µ –≤ –Ω—å–æ–≥–æ –Ω—ñ—á–æ–≥–æ –ø–∏—Å–∞—Ç–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç—ñ–π, —â–æ –Ω–∞–¥–∞—é—Ç—å—Å—è `Stream API`, –∑–æ–∫—Ä–µ–º–∞, –±–µ–∑–ø–µ–∫—É –º—É—Ç–∞—Ü—ñ—ó –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `combiner`'–∞.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ `CONCURRENT` –¥–∞—î –Ω–∞–π–±—ñ–ª—å—à—É –ø–µ—Ä–µ–≤–∞–≥—É? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ **`CONCURRENT`** –¥–∞—î –Ω–∞–π–±—ñ–ª—å—à—É –ø–µ—Ä–µ–≤–∞–≥—É –≤ **–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö (`parallelStream`)** —É —Å–∏—Ç—É–∞—Ü—ñ—è—Ö, –¥–µ:
>
> 1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —î –¥–æ—Ä–æ–≥–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é:** –Ø–∫—â–æ `supplier` —Å—Ç–≤–æ—Ä—é—î —è–∫–∏–π—Å—å —Å–∫–ª–∞–¥–Ω–∏–π –∞–±–æ —Ä–µ—Å—É—Ä—Å–æ–º—ñ—Å—Ç–∫–∏–π –æ–±'—î–∫—Ç.
> 2. **–û–±'—î–¥–Ω–∞–Ω–Ω—è (combining) —î –¥–æ—Ä–æ–≥–∏–º:** –Ø–∫—â–æ –ª–æ–≥—ñ–∫–∞ `combiner`'a —î —Å–∫–ª–∞–¥–Ω–æ—é —ñ –≤–∏–º–∞–≥–∞—î –±–∞–≥–∞—Ç–æ –æ–±—á–∏—Å–ª–µ–Ω—å.
>
> **–©–æ —Ä–æ–±–∏—Ç—å `CONCURRENT`:**
>
> –í—ñ–Ω –≥–æ–≤–æ—Ä–∏—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É, —â–æ –∞–∫—É–º—É–ª—è—Ç–æ—Ä (`A`) —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º. –ó–∞–≤–¥—è–∫–∏ —Ü—å–æ–º—É, `Stream API` –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **–ª–∏—à–µ –æ–¥–∏–Ω** —Å–ø—ñ–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Å—ñ–º –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º –ø–æ—Ç–æ–∫–∞–º **–æ–¥–Ω–æ—á–∞—Å–Ω–æ** –¥–æ–¥–∞–≤–∞—Ç–∏ –¥–æ –Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `accumulator`.
>
> **–í —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É `combiner` –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è**, —â–æ —É—Å—É–≤–∞—î —Ü—ñ–ª–∏–π –µ—Ç–∞–ø –æ–±'—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.
>
> **–ü—Ä–∏–∫–ª–∞–¥:** `Collectors.toConcurrentMap()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü–µ–π –ø—ñ–¥—Ö—ñ–¥, –∑–±–∏—Ä–∞—é—á–∏ –≤—Å–µ –≤ –æ–¥–∏–Ω `ConcurrentHashMap`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —Ç–∞ —Ä–æ–ª—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞ –≤ —Ü—å–æ–º—É.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π `Collector`, —è–∫–∏–π –ø—Ä–∞—Ü—é—î –ø–æ–¥—ñ–±–Ω–æ –¥–æ `groupingBy` –∑ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º `summingInt`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Å–∫–ª–∞–¥–Ω–æ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ `List<Product>` –ø–æ `category` —ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å—É–º—É —Ü—ñ–Ω. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî `Map<String, Integer>`.
>
> 1. **`T`**: `Product`
> 2. **`A` (–∞–∫—É–º—É–ª—è—Ç–æ—Ä):** –ù–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω `Map<String, Integer>` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö —Å—É–º.
> 3. **`R` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç):** –¢–æ–π —Å–∞–º–∏–π `Map<String, Integer>`. –û—Ç–∂–µ, `finisher` –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω (`IDENTITY_FINISH`).
>
> **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
>
> * `supplier`: `HashMap::new`
> * `accumulator`: –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É –±–µ—Ä–µ–º–æ –π–æ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —Ç–∞ —Ü—ñ–Ω—É —ñ –¥–æ–¥–∞—î–º–æ –¥–æ –º–∞–ø–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `map.merge()` –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ.
> * `combiner`: –î–ª—è –∫–æ–∂–Ω–æ—ó –ø–∞—Ä–∏ –∑ –¥—Ä—É–≥–æ—ó –º–∞–ø–∏, –¥–æ–¥–∞—î–º–æ —ó—ó –∑–Ω–∞—á–µ–Ω–Ω—è –¥–æ –ø–µ—Ä—à–æ—ó –º–∞–ø–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `merge` –∑ —Ç—ñ—î—é –∂ –ª–æ–≥—ñ–∫–æ—é –¥–æ–¥–∞–≤–∞–Ω–Ω—è.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**

```java
Collector<Product, ?, Map<String, Integer>> groupingAndSumming = Collector.of(
    HashMap::new, // supplier
    (map, product) -> map.merge(        // accumulator
        product.getCategory(), 
        product.getPrice(), 
        Integer::sum
    ),
    (map1, map2) -> {                   // combiner
        map2.forEach((category, price) -> 
            map1.merge(category, price, Integer::sum));
        return map1;
    },
    Collector.Characteristics.IDENTITY_FINISH
);
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è `Stream API` —Ç–∞ `Map API` (`merge`). –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –≤–º—ñ—Ç–∏ –∑ –Ω—É–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –ª–æ–≥—ñ–∫—É —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ñ—É–Ω–∫—Ü—ñ—è `finisher` –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞ —É –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—ñ `Collector<T, A, R>`? –ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥, –¥–µ –±–µ–∑ –Ω–µ—ó –Ω–µ –æ–±—ñ–π—Ç–∏—Å—å. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –§—É–Ω–∫—Ü—ñ—è `finisher` —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—é –¥–ª—è **–≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –≤—ñ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É**. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –æ–¥–∏–Ω, –º–æ–∂–ª–∏–≤–æ, –±—ñ–ª—å—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –∞–±–æ –∑—Ä—É—á–Ω–∏–π **–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π** —Ç–∏–ø, –∞ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ ‚Äî —ñ–Ω—à–∏–π, –º–æ–∂–ª–∏–≤–æ, **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π** –∞–±–æ –ø—Ä–æ—Å—Ç–æ —ñ–Ω—à–∏–π –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é.
>
> **–ü—Ä–∏–∫–ª–∞–¥, –¥–µ –±–µ–∑ –Ω–µ—ó –Ω–µ –æ–±—ñ–π—Ç–∏—Å—å ‚Äî —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `Collectors.toUnmodifiableList()`:**
>
> 1. **–ù–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è (`A`):** –ù–∞–±–∞–≥–∞—Ç–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ –Ω–∞–∫–æ–ø–∏—á—É–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ —É –∑–≤–∏—á–∞–π–Ω–∏–π –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π `ArrayList`.
> 2. **–ö—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (`R`):** –ú–∏ —Ö–æ—á–µ–º–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π** —Å–ø–∏—Å–æ–∫.
>
> **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
>
> * **`supplier`**: `ArrayList::new`
> * **`accumulator`**: `List::add`
> * **`combiner`**: –æ–±'—î–¥–Ω—É—î –¥–≤–∞ `ArrayList`.
> * **`finisher`**: **`Collections::unmodifiableList`**. –°–∞–º–µ —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∏–π–º–∞—î –Ω–∞—à –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π `ArrayList` —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –π–æ–≥–æ –Ω–∞ –∫—ñ–Ω—Ü–µ–≤–∏–π, –Ω–µ–∑–º—ñ–Ω–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
>
> –ë–µ–∑ `finisher`'–∞ –º–∏ –±—É–ª–∏ –± –∑–º—É—à–µ–Ω—ñ –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—â–æ –Ω–µ –∑–∞–≤–∂–¥–∏ –±–∞–∂–∞–Ω–æ), –∞–±–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–Ω–∞—á–Ω–æ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –Ω–∞ —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è. –†–æ–∑—É–º—ñ–Ω–Ω—è, —á–æ–º—É `finisher` —î –∫–ª—é—á–æ–≤–∏–º –¥–ª—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ —Ç–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –≤ –¥–∏–∑–∞–π–Ω—ñ `Collector`'—ñ–≤.*

* * *
