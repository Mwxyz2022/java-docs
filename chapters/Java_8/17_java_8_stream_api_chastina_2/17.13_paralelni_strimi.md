---
layout: default
title: "–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 13
---

# –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏` ‚Äì —Ü–µ –ø–æ—Ç–æ–∫–æ–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å –æ–±—Ä–æ–±–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `ForkJoinPool.commonPool()`) –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∏ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö.

* –ø–æ–Ω—è—Ç—Ç—è: `parallelStream()`, `stream().parallel()`, `ForkJoinPool.commonPool()`, `race condition` (—è–∫ –ø—Ä–æ–±–ª–µ–º–∞).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `list.parallelStream().map(String::toUpperCase).forEach(System.out::println)`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ù–µ –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à–µ (—î –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏). –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è. –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –±—É—Ç–∏ –æ–±–µ—Ä–µ–∂–Ω–∏–º –∑—ñ `shared mutable state`.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏, –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏** ‚Äî —Ü–µ –ø–æ—Ç–æ–∫–æ–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤ Java, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å –æ–±—Ä–æ–±–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ (threads), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ **ForkJoinPool.commonPool()**, –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –æ–± º—î–º–∞–º–∏ –¥–∞–Ω–∏—Ö.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —Å—Ç—Ä—ñ–º–∏, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–µ –ø–æ —á–µ—Ä–∑—ñ, –∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ ‚Äî —è–∫ –∫—ñ–ª—å–∫–∞ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –ê–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏ –±—ñ–ª—å—à–µ —Ä—É–∫ ‚Äî –∫—Ä–∞—â–µ

---

## üìä **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤:**

|           –ú–µ—Ç–æ–¥           |                 –û–ø–∏—Å                 |
|:-------------------------:|:------------------------------------:|
|      **`stream()`**       |     –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤     |
|  **`parallelStream()`**   |    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞    |
| **`stream().parallel()`** | –¢–µ —Å–∞–º–µ, —â–æ –π **`parallelStream()`** |

**üìå –¢–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞–∑–∞–¥ –¥–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ:**

```java
stream().parallel().sequential()
```

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏ –∫–æ–Ω–≤–µ—î—Ä.

* –ó–≤–∏—á–∞–π–Ω–∏–π —Å—Ç—Ä—ñ–º ‚Äî –æ–¥–∏–Ω –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –ø–æ —á–µ—Ä–∑—ñ.
* –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º ‚Äî –∫—ñ–ª—å–∫–∞ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ –±–µ—Ä—É—Ç—å —Ä—ñ–∑–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø–∞—Ä—Ç—ñ—ó –π –ø—Ä–∞—Ü—é—é—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

–ê–ª–µ —è–∫—â–æ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–¥ **–∑–∞–ª–µ–∂–Ω–∏–º–∏** –∞–±–æ **–Ω–µ–¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏–º–∏** –∑–∞–¥–∞—á–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞—é—Ç—å –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É),
–º–æ–∂—É—Ç—å –∑‚Äô—è–≤–∏—Ç–∏—Å—è **–∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏**, **race condition** –∞–±–æ **—Ö–∞–æ—Å** –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// ‚öôÔ∏è –ó–≤–∏—á–∞–π–Ω–∏–π —Å—Ç—Ä—ñ–º
list.stream()
.map(String::toUpperCase)
.forEach(System.out::println);
```

```java
// üß™ –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è
list.parallelStream()
    .map(String::toUpperCase)
    .forEach(System.out::println); // –ú–æ–∂–µ –≤–∏–≤–æ–¥–∏—Ç–∏—Å—å —É –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É
```

```java
// üöÄ –ü—Ä–∏–∫–ª–∞–¥ –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é
long count = LongStream.range(0, 1_000_000)
    .parallel()
    .filter(n -> n % 2 == 0)
    .count(); // –®–≤–∏–¥—à–µ, –Ω—ñ–∂ stream() –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –æ–± º—î–º–∞—Ö
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|     –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å     |  `stream()`   |        `parallelStream()`         |
|:-------------------:|:-------------:|:---------------------------------:|
|    **–í–∏–∫–æ–Ω–∞–Ω–Ω—è**    |  –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ   |            –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ             |
| **–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏** |  –ó–±–µ—Ä–µ–∂–µ–Ω–∏–π   |        –ú–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π         |
|  **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è**  | –ú–∞–ª–∏—Ö –æ–±—Å—è–≥—ñ–≤ | –í–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤, –≤–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å |
| **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏**  |  –ë–µ–∑–ø–µ—á–Ω—ñ—à–µ   |      –ü–æ—Ç—Ä–µ–±—É—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó       |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**  | –ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ |  –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –∫—Ä–∞—â–∞, –∞–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏  |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `stream()` —Ç–∞ `parallelStream()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

**`stream()`** ‚Äî –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, **`parallelStream()`** ‚Äî —Ä–æ–∑–¥—ñ–ª—è—î –æ–±—Ä–æ–±–∫—É –º—ñ–∂ –∫—ñ–ª—å–∫–æ–º–∞ –ø–æ—Ç–æ–∫–∞–º–∏ (*
*`thread'–∞–º–∏`**) –≤ **`ForkJoinPool`**.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏ –∑–∞–≤–∂–¥–∏ `parallelStream()` —à–≤–∏–¥—à–µ?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ù—ñ. –î–ª—è –º–∞–ª–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –∞–±–æ –ø—Ä–æ—Å—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π ‚Äî –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ä–æ–∑–ø–æ–¥—ñ–ª –∑–∞–¥–∞—á –º–æ–∂—É—Ç—å –∑–Ω–∏–∑–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç `forEach()` –≤ `parallelStream()` –º–æ–∂–µ –±—É—Ç–∏ —É –≤–∏–ø–∞–¥–∫–æ–≤–æ–º—É –ø–æ—Ä—è–¥–∫—É?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –æ–∑–Ω–∞—á–∞—î, —â–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –º–æ–∂—É—Ç—å –æ–±—Ä–æ–±–ª—è—Ç–∏—Å—è –≤ –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É. –Ø–∫—â–æ –≤–∞–∂–ª–∏–≤–∏–π –ø–æ—Ä—è–¥–æ–∫ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **`forEachOrdered()`**.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**‚ÄúParallel \= –ü–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ\!‚Äù**

–∞–±–æ

**"–ü–æ—Ç–æ–∫–∏ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤"** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **`parallelStream()`**, –∫–æ–ª–∏ –±–∞–≥–∞—Ç–æ –¥–∞–Ω–∏—Ö

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`parallelStream()`** –¥–∞—î –∑–º–æ–≥—É –æ–±—Ä–æ–±–ª—è—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ **–æ–¥–Ω–æ—á–∞—Å–Ω–æ**, —â–æ **–º–æ–∂–µ** –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.

* **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π**, —è–∫—â–æ:
  * –ú–∞–ª–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
  * –Ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏
  * –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ä—è–¥–æ–∫
* –î–ª—è –≤–∞–∂–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö ‚Äî **—Ç–∞–∫**, –¥–ª—è –¥—Ä—ñ–±–Ω–∏—Ü—å ‚Äî **–Ω—ñ**.
* –í–∞–∂–ª–∏–≤–æ –ø–∞–º º—è—Ç–∞—Ç–∏ –ø—Ä–æ **fork-join pool**, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**JavaDoc: ForkJoinPool**](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html)
* [**StackOverflow: When to use parallel streams**](https://stackoverflow.com/questions/21163108/what-are-the-advantages-of-using-parallel-stream-in-java-8)
