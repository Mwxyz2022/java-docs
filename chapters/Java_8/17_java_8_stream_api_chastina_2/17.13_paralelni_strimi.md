---
layout: default
title: "–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 13
---

# –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏` ‚Äì —Ü–µ –ø–æ—Ç–æ–∫–æ–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å –æ–±—Ä–æ–±–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `ForkJoinPool.commonPool()`) –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∏ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö.

* –ø–æ–Ω—è—Ç—Ç—è: `parallelStream()`, `stream().parallel()`, `ForkJoinPool.commonPool()`, `race condition` (—è–∫ –ø—Ä–æ–±–ª–µ–º–∞).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `list.parallelStream().map(String::toUpperCase).forEach(System.out::println)`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ù–µ –∑–∞–≤–∂–¥–∏ —à–≤–∏–¥—à–µ (—î –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏). –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è. –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –±—É—Ç–∏ –æ–±–µ—Ä–µ–∂–Ω–∏–º –∑—ñ `shared mutable state`.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏, –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**–ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏** ‚Äî —Ü–µ –ø–æ—Ç–æ–∫–æ–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤ Java, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å –æ–±—Ä–æ–±–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ (threads), –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ **ForkJoinPool.commonPool()**, –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –æ–± º—î–º–∞–º–∏ –¥–∞–Ω–∏—Ö.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —Å—Ç—Ä—ñ–º–∏, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–µ –ø–æ —á–µ—Ä–∑—ñ, –∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ ‚Äî —è–∫ –∫—ñ–ª—å–∫–∞ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –ê–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏ –±—ñ–ª—å—à–µ —Ä—É–∫ ‚Äî –∫—Ä–∞—â–µ

---

## üìä **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤:**

|           –ú–µ—Ç–æ–¥           |                 –û–ø–∏—Å                 |
|:-------------------------:|:------------------------------------:|
|      **`stream()`**       |     –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤     |
|  **`parallelStream()`**   |    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞    |
| **`stream().parallel()`** | –¢–µ —Å–∞–º–µ, —â–æ –π **`parallelStream()`** |

**üìå –¢–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞–∑–∞–¥ –¥–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ:**

```java
stream().parallel().sequential()
```

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏ –∫–æ–Ω–≤–µ—î—Ä.

* –ó–≤–∏—á–∞–π–Ω–∏–π —Å—Ç—Ä—ñ–º ‚Äî –æ–¥–∏–Ω –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫ –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –ø–æ —á–µ—Ä–∑—ñ.
* –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º ‚Äî –∫—ñ–ª—å–∫–∞ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤ –±–µ—Ä—É—Ç—å —Ä—ñ–∑–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø–∞—Ä—Ç—ñ—ó –π –ø—Ä–∞—Ü—é—é—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

–ê–ª–µ —è–∫—â–æ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–¥ **–∑–∞–ª–µ–∂–Ω–∏–º–∏** –∞–±–æ **–Ω–µ–¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏–º–∏** –∑–∞–¥–∞—á–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞—é—Ç—å –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É),
–º–æ–∂—É—Ç—å –∑‚Äô—è–≤–∏—Ç–∏—Å—è **–∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏**, **race condition** –∞–±–æ **—Ö–∞–æ—Å** –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// ‚öôÔ∏è –ó–≤–∏—á–∞–π–Ω–∏–π —Å—Ç—Ä—ñ–º
list.stream()
.map(String::toUpperCase)
.forEach(System.out::println);
```

```java
// üß™ –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è
list.parallelStream()
    .map(String::toUpperCase)
    .forEach(System.out::println); // –ú–æ–∂–µ –≤–∏–≤–æ–¥–∏—Ç–∏—Å—å —É –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É
```

```java
// üöÄ –ü—Ä–∏–∫–ª–∞–¥ –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é
long count = LongStream.range(0, 1_000_000)
    .parallel()
    .filter(n -> n % 2 == 0)
    .count(); // –®–≤–∏–¥—à–µ, –Ω—ñ–∂ stream() –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –æ–± º—î–º–∞—Ö
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|     –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å     |  `stream()`   |        `parallelStream()`         |
|:-------------------:|:-------------:|:---------------------------------:|
|    **–í–∏–∫–æ–Ω–∞–Ω–Ω—è**    |  –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ   |            –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ             |
| **–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏** |  –ó–±–µ—Ä–µ–∂–µ–Ω–∏–π   |        –ú–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π         |
|  **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è**  | –ú–∞–ª–∏—Ö –æ–±—Å—è–≥—ñ–≤ | –í–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤, –≤–∞–∂–∫–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å |
| **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏**  |  –ë–µ–∑–ø–µ—á–Ω—ñ—à–µ   |      –ü–æ—Ç—Ä–µ–±—É—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó       |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**  | –ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ |  –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –∫—Ä–∞—â–∞, –∞–ª–µ –Ω–µ –∑–∞–≤–∂–¥–∏  |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**‚ÄúParallel \= –ü–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ\!‚Äù**

–∞–±–æ

**"–ü–æ—Ç–æ–∫–∏ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤"** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **`parallelStream()`**, –∫–æ–ª–∏ –±–∞–≥–∞—Ç–æ –¥–∞–Ω–∏—Ö

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`parallelStream()`** –¥–∞—î –∑–º–æ–≥—É –æ–±—Ä–æ–±–ª—è—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ **–æ–¥–Ω–æ—á–∞—Å–Ω–æ**, —â–æ **–º–æ–∂–µ** –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.

* **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π**, —è–∫—â–æ:
  * –ú–∞–ª–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
  * –Ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏
  * –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ä—è–¥–æ–∫
* –î–ª—è –≤–∞–∂–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö ‚Äî **—Ç–∞–∫**, –¥–ª—è –¥—Ä—ñ–±–Ω–∏—Ü—å ‚Äî **–Ω—ñ**.
* –í–∞–∂–ª–∏–≤–æ –ø–∞–º º—è—Ç–∞—Ç–∏ –ø—Ä–æ **fork-join pool**, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**JavaDoc: ForkJoinPool**](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html)
* [**StackOverflow: When to use parallel streams**](https://stackoverflow.com/questions/21163108/what-are-the-advantages-of-using-parallel-stream-in-java-8)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–∏ (Parallel Streams) —ñ –≤ —á–æ–º—É —ó—Ö–Ω—è –æ—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∑–≤–∏—á–∞–π–Ω–∏—Ö (–ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö)?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ (`parallelStream`)** ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è `Stream`, —è–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ **—Ä–æ–∑–±–∏–≤–∞—î** –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö –Ω–∞ –∫—ñ–ª—å–∫–∞ —á–∞—Å—Ç–∏–Ω —ñ –æ–±—Ä–æ–±–ª—è—î —ó—Ö **–æ–¥–Ω–æ—á–∞—Å–Ω–æ** –≤ –¥–µ–∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫–∞—Ö (threads).
>
> **–û—Å–Ω–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ `stream()`:**
>
> * **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ (`stream()`):**
>   * –û–±—Ä–æ–±–ª—è—î –µ–ª–µ–º–µ–Ω—Ç–∏ **–æ–¥–∏–Ω –∑–∞ –æ–¥–Ω–∏–º** —É **–æ–¥–Ω–æ–º—É** –ø–æ—Ç–æ—Ü—ñ.
>   * –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —î **–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º** —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–æ—Ä—è–¥–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –¥–∂–µ—Ä–µ–ª—ñ.
>
> * **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ (`parallelStream()`):**
>   * –û–±—Ä–æ–±–ª—è—î –µ–ª–µ–º–µ–Ω—Ç–∏ **–æ–¥–Ω–æ—á–∞—Å–Ω–æ** —É **–∫—ñ–ª—å–∫–æ—Ö** –ø–æ—Ç–æ–∫–∞—Ö.
>   * –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π** (—Ö–æ—á–∞ –¥–µ—è–∫—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫ `collect`, –∑–±–µ—Ä–µ–∂—É—Ç—å –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–æ—Ä—è–¥–æ–∫).
>   * –î–ª—è —Å–≤–æ—î—ó —Ä–æ–±–æ—Ç–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–ø—ñ–ª—å–Ω–∏–π –ø—É–ª –ø–æ—Ç–æ–∫—ñ–≤ ‚Äî **`ForkJoinPool.commonPool()`**.
>
> –û—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ ‚Äî **–ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö –Ω–∞ –±–∞–≥–∞—Ç–æ—è–¥–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞—Ö.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–º–∏—Ç–∏ –≥–æ—Ä—É –ø–æ—Å—É–¥—É.

* **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π —Å—Ç—Ä—ñ–º:** –í–∏ –º–∏—î—Ç–µ –∫–æ–∂–Ω—É —Ç–∞—Ä—ñ–ª–∫—É –ø–æ —á–µ—Ä–∑—ñ, –æ–¥–Ω–∞ –∑–∞ –æ–¥–Ω–æ—é.
* **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π —Å—Ç—Ä—ñ–º:** –í–∏ –∫–ª–∏—á–µ—Ç–µ –∫—ñ–ª—å–∫–æ—Ö –¥—Ä—É–∑—ñ–≤, –∫–æ–∂–µ–Ω –±–µ—Ä–µ —Å–≤–æ—é —á–∞—Å—Ç–∏–Ω—É –ø–æ—Å—É–¥—É, —ñ –≤–∏ –º–∏—î—Ç–µ –π–æ–≥–æ –æ–¥–Ω–æ—á–∞—Å–Ω–æ. –†–æ–±–æ—Ç–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —à–≤–∏–¥—à–µ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ë–∞–∑–æ–≤–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ —Ç–∞–∫–µ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–∏ —Ç–∞ —è–∫–∞ —ó—Ö–Ω—è –≥–æ–ª–æ–≤–Ω–∞ –º–µ—Ç–∞ ‚Äî –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ü—Å–Ω—É—î –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ —Å–ø–æ—Å–æ–±–∏:
>
> 1. **`collection.parallelStream()`**:
>     –¶–µ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±. –ú–µ—Ç–æ–¥ `parallelStream()` –æ–¥—Ä–∞–∑—É —Å—Ç–≤–æ—Ä—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó.
>
>     ```java
>     List<Integer> numbers = ...;
>     Stream<Integer> parallelStream = numbers.parallelStream();
>     ```
>
> 2. **`stream.parallel()`**:
>     –ë—É–¥—å-—è–∫–∏–π –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–æ–º—ñ–∂–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó `.parallel()`.
>
>     ```java
>     Stream<Integer> sequentialStream = numbers.stream();
>     Stream<Integer> parallelStream = sequentialStream.parallel();
>     ```
>
> **–¢–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞–∑–∞–¥ –¥–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É:**
>
> –ú–µ—Ç–æ–¥ `.sequential()` —î –ø—Ä–æ–º—ñ–∂–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é, —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –Ω–∞–∑–∞–¥ –Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π.
>
> ```java
> stream.parallel().filter(...).sequential().forEachOrdered(...);
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏: –∑–Ω–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ API –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–∏, –∞ –∫–æ–ª–∏ ‚Äî –Ω—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `parallelStream()` ‚Äî —Ü–µ –Ω–µ "—á–∞—Ä—ñ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞" –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è. –ô–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–∞—î –±—É—Ç–∏ –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–∏–º, —ñ–Ω–∞–∫—à–µ –≤—ñ–Ω –º–æ–∂–µ –Ω–∞–≤—ñ—Ç—å **—Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏** –≤–∞—à—É –ø—Ä–æ–≥—Ä–∞–º—É.
>
> **–ö–æ–ª–∏ –í–ê–†–¢–û –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `parallelStream()`:**
>
> * **–í–µ–ª–∏–∫—ñ –æ–±—Å—è–≥–∏ –¥–∞–Ω–∏—Ö:** –ö–æ–ª–∏ —É –≤–∞—Å —Ç–∏—Å—è—á—ñ, –º—ñ–ª—å–π–æ–Ω–∏ –∞–±–æ –±—ñ–ª—å—à–µ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
> * **"–î–æ—Ä–æ–≥—ñ" –æ–±—á–∏—Å–ª–µ–Ω–Ω—è:** –ö–æ–ª–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –∫–æ–∂–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º (–≤ `map` –∞–±–æ `filter`) —î —Ä–µ—Å—É—Ä—Å–æ–º—ñ—Å—Ç–∫–∏–º–∏ (–Ω–∞–ø—Ä., —Å–∫–ª–∞–¥–Ω—ñ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, —Ä–æ–±–æ—Ç–∞ –∑ `BigDecimal`).
> * **–î–æ–±—Ä–µ —Ä–æ–∑—â–µ–ø–ª—é–≤–∞–Ω–µ –¥–∂–µ—Ä–µ–ª–æ:** `ArrayList` —Ç–∞ –º–∞—Å–∏–≤–∏ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ –¥—É–∂–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
> * **–û–ø–µ—Ä–∞—Ü—ñ—ó –±–µ–∑ —Å—Ç–∞–Ω—É —Ç–∞ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤:** –ö–æ–ª–∏ –æ–±—Ä–æ–±–∫–∞ –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —î –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–æ—é.
>
> **–ö–æ–ª–∏ –ù–ï –í–ê–†–¢–û –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `parallelStream()`:**
>
> * **–ú–∞–ª—ñ –æ–±—Å—è–≥–∏ –¥–∞–Ω–∏—Ö:** –ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ä–æ–∑–ø–∞—Ä–∞–ª–µ–ª—é–≤–∞–Ω–Ω—è (—Ä–æ–∑–±–∏—Ç—Ç—è, –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏, –æ–±'—î–¥–Ω–∞–Ω–Ω—è) –ø–µ—Ä–µ–≤–∏—â–∞—Ç—å –≤–∏–≥–æ–¥—É.
> * **"–î–µ—à–µ–≤—ñ" –æ–±—á–∏—Å–ª–µ–Ω–Ω—è:** –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó –ø—Ä–æ—Å—Ç—ñ, –≤—É–∑—å–∫–∏–º –º—ñ—Å—Ü–µ–º –±—É–¥–µ –Ω–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è, –∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏.
> * **–î–∂–µ—Ä–µ–ª–æ, —â–æ –ø–æ–≥–∞–Ω–æ —Ä–æ–∑—â–µ–ø–ª—é—î—Ç—å—Å—è:** –ù–∞–ø—Ä–∏–∫–ª–∞–¥, `LinkedList`.
> * **–Ø–∫—â–æ –≤–∞—à –∫–æ–¥ –∑–º—ñ–Ω—é—î —Å–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω (shared mutable state):** –¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ "—É–º–æ–≤ –≥–æ–Ω–∏—Ç–≤–∏".
> * **–Ø–∫—â–æ –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–º.**

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó—Ä—ñ–ª–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º ‚Äî —Ü–µ –∫–æ–º–ø—Ä–æ–º—ñ—Å. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –≤–º—ñ—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–∞–¥–∞—á—É —ñ –ø—Ä–∏–π–º–∞—Ç–∏ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –¥–æ—Ü—ñ–ª—å–Ω—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `parallelStream()`.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π –ø—É–ª –ø–æ—Ç–æ–∫—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤, —ñ —è–∫—ñ –∑ —Ü–∏–º –ø–æ–≤'—è–∑–∞–Ω—ñ —Ä–∏–∑–∏–∫–∏?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `parallelStream()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **—Å–ø—ñ–ª—å–Ω–∏–π (common) `ForkJoinPool`**.
>
> `ForkJoinPool.commonPool()` ‚Äî —Ü–µ **—î–¥–∏–Ω–∏–π** –ø—É–ª –ø–æ—Ç–æ–∫—ñ–≤ –Ω–∞ –≤—Å—é JVM, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–µ —Ç—ñ–ª—å–∫–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –∞ –π —ñ–Ω—à–∏–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏ (–Ω–∞–ø—Ä., `CompletableFuture`). –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—ñ–≤ —É –Ω—å–æ–º—É –∑–∞–∑–≤–∏—á–∞–π –¥–æ—Ä—ñ–≤–Ω—é—î –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ –º—ñ–Ω—É—Å –æ–¥–∏–Ω.
>
> **–†–∏–∑–∏–∫–∏, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ —Ü–∏–º:**
>
> 1. **–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É:** –Ø–∫—â–æ –≤–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `parallelStream` –≤–∏–∫–æ–Ω—É—î—Ç–µ **–¥–æ–≤–≥–æ—Ç—Ä–∏–≤–∞–ª—É –±–ª–æ–∫—É—é—á—É –æ–ø–µ—Ä–∞—Ü—ñ—é** (–Ω–∞–ø—Ä., –º–µ—Ä–µ–∂–µ–≤–∏–π –∑–∞–ø–∏—Ç –∞–±–æ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö), –≤–∏ –º–æ–∂–µ—Ç–µ **"–∑–∞–π–Ω—è—Ç–∏" –≤—Å—ñ –ø–æ—Ç–æ–∫–∏** –∑—ñ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –ø—É–ª—É.
> 2. **"–ì–æ–ª–æ–¥—É–≤–∞–Ω–Ω—è" —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω —Å–∏—Å—Ç–µ–º–∏:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É, —è–∫—ñ —Ç–∞–∫–æ–∂ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—é—Ç—å –Ω–∞ `commonPool` (–Ω–∞–ø—Ä., –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ –Ω–∞ `CompletableFuture`), –Ω–µ –∑–º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ "–∑–∞–≤–∏—Å–Ω—É—Ç—å".
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è **CPU-bound** (–æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏—Ö) –∑–∞–¥–∞—á, –∞ –Ω–µ –¥–ª—è **IO-bound** (–∑–∞–¥–∞—á, —â–æ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –≤–≤–æ–¥—É-–≤–∏–≤–æ–¥—É). –î–ª—è –±–ª–æ–∫—É—é—á–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ `ExecutorService`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, "–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º" —á–æ–≥–æ –ø—Ä–∞—Ü—é—é—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø–æ—Ç–æ–∫–∏. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –∑–Ω–∞–Ω–Ω—è concurrency —Ç–∞ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö "–ø–∞—Å—Ç–æ–∫", –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑—ñ —Å–ø—ñ–ª—å–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –∑ `parallelStream()`?

```java
List<Integer> result = new ArrayList<>();
IntStream.range(0, 1000).parallel().forEach(i -> result.add(i));
```

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ —î **–≤–∫—Ä–∞–π –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º** —ñ –º–∞–π–∂–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–æ–∫.
>
> **–ü—Ä–∏—á–∏–Ω–∞:**
>
> –õ—è–º–±–¥–∞, –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ `forEach`, –º–∞—î **–ø–æ–±—ñ—á–Ω–∏–π –µ—Ñ–µ–∫—Ç (side-effect)** ‚Äî –≤–æ–Ω–∞ –∑–º—ñ–Ω—é—î **—Å–ø—ñ–ª—å–Ω–∏–π –∑–º—ñ–Ω–Ω–∏–π —Å—Ç–∞–Ω (shared mutable state)**, —è–∫–∏–º —î `ArrayList`.
>
> 1. `ArrayList` **–Ω–µ —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é** –∫–æ–ª–µ–∫—Ü—ñ—î—é.
> 2. –ü—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `parallelStream()`, –∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –±—É–¥—É—Ç—å **–æ–¥–Ω–æ—á–∞—Å–Ω–æ** –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ `result.add()`.
> 3. –¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ **"—É–º–æ–≤–∏ –≥–æ–Ω–∏—Ç–≤–∏" (race condition)**. –í–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `ArrayList` (–º–∞—Å–∏–≤ —Ç–∞ –ª—ñ—á–∏–ª—å–Ω–∏–∫ `size`) –±—É–¥–µ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∞.
>
> **–ú–æ–∂–ª–∏–≤—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏:**
>
> * `ArrayIndexOutOfBoundsException`, —è–∫—â–æ –¥–≤–∞ –ø–æ—Ç–æ–∫–∏ —Å–ø—Ä–æ–±—É—é—Ç—å –∑–∞–ø–∏—Å–∞—Ç–∏ –≤ —Ç—É —Å–∞–º—É –∫–æ–º—ñ—Ä–∫—É.
> * –í—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö (—Ä–æ–∑–º—ñ—Ä `result` –±—É–¥–µ –º–µ–Ω—à–∏–º –∑–∞ 1000).
> * –ü–æ—à–∫–æ–¥–∂–µ–Ω—ñ –¥–∞–Ω—ñ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å–ø–∏—Å–∫—É.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:**
>
> –î–ª—è –∑–±–æ—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ —Å–ª—ñ–¥ –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`collect()`**.
>
> ```java
> List<Integer> result = IntStream.range(0, 1000).parallel().boxed().collect(Collectors.toList());
> ```
>
> –ö–æ–ª–µ–∫—Ç–æ—Ä–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –±–µ–∑–ø–µ—á–Ω–æ —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∑–±–∏—Ä–∞—Ç–∏ –¥–∞–Ω—ñ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–æ—ó —Ç–∞ –Ω–∞–π–Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ—à–æ—ó –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ `parallelStream`. –¶–µ –∫–ª—é—á–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –∑–Ω–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `forEach` —Ç–∞ `forEachOrdered` –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ —î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏, –∞–ª–µ –≤–æ–Ω–∏ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É –ø–æ–≤–æ–¥—è—Ç—å—Å—è –∑ –ø–æ—Ä—è–¥–∫–æ–º —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.
>
> * **`forEach(Consumer<T> action)`:**
>   * **–ù–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Ä—è–¥–æ–∫.** –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –∫–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω—É—î –¥—ñ—é –Ω–∞–¥ —Å–≤–æ—ó–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤ –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É.
>   * –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–≤–æ–¥—É –±—É–¥–µ —â–æ—Ä–∞–∑—É —ñ–Ω—à–∏–º.
>
> * **`forEachOrdered(Consumer<T> action)`:**
>   * **–ì–∞—Ä–∞–Ω—Ç—É—î** –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥—ñ—ó —É **–ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É –ø–æ—Ä—è–¥–∫—É** –ø–æ—Ç–æ–∫—É (encounter order).
>   * –î–ª—è —Ü—å–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∑–º—É—à–µ–Ω–∏–π **—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏** —Ä–æ–±–æ—Ç—É –ø–æ—Ç–æ–∫—ñ–≤, —â–æ **–∑–Ω–∞—á–Ω–æ –∑–Ω–∏–∂—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** —ñ –º–æ–∂–µ –Ω—ñ–≤–µ–ª—é–≤–∞—Ç–∏ –≤—Å—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `forEachOrdered` —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —î –∞–±—Å–æ–ª—é—Ç–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∏–º, —ñ –±—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ñ –¥–æ –≤—Ç—Ä–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Å–≤—ñ—Ç—ñ –º–∞—î —Å–≤–æ—é "—Ü—ñ–Ω—É" —É –≤–∏–≥–ª—è–¥—ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –≤—Ç—Ä–∞—Ç–∏ —à–≤–∏–¥–∫–æ—Å—Ç—ñ.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `parallelStream()` –Ω–∞ `LinkedList` –∑–∞–∑–≤–∏—á–∞–π —î –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å `parallelStream` —Å–∏–ª—å–Ω–æ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –¥–æ–±—Ä–µ **–¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö –º–æ–∂–Ω–∞ —Ä–æ–∑–±–∏—Ç–∏ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏** (`Spliterator`).
>
> * **`ArrayList` (–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ):**
>   * –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –º–∞—Å–∏–≤—ñ. –†–æ–∑–±–∏—Ç–∏ –º–∞—Å–∏–≤ –Ω–∞ –¥–≤—ñ —á–∞—Å—Ç–∏–Ω–∏ ‚Äî —Ü–µ –¥—É–∂–µ "–¥–µ—à–µ–≤–∞" –æ–ø–µ—Ä–∞—Ü—ñ—è O(1). –ü—Ä–æ—Å—Ç–æ –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Å–µ—Ä–µ–¥–Ω—ñ–π —ñ–Ω–¥–µ–∫—Å.
>
> * **`LinkedList` (–Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ):**
>   * –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –≤—É–∑–ª–∞—Ö –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏. –©–æ–± –∑–Ω–∞–π—Ç–∏ —Å–µ—Ä–µ–¥–∏–Ω—É —Å–ø–∏—Å–∫—É, –ø–æ—Ç—Ä—ñ–±–Ω–æ **–ø—Ä–æ–π—Ç–∏ –ø–æ –Ω—å–æ–º—É –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É**, —â–æ —î –æ–ø–µ—Ä–∞—Ü—ñ—î—é **O(n)**.
>
> –†–æ–∑–±–∏—Ç—Ç—è `LinkedList` —î –¥—É–∂–µ –¥–æ—Ä–æ–≥–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é. –ù–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ü–µ –º–æ–∂—É—Ç—å –ª–µ–≥–∫–æ –ø–µ—Ä–µ–≤–∏—â–∏—Ç–∏ –≤–∏–≥–æ–¥—É –≤—ñ–¥ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å. –¢–æ–º—É —É –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ `list.parallelStream()` –Ω–∞ `LinkedList` –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ **–ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ**, –Ω—ñ–∂ –∑–≤–∏—á–∞–π–Ω–∏–π `list.stream()`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è `Collections Framework` —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –Ω–µ—é.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –ø–æ–≥—ñ—Ä—à–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–∞–π–±—ñ–ª—å—à–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –≤–ø–ª–∏–≤–∞—é—Ç—å **stateful-–æ–ø–µ—Ä–∞—Ü—ñ—ó**, —è–∫—ñ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —ñ–Ω—à–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –∞–±–æ —ó—Ö–Ω—å–æ–≥–æ –ø–æ—Ä—è–¥–∫—É.
>
> * **`sorted()`**:
>     –¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –∑–º—É—à–µ–Ω–∞ –∑—ñ–±—Ä–∞—Ç–∏ **–≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏** –≤ –±—É—Ñ–µ—Ä, –ø–µ—Ä—à –Ω—ñ–∂ —ó—Ö –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏. –¶–µ –∑–Ω–∞—á–Ω–æ –æ–±–º–µ–∂—É—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> * **`distinct()`**:
>     –¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –ø–æ–≤–∏–Ω–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω (—É—Å—ñ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —â–æ –≤–∂–µ –∑—É—Å—Ç—Ä—ñ–ª–∏—Å—è), —â–æ –≤–∏–º–∞–≥–∞—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ (`Set`).
>
> * **`limit(n)`**:
>     –ù–∞ –ø–µ—Ä—à–∏–π –ø–æ–≥–ª—è–¥, —Ü—è –æ–ø–µ—Ä–∞—Ü—ñ—è –∑–¥–∞—î—Ç—å—Å—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—é, –∞–ª–µ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –≤–æ–Ω–∞ –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Ä–æ–≥–æ—é. –Ø–∫—â–æ –≤–∏ –æ–±—Ä–æ–±–ª—è—î—Ç–µ –º—ñ–ª—å—è—Ä–¥ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ —Ä–æ–±–∏—Ç–µ `.limit(10)`, –ø–æ—Ç–æ–∫–∏ —Å–ø–æ—á–∞—Ç–∫—É –º–æ–∂—É—Ç—å –æ–±—Ä–æ–±–∏—Ç–∏ –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à–µ, –Ω—ñ–∂ 10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –ø–µ—Ä—à –Ω—ñ–∂ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–∫–æ–æ—Ä–¥–∏–Ω—É—î —ó—Ö —ñ –∑—Ä–æ–∑—É–º—ñ—î, —â–æ –ª—ñ–º—ñ—Ç –¥–æ—Å—è–≥–Ω—É—Ç–æ. `findFirst` —Ä–∞–∑–æ–º –∑ `filter` —î –∑–Ω–∞—á–Ω–æ –∫—Ä–∞—â–∏–º.
>
> **`Stateless`-–æ–ø–µ—Ä–∞—Ü—ñ—ó**, —è–∫-–æ—Ç `map` —Ç–∞ `filter`, –Ω–∞–≤–ø–∞–∫–∏, —Ä–æ–∑–ø–∞—Ä–∞–ª–µ–ª—é—é—Ç—å—Å—è –¥—É–∂–µ –¥–æ–±—Ä–µ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–æ–∫ —Å—Ç—Ä—ñ–º—É —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ –º–æ–∂—É—Ç—å —Å—Ç–∞—Ç–∏ "–≤—É–∑—å–∫–∏–º –º—ñ—Å—Ü–µ–º" —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –ø—É–ª –ø–æ—Ç–æ–∫—ñ–≤ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –∑–∞–º—ñ—Å—Ç—å `ForkJoinPool.commonPool()`? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ —è–∫? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞, –∞–ª–µ —Ü–µ –Ω–µ—Ç—Ä–∏–≤—ñ–∞–ª—å–Ω–æ.**
>
> –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–∑–æ–ª—é–≤–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ –≤—ñ–¥ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –ø—É–ª—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ "–≥–æ–ª–æ–¥—É–≤–∞–Ω–Ω—è" —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω —Å–∏—Å—Ç–µ–º–∏), –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤–∞—à –ª–∞–Ω—Ü—é–∂–æ–∫ —Å—Ç—Ä—ñ–º—É —É **–≤–ª–∞—Å–Ω–æ–º—É `ForkJoinPool`**.
>
> –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–º—ñ—Å—Ç–∏—Ç–∏ –≤—Å—é —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é —Å—Ç—Ä—ñ–º—É –≤—Å–µ—Ä–µ–¥–∏–Ω—É **–∑–∞–¥–∞—á—ñ (`Task`)** —ñ –ø–µ—Ä–µ–¥–∞—Ç–∏ —ó—ó –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É –≤–∞—à –≤–ª–∞—Å–Ω–∏–π –ø—É–ª.
>
> #### **–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**
>
> ```java
> ForkJoinPool myPool = new ForkJoinPool(4); // –°—Ç–≤–æ—Ä—é—î–º–æ –≤–ª–∞—Å–Ω–∏–π –ø—É–ª –Ω–∞ 4 –ø–æ—Ç–æ–∫–∏
> List<Integer> numbers = ...;
> 
> int sum = myPool.submit(() -> {
>     // –¶—è –ª—è–º–±–¥–∞ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ —É `myPool`, –∞ –Ω–µ –≤ `commonPool`
>     return numbers.parallelStream()
>                   .mapToInt(n -> n * 2)
>                   .sum();
> }).get(); // .get() –¥–ª—è –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
> 
> myPool.shutdown();
> ```
>
> –¶–µ —î–¥–∏–Ω–∏–π –Ω–∞–¥—ñ–π–Ω–∏–π —Å–ø–æ—Å—ñ–± –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏, –¥–µ —Å–∞–º–µ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è. –ü—Ä—è–º–æ–≥–æ –º–µ—Ç–æ–¥—É –Ω–∞ –∑—Ä–∞–∑–æ–∫ `.parallel(myPool)` —É `Stream API` –Ω–µ–º–∞—î.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω—ñ –∑–Ω–∞–Ω–Ω—è `Concurrency API` —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º —Ä–µ—Å—É—Ä—Å–∞–º–∏. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è Senior.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ `findAny` —Ç–∞ `findFirst` —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∫–ª—é—á–æ–≤–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å, —è–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑—É–º—ñ—Ç–∏ –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.
>
> * **`findFirst()`**:
>   * **–ì–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Ä—è–¥–æ–∫.** –í—ñ–Ω –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä–Ω–µ **–ø–µ—Ä—à–∏–π** –µ–ª–µ–º–µ–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫—É –ø–æ—Ç–æ–∫—É.
>   * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –î–ª—è —Ü—å–æ–≥–æ –≤—ñ–Ω –∑–º—É—à–µ–Ω–∏–π **—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏** —Ä–æ–±–æ—Ç—É –ø–æ—Ç–æ–∫—ñ–≤ —ñ, –º–æ–∂–ª–∏–≤–æ, –æ–±—Ä–æ–±–∏—Ç–∏ –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à–µ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –Ω—ñ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏, —è–∫–∏–π –∑ –Ω–∏—Ö –±—É–≤ –ø–µ—Ä—à–∏–º. –¢–æ–º—É –≤—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ **–ø–æ–≤—ñ–ª—å–Ω–∏–º** —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ.
>
> * **`findAny()`**:
>   * **–ù–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Ä—è–¥–æ–∫.** –í—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î **–±—É–¥—å-—è–∫–∏–π** –µ–ª–µ–º–µ–Ω—Ç, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —É–º–æ–≤—ñ.
>   * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –î—É–∂–µ **—à–≤–∏–¥–∫–∏–π** —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ. –í—ñ–Ω –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è, —è–∫ —Ç—ñ–ª—å–∫–∏ **–±—É–¥—å-—è–∫–∏–π** –∑ –ø–æ—Ç–æ–∫—ñ–≤ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–µ —á–µ–∫–∞—é—á–∏ —ñ–Ω—à–∏—Ö.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:** –Ø–∫—â–æ –≤–∞–º –Ω–µ–≤–∞–∂–ª–∏–≤–∏–π –ø–æ—Ä—è–¥–æ–∫, **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `findAny` —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ —Ä—ñ–∑–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –∑ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º–æ–º —Ç–∞ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `Spliterator` —ñ —è–∫–∞ –π–æ–≥–æ —Ä–æ–ª—å —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`Spliterator` (Splitable Iterator)** ‚Äî —Ü–µ "—Å–µ—Ä—Ü–µ" `Stream API`, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏. –¶–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —ñ—Ç–µ—Ä–∞—Ç–æ—Ä, —è–∫–∏–π, –∫—Ä—ñ–º –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ –µ–ª–µ–º–µ–Ω—Ç–∞—Ö, –º–∞—î –∫–ª—é—á–æ–≤—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å: **–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–æ–∑–±–∏–≤–∞—Ç–∏—Å—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏**.
>
> **–ô–æ–≥–æ —Ä–æ–ª—å —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö:**
>
> 1. **–†–æ–∑–±–∏—Ç—Ç—è (Splitting):** `ForkJoinPool` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–µ—Ç–æ–¥ `spliterator.trySplit()` –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ —Ä–æ–∑–±–∏—Ç—Ç—è –¥–∂–µ—Ä–µ–ª–∞ –¥–∞–Ω–∏—Ö –Ω–∞ –º–µ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏, –¥–æ–∫–∏ –≤–æ–Ω–∏ –Ω–µ —Å—Ç–∞–Ω—É—Ç—å –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º–∞–ª–∏–º–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏.
> 2. **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞:** –ö–æ–∂–Ω–∞ –∑ —Ü–∏—Ö —á–∞—Å—Ç–∏–Ω –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ–∫—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏.
> 3. **–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –¢–µ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –¥–æ–±—Ä–µ `Spliterator` –º–æ–∂–µ —Ä–æ–∑–±–∏–≤–∞—Ç–∏—Å—è, –Ω–∞–ø—Ä—è–º—É –≤–∏–∑–Ω–∞—á–∞—î –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, `Spliterator` –¥–ª—è `ArrayList` —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –¥—É–∂–µ —à–≤–∏–¥–∫–æ (O(1)), –∞ –¥–ª—è `LinkedList` ‚Äî –ø–æ–≤—ñ–ª—å–Ω–æ (O(n)).
>
> –•–æ—á–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —Ä—ñ–¥–∫–æ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å `Spliterator` –≤–ª–∞—Å–Ω–æ—Ä—É—á, —Ä–æ–∑—É–º—ñ–Ω–Ω—è –π–æ–≥–æ —Ä–æ–ª—ñ –ø–æ—è—Å–Ω—é—î, —á–æ–º—É –æ–¥–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∞–Ω–∏—Ö —Ä–æ–∑–ø–∞—Ä–∞–ª–µ–ª—é—é—Ç—å—Å—è –∫—Ä–∞—â–µ –∑–∞ —ñ–Ω—à—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ –≥–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è `Stream API` —Ç–∞ `Collections Framework` –Ω–∞ –Ω–∏–∑—å–∫–æ–º—É —Ä—ñ–≤–Ω—ñ. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω—å—Ç–µ –∫–æ–¥ `reduce(0, Integer::sum)`. –ß–∏ —î —Ü—è –æ–ø–µ—Ä–∞—Ü—ñ—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤? –Ø–∫—ñ –≤–∏–º–æ–≥–∏ –¥–æ `accumulator`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, —Ü—è –æ–ø–µ—Ä–∞—Ü—ñ—è **—î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é —ñ –¥–æ–±—Ä–µ —Ä–æ–∑–ø–∞—Ä–∞–ª–µ–ª—é—î—Ç—å—Å—è** –∑–∞ —É–º–æ–≤–∏, —â–æ –Ω–∞–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è-–∞–∫—É–º—É–ª—è—Ç–æ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–µ–≤–Ω–∏–º –≤–∏–º–æ–≥–∞–º.
>
> –î–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ `reduce` –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω—É –≤–µ—Ä—Å—ñ—é, —è–∫–∞ –ø—Ä–∏–π–º–∞—î —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏: `reduce(identity, accumulator, combiner)`. –û–¥–Ω–∞–∫ –Ω–∞–≤—ñ—Ç—å –¥–ª—è –≤–µ—Ä—Å—ñ—ó –∑ –¥–≤–æ–º–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ Java –º–æ–∂–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º.
>
> **–í–∏–º–æ–≥–∏ –¥–æ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞ (`Integer::sum`) –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏:**
>
> –§—É–Ω–∫—Ü—ñ—è-–∞–∫—É–º—É–ª—è—Ç–æ—Ä **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –º–∞—î –±—É—Ç–∏:
>
> 1. **–ë–µ–∑ —Å—Ç–∞–Ω—É (Stateless):** –á—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—î –∑–∞–ª–µ–∂–∞—Ç–∏ –ª–∏—à–µ –≤—ñ–¥ —ó—ó –≤—Ö—ñ–¥–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤.
> 2. **–ê—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—é:** –†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –ø–æ—Ä—è–¥–∫—É –æ–±'—î–¥–Ω–∞–Ω–Ω—è.
>     `(a + b) + c` –ø–æ–≤–∏–Ω–Ω–æ –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ `a + (b + c)`.
>
> –û–ø–µ—Ä–∞—Ü—ñ—è `Integer::sum` (–¥–æ–¥–∞–≤–∞–Ω–Ω—è) **—î –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—é**, —Ç–æ–º—É –≤–æ–Ω–∞ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó —Ä–µ–¥—É–∫—Ü—ñ—ó.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
>
> 1. `ForkJoinPool` —Ä–æ–∑–±–∏–≤–∞—î –ø–æ—Ç—ñ–∫.
> 2. –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –æ–±—á–∏—Å–ª—é—î –ø—Ä–æ–º—ñ–∂–Ω—É —Å—É–º—É –¥–ª—è —Å–≤–æ—î—ó —á–∞—Å—Ç–∏–Ω–∏.
> 3. –ü–æ—Ç—ñ–º —Ü—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ —Å—É–º–∏ –æ–±'—î–¥–Ω—É—é—Ç—å—Å—è —Ä–∞–∑–æ–º (–∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç—ñ—î—ó –∂ –∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó), —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π (–∞—Å–æ—Ü—ñ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å), —è–∫—ñ —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π —Ä–µ–¥—É–∫—Ü—ñ—ó.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è `collect` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `parallelStream`, —á–∏ –ø–æ–≤–∏–Ω–µ–Ω –∫–æ–ª–µ–∫—Ç–æ—Ä –±—É—Ç–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ù—ñ, –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ**, —ñ –≤ —Ü—å–æ–º—É –ø–æ–ª—è–≥–∞—î –∫—Ä–∞—Å–∞ `Stream API`.
>
> –ö–æ–ª–µ–∫—Ç–æ—Ä, –ø–µ—Ä–µ–¥–∞–Ω–∏–π –≤ `collect`, –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—ó: `supplier`, `accumulator`, `combiner`.
>
> **–Ø–∫ –ø—Ä–∞—Ü—é—î `collect` —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ:**
>
> 1. **Supplier:** `ForkJoinPool` –¥–ª—è **–∫–æ–∂–Ω–æ–≥–æ** –ø–æ—Ç–æ–∫—É —Å—Ç–≤–æ—Ä—é—î —Å–≤—ñ–π **–æ–∫—Ä–µ–º–∏–π, –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (–Ω–∞–ø—Ä., —Å–≤—ñ–π `ArrayList`), –≤–∏–∫–ª–∏–∫–∞—é—á–∏ `supplier`.
> 2. **Accumulator:** –ö–æ–∂–µ–Ω –ø–æ—Ç—ñ–∫ –±–µ–∑–ø–µ—á–Ω–æ –¥–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –ª–∏—à–µ —É **—Å–≤—ñ–π –ª–æ–∫–∞–ª—å–Ω–∏–π** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `accumulator`. –ö–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏ –Ω–µ–º–∞—î, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –∑—ñ —Å–ø—ñ–ª—å–Ω–æ—é –∫–æ–ª–µ–∫—Ü—ñ—î—é.
> 3. **Combiner:** –ö–æ–ª–∏ –≤—Å—ñ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–æ–±–æ—Ç—É –∑—ñ —Å–≤–æ—ó–º–∏ —á–∞—Å—Ç–∏–Ω–∞–º–∏, `ForkJoinPool` **–æ–±'—î–¥–Ω—É—î** –≤—Å—ñ —Ü—ñ –ø—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤ –æ–¥–∏–Ω —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ñ—É–Ω–∫—Ü—ñ—ó `combiner`.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏, —è–∫-–æ—Ç `Collectors.toList()`, –±–µ–∑–ø–µ—á–Ω–æ –ø—Ä–∞—Ü—é—é—Ç—å –∑ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —Ü—å–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É "—Ä–æ–∑–¥—ñ–ª—è–π, –æ–±—Ä–æ–±–ª—è–π —Ç–∞ –æ–±'—î–¥–Ω—É–π". –í–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç—É—Ä–±—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—î `collect` –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç –∑–Ω–∞—î, —â–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–∞–º –¥–±–∞—î –ø—Ä–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `forEach` —î –º–µ–Ω—à –±–∞–∂–∞–Ω–∏–º, –Ω—ñ–∂ `collect` –∞–±–æ `reduce` —É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ, –æ—Å–æ–±–ª–∏–≤–æ –≤ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `forEach` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è **–æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –ø–æ–±—ñ—á–Ω–∏–º–∏ –µ—Ñ–µ–∫—Ç–∞–º–∏ (side-effects)** ‚Äî –≤—ñ–Ω –Ω—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î. –£ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏.
>
> **–ü—Ä–æ–±–ª–µ–º–∏ `forEach`:**
>
> 1. **–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏:** –ß–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–º—ñ–Ω–∏ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É, —â–æ –ø–æ—Ä—É—à—É—î —á–∏—Å—Ç–æ—Ç—É –∫–æ–¥—É.
> 2. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º–æ–º:** –Ø–∫ –º–∏ –±–∞—á–∏–ª–∏, –∑–º—ñ–Ω–∞ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –≤ `forEach` –Ω–∞ `parallelStream` —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ—é.
> 3. **–ü–æ—Ä—É—à–µ–Ω–Ω—è —ñ–¥—ñ–æ–º–∏:** –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å ‚Äî —Ü–µ –ø—Ä–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, –∞ –Ω–µ –ø—Ä–æ —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ —Ü–∏–∫–ª–∏. `forEach` —î –±—ñ–ª—å—à —ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–º –∑–∞ —Å–≤–æ—î—é —Å—É—Ç—Ç—é.
>
> **`collect` —Ç–∞ `reduce` —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:**
>
> * –í–æ–Ω–∏ —î **—á–∏—Å—Ç–∏–º–∏ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏**. –í–æ–Ω–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–≤—ñ—Ç, –∞ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å **–Ω–æ–≤–∏–π** —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–Ω–æ–≤—É –∫–æ–ª–µ–∫—Ü—ñ—é –∞–±–æ –∑–Ω–∞—á–µ–Ω–Ω—è).
> * –í–æ–Ω–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –≤ **–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ**.
>
> **–ü—Ä–∞–≤–∏–ª–æ:** –Ø–∫—â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏—Ä—ñ—à–∏—Ç–∏ –∑–∞–¥–∞—á—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect` –∞–±–æ `reduce`, –≤—ñ–¥–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–≤–∞–≥—É —ó–º –ø–µ—Ä–µ–¥ `forEach`. `forEach` —Å–ª—ñ–¥ –∑–∞–ª–∏—à–∞—Ç–∏ –¥–ª—è –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏—Ö —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∏—Ö –¥—ñ–π, —è–∫-–æ—Ç –≤–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∏—Ö–∏–ª—å–Ω—ñ—Å—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –¥–æ –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —á–∏—Å—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥—É. –¶–µ –ø–æ–∫–∞–∑—É—î, —á–∏ –º–∏—Å–ª–∏—Ç—å –≤—ñ–Ω –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö "–ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö" —á–∏ "—ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏—Ö –¥—ñ–π".*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –≤–∏–º—ñ—Ä—è—Ç–∏ —Ä–µ–∞–ª—å–Ω—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É —ñ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —á–∏ –≤—ñ–Ω —Å–ø—Ä–∞–≤–¥—ñ –¥–∞—î –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–ø—É—Å—Ç–∏—Ç–∏, —â–æ `parallelStream` —à–≤–∏–¥—à–∏–π. –Ñ–¥–∏–Ω–∏–π –Ω–∞–¥—ñ–π–Ω–∏–π —Å–ø–æ—Å—ñ–± ‚Äî —Ü–µ **–≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É –¥–ª—è –º—ñ–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫—ñ–Ω–≥—É, —è–∫-–æ—Ç JMH (Java Microbenchmark Harness).**
>
> **–ß–æ–º—É –Ω–µ `System.currentTimeMillis()`?**
>
> * –ü—Ä–æ—Å—Ç—ñ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É —î **–≤–∫—Ä–∞–π –Ω–µ–Ω–∞–¥—ñ–π–Ω–∏–º–∏** —á–µ—Ä–µ–∑ –±–∞–≥–∞—Ç–æ —Ñ–∞–∫—Ç–æ—Ä—ñ–≤: "–ø—Ä–æ–≥—Ä—ñ–≤" JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞, –∑–±–∏—Ä–∞–Ω–Ω—è —Å–º—ñ—Ç—Ç—è, –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ –ø–æ—Ç–æ–∫—ñ–≤ –û–° —Ç–æ—â–æ. –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ —â–æ—Ä–∞–∑—É —ñ–Ω—à–∏–º.
>
> **–Ø–∫ –ø—Ä–∞—Ü—é—î JMH:**
>
> 1. **–ü—Ä–æ–≥—Ä—ñ–≤ (Warmup):** JMH –≤–∏–∫–æ–Ω—É—î –≤–∞—à –∫–æ–¥ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ "–≤—Ö–æ–ª–æ—Å—Ç—É", —â–æ–± JIT-–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤—Å—Ç–∏–≥ –≤–∏–∫–æ–Ω–∞—Ç–∏ –≤—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó.
> 2. **–ë–∞–≥–∞—Ç–æ—Ä–∞–∑–æ–≤—ñ —ñ—Ç–µ—Ä–∞—Ü—ñ—ó:** –í—ñ–Ω –∑–∞–ø—É—Å–∫–∞—î –∫–æ–¥ –±–∞–≥–∞—Ç–æ —Ä–∞–∑—ñ–≤ —É –∫—ñ–ª—å–∫–æ—Ö —Ü–∏–∫–ª–∞—Ö (—Ñ–æ—Ä–∫–∞—Ö) —ñ —É—Å–µ—Ä–µ–¥–Ω—é—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–æ –∑–Ω–∞—á—É—â–µ –∑–Ω–∞—á–µ–Ω–Ω—è.
> 3. **–Ü–∑–æ–ª—è—Ü—ñ—è:** –í—ñ–Ω –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ –≤–ø–ª–∏–≤ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Ñ–∞–∫—Ç–æ—Ä—ñ–≤.
>
> **–ü—Ä–æ—Ü–µ—Å:**
>
> 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–≤–∞ –±–µ–Ω—á–º–∞—Ä–∫-–º–µ—Ç–æ–¥–∏ –≤ JMH: –æ–¥–∏–Ω –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ —Å—Ç—Ä—ñ–º—É, —ñ–Ω—à–∏–π ‚Äî –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–≥–æ.
> 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫.
> 3. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π –∑–∞ —Å–µ–∫—É–Ω–¥—É).
>
> –õ–∏—à–µ –ø—ñ—Å–ª—è —Ç–∞–∫–æ–≥–æ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫ –ø—Ä–æ —Ç–µ, —á–∏ –¥–∞—î `parallelStream` —Ä–µ–∞–ª—å–Ω–∏–π –ø—Ä–∏—Ä—ñ—Å—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥–ª—è **–≤–∞—à–æ—ó –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∑–∞–¥–∞—á—ñ —Ç–∞ –≤–∞—à–æ–≥–æ "–∑–∞–ª—ñ–∑–∞"**.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–Ü–Ω–∂–µ–Ω–µ—Ä–Ω—É –∑—Ä—ñ–ª—ñ—Å—Ç—å. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –ø—Ä–∏–π–º–∞—é—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ **–¥–∞–Ω–∏—Ö —Ç–∞ –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å**, –∞ –Ω–µ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∏–ø—É—â–µ–Ω—å. –ó–Ω–∞–Ω–Ω—è –ø—Ä–æ JMH —î –≤–µ–ª–∏–∫–∏–º –ø–ª—é—Å–æ–º.*

* * *
