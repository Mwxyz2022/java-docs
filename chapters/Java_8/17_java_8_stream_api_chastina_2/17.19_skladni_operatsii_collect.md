---
layout: default
title: "–°–∫–ª–∞–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó collect()"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 19
---

# –°–∫–ª–∞–¥–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó collect()

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `collect()` –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ç—É–∂–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó `Collectors` –¥–ª—è –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–æ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö. –í–∫–ª—é—á–∞—î `partitioningBy()` (—Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ 2 –≥—Ä—É–ø–∏), `mapping()` (—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º), `filtering()` (—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º), `reducing()` (—É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å).

* –ø–æ–Ω—è—Ç—Ç—è: `Collectors.partitioningBy()`, `Collectors.mapping()`, `Collectors.filtering()` (Java 9+), `Collectors.reducing()`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `List.stream().collect(Collectors.partitioningBy(s -> s.length() > 3))` (–ø–æ–¥—ñ–ª –Ω–∞ –≥—Ä—É–ø–∏ `true`/`false`).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –î–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –∞–Ω–∞–ª—ñ—Ç–∏–∫—É —Ç–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è, –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó `Collectors`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–ú–µ—Ç–æ–¥ **`collect()`** —É Stream API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–∏—Ö –∞–±–æ –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∏–π
—Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ –≥–Ω—É—á–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ **Collectors** ‚Äî —Ñ–∞–±—Ä–∏–∫—É –∑–±–∏—Ä–∞—á—ñ–≤ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

**`collect()`** ‚Äî —Ü–µ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –ø—É–Ω–∫—Ç –æ–±—Ä–æ–±–∫–∏, –¥–µ –º–∏ "–ø–∞–∫—É—î–º–æ" —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏. –Ø–∫—â–æ **`.toList()`** ‚Äî —Ü–µ "–ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∞–∫—É–≤–∞—Ç–∏", —Ç–æ **—Å–∫–ª–∞–¥–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏** ‚Äî —Ü–µ –∫–æ–ª–∏ –º–∏ –≥—Ä—É–ø—É—î–º–æ, –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ, –¥—ñ–ª–∏–º–æ, –∑–≤–æ–¥–∏–º–æ –¥–∞–Ω—ñ. –ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö **`Collector`**'—ñ–≤ ‚Äî —Ü–µ —è–∫ LEGO –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

---

## üìä **–ü–æ—Ç—É–∂–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó Collectors:**

* **`Collectors.partitioningBy(Predicate)`**
* **`Collectors.mapping(Function, downstream)`**
* **`Collectors.filtering(Predicate, downstream)`** *(–∑ Java 9+)*
* **`Collectors.reducing(...)`**
* **–ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è / –≤–∫–ª–∞–¥–µ–Ω–µ –∫–æ–ª–µ–∫—Ç—É–≤–∞–Ω–Ω—è**

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤—ñ–º–æ, —É —Ç–µ–±–µ —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤. –¢–∏ —Ö–æ—á–µ—à:

* –ø–æ–¥—ñ–ª–∏—Ç–∏ —ó—Ö –Ω–∞ "–∑–¥–∞–ª–∏ –µ–∫–∑–∞–º–µ–Ω" —ñ "–Ω–µ –∑–¥–∞–ª–∏" --> **`partitioningBy`**
* –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –≤–∑—è—Ç–∏ —ñ–º–µ–Ω–∞ --> **`mapping`**
* –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ –≤–∑—è—Ç–∏ –ª–∏—à–µ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —ñ–∑ –≤–∏—Å–æ–∫–∏–º–∏ –±–∞–ª–∞–º–∏ --> **`filtering`**
* –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É –≥—Ä—É–ø–∞—Ö --> **`reducing`** –∞–±–æ **`counting`**

–Ü –≤—Å–µ —Ü–µ –º–æ–∂–Ω–∞ **–ø–æ—î–¥–Ω–∞—Ç–∏** –≤ –æ–¥–Ω–æ–º—É **`.collect(...)`**.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üîπ `partitioningBy()`: –ø–æ–¥—ñ–ª –Ω–∞ 2 –≥—Ä—É–ø–∏**

```java
Map<Boolean, List<String>> result = List.of("cat", "dog", "elephant", "rat")
    .stream()
    .collect(Collectors.partitioningBy(s -> s.length() > 3));

// true: ["elephant"], false: ["cat", "dog", "rat"]
```

---

### **üîπ `mapping()` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è**

```java
Map<Integer, List<String>> byLength = List.of("apple", "ape", "arm", "banana")
    .stream()
    .collect(Collectors.groupingBy(
        String::length,
        Collectors.mapping(s -> s.toUpperCase(), Collectors.toList())
    ));
```

---

### **üîπ `filtering()` (Java 9+)**

```java
Map<Boolean, List<String>> filtered = List.of("apple", "ape", "arm", "banana")
    .stream()
    .collect(Collectors.partitioningBy(
        s -> s.length() > 3,
        Collectors.filtering(s -> s.contains("a"), Collectors.toList())
    ));
```

---

### **üîπ `reducing()`: –∑–≤–µ–¥–µ–Ω–Ω—è –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è**

```java
int totalLength = List.of("a", "bb", "ccc").stream()
    .collect(Collectors.reducing(0, String::length, Integer::sum));
```

---

### **üîπ –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è**

```java
Map<String, Map<Integer, List<String>>> grouped = List.of("apple", "ape", "banana", "bat")
    .stream()
    .collect(Collectors.groupingBy(
        s -> s.substring(0, 1),                      // 1-–π —Ä—ñ–≤–µ–Ω—å: –ø–µ—Ä—à–∞ –ª—ñ—Ç–µ—Ä–∞
        Collectors.groupingBy(String::length)        // 2-–π —Ä—ñ–≤–µ–Ω—å: –¥–æ–≤–∂–∏–Ω–∞ —Å–ª–æ–≤–∞
    ));
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|        –û–ø–µ—Ä–∞—Ü—ñ—è        |                –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                |            –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ             |
|:----------------------:|:-----------------------------------------:|:----------------------------------:|
| **`partitioningBy()`** |         –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ true/false          |           –ó–∞–≤–∂–¥–∏ 2 –∫–ª—é—á—ñ           |
|   **`groupingBy()`**   |          –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—î–º          |               N –≥—Ä—É–ø               |
|    **`mapping()`**     |  –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º   | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º Collector |
|   **`filtering()`**    |        –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∑–±–∏—Ä–∞–Ω–Ω—è–º         |            –õ–∏—à–µ Java 9+            |
|    **`reducing()`**    | –£–∑–∞–≥–∞–ª—å–Ω–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –¥–æ –æ–¥–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É |  –ì–Ω—É—á–∫–µ, –∞–ª–µ —Å–∫–ª–∞–¥–Ω—ñ—à–µ —É —á–∏—Ç–∞–Ω–Ω—ñ   |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"PMGFR"** ‚Äî Partition, Map, Group, Filter, Reduce  
üîÅ –Ø–∫ —Ü–∏–∫–ª –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏:

* **P** ‚Äî –ø–æ–¥—ñ–ª–∏
* **M** ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É–π
* **G** ‚Äî –≥—Ä—É–ø—É–π
* **F** ‚Äî —Ñ—ñ–ª—å—Ç—Ä—É–π
* **R** ‚Äî –∑–≤–µ–¥–∏

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –°–∫–ª–∞–¥–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó **`collect()`** –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å –º–∞–π–∂–µ –±–µ–∑–º–µ–∂–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö.
* **`partitioningBy(), mapping(), filtering()`** —Ç–∞ **`reducing()`** ‚Äî –∫–ª—é—á–æ–≤—ñ —Å–∫–ª–∞–¥–æ–≤—ñ.
* –ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è –¥–∞—î –∑–º–æ–≥—É –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤—É –∞–≥—Ä–µ–≥–∞—Ü—ñ—é, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É.
* –í–∞–∂–ª–∏–≤–æ: —Å–ª—ñ–¥–∫—É–π –∑–∞ —á–∏—Ç–∞—î–º—ñ—Å—Ç—é ‚Äî –∫—Ä–∞—â–µ –≤–∏–Ω–µ—Å—Ç–∏ —á–∞—Å—Ç–∏–Ω–∏ –≤ –æ–∫—Ä–µ–º—ñ –º–µ—Ç–æ–¥–∏.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Official Oracle Java Docs: Collectors**](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ä–æ–±–∏—Ç—å –∫–æ–ª–µ–∫—Ç–æ—Ä `Collectors.partitioningBy()` —ñ —á–∏–º –≤—ñ–Ω –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `groupingBy()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `partitioningBy(Predicate)` —Ç–∞ `groupingBy(classifier)` ‚Äî –æ–±–∏–¥–≤–∞ –≥—Ä—É–ø—É—é—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ—Ç–æ–∫—É –≤ `Map`. –ê–ª–µ –≤–æ–Ω–∏ —Ä–æ–±–ª—è—Ç—å —Ü–µ –∑–∞ —Ä—ñ–∑–Ω–∏–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏.
>
> * **`Collectors.partitioningBy(Predicate<T> predicate)`:**
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** **–†–æ–∑–¥—ñ–ª—è—î** (partition) –ø–æ—Ç—ñ–∫ **—Ä—ñ–≤–Ω–æ –Ω–∞ –¥–≤—ñ –≥—Ä—É–ø–∏**.
>   * **–ö–ª—é—á:** –ó–∞–≤–∂–¥–∏ **`Boolean`**. –û–¥–Ω–∞ –≥—Ä—É–ø–∞ –¥–ª—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –¥–µ –ø—Ä–µ–¥–∏–∫–∞—Ç –ø–æ–≤–µ—Ä–Ω—É–≤ `true`, —ñ–Ω—à–∞ ‚Äî –¥–ª—è `false`.
>   * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `Map<Boolean, List<T>>`. –ú–∞–ø–∞ **–∑–∞–≤–∂–¥–∏** –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏ –æ–±–∏–¥–≤–∞ –∫–ª—é—á—ñ (`true` —ñ `false`), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –æ–¥–Ω–∞ –∑ –≥—Ä—É–ø –ø–æ—Ä–æ–∂–Ω—è.
>
> * **`Collectors.groupingBy(Function<T, K> classifier)`:**
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** **–ì—Ä—É–ø—É—î** –ø–æ—Ç—ñ–∫ –Ω–∞ **–±—É–¥—å-—è–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å** –≥—Ä—É–ø.
>   * **–ö–ª—é—á:** –ú–æ–∂–µ –±—É—Ç–∏ –±—É–¥—å-—è–∫–æ–≥–æ —Ç–∏–ø—É `K`.
>   * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `Map<K, List<T>>`. –ú–∞–ø–∞ –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ —Ç—ñ –∫–ª—é—á—ñ, –¥–ª—è —è–∫–∏—Ö –∑–Ω–∞–π–¥–µ–Ω–æ —Ö–æ—á–∞ –± –æ–¥–∏–Ω –µ–ª–µ–º–µ–Ω—Ç.
>
> **–ö–æ—Ä–æ—Ç–∫–æ:** `partitioningBy` ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π, –±—ñ–ª—å—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫ `groupingBy` –¥–ª—è –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

* **`partitioningBy`**: –í–∏ –¥—ñ–ª–∏—Ç–µ –≤—Å—ñ—Ö —É—á–Ω—ñ–≤ –Ω–∞ –¥–≤—ñ –≥—Ä—É–ø–∏: "–∑–¥–∞–≤ —ñ—Å–ø–∏—Ç" (`true`) —Ç–∞ "–Ω–µ –∑–¥–∞–≤" (`false`).
* **`groupingBy`**: –í–∏ –¥—ñ–ª–∏—Ç–µ —É—á–Ω—ñ–≤ –Ω–∞ –±–∞–≥–∞—Ç–æ –≥—Ä—É–ø –∑–∞ –º—ñ—Å—Ç–æ–º, –∑ —è–∫–æ–≥–æ –≤–æ–Ω–∏ –ø—Ä–∏—ó—Ö–∞–ª–∏ (`Kyiv`, `Lviv`, `Odesa`...).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ –¥–≤–æ–º–∞ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ –¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è. `partitioningBy` —î –±—ñ–ª—å—à —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–º –¥–ª—è –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ `partitioningBy` –∑ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫ —ñ `groupingBy`, `partitioningBy` –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –∫–æ–∂–Ω—ñ–π –∑ –¥–≤–æ—Ö –≥—Ä—É–ø (`true` —Ç–∞ `false`).
>
> **–ó–∞–¥–∞—á–∞:** –†–æ–∑–¥—ñ–ª–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª –Ω–∞ –ø–∞—Ä–Ω—ñ —Ç–∞ –Ω–µ–ø–∞—Ä–Ω—ñ, —ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ —ó—Ö–Ω—é –∫—ñ–ª—å–∫—ñ—Å—Ç—å.
>
> 1. `partitioningBy(n -> n % 2 == 0)` ‚Äî —Ä–æ–∑–¥—ñ–ª–∏—Ç—å –Ω–∞ –≥—Ä—É–ø–∏ –ø–∞—Ä–Ω–∏—Ö (`true`) —Ç–∞ –Ω–µ–ø–∞—Ä–Ω–∏—Ö (`false`).
> 2. `Collectors.counting()` ‚Äî –ø—ñ–¥—Ä–∞—Ö—É—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –∫–æ–∂–Ω—ñ–π –∑ —Ü–∏—Ö –¥–≤–æ—Ö –≥—Ä—É–ø.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;

public class PartitioningByExample {
    public static void main(String[] args) {
        List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6, 7, 8);
        
        Map<Boolean, Long> countByParity = numbers.stream()
            .collect(Collectors.partitioningBy(
                n -> n % 2 == 0,       // –ü—Ä–µ–¥–∏–∫–∞—Ç –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è
                Collectors.counting()  // Downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É
            ));

        System.out.println(countByParity); // {false=4, true=4}
    }
}
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π `partitioningBy` —Ç–∞ –π–æ–≥–æ –∫–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è –∑ —ñ–Ω—à–∏–º–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `Collectors.mapping()` —ñ –¥–ª—è —á–æ–≥–æ –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`Collectors.mapping(mapper, downstream)`** ‚Äî —Ü–µ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î **–∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è (`map`)** –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ **–ø–µ—Ä–µ–¥ —Ç–∏–º**, —è–∫ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –∑—ñ–±—Ä–∞–Ω—ñ —ñ–Ω—à–∏–º, –≤–∫–ª–∞–¥–µ–Ω–∏–º `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º.
>
> **–ö–æ–ª–∏ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω:**
>
> –í—ñ–Ω –∫–æ—Ä–∏—Å–Ω–∏–π, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–≥—Ä—É–ø—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏, –∞–ª–µ –≤ —è–∫–æ—Å—Ç—ñ –∑–Ω–∞—á–µ–Ω—å —É –º–∞–ø—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–µ —Å–∞–º—ñ –æ–±'—î–∫—Ç–∏, –∞ –ª–∏—à–µ –æ–¥–Ω–µ –∑ —ó—Ö–Ω—ñ—Ö –ø–æ–ª—ñ–≤.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ `List<User>` –∑–∞ –º—ñ—Å—Ç–∞–º–∏, –∞–ª–µ –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–µ –æ–±'—î–∫—Ç–∏ `User`, –∞ –ª–∏—à–µ —ó—Ö–Ω—ñ —ñ–º–µ–Ω–∞ (`String`).
>
> * `groupingBy(User::getCity)` –∑–≥—Ä—É–ø—É—î –∑–∞ –º—ñ—Å—Ç–æ–º.
> * `mapping(User::getName, Collectors.toList())` –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç—å `Stream<User>` –Ω–∞ `Stream<String>` (–±–µ—Ä—É—á–∏ —ñ–º–µ–Ω–∞) —ñ –∑–±–µ—Ä–µ —ó—Ö —É `List`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
// –†–µ–∑—É–ª—å—Ç–∞—Ç: Map<String, List<String>> -> {"Kyiv": ["Alice", "Charlie"], "Lviv": ["Bob"]}
Map<String, List<String>> namesByCity = users.stream()
    .collect(Collectors.groupingBy(
        User::getCity,                                 // –ì—Ä—É–ø—É—î–º–æ –∑–∞ –º—ñ—Å—Ç–æ–º
        Collectors.mapping(User::getName, Collectors.toList()) // –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ User –Ω–∞ –π–æ–≥–æ —ñ–º'—è –ø–µ—Ä–µ–¥ –∑–±–æ—Ä–æ–º
    ));
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è, —è–∫ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø—Ä–æ—Ü–µ—Å—É –∑–±–∏—Ä–∞–Ω–Ω—è. `mapping` ‚Äî —Ü–µ –∫–ª—é—á–æ–≤–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–Ω—É—á–∫–æ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ä–æ–±–∏—Ç—å –∫–æ–ª–µ–∫—Ç–æ—Ä `Collectors.reducing()` —ñ —á–∏–º –≤—ñ–Ω –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `Stream.reduce()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> * **`Stream.reduce()`** ‚Äî —Ü–µ **—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è**, —è–∫–∞ –∑–≥–æ—Ä—Ç–∞—î –≤–µ—Å—å –ø–æ—Ç—ñ–∫ –¥–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è.
>
> * **`Collectors.reducing(...)`** ‚Äî —Ü–µ **–∫–æ–ª–µ–∫—Ç–æ—Ä**, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î —Ç—É –∂ —Å–∞–º—É –ª–æ–≥—ñ–∫—É –∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.
>
> **–ß–∏–º –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è —ñ –∫–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
>
> `Collectors.reducing` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ **`downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —ñ–Ω—à–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ (–Ω–∞–ø—Ä., `groupingBy`). –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω–∞—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é —Ä–µ–¥—É–∫—Ü—ñ—ó –¥–ª—è **–∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –æ–∫—Ä–µ–º–æ**.
>
> **–ó–∞–¥–∞—á–∞:** –ó–Ω–∞–π—Ç–∏ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –∑ –Ω–∞–π–≤–∏—â–æ—é –∑–∞—Ä–ø–ª–∞—Ç–æ—é –≤ –∫–æ–∂–Ω–æ–º—É –≤—ñ–¥–¥—ñ–ª—ñ.
>
> ```java
> Map<String, Optional<Employee>> topEarnerByDept = employees.stream()
>     .collect(Collectors.groupingBy(
>         Employee::getDepartment,
>         Collectors.reducing(
>             BinaryOperator.maxBy(Comparator.comparing(Employee::getSalary))
>         )
>     ));
> ```
>
> `Stream.reduce()` –Ω–µ –¥–æ–∑–≤–æ–ª–∏–≤ –±–∏ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –æ–∫—Ä–µ–º–æ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é —Ç–∞ –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ `reducing` ‚Äî —Ü–µ –≤–µ—Ä—Å—ñ—è `reduce` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `collect`.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `Collectors.filtering()` —ñ –∫–æ–ª–∏ –≤—ñ–Ω –∫–æ—Ä–∏—Å–Ω–∏–π? –ó —è–∫–æ—ó –≤–µ—Ä—Å—ñ—ó Java –≤—ñ–Ω –¥–æ—Å—Ç—É–ø–Ω–∏–π?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`Collectors.filtering(predicate, downstream)`** ‚Äî —Ü–µ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –±—É–≤ –¥–æ–¥–∞–Ω–∏–π –≤ **Java 9**.
>
> **–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å:**
> –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î **–≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏** –µ–ª–µ–º–µ–Ω—Ç–∏ **–≤–∂–µ –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤–æ–Ω–∏ –±—É–ª–∏ –∑–≥—Ä—É–ø–æ–≤–∞–Ω—ñ**, –∞–ª–µ **–ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ñ** –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏–π `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä.
>
> **–ß–∏–º –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `Stream.filter()`:**
>
> * `Stream.filter()` –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ **–≤—Å—å–æ–≥–æ –ø–æ—Ç–æ–∫—É –¥–æ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è**.
> * `Collectors.filtering()` –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ **–µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏**.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ –∑–∞ –≤—ñ–¥–¥—ñ–ª–∞–º–∏, –∞–ª–µ –≤ –∫–æ–∂–Ω—ñ–π –≥—Ä—É–ø—ñ –∑–∞–ª–∏—à–∏—Ç–∏ –ª–∏—à–µ —Ç–∏—Ö, —á–∏—è –∑–∞—Ä–ø–ª–∞—Ç–∞ –±—ñ–ª—å—à–µ 5000.
>
> ```java
> Map<String, List<Employee>> highEarnersByDept = employees.stream()
>     .collect(Collectors.groupingBy(
>         Employee::getDepartment,
>         Collectors.filtering(      // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≥—Ä—É–ø–∏
>             e -> e.getSalary() > 5000,
>             Collectors.toList()
>         )
>     ));
> ```
>
> –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤ –º–∞–ø—ñ –±—É–¥—É—Ç—å –∫–ª—é—á—ñ –¥–ª—è –≤—Å—ñ—Ö –≤—ñ–¥–¥—ñ–ª—ñ–≤, –∞–ª–µ —Å–ø–∏—Å–∫–∏ –∑–Ω–∞—á–µ–Ω—å –¥–ª—è –¥–µ—è–∫–∏—Ö –∑ –Ω–∏—Ö –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö (–ø—ñ—Å–ª—è Java 8) –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π `Stream API`. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç —Å–ª—ñ–¥–∫—É—î –∑–∞ —Ä–æ–∑–≤–∏—Ç–∫–æ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ —Å–∫–ª–∞–¥–Ω–æ–≥–æ –ª–∞–Ω—Ü—é–∂–∫–∞, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —à–ª—è—Ö–æ–º –ø–µ—Ä–µ–¥–∞—á—ñ –æ–¥–Ω–æ–≥–æ `groupingBy` —è–∫ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–∞ —ñ–Ω—à–æ–º—É.
>
> **–ó–∞–¥–∞—á–∞:** –ó–≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ —Å–ø–æ—á–∞—Ç–∫—É –∑–∞ –º—ñ—Å—Ç–æ–º, –∞ –ø–æ—Ç—ñ–º –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–∂–Ω–æ–≥–æ –º—ñ—Å—Ç–∞ ‚Äî –∑–∞ –ø–æ—Å–∞–¥–æ—é.
>
> –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ `Map<String, Map<String, List<Employee>>>`.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
// –†–µ–∑—É–ª—å—Ç–∞—Ç: {"Kyiv" -> {"Developer" -> [emp1, emp3], "QA" -> [emp4]}, "Lviv" -> {"Developer" -> [emp2]}}
Map<String, Map<String, List<Employee>>> employeesByCityAndPosition = 
    employees.stream().collect(
        Collectors.groupingBy(             // 1-–π —Ä—ñ–≤–µ–Ω—å: –≥—Ä—É–ø—É—î–º–æ –∑–∞ –º—ñ—Å—Ç–æ–º
            Employee::getCity,
            Collectors.groupingBy(         // 2-–π —Ä—ñ–≤–µ–Ω—å: –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ –≥—Ä—É–ø—É—î–º–æ –∑–∞ –ø–æ—Å–∞–¥–æ—é
                Employee::getPosition
            )
        )
    );
```

–¶–µ –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö –∑ "–ø–ª–æ—Å–∫–æ–≥–æ" —Å–ø–∏—Å–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–í–º—ñ–Ω–Ω—è –±—É–¥—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –ª–∞–Ω—Ü—é–∂–∫–∏ –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `groupingBy` —Ç–∞ `groupingBy` –∑ `downstream` –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º `Collectors.toList()`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ ‚Äî **–Ω—ñ—è–∫–æ—ó —Ä—ñ–∑–Ω–∏—Ü—ñ**. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –æ–¥–Ω–∞–∫–æ–≤–∏–º.
>
> `Collectors.groupingBy(classifier)` ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ –∑—Ä—É—á–Ω–∞, **—Å–∫–æ—Ä–æ—á–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è** –¥–ª—è `Collectors.groupingBy(classifier, Collectors.toList())`.
>
> `Collectors.toList()` —î `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º **–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** –¥–ª—è `groupingBy`.
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∫–æ—Ä–æ—á–µ–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó —î –∫—Ä–∞—â–∏–º, –æ—Å–∫—ñ–ª—å–∫–∏ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –±—ñ–ª—å—à –ª–∞–∫–æ–Ω—ñ—á–Ω–∏–º. –Ø–≤–Ω—É –≤–µ—Ä—Å—ñ—é `...groupingBy(..., Collectors.toList())` –º–∞—î —Å–µ–Ω—Å –ø–∏—Å–∞—Ç–∏ –ª–∏—à–µ –¥–ª—è —è—Å–Ω–æ—Å—Ç—ñ –∞–±–æ —è–∫—â–æ –≤–∏ –∑–±–∏—Ä–∞—î—Ç–µ—Å—è –∑–∞–º—ñ–Ω–∏—Ç–∏ `toList()` –Ω–∞ —â–æ—Å—å —ñ–Ω—à–µ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤ API. –¶–µ –Ω–µ–≤–µ–ª–∏–∫–∞ –¥–µ—Ç–∞–ª—å, –∞–ª–µ –≤–æ–Ω–∞ –ø–æ–∫–∞–∑—É—î —É–≤–∞–∂–Ω—ñ—Å—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect` –∑—ñ–±—Ä–∞—Ç–∏ –ø–æ—Ç—ñ–∫ —É `String` (–∞–Ω–∞–ª–æ–≥ `Collectors.joining`)? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ `Collectors.joining()` —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º —Ç–∞ –∫—Ä–∞—â–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º, –π–æ–≥–æ –ª–æ–≥—ñ–∫—É –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ "–≤—Ä—É—á–Ω—É" –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç—Ä—å–æ—Ö–∞—Ä–≥—É–º–µ–Ω—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó `collect(supplier, accumulator, combiner)`. –¶–µ –≥–∞—Ä–Ω–∞ –≤–ø—Ä–∞–≤–∞ –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ–ª–µ–∫—Ç–æ—Ä–∏.
>
> **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
>
> * `supplier`: `StringBuilder::new` ‚Äî —Å—Ç–≤–æ—Ä—é—î –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
> * `accumulator`: `(sb, s) -> sb.append(s)` ‚Äî –¥–æ–¥–∞—î –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ –¥–æ `StringBuilder`.
> * `combiner`: `(sb1, sb2) -> sb1.append(sb2)` ‚Äî –æ–±'—î–¥–Ω—É—î –¥–≤–∞ `StringBuilder`'–∞.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**

```java
Stream<String> stream = Stream.of("a", "b", "c");

String result = stream.collect(
    StringBuilder::new,     // –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫
    StringBuilder::append,  // –ê–∫—É–º—É–ª—è—Ç–æ—Ä
    StringBuilder::append   // –ö–æ–º–±–∞–π–Ω–µ—Ä
).toString();               // –§—ñ–Ω–∞–ª—å–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è

System.out.println(result); // "abc"
```

–¢—É—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–ª–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –º–µ—Ç–æ–¥–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Å—Ç–∏—Å–ª–æ—Å—Ç—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó `collect` —Ç–∞ —ó—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤. –¶–µ –ø–æ–∫–∞–∑—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç –∑–Ω–∞—î –Ω–µ –ª–∏—à–µ –≥–æ—Ç–æ–≤—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏, –∞ –π –æ—Å–Ω–æ–≤–∏, –Ω–∞ —è–∫–∏—Ö –≤–æ–Ω–∏ –ø–æ–±—É–¥–æ–≤–∞–Ω—ñ.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `collect` —î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é, –∞ –Ω–µ –ø—Ä–æ–º—ñ–∂–Ω–æ—é? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `collect` —î —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é, —Ç–æ–º—É —â–æ –≤–æ–Ω–∞ **—Å–ø–æ–∂–∏–≤–∞—î –ø–æ—Ç—ñ–∫** —ñ **–ø–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**, —è–∫–∏–π **–Ω–µ —î –ø–æ—Ç–æ–∫–æ–º (`Stream`)**.
>
> * **–ü—Ä–æ–º—ñ–∂–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó** –∑–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å `Stream<T>`, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –±—É–¥—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–æ–∫ –¥–∞–ª—ñ.
> * **–¢–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó** –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –∞–±–æ `void`, –∞–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∑–Ω–∞—á–µ–Ω–Ω—è, –∫–æ–ª–µ–∫—Ü—ñ—é), –∑–∞–≤–µ—Ä—à—É—é—á–∏ –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –ø–æ—Ç–æ–∫—É.
>
> `collect` –≤–∏–∫–æ–Ω—É—î –≤—Å—é –≤–∞–∂–∫—É —Ä–æ–±–æ—Ç—É: —Å—Ç–≤–æ—Ä—é—î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —ñ—Ç–µ—Ä—É—î—Ç—å—Å—è –ø–æ –ø–æ—Ç–æ–∫—É, –Ω–∞–∫–æ–ø–∏—á—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –¶–µ —ñ —î –∫—ñ–Ω—Ü–µ–≤–∞ –º–µ—Ç–∞ –æ–±—Ä–æ–±–∫–∏, –ø—ñ—Å–ª—è —è–∫–æ—ó –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–æ–∫ –Ω–µ–º–∞—î —Å–µ–Ω—Å—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ—ó —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ —Ç–∏–ø–∞–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ–π, —â–æ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —ó—Ö–Ω—ñ–º –ø–æ–≤–µ—Ä–Ω—É—Ç–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î `Stream<Optional<String>>`. –Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect` –∑—ñ–±—Ä–∞—Ç–∏ –ª–∏—à–µ –ø—Ä–∏—Å—É—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ `List<String>`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π —Ç–∞ `collect`. –ù–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `collect`, –æ—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç—ñ–∫ –º—ñ—Å—Ç–∏—Ç—å `Optional`.
>
> **–ö—Ä–æ–∫ 1: –í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ `Optional`'–∏.**
>
> **–ö—Ä–æ–∫ 2: "–†–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏" –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –Ω–µ–ø—É—Å—Ç–∏—Ö `Optional`'—ñ–≤.**
>
> **–ü—ñ–¥—Ö—ñ–¥ –∑ `filter` —Ç–∞ `map` (Java 8):**
>
> ```java
> Stream<Optional<String>> stream = ...;
> List<String> presentValues = stream
>     .filter(Optional::isPresent)
>     .map(Optional::get)
>     .collect(Collectors.toList());
> ```
>
> **–ü—ñ–¥—Ö—ñ–¥ –∑ `flatMap` (–∑ Java 9, –¥–µ `Optional` –æ—Ç—Ä–∏–º–∞–≤ –º–µ—Ç–æ–¥ `.stream()`):**
> –ú–µ—Ç–æ–¥ `.stream()` –Ω–∞ `Optional` –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç—ñ–∫ –∑ –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ (—è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è —î) –∞–±–æ –ø–æ—Ä–æ–∂–Ω—ñ–π –ø–æ—Ç—ñ–∫. `flatMap` —ñ–¥–µ–∞–ª—å–Ω–æ "—Å–ø–ª—é—â—É—î" —ó—Ö.
>
> ```java
> Stream<Optional<String>> stream = ...;
> List<String> presentValues = stream
>     .flatMap(Optional::stream)
>     .collect(Collectors.toList());
> ```
>
> –î—Ä—É–≥–∏–π –ø—ñ–¥—Ö—ñ–¥ —î –±—ñ–ª—å—à —Å—É—á–∞—Å–Ω–∏–º, —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–º —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ `Optional` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `Stream API` —Ç–∞ –∑–Ω–∞–Ω–Ω—è —ñ–¥—ñ–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Ü—ñ—î—ó –ø–æ—à–∏—Ä–µ–Ω–æ—ó –∑–∞–¥–∞—á—ñ.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–∑–≤—ñ—Ç—å —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ `Collectors.toSet()` —Ç–∞ `Collectors.toCollection(TreeSet::new)`. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û–±–∏–¥–≤–∞ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –∑–±–∏—Ä–∞—é—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ `Set`, –∞–ª–µ –≤ **—Ä—ñ–∑–Ω—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó** –∑ —Ä—ñ–∑–Ω–∏–º–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏.
>
> * **`Collectors.toSet()`:**
>   * **–ù–µ –≥–∞—Ä–∞–Ω—Ç—É—î** –∂–æ–¥–Ω–æ—ó –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `Set`. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ `HashSet`.
>   * **–ü–æ—Ä—è–¥–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:** –ù–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π, –±—É–¥–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ `hashCode()`.
>   * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –î—É–∂–µ –≤–∏—Å–æ–∫–∞ (O(1) –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è).
>
> * **`Collectors.toCollection(TreeSet::new)`:**
>   * **–ì–∞—Ä–∞–Ω—Ç—É—î** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ **`TreeSet`**.
>   * **–ü–æ—Ä—è–¥–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:** –ï–ª–µ–º–µ–Ω—Ç–∏ –±—É–¥—É—Ç—å **–≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ** –∑–∞ –ø—Ä–∏—Ä–æ–¥–Ω–∏–º –ø–æ—Ä—è–¥–∫–æ–º –∞–±–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –Ω–∞–¥–∞–Ω–æ–≥–æ `Comparator`.
>   * **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –¢—Ä–æ—Ö–∏ –Ω–∏–∂—á–∞ (O(log n) –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è).
>   * **–í–∏–º–æ–≥–∏:** –ï–ª–µ–º–µ–Ω—Ç–∏ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ `Comparable`.
>
> **–ö–æ–ª–∏ —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
>
> * `toSet()` ‚Äî —è–∫—â–æ –≤–∞–º –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –Ω–∞–±—ñ—Ä —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å, —ñ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ–≤–∞–∂–ª–∏–≤–∏–π.
> * `toCollection(TreeSet::new)` ‚Äî —è–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π –Ω–∞–±—ñ—Ä —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ç–æ—Ä—ñ–≤ —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `toCollection` –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ –≤–∏–±–∏—Ä–∞—Ç–∏ –∫—ñ–Ω—Ü–µ–≤—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∫–æ–ª–µ–∫—Ü—ñ—ó.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∞–Ω–∞–ª–æ–≥ `flatMap` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect` —Ç–∞ `reducing`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ `flatMap` —î –ø—Ä–æ–º—ñ–∂–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é, —ó—ó –ª–æ–≥—ñ–∫—É –º–æ–∂–Ω–∞ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `reduce` –∞–±–æ `collect`, —Ö–æ—á–∞ —Ü–µ –±—É–¥–µ –∑–Ω–∞—á–Ω–æ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ. –¶–µ —Å—É—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –≤–ø—Ä–∞–≤–∞.
>
> **–Ü–¥–µ—è:**
>
> 1. `map` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç `T` –Ω–∞ `Stream<R>`. –û—Ç—Ä–∏–º—É—î–º–æ `Stream<Stream<R>>`.
> 2. `collect` –∑ –≤–ª–∞—Å–Ω–∏–º –∫–æ–ª–µ–∫—Ç–æ—Ä–æ–º –±—É–¥–µ —ñ—Ç–µ—Ä—É–≤–∞—Ç–∏—Å—è –ø–æ —Ü—å–æ–º—É –ø–æ—Ç–æ–∫—É –ø–æ—Ç–æ–∫—ñ–≤.
> 3. `accumulator` –±—É–¥–µ –±—Ä–∞—Ç–∏ –∫–æ–∂–µ–Ω –Ω–æ–≤–∏–π `Stream<R>` —ñ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤—Å—ñ –π–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –æ–¥–∏–Ω –∑–∞–≥–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`List<R>`).

#### **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect(supplier, accumulator, combiner)`:**

```java
Stream<List<String>> streamOfLists = ...;
List<String> flattened = streamOfLists.collect(
    ArrayList::new,                  // supplier
    (list, innerList) -> list.addAll(innerList), // accumulator
    (list1, list2) -> list1.addAll(list2)        // combiner
);
```

–¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ –ø–æ–∫–∞–∑—É—î, —â–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó —Ä–µ–¥—É–∫—Ü—ñ—ó —Ç–∞ –∑–±–∏—Ä–∞–Ω–Ω—è —î –¥—É–∂–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–º–∏, —ñ –Ω–∞ —ó—Ö –æ—Å–Ω–æ–≤—ñ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ–Ω—à–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª, –∞–ª–µ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫ `flatMap`, –∑–∞–≤–∂–¥–∏ –∫—Ä–∞—â—ñ –¥–ª—è —Å–≤–æ—î—ó –∑–∞–¥–∞—á—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –º–∏—Å–ª–∏—Ç–∏ –Ω–∞ —Ä—ñ–≤–Ω—ñ –æ—Å–Ω–æ–≤–Ω–∏—Ö "–ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤" —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ —Ç–∞–∫–µ downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä–∏ —ñ –Ω–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ `groupingBy` –∑ `maxBy`. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Downstream collector ("–∫–æ–ª–µ–∫—Ç–æ—Ä –Ω–∏–∂—á–æ–≥–æ —Ä—ñ–≤–Ω—è")** ‚Äî —Ü–µ –∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —è–∫ –¥—Ä—É–≥–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ —ñ–Ω—à–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä (–Ω–∞–ø—Ä., `groupingBy`, `partitioningBy`, `mapping`), —â–æ–± –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É –∞–≥—Ä–µ–≥–∞—Ü—ñ—é **–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏**.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ `groupingBy` —Ç–∞ `maxBy`:**
>
> **–ó–∞–¥–∞—á–∞:** –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤—ñ–¥–¥—ñ–ª—É –∑–Ω–∞–π—Ç–∏ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –∑ –Ω–∞–π–≤–∏—â–æ—é –∑–∞—Ä–ø–ª–∞—Ç–æ—é.
>
> 1. `groupingBy(Employee::getDepartment)` ‚Äî –≥—Ä—É–ø—É—î –≤—Å—ñ—Ö —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ –∑–∞ –≤—ñ–¥–¥—ñ–ª–∞–º–∏. –ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –º–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –± `Map<String, List<Employee>>`.
>
> 2. **`Collectors.maxBy(Comparator)`** ‚Äî —Ü–µ `downstream`-–∫–æ–ª–µ–∫—Ç–æ—Ä, —è–∫–∏–π –¥–ª—è –∫–æ–∂–Ω–æ—ó –≥—Ä—É–ø–∏ (–¥–ª—è –∫–æ–∂–Ω–æ–≥–æ `List<Employee>`) –∑–Ω–∞–π–¥–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑–∞ –∑–∞–¥–∞–Ω–∏–º –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–º. –í—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î `Optional`.
>
> #### **–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**
>
> ```java
> Map<String, Optional<Employee>> highestEarnerByDept = employees.stream()
>     .collect(Collectors.groupingBy(
>         Employee::getDepartment, // –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
>         Collectors.maxBy(Comparator.comparing(Employee::getSalary)) // Downstream-–∫–æ–ª–µ–∫—Ç–æ—Ä
>     ));
> ```
>
> –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ –º–∞–ø–∞, –¥–µ –∫–ª—é—á ‚Äî —Ü–µ –≤—ñ–¥–¥—ñ–ª, –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî `Optional`, —â–æ –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–π–æ–ø–ª–∞—á—É–≤–∞–Ω—ñ—à–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ —Ü—å–æ–≥–æ –≤—ñ–¥–¥—ñ–ª—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω—ñ –∑–∞–¥–∞—á—ñ, –∫–æ–º–±—ñ–Ω—É—é—á–∏ —Ä—ñ–∑–Ω—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–æ—ó –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `collect` –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–º—É—Ç–∞–±–µ–ª—å–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é (`List`, `Set`, `Map`)? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–î–æ Java 10** –¥–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `finisher` —É `Collectors.collectingAndThen`.
> `collectingAndThen(Collectors.toList(), Collections::unmodifiableList)`
>
> **–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ Java 10**, —É –∫–ª–∞—Å—ñ `Collectors` –∑'—è–≤–∏–ª–∏—Å—è **—Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏** –¥–ª—è —Ü—å–æ–≥–æ, —â–æ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –∑–Ω–∞—á–Ω–æ —á–∏—Å—Ç—ñ—à–∏–º:
>
> * **`Collectors.toUnmodifiableList()`**:
>     –ó–±–∏—Ä–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –Ω–µ–∑–º—ñ–Ω–Ω–∏–π —Å–ø–∏—Å–æ–∫.
> * **`Collectors.toUnmodifiableSet()`**:
>     –ó–±–∏—Ä–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –Ω–µ–∑–º—ñ–Ω–Ω–∏–π —Å–µ—Ç.
> * **`Collectors.toUnmodifiableMap(keyMapper, valueMapper)`**:
>     –ó–±–∏—Ä–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –Ω–µ–∑–º—ñ–Ω–Ω—É –º–∞–ø—É.
>
> –¶—ñ –∫–æ–ª–µ–∫—Ç–æ—Ä–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å —ñ–º—É—Ç–∞–±–µ–ª—å–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é, –∞–ª–µ –π —î –±—ñ–ª—å—à –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–º–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –Ω–µ–∑–º—ñ–Ω–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π, —â–æ –±—É–ª–∏ –≤–≤–µ–¥–µ–Ω—ñ –≤ Java 9.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ (Java 10+):**

```java
List<String> list = stream.collect(Collectors.toUnmodifiableList());
// –°–ø—Ä–æ–±–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ (list.add("new")) –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ UnsupportedOperationException.
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö (–ø—ñ—Å–ª—è 8-—ó) –≤–µ—Ä—Å—ñ–π Java —Ç–∞ —ñ–¥—ñ–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Å–ø–æ—Å–æ–±—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, —â–æ —î –≤–∞–∂–ª–∏–≤–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é –≤ —Å—É—á–∞—Å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ—è, –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ `Collectors.toMap`, –∫–∏–¥–∞—î `NullPointerException` (–Ω–∞–ø—Ä., `keyMapper`), —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è –∑ –æ–ø–µ—Ä–∞—Ü—ñ—î—é `collect`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –±—É–¥—å-—è–∫–∞ –∑ —Ñ—É–Ω–∫—Ü—ñ–π, –ø–µ—Ä–µ–¥–∞–Ω–∏—Ö —É –∫–æ–ª–µ–∫—Ç–æ—Ä (`keyMapper`, `valueMapper`, `mergeFunction`), –∫–∏–Ω–µ **–±—É–¥—å-—è–∫–∏–π –Ω–µ–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫** (–≤–∫–ª—é—á–∞—é—á–∏ `NullPointerException`), —Ç–æ –≤—Å—è —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è **`collect` –Ω–µ–≥–∞–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è**, —ñ —Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫ –±—É–¥–µ "–ø—Ä–æ–∫–∏–Ω—É—Ç–æ" –≤–≥–æ—Ä—É –ø–æ —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤.
>
> **–©–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î:**
>
> * –ü—Ä–æ–º—ñ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–º–∞–ø–∞, —â–æ –∑–±–∏—Ä–∞–ª–∞—Å—è) –±—É–¥–µ **–≤—ñ–¥–∫–∏–Ω—É—Ç–æ**. –í–∏ –Ω–µ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —á–∞—Å—Ç–∫–æ–≤–æ –∑–∞–ø–æ–≤–Ω–µ–Ω—É –º–∞–ø—É.
> * –ü–æ—Ç—ñ–∫ –≤–≤–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è "—Å–ø–æ–∂–∏—Ç–∏–º".
> * –í–∞—à –∫–æ–¥, —â–æ –≤–∏–∫–ª–∏–∫–∞–≤ `collect`, –ø–æ–≤–∏–Ω–µ–Ω –±—É–¥–µ –æ–±—Ä–æ–±–∏—Ç–∏ —Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫ (–∞–±–æ –ø—Ä–æ–≥—Ä–∞–º–∞ "–≤–ø–∞–¥–µ", —è–∫—â–æ —Ü–µ –≥–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫).
>
> –¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –¥–ª—è –≤–∏–Ω—è—Ç–∫—ñ–≤ —É `Stream API` ‚Äî –±—É–¥—å-—è–∫–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–µ–≥–∞–π–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏.
>
> **–Ø–∫ –∑–∞–ø–æ–±—ñ–≥—Ç–∏:**
> –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –¥–∞–Ω—ñ, —è–∫—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å —É `collect`, —î –≤–∞–ª—ñ–¥–Ω–∏–º–∏, –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–≤—à–∏ `null`'–∏ –∞–±–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –µ—Ç–∞–ø–∞—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `filter`.
>
> ```java
> .filter(obj -> obj.getKeyField() != null)
> .collect(Collectors.toMap(obj -> obj.getKeyField(), ...));
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ —É `Stream API` —Ç–∞ –≤–º—ñ–Ω–Ω—è –ø–∏—Å–∞—Ç–∏ –Ω–∞–¥—ñ–π–Ω–∏–π, "–∑–∞—Ö–∏—Å–Ω–∏–π" –∫–æ–¥.*

* * *
