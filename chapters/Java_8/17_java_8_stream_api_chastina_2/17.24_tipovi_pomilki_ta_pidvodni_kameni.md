---
layout: default
title: "–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –ø—ñ–¥–≤–æ–¥–Ω—ñ –∫–∞–º–µ–Ω—ñ"
parent: "Stream API"
grand_parent: "Java 8"
nav_order: 24
---

# –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –ø—ñ–¥–≤–æ–¥–Ω—ñ –∫–∞–º–µ–Ω—ñ

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Stream API –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏. –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—å: –ø–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—É, –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —É –ª—è–º–±–¥–∞—Ö, –º—É—Ç–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤ —É —Å—Ç—Ä—ñ–º—ñ, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `peek()`, –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –±–µ–∑ `limit()`.

* –ø–æ–Ω—è—Ç—Ç—è: –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—É, –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ (side effects), –º—É—Ç–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤, `peek()`, –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –±–µ–∑ `limit()`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –°–ø—Ä–æ–±–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `count()` –¥–≤—ñ—á—ñ –Ω–∞ –æ–¥–Ω–æ–º—É —Å—Ç—Ä—ñ–º—ñ (`IllegalStateException`), –∑–º—ñ–Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å–ø–∏—Å–∫—É —É `forEach()`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –°—Ç—Ä—ñ–º –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–π. –£–Ω–∏–∫–∞–π—Ç–µ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤. `peek()` –ª–∏—à–µ –¥–ª—è –¥–µ–±–∞–≥—É.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à—ñ –ø–æ–º–∏–ª–∫–∏ –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

Stream API ‚Äî —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ** –æ–±—Ä–æ–±–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É Java. –ê–ª–µ –π–æ–≥–æ **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–º–∏–ª–æ–∫**, —è–∫—ñ –≤–∞–∂–∫–æ –≤—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏, –æ—Å–æ–±–ª–∏–≤–æ —É –≤–µ–ª–∏–∫–∏—Ö —ñ —Å–∫–ª–∞–¥–Ω–∏—Ö –ø–∞–π–ø–ª–∞–π–Ω–∞—Ö.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

**–°—Ç—Ä—ñ–º–∏ ‚Äî –ø–æ—Ç—É–∂–Ω—ñ, –∞–ª–µ –ø—Ä–∏–º—Ö–ª–∏–≤—ñ.** –û–¥–∏–Ω –Ω–µ–æ—á–µ–≤–∏–¥–Ω–∏–π –∫—Ä–æ–∫ ‚Äî —ñ —Ç–≤—ñ–π –∫–æ–¥ –ø—Ä–∞—Ü—é—î –¥–∏–≤–Ω–æ –∞–±–æ –ø–∞–¥–∞—î. –û—Å–æ–±–ª–∏–≤–æ —á–∞—Å—Ç–æ –≥—Ä–∞–±–ª—ñ —Ç—Ä–∞–ø–ª—è—é—Ç—å—Å—è –∑ **–ø–æ–≤—Ç–æ—Ä–Ω–∏–º
–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º**, **–ø–æ–±—ñ—á–Ω–∏–º–∏ –µ—Ñ–µ–∫—Ç–∞–º–∏**, –∞–±–æ **–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—é**
---

## üìä **–ü–æ—à–∏—Ä–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏:**

* ‚ùå –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—É –ø—ñ—Å–ª—è —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó

* ‚ö†Ô∏è –ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –≤ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º—ñ–Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–º—ñ–Ω–Ω–∏—Ö)

* ‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **`peek()`** (—Å–ø—Ä–æ–±–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∏–º **`map()`**)

* üß® –ú—É—Ç–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤, —è–∫—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ —Å—Ç—Ä—ñ–º

* üîÑ –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –±–µ–∑ **`limit()`** –∞–±–æ **`takeWhile()`**

* üîç –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ null —É —Å—Ç—Ä—ñ–º–∞—Ö

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **–°—Ç—Ä—ñ–º ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–π**: —Å–ø–æ–∂–∏–≤ ‚Äî –∑–∞–±—É–≤. –°–ø—Ä–æ–±–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –π–æ–≥–æ –∑–Ω–æ–≤—É ‚Äî –æ—Ç—Ä–∏–º–∞—î—à **`IllegalStateException`**.
* **peek() ‚Äî —Ü–µ –Ω–µ map()**: –≤—ñ–Ω –¥–ª—è –¥–µ–±–∞–≥—É, –∞ –Ω–µ –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó.
* **–ó–º—ñ–Ω–∞ –∑–º—ñ–Ω–Ω–æ—ó –≤ –ª—è–º–±–¥—ñ** ‚Äî –≤–æ—Ä–æ–≥ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—ó.
* **Mutable –¥–∞–Ω—ñ —É —Å—Ç—Ä—ñ–º—ñ** \= –º—ñ–Ω–Ω–µ –ø–æ–ª–µ. –û–±–µ—Ä–µ–∂–Ω–æ –∑ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏ —Ç–∞ –æ–±‚Äô—î–∫—Ç–∞–º–∏, —è–∫—ñ –∑–º—ñ–Ω—é—é—Ç—å—Å—è "–ø–æ –¥–æ—Ä–æ–∑—ñ".

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

üîπ **‚ùå –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—É:**

```java
Stream<String> stream = Stream.of("a", "b", "c");
stream.forEach(System.out::println);
stream.count(); // ‚ùó IllegalStateException
```

üîπ **‚ö†Ô∏è –ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏:**

```java
List<String> list = new ArrayList<>();
Stream.of("a", "b", "c")
      .forEach(list::add); // –ú–æ–∂–Ω–∞, –∞–ª–µ –ø–æ—Ä—É—à—É—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
```

üîπ **‚ùó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è peek():**

```java
Stream.of("java", "stream")
    .peek(str -> str = str.toUpperCase()) // ‚ùå –Ω–µ –∑–º—ñ–Ω—é—î –∑–Ω–∞—á–µ–Ω–Ω—è
    .forEach(System.out::println);
```

üîπ **üß® –ú—É—Ç–∞—Ü—ñ—è –æ–±'—î–∫—Ç—ñ–≤:**

```java
List<User> users = getUsers();
users.stream()
     .peek(u -> u.setRole("ADMIN")) // –∑–º—ñ–Ω—é—î —Å—Ç–∞–Ω –æ–±'—î–∫—Ç—ñ–≤ –ø—Ä—è–º–æ —É —Å—Ç—Ä—ñ–º—ñ
     .collect(Collectors.toList());
```

üîπ **üîÑ –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Å—Ç—Ä—ñ–º –±–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è:**

```java
Stream.generate(Math::random)
      .forEach(System.out::println); // –ë—ñ–∂–∏—Ç—å –≤—ñ—á–Ω–æ
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|               –°–∏—Ç—É–∞—Ü—ñ—è               |                –ü–æ–≥–∞–Ω–æ üü•                |                –î–æ–±—Ä–µ ‚úÖ                |
|:------------------------------------:|:---------------------------------------:|:-------------------------------------:|
|     –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—ñ–º—É     | **`stream.count(); stream.anyMatch()`** |       –ù–æ–≤–∏–π —Å—Ç—Ä—ñ–º –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É        |
|    –ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —É forEach / map    |       **`list.add(x)`** —É —Å—Ç—Ä—ñ–º—ñ        |   **`collect()`** –∞–±–æ —á–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó   |
|  –ó–∞–º—ñ–Ω–∞ **`map()`** –Ω–∞ **`peek()`**  |        **`peek(x -> x = x+1)`**         | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`map()`** –¥–ª—è –∑–º—ñ–Ω  |
|      –ú—É—Ç–æ–≤–∞–Ω—ñ –æ–±'—î–∫—Ç–∏ –≤ —Å—Ç—Ä—ñ–º—ñ       |   **`user.setActive(true)`** —É —Å—Ç—Ä—ñ–º—ñ   |        –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –æ–±‚Äô—î–∫—Ç–∏        |
| –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ —Å—Ç—Ä—ñ–º–∏ –±–µ–∑ **`limit()`** |       **`.generate().forEach()`**       | **`.generate().limit(10).forEach()`** |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"–°—Ç—Ä—ñ–º ‚Äî —Ü–µ —Ä—ñ–∫–∞: –æ–¥–Ω–µ —Ä—É—Å–ª–æ ‚Äî –æ–¥–∏–Ω –Ω–∞–ø—Ä—è–º–æ–∫."**

–Ø–∫—â–æ –∑–∞–π—à–æ–≤ ‚Äî –∞–±–æ –ø–ª–∏–≤–µ—à –¥–æ –∫—ñ–Ω—Ü—è, –∞–±–æ –ø–æ—á–∏–Ω–∞–π –∑ –¥–∂–µ—Ä–µ–ª–∞

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –°—Ç—Ä—ñ–º–∏ ‚Äî —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è. **–î—É–º–∞–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ.**
* **–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Å—Ç—Ä—ñ–º –¥–≤—ñ—á—ñ.**
* **peek() ‚Äî –Ω–µ map().** –ù–µ –∑–º—ñ–Ω—é–π –Ω–∏–º –æ–±‚Äô—î–∫—Ç–∏.
* –£–Ω–∏–∫–∞–π **–ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤** —Ç–∞ –º—É—Ç–∞—Ü—ñ–π.
* –ë—É–¥—å –æ–±–µ—Ä–µ–∂–Ω–∏–º —ñ–∑ **–Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏**.
* –î–ª—è –±–µ–∑–ø–µ–∫–∏ ‚Äî **–ª–æ–≥—ñ–∫—É –≤–∏–Ω–æ—Å—å —É —á–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó** –∞–±–æ —Å—Ç–≤–æ—Ä—é–π –∫–æ–ø—ñ—ó –æ–±'—î–∫—Ç—ñ–≤.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Oracle Java Stream Docs**](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html)
* [**StackOverflow ‚Äî Why can't we reuse a Stream in Java 8?**](https://stackoverflow.com/questions/24413120/why-cant-we-reuse-a-stream-in-java-8)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∞ —î –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ `Stream API`, —è–∫–æ—ó –ø—Ä–∏–ø—É—Å–∫–∞—é—Ç—å—Å—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∞ –ø–æ–º–∏–ª–∫–∞ ‚Äî —Ü–µ **—Å–ø—Ä–æ–±–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É (`Stream`)** –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –Ω–∞ –Ω—å–æ–º—É –≤–∂–µ –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é.
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> –ü–æ—Ç—ñ–∫ –≤ Java —î **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–º**. –ô–æ–≥–æ –º–æ–∂–Ω–∞ —É—è–≤–∏—Ç–∏ —è–∫ –∫–æ–Ω–≤–µ—î—Ä, –ø–æ —è–∫–æ–º—É –¥–∞–Ω—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑. –Ø–∫ —Ç—ñ–ª—å–∫–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è (`collect`, `forEach`, `count` —Ç–æ—â–æ), –ø–æ—Ç—ñ–∫ –≤–≤–∞–∂–∞—î—Ç—å—Å—è **"—Å–ø–æ–∂–∏—Ç–∏–º" –∞–±–æ "–∑–∞–∫—Ä–∏—Ç–∏–º"**.
>
> –ë—É–¥—å-—è–∫–∞ —Å–ø—Ä–æ–±–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ —â–µ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é –Ω–∞ —Ç–æ–º—É –∂ —Å–∞–º–æ–º—É –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ –ø–æ—Ç–æ–∫—É –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –≤–∏–∫–∏–¥–∞–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—É **`IllegalStateException`** –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º "stream has already been operated upon or closed".
>
> **–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
> –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ —ñ–Ω—à—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ —Ç–∏–º–∏ –∂ –¥–∞–Ω–∏–º–∏, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ **—Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫** –∑ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞ (–∫–æ–ª–µ–∫—Ü—ñ—ó, –º–∞—Å–∏–≤—É).

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–º–∏–ª–∫–∏:**

```java
List<String> names = List.of("a", "b", "c");
Stream<String> stream = names.stream();

// –ü–µ—Ä—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è - –≤—Å–µ –≥–∞—Ä–∞–∑–¥
stream.forEach(System.out::println);

// –î—Ä—É–≥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è - –ü–û–ú–ò–õ–ö–ê!
// –ù–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫ –∫–∏–Ω–µ IllegalStateException
long count = stream.count();
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –Ω–∞–π—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ—à–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ —Ä–æ–±–æ—Ç–∏ –∑—ñ —Å—Ç—Ä—ñ–º–∞–º–∏ ‚Äî —ó—Ö–Ω—å–æ—ó –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—Å—Ç—ñ. –¶–µ –±–∞–∑–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è, —è–∫–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç —Ä–æ–∑—É–º—ñ—î –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –ø–æ—Ç–æ–∫—É.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ (side-effects) —É –ª—è–º–±–¥–∞—Ö —ñ —á–æ–º—É —ó—Ö —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏ –≤ `Stream API`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü–æ–±—ñ—á–Ω–∏–π –µ—Ñ–µ–∫—Ç** ‚Äî —Ü–µ –±—É–¥—å-—è–∫–∞ –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—É –∑–∞ –º–µ–∂–∞–º–∏ –ª—è–º–±–¥–∞-–≤–∏—Ä–∞–∑—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó, –∑–º—ñ–Ω–∞ –ø–æ–ª—è –æ–±'—î–∫—Ç–∞ –∞–±–æ –ø—Ä–æ—Å—Ç–æ –≤–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å.
>
> **–ß–æ–º—É —ó—Ö —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏:**
>
> 1. **–ü–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ –§–ü:** –Ü–¥–µ–æ–ª–æ–≥—ñ—è `Stream API` –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ, –¥–µ —Ñ—É–Ω–∫—Ü—ñ—ó –º–∞—é—Ç—å –±—É—Ç–∏ "—á–∏—Å—Ç–∏–º–∏" ‚Äî —ó—Ö–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—î –∑–∞–ª–µ–∂–∞—Ç–∏ –ª–∏—à–µ –≤—ñ–¥ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö, —ñ –≤–æ–Ω–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω—ñ—á–æ–≥–æ –∑–∑–æ–≤–Ω—ñ.
> 2. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º–æ–º:** –Ø–∫—â–æ –ª—è–º–±–¥–∞ –∑ –ø–æ–±—ñ—á–Ω–∏–º –µ—Ñ–µ–∫—Ç–æ–º –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ **–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ (`parallelStream`)**, —Ü–µ –º–∞–π–∂–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ **"—É–º–æ–≤ –≥–æ–Ω–∏—Ç–≤–∏" (race conditions)**. –ö—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ –±—É–¥—É—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –∑–º—ñ–Ω–∏—Ç–∏ –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π —Å—Ç–∞–Ω, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∞–±–æ –≤–∏–Ω—è—Ç–∫—ñ–≤.
> 3. **–ù–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å:** –ß–µ—Ä–µ–∑ "–ª—ñ–Ω–∏–≤—ñ—Å—Ç—å" —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó `Stream API` –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –æ–ø–µ—Ä–∞—Ü—ñ—è –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –¥–ª—è –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä., –∑ `findFirst`). –ü–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –≤ —Ç–∞–∫–∏—Ö —É–º–æ–≤–∞—Ö –¥—É–∂–µ –Ω–µ–Ω–∞–¥—ñ–π–Ω–æ.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:**
> –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó, —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–∫–æ–ª–µ–∫—Ç–æ—Ä–∏ (`collect`)** –¥–ª—è –∑–±–æ—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É –Ω–æ–≤—É, –±–µ–∑–ø–µ—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥ (–∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω):**

```java
List<String> upperCaseNames = new ArrayList<>();
List<String> names = List.of("alice", "bob");

// –ü–û–ì–ê–ù–û: –ª—è–º–±–¥–∞ –∑–º—ñ–Ω—é—î –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–ø–∏—Å–æ–∫. –ù–µ–±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è parallelStream()!
names.stream().forEach(name -> upperCaseNames.add(name.toUpperCase()));

// –î–û–ë–†–ï: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —á–∏—Å—Ç—É —Ñ—É–Ω–∫—Ü—ñ—é `map` —Ç–∞ –∫–æ–ª–µ–∫—Ç–æ—Ä
List<String> result = names.stream()
                           .map(String::toUpperCase)
                           .collect(Collectors.toList());
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —á–æ–º—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –≤–∏–º–∞–≥–∞—î —É–Ω–∏–∫–∞—Ç–∏ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –∑–Ω–∞–Ω–Ω—è –æ—Å–Ω–æ–≤ –§–ü —Ç–∞ –ø—Ä–∞–≤–∏–ª –±–µ–∑–ø–µ—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ `parallelStream`.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É –æ–ø–µ—Ä–∞—Ü—ñ—é `peek()` –Ω–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–º—ñ–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–æ—Ç–æ–∫—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `peek()` –¥–ª—è –∑–º—ñ–Ω–∏ (–º—É—Ç–∞—Ü—ñ—ó) –æ–±'—î–∫—Ç—ñ–≤ ‚Äî —Ü–µ –ø–æ—à–∏—Ä–µ–Ω–∏–π **–∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω**.
>
> **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è `peek()`:**
> `peek()` —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –≤–∏–∫–ª—é—á–Ω–æ –¥–ª—è **–Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (–¥–µ–±–∞–≥—ñ–Ω–≥—É)**. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î "–ø—ñ–¥–≥–ª—è–Ω—É—Ç–∏" –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤ –ø–µ–≤–Ω—ñ–π —Ç–æ—á—Ü—ñ –ª–∞–Ω—Ü—é–∂–∫–∞, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ —ó—Ö.
>
> **–ß–æ–º—É —Ü–µ –ø–æ–≥–∞–Ω–∞ —ñ–¥–µ—è:**
>
> 1. **–ü–æ—Ä—É—à–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É:** –¶–µ —Å—É–ø–µ—Ä–µ—á–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—é –º–µ—Ç–æ–¥—É. –î–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ—Å–Ω—É—î –æ–ø–µ—Ä–∞—Ü—ñ—è `map()`.
> 2. **–ù–µ–Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å:** –Ø–∫ —ñ –∑ –±—É–¥—å-—è–∫–∏–º–∏ –ø–æ–±—ñ—á–Ω–∏–º–∏ –µ—Ñ–µ–∫—Ç–∞–º–∏, –Ω–µ–º–∞—î –≥–∞—Ä–∞–Ω—Ç—ñ—ó, —â–æ `peek` –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ. `Stream API` –º–æ–∂–µ **–æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏** –ª–∞–Ω—Ü—é–∂–æ–∫ —ñ **"–≤–∏—Ä—ñ–∑–∞—Ç–∏"** –≤–∏–∫–ª–∏–∫ `peek`, —è–∫—â–æ –±–∞—á–∏—Ç—å, —â–æ –≤—ñ–Ω –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è `count()`).
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
> –ö–æ–¥ `stream.peek(user -> user.setActive(true))` –º–æ–∂–µ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞—Ç–∏.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:**
> –î–ª—è –∑–º—ñ–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `map()`, —è–∫–∏–π —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π** –æ–±'—î–∫—Ç –∑ –Ω–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏.
> `stream.map(user -> new User(user.getId(), true))`

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–¢–æ—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è `peek()` —Ç–∞ `map()`. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ `peek` ‚Äî –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è, –∞ `map` ‚Äî –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü—ñ–π –º–æ–∂–µ –∑–Ω–∞—á–Ω–æ –ø–æ–≥—ñ—Ä—à–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—É?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –º–∞—î –∫—Ä–∏—Ç–∏—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
>
> **–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:** **–ó–∞–≤–∂–¥–∏ —Ñ—ñ–ª—å—Ç—Ä—É–π—Ç–µ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ.** –†–æ–∑–º—ñ—â—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ –∑–º–µ–Ω—à—É—é—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ (`filter`, `limit`), **–ø–µ—Ä–µ–¥** "–¥–æ—Ä–æ–≥–∏–º–∏" –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ (`map`, `sorted`, `distinct`).
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> * **–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ (`filter` -> `map`):**
>     1. –°–ø–æ—á–∞—Ç–∫—É –≤–∏ **–≤—ñ–¥–∫–∏–¥–∞—î—Ç–µ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏**, –∑–Ω–∞—á–Ω–æ –∑–º–µ–Ω—à—É—é—á–∏ —Ä–æ–∑–º—ñ—Ä –ø–æ—Ç–æ–∫—É.
>     2. –ü–æ—Ç—ñ–º –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ "–¥–æ—Ä–æ–≥—É" –æ–ø–µ—Ä–∞—Ü—ñ—é `map` –ª–∏—à–µ –Ω–∞ **–Ω–µ–≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤**, —â–æ –∑–∞–ª–∏—à–∏–ª–∏—Å—è.
>
> * **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ (`map` -> `filter`):**
>     1. –°–ø–æ—á–∞—Ç–∫—É –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ `map` –Ω–∞ **–≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç–∞—Ö** –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫—É, –≤–∏—Ç—Ä–∞—á–∞—é—á–∏ —Ä–µ—Å—É—Ä—Å–∏ –Ω–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è, –º–æ–∂–ª–∏–≤–æ, –º—ñ–ª—å–π–æ–Ω—ñ–≤ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>     2. –Ü –ª–∏—à–µ –ø–æ—Ç—ñ–º –≤–∏ **–≤—ñ–¥–∫–∏–¥–∞—î—Ç–µ –±—ñ–ª—å—à—ñ—Å—Ç—å** —Ü–∏—Ö —â–æ–π–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. –¶–µ –º–∞—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
// –ü–û–ì–ê–ù–û
list.stream()
    .sorted()                             // 1. –°–æ—Ä—Ç—É—î–º–æ 1,000,000 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
    .limit(10)                            // 2. –ê –ø–æ—Ç—ñ–º –±–µ—Ä–µ–º–æ –ª–∏—à–µ 10
// –î–û–ë–†–ï
list.stream()
    .limit(10)                           // 1. –°–ø–æ—á–∞—Ç–∫—É –±–µ—Ä–µ–º–æ 10
    .sorted()                             // 2. –ê –ø–æ—Ç—ñ–º —Å–æ—Ä—Ç—É—î–º–æ –ª–∏—à–µ —ó—Ö
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–∏—Å–∞—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –∫–æ–¥ –∑—ñ `Stream API` —Ç–∞ –º–∏—Å–ª–∏—Ç–∏ –ø—Ä–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –∫–æ–Ω–≤–µ—î—Ä–∞ –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –Ω–µ –æ–±–º–µ–∂–∏—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –ø–æ—Ç—ñ–∫, —ñ —è–∫ —Ü—å–æ–≥–æ —É–Ω–∏–∫–Ω—É—Ç–∏?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ **—Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é, —â–æ –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `collect()`, `forEach()`, `count()`) –Ω–∞ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –±–µ–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è, –ø—Ä–æ–≥—Ä–∞–º–∞ —É–≤—ñ–π–¥–µ –≤ **–Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª** –∞–±–æ –≤—Ä–µ—à—Ç—ñ-—Ä–µ—à—Ç –≤–ø–∞–¥–µ –∑ **`OutOfMemoryError`**.
>
> –¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —Ç–æ–º—É, —â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –±—É–¥–µ –≤—ñ—á–Ω–æ –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –æ–±—Ä–æ–±–∏—Ç–∏ –ø–æ—Ç—ñ–∫, —è–∫–∏–π –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è.
>
> **–Ø–∫ —Ü—å–æ–≥–æ —É–Ω–∏–∫–Ω—É—Ç–∏:**
>
> –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ –ø–æ—Ç–æ–∫–∏ **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** –ø–æ–≤–∏–Ω–Ω—ñ –æ–±–º–µ–∂—É–≤–∞—Ç–∏—Å—è –ø—Ä–æ–º—ñ–∂–Ω–∏–º–∏ **`short-circuiting`** –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏, —è–∫—ñ —Ä–æ–±–ª—è—Ç—å —ó—Ö —Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º–∏.
>
> * **`limit(long maxSize)`:** –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–±. –û–±–º–µ–∂—É—î –ø–æ—Ç—ñ–∫ –ø–µ—Ä—à–∏–º–∏ `n` –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏.
> * **`takeWhile(Predicate predicate)` (–∑ Java 9):** –ë–µ—Ä–µ –µ–ª–µ–º–µ–Ω—Ç–∏, –¥–æ–∫–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É–º–æ–≤–∞.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
// –ü–û–ì–ê–ù–û: –ù–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª
// Stream.iterate(0, n -> n + 1).forEach(System.out::println);

// –î–û–ë–†–ï: –ü–æ—Ç—ñ–∫ –æ–±–º–µ–∂–µ–Ω–æ
Stream.iterate(0, n -> n + 1)
      .limit(10)
      .forEach(System.out::println);
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –Ω–µ–±–µ–∑–ø–µ–∫ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ —Ç–∞ —Å–ø–æ—Å–æ–±—ñ–≤ —ó—Ö —É–Ω–∏–∫–Ω–µ–Ω–Ω—è.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ `null` –µ–ª–µ–º–µ–Ω—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø–æ—Ç–æ–∫—É, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ `NullPointerException`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `NullPointerException` ‚Äî –æ–¥–Ω–∞ –∑ –Ω–∞–π—á–∞—Å—Ç—ñ—à–∏—Ö –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑—ñ —Å—Ç—Ä—ñ–º–∞–º–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ `null`'–∏. –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ü—ñ—è, —è–∫-–æ—Ç `map`, –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ –Ω–∞ `null`-–µ–ª–µ–º–µ–Ω—Ç—ñ, –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è `NPE`.
>
> **–ù–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞:** **–í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤—É–≤–∞—Ç–∏ `null`'–∏ —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ** –≤ –ª–∞–Ω—Ü—é–∂–∫—É.
>
> –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è `filter()` –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ –º–µ—Ç–æ–¥ **`Objects::nonNull`**.
>
> –¶–µ –∑–∞–ª–∏—à–∞—î –≤ –ø–æ—Ç–æ—Ü—ñ –ª–∏—à–µ –Ω–µ-–Ω—É–ª—å–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —É–±–µ–∑–ø–µ—á—É—é—á–∏ –≤—Å—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
List<String> listWithNulls = Arrays.asList("a", null, "b", "c", null);

// –ü–û–ì–ê–ù–û: –≤–ø–∞–¥–µ –∑ NPE –Ω–∞ –¥—Ä—É–≥–æ–º—É –µ–ª–µ–º–µ–Ω—Ç—ñ
// listWithNulls.stream().map(String::toUpperCase).collect(Collectors.toList());

// –î–û–ë–†–ï: —Ñ—ñ–ª—å—Ç—Ä—É—î–º–æ null'–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è–º
List<String> result = listWithNulls.stream()
                                    .filter(Objects::nonNull)
                                    .map(String::toUpperCase)
                                    .collect(Collectors.toList());

System.out.println(result); // [A, B, C]
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ù–∞–≤–∏—á–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è "–∑–∞—Ö–∏—Å–Ω–æ–≥–æ" (defensive) –∫–æ–¥—É —Ç–∞ –∑–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —É—Ç–∏–ª—ñ—Ç (`Objects::nonNull`) –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `parallelStream()` –º–æ–∂–µ —Å–ø–æ–≤—ñ–ª—å–Ω–∏—Ç–∏, –∞ –Ω–µ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–æ–º—É —â–æ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º –º–∞—î —Å–≤–æ—ó **–Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏**, —è–∫—ñ –≤ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –º–æ–∂—É—Ç—å –±—É—Ç–∏ –±—ñ–ª—å—à–∏–º–∏ –∑–∞ –≤–∏–≥–æ–¥—É –≤—ñ–¥ –æ–¥–Ω–æ—á–∞—Å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.
>
> **–ü—Ä–∏—á–∏–Ω–∏, —á–µ—Ä–µ–∑ —è–∫—ñ `parallelStream()` –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–º:**
>
> 1. **–ú–∞–ª–∏–π –æ–±—Å—è–≥ –¥–∞–Ω–∏—Ö:** –î–ª—è –Ω–µ–≤–µ–ª–∏–∫–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π —á–∞—Å, –≤–∏—Ç—Ä–∞—á–µ–Ω–∏–π –Ω–∞ —Ä–æ–∑–±–∏—Ç—Ç—è –¥–∞–Ω–∏—Ö, –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏ —Ç–∞ –æ–±'—î–¥–Ω–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, –±—É–¥–µ –±—ñ–ª—å—à–∏–º, –Ω—ñ–∂ —á–∞—Å –ø—Ä–æ—Å—Ç–æ—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏.
> 2. **–î–∂–µ—Ä–µ–ª–æ, —â–æ –ø–æ–≥–∞–Ω–æ —Ä–æ–∑—â–µ–ø–ª—é—î—Ç—å—Å—è:** –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –ª–µ–≥–∫–æ —Ä–æ–∑–±–∏—Ç–∏ –¥–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö. `ArrayList` —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –¥—É–∂–µ –¥–æ–±—Ä–µ, –∞ `LinkedList` ‚Äî –¥—É–∂–µ –ø–æ–≥–∞–Ω–æ.
> 3. **"–î–µ—à–µ–≤—ñ" –æ–ø–µ—Ä–∞—Ü—ñ—ó:** –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –∫–æ–∂–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º –¥—É–∂–µ —à–≤–∏–¥–∫—ñ, —Ç–æ "–≤—É–∑—å–∫–∏–º –º—ñ—Å—Ü–µ–º" —Å—Ç–∞—î –Ω–µ —Å–∞–º–∞ –æ–±—Ä–æ–±–∫–∞, –∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–∞–º–∏.
> 4. **–í–∏—Å–æ–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü—ñ—è –∑–∞ —Ä–µ—Å—É—Ä—Å–∏:** `parallelStream()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–ø—ñ–ª—å–Ω–∏–π `ForkJoinPool`. –Ø–∫—â–æ –≤ —Ü–µ–π –∂–µ —á–∞—Å —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–∏ —Ç–∞–∫–æ–∂ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å, –≤–∏–Ω–∏–∫–∞—î –±–æ—Ä–æ—Ç—å–±–∞ –∑–∞ —Ä–µ—Å—É—Ä—Å–∏.
>
> `parallelStream` —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–æ, –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±—Å—è–≥—ñ–≤ –¥–∞–Ω–∏—Ö —Ç–∞ –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–æ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ –º–∏—Å–ª–∏—Ç–∏ —Ç–∞ —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ "–ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π" –Ω–µ –∑–∞–≤–∂–¥–∏ –æ–∑–Ω–∞—á–∞—î "—à–≤–∏–¥–∫–∏–π".*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —á–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `distinct()` –∞–±–æ `sorted()` –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –∞–±–æ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º. ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –æ–±–∏–¥–≤—ñ —Ü—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó —î **`stateful`**, —Ç–æ–±—Ç–æ —ó–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω, –Ω–∞–∫–æ–ø–∏—á—É—é—á–∏ –µ–ª–µ–º–µ–Ω—Ç–∏.
>
> * **`sorted()`**: –©–æ–± –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—ñ–∫, –ø–æ—Ç—Ä—ñ–±–Ω–æ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –π–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏** —ñ –∑–±–µ—Ä–µ–≥—Ç–∏ —ó—Ö —É –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–º—É –±—É—Ñ–µ—Ä—ñ.
> * **`distinct()`**: –©–æ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–∞–º'—è—Ç–∞—Ç–∏ **–≤—Å—ñ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏**, —è–∫—ñ –≤–∂–µ –∑—É—Å—Ç—Ä—ñ—á–∞–ª–∏—Å—è.
>
> **–ù–µ–±–µ–∑–ø–µ–∫–∞:**
>
> * **–î–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤:** –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤–µ–ª–∏—á–µ–∑–Ω–æ–≥–æ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —ñ, —è–∫ –Ω–∞—Å–ª—ñ–¥–æ–∫, –¥–æ `OutOfMemoryError`.
> * **–î–ª—è –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤:** –¶–µ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `OutOfMemoryError`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω –±—É–¥–µ —Ä–æ—Å—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ.
>
> –¶—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –ª–∏—à–µ **–ü–Ü–°–õ–Ø** –æ–ø–µ—Ä–∞—Ü—ñ—ó `limit()`, —è–∫–∞ —Ä–æ–±–∏—Ç—å –ø–æ—Ç—ñ–∫ —Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è, —è–∫ `stateful`-–æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –≤–∏–º–æ–≥–∏ –¥–æ –ø–∞–º'—è—Ç—ñ, —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤—É —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Å—Ç—Ä—ñ–º—É.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ "—É–º–æ–≤–∏ –≥–æ–Ω–∏—Ç–≤–∏" (`race condition`):
`List<Integer> list = new ArrayList<>(); IntStream.range(0, 1000).parallel().forEach(i -> list.add(i));` ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ —î –∫–ª–∞—Å–∏—á–Ω–∏–º –ø—Ä–∏–∫–ª–∞–¥–æ–º **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤** –∑ **–ø–æ–±—ñ—á–Ω–∏–º–∏ –µ—Ñ–µ–∫—Ç–∞–º–∏** —Ç–∞ **—Å–ø—ñ–ª—å–Ω–∏–º –∑–º—ñ–Ω–Ω–∏–º —Å—Ç–∞–Ω–æ–º**.
>
> **–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏:**
>
> 1. `ArrayList` **–Ω–µ —î –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—é** –∫–æ–ª–µ–∫—Ü—ñ—î—é. –ô–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–∞—Å–∏–≤ —Ç–∞ –ª—ñ—á–∏–ª—å–Ω–∏–∫ `size`) –Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–¥–Ω–æ—á–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –∑ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤.
> 2. `parallelStream()` —Ä–æ–∑–±–∏–≤–∞—î –¥—ñ–∞–ø–∞–∑–æ–Ω —á–∏—Å–µ–ª –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ —ñ –æ–±—Ä–æ–±–ª—è—î —ó—Ö —É —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.
> 3. –í—Å—ñ —Ü—ñ –ø–æ—Ç–æ–∫–∏ **–æ–¥–Ω–æ—á–∞—Å–Ω–æ** –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ `list.add()`.
>
> –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ **`race condition`**: –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫ –º–æ–∂–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ `size`, –∞–ª–µ –Ω–µ –≤—Å—Ç–∏–≥–Ω—É—Ç–∏ –∑–∞–ø–∏—Å–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç, —è–∫ —ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫ –≤–∂–µ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–∞–ø–∏—Å–∞—Ç–∏ —Å–≤—ñ–π –µ–ª–µ–º–µ–Ω—Ç —É —Ç—É —Å–∞–º—É –∫–æ–º—ñ—Ä–∫—É.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏:** –ù–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –≤—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö, `ArrayIndexOutOfBoundsException` –∞–±–æ —ñ–Ω—à—ñ –ø–æ–º–∏–ª–∫–∏.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–ª–µ–∫—Ç–æ—Ä `.collect(Collectors.toList())`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –æ—Å–Ω–æ–≤ concurrency —Ç–∞ –ø—Ä–∏—á–∏–Ω –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è `race condition`. –¶–µ –æ–¥–Ω–∞ –∑ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏—Ö –ø–æ–º–∏–ª–æ–∫, —è–∫—É –ø–æ–≤–∏–Ω–µ–Ω –≤–º—ñ—Ç–∏ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π Java-—Ä–æ–∑—Ä–æ–±–Ω–∏–∫.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—é –º–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏—Ö –ª–∞–Ω—Ü—é–∂–∫—ñ–≤ —Å—Ç—Ä—ñ–º—ñ–≤? –Ø–∫ —ó—ó –≤–∏—Ä—ñ—à–∏—Ç–∏? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ `Stream API` –ø–æ–∫—Ä–∞—â—É—î —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å, –ª–∞–Ω—Ü—é–∂–∫–∏ –∑ 10+ –æ–ø–µ—Ä–∞—Ü—ñ–π –º–æ–∂—É—Ç—å —Å—Ç–∞—Ç–∏ –¥—É–∂–µ –≤–∞–∂–∫–∏–º–∏ –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏. –¶–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **"–ø–æ—Ç–æ–∫–æ–º-–º–æ–Ω—Å—Ç—Ä–æ–º"**.
>
> **–ü—Ä–æ–±–ª–µ–º–∞:**
>
> * –í–∞–∂–∫–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É –∑ –ø–µ—Ä—à–æ–≥–æ –ø–æ–≥–ª—è–¥—É.
> * –°–∫–ª–∞–¥–Ω–æ –Ω–∞–ª–∞–≥–æ–¥–∂—É–≤–∞—Ç–∏.
> * –í–∞–∂–∫–æ –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–∫—Ä–µ–º—ñ —á–∞—Å—Ç–∏–Ω–∏ –ª–æ–≥—ñ–∫–∏.
>
> **–Ø–∫ –≤–∏—Ä—ñ—à–∏—Ç–∏:**
>
> 1. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–º—ñ–Ω–Ω–∏—Ö:**
>     –†–æ–∑–±–∏—Ç–∏ –¥–æ–≤–≥–∏–π –ª–∞–Ω—Ü—é–∂–æ–∫ –Ω–∞ –∫—ñ–ª—å–∫–∞ –º–µ–Ω—à–∏—Ö, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–æ–º—ñ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ (–ø–æ—Ç–æ–∫–∏ –∞–±–æ –∫–æ–ª–µ–∫—Ü—ñ—ó) —É –∑–º—ñ–Ω–Ω—ñ –∑ –æ—Å–º–∏—Å–ª–µ–Ω–∏–º–∏ —ñ–º–µ–Ω–∞–º–∏.
>
> 2. **–í–∏–Ω–µ—Å–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –º–µ—Ç–æ–¥–∏:**
>     –Ø–∫—â–æ —è–∫–∞—Å—å —á–∞—Å—Ç–∏–Ω–∞ –ª–∞–Ω—Ü—é–∂–∫–∞ —î —Å–∫–ª–∞–¥–Ω–æ—é, —ó—ó –º–æ–∂–Ω–∞ –≤–∏–Ω–µ—Å—Ç–∏ –≤ –æ–∫—Ä–µ–º–∏–π `private`-–º–µ—Ç–æ–¥, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î –ø–æ—Ç—ñ–∫, –≤–∏–∫–æ–Ω—É—î –Ω–∞–¥ –Ω–∏–º –æ–ø–µ—Ä–∞—Ü—ñ—ó —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫. –¶–µ –ø–æ–∫—Ä–∞—â—É—î —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É.
>
> 3. **–í–∏–Ω–µ—Å–µ–Ω–Ω—è –ø—Ä–µ–¥–∏–∫–∞—Ç—ñ–≤ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π —É –∑–º—ñ–Ω–Ω—ñ:**
>
>     ```java
>     Predicate<User> isActive = User::isActive;
>     Predicate<User> isAdult = u -> u.getAge() >= 18;
>     stream.filter(isActive.and(isAdult)) ...
>     ```
>
> –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ù–∞–≤–∏—á–∫–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –≤–º—ñ–Ω–Ω—è –ø–∏—Å–∞—Ç–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ –∫–æ—Ä–æ—Ç–∫–∏–π, –∞ –π —á–∏—Å—Ç–∏–π —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–π –∫–æ–¥.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ —Ç–∞–∫–µ `boxing` —Ç–∞ `unboxing`, —ñ —è–∫ —Ü–µ –º–æ–∂–µ —Å—Ç–∞—Ç–∏ "–ø—ñ–¥–≤–æ–¥–Ω–∏–º –∫–∞–º–µ–Ω–µ–º" —É `Stream API`. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> * **Boxing (–ü–∞–∫—É–≤–∞–Ω–Ω—è):** –¶–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–≥–æ —Ç–∏–ø—É –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –æ–±'—î–∫—Ç-–æ–±–≥–æ—Ä—Ç–∫—É (–Ω–∞–ø—Ä., `int` -> `Integer`).
> * **Unboxing (–†–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è):** –ó–≤–æ—Ä–æ—Ç–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è (`Integer` -> `int`).
>
> **–ü—ñ–¥–≤–æ–¥–Ω–∏–π –∫–∞–º—ñ–Ω—å —É `Stream API`:**
>
> –ö–æ–ª–∏ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ —á–∏—Å–ª–∞–º–∏, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –æ–±'—î–∫—Ç–Ω–∏–π –ø–æ—Ç—ñ–∫ (`Stream<Integer>`) –∑–∞–º—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–≥–æ (`IntStream`), –Ω–∞ –∫–æ–∂–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é, —â–æ –≤–∏–º–∞–≥–∞—î –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å, Java –≤–∏–∫–æ–Ω—É—î —Ü—ñ –Ω–µ—è–≤–Ω—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥—É:**
>
> ```java
> List<Integer> numbers = ...;
> // –ö–æ–∂–µ–Ω `reduce` –≤–∏–∫–ª–∏—á–µ unboxing –¥–ª—è `a` —ñ `b`, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - boxing
> int sum = numbers.stream().reduce(0, (a, b) -> a + b); 
> ```
>
> –Ø–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –≤–µ–ª–∏–∫–∞, —Ü–µ —Å—Ç–≤–æ—Ä—é—î **–≤–µ–ª–∏—á–µ–∑–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤-–æ–±–≥–æ—Ä—Ç–æ–∫**, —â–æ –∑–Ω–∞—á–Ω–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è —Ç–∞ —Å–ø–æ–≤—ñ–ª—å–Ω—é—î –ø—Ä–æ–≥—Ä–∞–º—É.
>
> **–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ—Ç–æ–∫–∏ (`IntStream`, `LongStream`, `DoubleStream`) —Ç–∞ —ó—Ö–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (`.sum()`, `.average()`), —è–∫—ñ —É–Ω–∏–∫–∞—é—Ç—å boxing/unboxing.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ Java –ø—Ä–∞—Ü—é—î –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏ —Ç–∞ –æ–±'—î–∫—Ç–∞–º–∏, —Ç–∞ –≤–º—ñ–Ω–Ω—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ `OutOfMemoryError` –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑—ñ —Å—Ç—Ä—ñ–º–∞–º–∏? –ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞.** –•–æ—á–∞ —Å—Ç—Ä—ñ–º–∏ –ª—ñ–Ω–∏–≤—ñ, –¥–µ—è–∫—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤–∏–º–∞–≥–∞—é—Ç—å –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤—Å—ñ—Ö –∞–±–æ –±–∞–≥–∞—Ç—å–æ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –ø–∞–º'—è—Ç—ñ.
>
> **–û—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —â–æ –ø—Ä–∏–∑–≤–æ–¥—è—Ç—å –¥–æ `OutOfMemoryError`:**
>
> 1. **Stateful-–æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞ –¥—É–∂–µ –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö:**
>     * **`sorted()`**: –©–æ–± –≤—ñ–¥—Å–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—ñ–∫, –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—ñ –π–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –ø–∞–º'—è—Ç—å. –Ø–∫—â–æ –ø–æ—Ç—ñ–∫ –¥—É–∂–µ –≤–µ–ª–∏–∫–∏–π (–º—ñ–ª—å—è—Ä–¥–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤), —Ü–µ –≤–∏—á–µ—Ä–ø–∞—î –∫—É–ø—É.
>     * **`distinct()`**: –Ø–∫—â–æ –≤ –ø–æ—Ç–æ—Ü—ñ –¥—É–∂–µ –±–∞–≥–∞—Ç–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π `HashSet` –¥–ª—è —ó—Ö –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç–∞–∫–æ–∂ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –≤—Å—é –ø–∞–º'—è—Ç—å.
>
> 2. **`collect()` –Ω–∞ –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö:**
>     –û–ø–µ—Ä–∞—Ü—ñ—è `collect(Collectors.toList())` –Ω–∞ –ø–æ—Ç–æ—Ü—ñ –∑ –º—ñ–ª—å—è—Ä–¥–∞–º–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —Å–ø—Ä–æ–±—É—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ç–∞–∫–æ–≥–æ –∂ —Ä–æ–∑–º—ñ—Ä—É, —â–æ, –π–º–æ–≤—ñ—Ä–Ω–æ, –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `OOM`.
>
> 3. **–ù–µ–æ–±–º–µ–∂–µ–Ω—ñ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ –ø–æ—Ç–æ–∫–∏:**
>     –ù–∞–π–±—ñ–ª—å—à –æ—á–µ–≤–∏–¥–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫. –í–∏–∫–ª–∏–∫ `stateful` –∞–±–æ –∑–±–∏—Ä–∞—é—á–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –±–µ–∑ `limit` –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `OOM`.
>
>     ```java
>     // –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π OutOfMemoryError
>     List<Integer> list = Stream.iterate(0, n -> n + 1)
>                                .collect(Collectors.toList()); 
>     ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤—É —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å (–≤–∏–º–æ–≥–∏ –¥–æ –ø–∞–º'—è—Ç—ñ) —Å—Ç—Ä—ñ–º–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π. –¶–µ –æ–∑–Ω–∞–∫–∞ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–æ–≥–æ —ñ–Ω–∂–µ–Ω–µ—Ä–∞.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `Optional` —ñ `Stream` –Ω–µ –º–æ–∂–Ω–∞ –ø–ª—É—Ç–∞—Ç–∏, —Ö–æ—á–∞ –æ–±–∏–¥–≤–∞ —î "–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏"? –Ø–∫—ñ –ø–æ–º–∏–ª–∫–∏ —Ü–µ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ –æ–±–∏–¥–≤–∞ —î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –≤–æ–Ω–∏ –º–∞—é—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ä—ñ–∑–Ω—É **—Å–µ–º–∞–Ω—Ç–∏–∫—É**:
>
> * **`Optional<T>`:** –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î **–æ–¥–∏–Ω** –µ–ª–µ–º–µ–Ω—Ç, —è–∫–∏–π **–º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º**. –¶–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è **0 –∞–±–æ 1** –µ–ª–µ–º–µ–Ω—Ç–∞.
> * **`Stream<T>`:** –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î **–ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤. –¶–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è **0 –∞–±–æ –±—ñ–ª—å—à–µ** –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> **–ü–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞:** –°–ø—Ä–æ–±–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ `Optional<List<T>>` –∑–∞–º—ñ—Å—Ç—å `List<T>`.
>
> **–ü–æ–≥–∞–Ω–æ:**
> `public Optional<List<User>> findUsersByCity(String city)`
>
> –¶–µ —Å—Ç–≤–æ—Ä—é—î –ø–ª—É—Ç–∞–Ω–∏–Ω—É. –©–æ –æ–∑–Ω–∞—á–∞—î `Optional.empty`? –©–æ –ø–æ—à—É–∫ –Ω–µ –¥–∞–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤? –ß–∏ —â–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞? –ê —â–æ –æ–∑–Ω–∞—á–∞—î `Optional` –∑—ñ **–ø–æ—Ä–æ–∂–Ω—ñ–º —Å–ø–∏—Å–∫–æ–º**?
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
> –ú–µ—Ç–æ–¥, —â–æ —à—É–∫–∞—î –∫–æ–ª–µ–∫—Ü—ñ—é, –∑–∞–≤–∂–¥–∏ –º–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é. –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –≤—ñ–Ω –º–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ **–ø–æ—Ä–æ–∂–Ω—é –∫–æ–ª–µ–∫—Ü—ñ—é**.
>
> `public List<User> findUsersByCity(String city)`
>
> `Optional` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –≤—ñ–¥—Å—É—Ç–Ω—å–æ–≥–æ **–æ–¥–∏–Ω–∏—á–Ω–æ–≥–æ** –æ–±'—î–∫—Ç–∞, –∞ –Ω–µ –∫–æ–ª–µ–∫—Ü—ñ—ó.
>
> –ó–º—ñ—à—É–≤–∞–Ω–Ω—è —Ü–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π —Ä–æ–±–∏—Ç—å API –Ω–µ—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–º —ñ —Å–∫–ª–∞–¥–Ω–∏–º –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è `Optional`. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –¥–∏–∑–∞–π–Ω API.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–æ–±–æ—Ç–∞ –∑ –±–ª–æ–∫—É—é—á–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ (IO, –º–µ—Ä–µ–∂–µ–≤—ñ –≤–∏–∫–ª–∏–∫–∏) –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `parallelStream` –º–æ–∂–µ "–≤–±–∏—Ç–∏" –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –≤—Å—å–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –æ–¥–∏–Ω –∑ **–Ω–∞–π–Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ—à–∏—Ö –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω—ñ–≤**.
>
> **–ü—Ä–æ–±–ª–µ–º–∞:**
>
> 1. `parallelStream()` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **—Å–ø—ñ–ª—å–Ω–∏–π (common) `ForkJoinPool`**.
> 2. –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—ñ–≤ —É —Ü—å–æ–º—É –ø—É–ª—ñ –∑–∞–∑–≤–∏—á–∞–π –Ω–µ–≤–µ–ª–∏–∫–∞ —ñ –¥–æ—Ä—ñ–≤–Ω—é—î –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ (–Ω–∞–ø—Ä., 4, 8, 16).
> 3. `parallelStream` –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è **CPU-bound** –∑–∞–≤–¥–∞–Ω—å (–æ–±—á–∏—Å–ª–µ–Ω—å), —è–∫—ñ –ø–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–π–º–∞—é—Ç—å –ø—Ä–æ—Ü–µ—Å–æ—Ä.
> 4. **–ë–ª–æ–∫—É—é—á–∞ IO-–æ–ø–µ—Ä–∞—Ü—ñ—è** (–Ω–∞–ø—Ä., –≤–∏–∫–ª–∏–∫ REST API, –∑–∞–ø–∏—Ç –¥–æ –ë–î) –Ω–µ –∑–∞–π–º–∞—î –ø—Ä–æ—Ü–µ—Å–æ—Ä. –ü—ñ–¥ —á–∞—Å –Ω–µ—ó –ø–æ—Ç—ñ–∫ –ø—Ä–æ—Å—Ç–æ **—á–µ–∫–∞—î** –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
>
> **–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
>
> –Ø–∫—â–æ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ —Ç–∞–∫—É –±–ª–æ–∫—É—é—á—É –æ–ø–µ—Ä–∞—Ü—ñ—é –≤ `parallelStream`, –≤–∏ –º–æ–∂–µ—Ç–µ –¥—É–∂–µ —à–≤–∏–¥–∫–æ **"–∑–∞–π–Ω—è—Ç–∏" –≤—Å—ñ –ø–æ—Ç–æ–∫–∏** –∑—ñ —Å–ø—ñ–ª—å–Ω–æ–≥–æ `ForkJoinPool`. –í—Å—ñ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –ø—Ä–æ—Å—Ç–æ—é–≤–∞—Ç–∏, —á–µ–∫–∞—é—á–∏ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ –º–µ—Ä–µ–∂—ñ –∞–±–æ –ë–î.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏:**
>
> –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π –ø—É–ª —î **—Å–ø—ñ–ª—å–Ω–∏–º –Ω–∞ –≤—Å—é JVM**, —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –≤–∞—à–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏, —è–∫—ñ —Ç–∞–∫–æ–∂ –Ω–∞ –Ω—å–æ–≥–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—é—Ç—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —ñ–Ω—à—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Å—Ç—Ä—ñ–º–∏, `CompletableFuture`), –Ω–µ –∑–º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç—ñ–∫ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–≤–æ—î—ó —Ä–æ–±–æ—Ç–∏. –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ **"–≥–æ–ª–æ–¥—É–≤–∞–Ω–Ω—è" –ø–æ—Ç–æ–∫—ñ–≤ (thread starvation)** —ñ —Ñ–∞–∫—Ç–∏—á–Ω–æ **"–∑–∞–º–æ—Ä–æ–∑–∏—Ç–∏"** –≤–µ—Å—å –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫.
>
> **–ü—Ä–∞–≤–∏–ª–æ:** –ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω—É–π—Ç–µ –¥–æ–≤–≥–æ—Ç—Ä–∏–≤–∞–ª—ñ –±–ª–æ–∫—É—é—á—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤ `parallelStream`. –î–ª—è —Ü—å–æ–≥–æ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—ñ `ExecutorService` –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º —Ä–æ–∑–º—ñ—Ä–æ–º –ø—É–ª—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω—ñ –∑–Ω–∞–Ω–Ω—è `concurrency` —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ CPU-bound —Ç–∞ IO-bound –∑–∞–¥–∞—á–∞–º–∏. –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–µ –∑–Ω–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –≤–∏—Å–æ–∫–æ–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–±–∏ –≤–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞–ª–∏ `filter`, —â–æ –º—ñ—Å—Ç–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ "–¥–æ—Ä–æ–≥—É" –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —ñ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± —É–Ω–∏–∫–Ω—É—Ç–∏ —ó—ó –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É, —è–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –±–∏ –≤–∏ –æ–±—Ä–∞–ª–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞ **–∫–µ—à—É–≤–∞–Ω–Ω—è** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –æ–±—á–∏—Å–ª–µ–Ω—å –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å—Ç—Ä—ñ–º—É. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `Stream API` –Ω–µ –º–∞—î –¥–ª—è —Ü—å–æ–≥–æ –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –∫–µ—à—É–≤–∞–Ω–Ω—è.
>
> **–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ –≤ –ª–∞–Ω—Ü—é–∂–∫—É `stream` –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –µ–ª–µ–º–µ–Ω—Ç –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤, –¥–æ—Ä–æ–≥–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ.
>
> **–ü—ñ–¥—Ö—ñ–¥ 1: –ö–µ—à—É–≤–∞–Ω–Ω—è –∑–∑–æ–≤–Ω—ñ (—ñ–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–π, –∞–ª–µ –ø—Ä–æ—Å—Ç–∏–π)**
> –°—Ç–≤–æ—Ä–∏—Ç–∏ `Map` –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –¥–æ—Ä–æ–≥–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó.
>
> ```java
> Map<Input, Boolean> cache = new HashMap<>();
> Predicate<Input> expensivePredicate = input -> 
>     cache.computeIfAbsent(input, i -> callExpensiveService(i));
>
> stream.filter(expensivePredicate)...
> ```
>
> –¶–µ –ø—Ä–æ—Å—Ç–æ, –∞–ª–µ –≤–≤–æ–¥–∏—Ç—å –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π —Å—Ç–∞–Ω.
>
> **–ü—ñ–¥—Ö—ñ–¥ 2: –û–±–≥–æ—Ä—Ç–∫–∞ –≤ "–ª–µ–¥–∞—á–∏–π" –æ–±'—î–∫—Ç (–±—ñ–ª—å—à —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π)**
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `map` –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –Ω–∞ –æ–±'—î–∫—Ç, —â–æ –ª–µ–¥–∞—á–æ –æ–±—á–∏—Å–ª—é—î —Ç–∞ –∫–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
>
> ```java
> class MemoizedPredicate<T> {
>     private final T value;
>     private final Predicate<T> predicate;
>     private Boolean result; // –∫–µ—à
>
>     public boolean test() {
>         if (result == null) {
>             result = predicate.test(value);
>         }
>         return result;
>     }
> }
>
> stream.map(val -> new MemoizedPredicate(val, expensivePredicate))
>       .filter(memo -> memo.test())
>       .filter(memo -> memo.test()) // –î—Ä—É–≥–∏–π –≤–∏–∫–ª–∏–∫ –±—É–¥–µ –º–∏—Ç—Ç—î–≤–∏–º
>       .map(memo -> memo.getValue())
>       ...
> ```
>
> **–ü—ñ–¥—Ö—ñ–¥ 3: –°—Ç–æ—Ä–æ–Ω–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏**
> –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä., Vavr) –Ω–∞–¥–∞—é—Ç—å –≥–æ—Ç–æ–≤—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–ª—è –º–µ–º–æ—ó–∑–∞—Ü—ñ—ó —Ñ—É–Ω–∫—Ü—ñ–π (`memoized`), —â–æ —î –Ω–∞–π–∫—Ä–∞—â–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º.
>
> –£ –±—ñ–ª—å—à–æ—Å—Ç—ñ —Ä–µ–∞–ª—å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–µ—Ä—à–∏–π –ø—ñ–¥—Ö—ñ–¥ —á–µ—Ä–µ–∑ –π–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ç—É, –∞–±–æ –æ–¥—Ä–∞–∑—É –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ, –Ω–µ—Ç—Ä–∏–≤—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é. –¶–µ –ø–æ–∫–∞–∑—É—î, —â–æ –∫–∞–Ω–¥–∏–¥–∞—Ç –≤–º—ñ—î –¥—É–º–∞—Ç–∏ –ø—Ä–æ –∫–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ç–µ—Ä–Ω "–º–µ–º–æ—ó–∑–∞—Ü—ñ—è".*

* * *
