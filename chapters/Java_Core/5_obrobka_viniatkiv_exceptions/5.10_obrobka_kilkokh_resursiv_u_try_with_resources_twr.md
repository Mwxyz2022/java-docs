---
layout: default
title: "–û–±—Ä–æ–±–∫–∞ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ —É try-with-resources (TWR)"
parent: "–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (Exceptions)"
grand_parent: "Java Core"
nav_order: 10
---

# –û–±—Ä–æ–±–∫–∞ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ —É try-with-resources (TWR)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –£ `try-with-resources` –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ, —Ä–æ–∑–¥—ñ–ª—è—é—á–∏ —ó—Ö –∫—Ä–∞–ø–∫–æ—é –∑ –∫–æ–º–æ—é. –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É, –≤ —è–∫–æ–º—É –±—É–ª–∏ –≤—ñ–¥–∫—Ä–∏—Ç—ñ.

* –ø–æ–Ω—è—Ç—Ç—è: –ö—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ —É TWR, –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `try (BufferedReader r1 = ...; FileWriter w1 = ...) { ... }`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è. –ü—Ä–∏ –≤–∏–Ω—è—Ç–∫–∞—Ö —É `close()` –º–µ—Ç–æ–¥–∞—Ö, –≤–æ–Ω–∏ –¥–æ–¥–∞—é—Ç—å—Å—è —è–∫ `suppressed exceptions`.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –Ø–∫ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤, –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è, `suppressed exceptions`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

```java
try (
    ResourceType1 r1 = new ResourceType1(...);
    ResourceType2 r2 = new ResourceType2(...)
) {
    // —Ä–æ–±–æ—Ç–∞ –∑ r1 —ñ r2
} catch (Exception e) {
    // –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
}
```

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–û–≥–æ–ª–æ—à—É–π —Ä–µ—Å—É—Ä—Å–∏ —á–µ—Ä–µ–∑ **`;`**, —ñ Java —Å–∞–º–∞ –∫–µ—Ä—É—î —ó—Ö–Ω—ñ–º –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º.

#### **‚úîÔ∏è –ü—Ä–∏–∫–ª–∞–¥:**

```java
try (
    BufferedReader reader1 = new BufferedReader(new FileReader("file1.txt"));
    BufferedReader reader2 = new BufferedReader(new FileReader("file2.txt"))
) {
    System.out.println(reader1.readLine());
    System.out.println(reader2.readLine());
} catch (IOException e) {
    System.out.println("–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞: " + e.getMessage());
}
```

---

## **–û—Å–Ω–æ–≤–Ω–µ**

| –î—ñ—è | –ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è |
| :---: | :---: |
| **–í—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è** | r1 -> r2 -> r3 |
| **–ó–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è** | r3 -> r2 -> r1 *(–æ–±–µ—Ä–Ω–µ–Ω–æ)* |

üìå –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —è–∫—â–æ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–ª–µ–∂–∞—Ç—å –æ–¥–∏–Ω –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: **`BufferedWriter`** -> **`OutputStreamWriter`** -> **`FileOutputStream`**).

---

## **–©–æ –±—É–¥–µ, —è–∫—â–æ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫–∏?**

üìå –Ø–∫—â–æ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫–∏ —É **`close()`**, Java:

* –û—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ ‚Äî —Ç–æ–π, —â–æ –∑'—è–≤–∏–≤—Å—è **–ø–µ—Ä—à–∏–º** (—Ç–æ–±—Ç–æ —É **–æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É**).
* –Ü–Ω—à—ñ ‚Äî **–ø—Ä–∏–≥–ª—É—à–µ–Ω—ñ (suppressed)** —ñ –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ **`Throwable.getSuppressed()`**.

#### **‚úîÔ∏è –ü—Ä–∏–∫–ª–∞–¥:**

```java
try (
    TestResource r1 = new TestResource("R1");
    TestResource r2 = new TestResource("R2") // –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫ —É close()
) {
    System.out.println("–†–æ–±–æ—Ç–∞ –∑ —Ä–µ—Å—É—Ä—Å–∞–º–∏");
} catch (Exception e) {
    System.out.println("–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞: " + e.getMessage());
    for (Throwable suppressed : e.getSuppressed()) {
        System.out.println("–ü—Ä–∏–¥—É—à–µ–Ω–æ: " + suppressed.getMessage());
    }
}
```

üì¶ –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ, —è–∫—â–æ **`r2.close()`** —ñ **`r1.close()`** –æ–±–∏–¥–≤–∞ –∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫–∏ ‚Äî **`r2`** –±—É–¥–µ –æ—Å–Ω–æ–≤–Ω–æ—é, –∞ **`r1`** –ø—Ä–∏–≥–ª—É—à–µ–Ω–æ—é.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

```java
TWR: üîìüîìüîì -> üîíüîíüîí
(–≤—ñ–¥–∫—Ä–∏–ª–∏—Å—å –∑–≤–µ—Ä—Ö—É -- –∑–∞–∫—Ä–∏–ª–∏—Å—å –∑–Ω–∏–∑—É)
```

–ê–±–æ:

```java
TWR –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏ -> —Å—Ç–µ–∫: –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –≤ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É
```

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* –£ **`try-with-resources`** –º–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ **–∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ** —á–µ—Ä–µ–∑ **`;`**.
* Java **–∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É**, –≤ —è–∫–æ–º—É –≤–æ–Ω–∏ –±—É–ª–∏ –≤—ñ–¥–∫—Ä–∏—Ç—ñ.
* –ü—Ä–∏ –≤–∏–Ω—è—Ç–∫–∞—Ö —É **`close()`**:
  * **–û—Å–Ω–æ–≤–Ω–∏–π** –≤–∏–Ω—è—Ç–æ–∫ ‚Äî –≤—ñ–¥ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É.
  * **–Ü–Ω—à—ñ** ‚Äî –ø—Ä–∏–≥–ª—É—à–µ–Ω—ñ, –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ **`getSuppressed()`**.
* –Ü–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –æ–±–≥–æ—Ä—Ç–∫–∞–º–∏ –ø–æ—Ç–æ–∫—ñ–≤, –¥–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞–∫—Ä–∏—Ç—Ç—è –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è.

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-with-resources`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ —É `try-with-resources` —ó—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥—É–∂–æ–∫ `try`, —Ä–æ–∑–¥—ñ–ª—è—é—á–∏ **–∫—Ä–∞–ø–∫–æ—é –∑ –∫–æ–º–æ—é (`;`)**.
>
> **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
>
> ```java
> try (ResourceType1 resource1 = new ResourceType1();
>      ResourceType2 resource2 = new ResourceType2()) {
>     // –∫–æ–¥, —â–æ –ø—Ä–∞—Ü—é—î –∑ resource1 —Ç–∞ resource2
> } catch (Exception e) {
>     // ...
> }
> ```
>
> –ö–æ–∂–µ–Ω —Ä–µ—Å—É—Ä—Å –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `java.lang.AutoCloseable`.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ —Ñ–∞–π–ª–æ–≤–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏:**
>
> ```java
> try (FileInputStream fis = new FileInputStream("source.txt");
>      FileOutputStream fos = new FileOutputStream("destination.txt")) {
>
>     // –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
>     fis.transferTo(fos);
>
> } catch (IOException e) {
>     e.printStackTrace();
> }
> ```
>
> –¶—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —ñ `fis`, —ñ `fos` –±—É–¥—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏—Ç—ñ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `try` –±–ª–æ–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å–∏, –æ–≥–æ–ª–æ—à–µ–Ω—ñ –≤ `try-with-resources`, —ñ —á–æ–º—É —Ü–µ–π –ø–æ—Ä—è–¥–æ–∫ —î –≤–∞–∂–ª–∏–≤–∏–º?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –¥–æ —ó—Ö–Ω—å–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è**.
>
> –Ø–∫—â–æ —Ä–µ—Å—É—Ä—Å–∏ –æ–≥–æ–ª–æ—à–µ–Ω—ñ —è–∫:
> `try (ResourceA a = ...; ResourceB b = ...)`
>
> –¢–æ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è –±—É–¥–µ —Ç–∞–∫–∏–º:
>
> 1. –°–ø–æ—á–∞—Ç–∫—É –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `b.close()`.
> 2. –ü–æ—Ç—ñ–º –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `a.close()`.
>
> **–ß–æ–º—É —Ü–µ–π –ø–æ—Ä—è–¥–æ–∫ —î –≤–∞–∂–ª–∏–≤–∏–º:**
>
> –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —è–∫—ñ **–∑–∞–ª–µ–∂–∞—Ç—å –æ–¥–∏–Ω –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ** –∞–±–æ "–æ–±–≥–æ—Ä—Ç–∞—é—Ç—å" –æ–¥–∏–Ω –æ–¥–Ω–æ–≥–æ. –ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π –≤–∏–ø–∞–¥–æ–∫ ‚Äî —Ü–µ —Ä–æ–±–æ—Ç–∞ –∑ –ø–æ—Ç–æ–∫–∞–º–∏ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> try (FileOutputStream fos = new FileOutputStream("file.txt");
>      BufferedOutputStream bos = new BufferedOutputStream(fos)) {
>     // bos –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î fos
> }
> ```
>
> –Ø–∫—â–æ –± –∑–∞–∫—Ä–∏—Ç—Ç—è –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è —É –ø–æ—Ä—è–¥–∫—É –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, —Å–ø–æ—á–∞—Ç–∫—É –± –∑–∞–∫—Ä–∏–≤—Å—è `fos`. –¶–µ –º–æ–≥–ª–æ –± –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Ç–æ–≥–æ, —â–æ `bos` –Ω–µ –∑–º—ñ–≥ –±–∏ "—Å–∫–∏–Ω—É—Ç–∏" (flush) —Å–≤–æ—ó –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –≤ —É–∂–µ –∑–∞–∫—Ä–∏—Ç–∏–π –ø–æ—Ç—ñ–∫.
>
> –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ (`LIFO` - Last In, First Out) –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Å–ø–æ—á–∞—Ç–∫—É –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è "–∑–æ–≤–Ω—ñ—à–Ω—è" –æ–±–≥–æ—Ä—Ç–∫–∞ (`bos`), —è–∫–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç—É –∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–º —Ä–µ—Å—É—Ä—Å–æ–º (`fos`), —ñ –ª–∏—à–µ –ø–æ—Ç—ñ–º –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Å–∞–º –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Ä–µ—Å—É—Ä—Å. –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –Ω–∞–¥—ñ–π–Ω–∏–º.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–¶–µ —è–∫ –æ–¥—è–≥–∞—Ç–∏ –æ–¥—è–≥. –í–∏ –æ–¥—è–≥–∞—î—Ç–µ —Å–ø–æ—á–∞—Ç–∫—É —Å–æ—Ä–æ—á–∫—É, –ø–æ—Ç—ñ–º –ø—ñ–¥–∂–∞–∫. –ê –∑–Ω—ñ–º–∞—î—Ç–µ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É: —Å–ø–æ—á–∞—Ç–∫—É –ø—ñ–¥–∂–∞–∫, –ø–æ—Ç—ñ–º —Å–æ—Ä–æ—á–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞ LIFO –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ –π–æ–≥–æ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –≤–∞–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ø–æ—Ç–æ–∫–∞–º–∏.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ–∫–∞–∂—ñ—Ç—å –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ, —è–∫ –±–∏ –≤–∏–≥–ª—è–¥–∞–≤ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç `try-with-resources` –∑ –¥–≤–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏, –Ω–∞–ø–∏—Å–∞–Ω–∏–π –≤—Ä—É—á–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `try-finally`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —î –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –≥—Ä–æ–º—ñ–∑–¥–∫–æ—é, —Å—Ö–∏–ª—å–Ω–æ—é –¥–æ –ø–æ–º–∏–ª–æ–∫ —ñ —á—ñ—Ç–∫–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø–µ—Ä–µ–≤–∞–≥–∏ `try-with-resources`.
>
> **–ï–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç –¥–ª—è:**
> `try (R1 r1 = ...; R2 r2 = ...) { ... }`
>
> **–†—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (–¥—É–∂–µ —Å–ø—Ä–æ—â–µ–Ω–∞, –±–µ–∑ –æ–±—Ä–æ–±–∫–∏ –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤):**
>
> ```java
> R1 r1 = null;
> R2 r2 = null;
> try {
>     r1 = new R1();
>     r2 = new R2();
>     // ... —Ä–æ–±–æ—Ç–∞ –∑ r1 —Ç–∞ r2 ...
> } finally {
>     if (r2 != null) {
>         try {
>             r2.close(); // –°–ø–æ—á–∞—Ç–∫—É –∑–∞–∫—Ä–∏–≤–∞—î–º–æ r2
>         } catch (Exception e2) {
>             // –û–±—Ä–æ–±–∫–∞ –∞–±–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è r2
>             e2.printStackTrace();
>         }
>     }
>     if (r1 != null) {
>         try {
>             r1.close(); // –ü–æ—Ç—ñ–º –∑–∞–∫—Ä–∏–≤–∞—î–º–æ r1
>         } catch (Exception e1) {
>             // –û–±—Ä–æ–±–∫–∞ –∞–±–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è r1
>             e1.printStackTrace();
>         }
>     }
> }
> ```
>
> –¶–µ–π –∫–æ–¥ —É–∂–µ —Å–∫–ª–∞–¥–Ω–∏–π, –∞ —è–∫—â–æ –¥–æ–¥–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—É –æ–±—Ä–æ–±–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ (—â–æ–± –≤–∏–Ω—è—Ç–æ–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ `r2` –Ω–µ "–∑–∞—Ç–µ—Ä" –≤–∏–Ω—è—Ç–æ–∫ –∑ `try`), –≤—ñ–Ω —Å—Ç–∞–Ω–µ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ –Ω–µ—á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º.
> `try-with-resources` —Ä–æ–±–∏—Ç—å –≤—Å–µ —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ, –∫–æ—Ä–æ—Ç–∫–æ —ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —Å–∫—ñ–ª—å–∫–∏ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ —Ç–∞ —Å—Ö–∏–ª—å–Ω–æ–≥–æ –¥–æ –ø–æ–º–∏–ª–æ–∫ –∫–æ–¥—É –ø—Ä–∏—Ö–æ–≤—É—î `try-with-resources`.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–Ω–µ –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó **–¥—Ä—É–≥–æ–≥–æ** —Ä–µ—Å—É—Ä—Å—É –≤ `try-with-resources`? –ß–∏ –±—É–¥–µ –∑–∞–∫—Ä–∏—Ç–æ –ø–µ—Ä—à–∏–π —Ä–µ—Å—É—Ä—Å?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –±—É–¥–µ.**
>
> `try-with-resources` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ `close()` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –¥–ª—è **–∫–æ–∂–Ω–æ–≥–æ —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É**, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –∑–∞–∑–Ω–∞–ª–∞ –Ω–µ–≤–¥–∞—á—ñ.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
>
> ```java
> try (Resource1 r1 = new Resource1(); // –£—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ
>      Resource2 r2 = new Resource2ThatThrowsExceptionInConstructor()) { // –¢—É—Ç –≤–∏–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–æ–∫
>
>     // –¶–µ–π –±–ª–æ–∫ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è
> } catch (Exception e) {
>     System.out.println("–ó–ª–æ–≤–ª–µ–Ω–æ –≤–∏–Ω—è—Ç–æ–∫ –∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ r2");
> }
> ```
>
> **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–¥—ñ–π:**
>
> 1. –†–µ—Å—É—Ä—Å `r1` —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è.
> 2. –ü—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `r2` –π–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫.
> 3. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–ª–æ–∫—É —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å—è.
> 4. **–ü–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –≤–∏–Ω—è—Ç–æ–∫ –±—É–¥–µ –ø–µ—Ä–µ–¥–∞–Ω–æ** –≤ `catch` –±–ª–æ–∫, JVM –±–∞—á–∏—Ç—å, —â–æ —Ä–µ—Å—É—Ä—Å `r1` –±—É–≤ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π, —ñ **–≤–∏–∫–ª–∏–∫–∞—î `r1.close()`**.
> 5. –õ–∏—à–µ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏–Ω—è—Ç–æ–∫ –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ `catch`.
>
> –¶–µ —â–µ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≤–∞–≥–∞ `try-with-resources` —É –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ, —è–∫—É –¥—É–∂–µ –≤–∞–∂–∫–æ –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ `try-with-resources` —É –≥—Ä–∞–Ω–∏—á–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—î—é.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –ø—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ (`suppressed exceptions`) —ñ —è–∫ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å —É —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏** ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î "–ø—Ä–∏–∫—Ä—ñ–ø–∏—Ç–∏" –æ–¥–∏–Ω –∞–±–æ –∫—ñ–ª—å–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É, —â–æ–± –Ω–µ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏, —â–æ —Å—Ç–∞–ª–∏—Å—è.
>
> **–£ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏:**
>
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ –≤–∏–ø–∞–¥–æ–∫, –∫–æ–ª–∏ –ø–æ–º–∏–ª–∫–∏ –≤–∏–Ω–∏–∫–∞—é—Ç—å –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö:
> `try (R1 r1; R2 r2) { ... // –∫–∏–¥–∞—î ExceptionA }`
> –¥–µ `r1.close()` –∫–∏–¥–∞—î `ExceptionB`, –∞ `r2.close()` ‚Äî `ExceptionC`.
>
> **–©–æ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è:**
>
> 1. `ExceptionA` (–∑ `try` –±–ª–æ–∫—É) —Å—Ç–∞—î **–æ—Å–Ω–æ–≤–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º**.
> 2. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r2.close()`. –í—ñ–Ω –∫–∏–¥–∞—î `ExceptionC`. –¶–µ–π –≤–∏–Ω—è—Ç–æ–∫ **–ø—Ä–∏–¥—É—à—É—î—Ç—å—Å—è** —ñ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ `ExceptionA`.
> 3. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r1.close()`. –í—ñ–Ω –∫–∏–¥–∞—î `ExceptionB`. –¶–µ–π –≤–∏–Ω—è—Ç–æ–∫ —Ç–∞–∫–æ–∂ **–ø—Ä–∏–¥—É—à—É—î—Ç—å—Å—è** —ñ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ `ExceptionA`.
> 4. –í `catch` –±–ª–æ–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å `ExceptionA`.
> 5. –í–∏–∫–ª–∏–∫ `e.getSuppressed()` –ø–æ–≤–µ—Ä–Ω–µ –º–∞—Å–∏–≤, —â–æ –º—ñ—Å—Ç–∏—Ç—å `ExceptionC` —Ç–∞ `ExceptionB` (–≤ –ø–æ—Ä—è–¥–∫—É —ó—Ö –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è).
>
> **–Ø–∫—â–æ –± –ø–æ–º–∏–ª–∫–∏ –≤ `try` –Ω–µ –±—É–ª–æ:**
>
> * –û—Å–Ω–æ–≤–Ω–æ—é –ø–æ–º–∏–ª–∫–æ—é —Å—Ç–∞–≤ –±–∏ **–ø–µ—Ä—à–∏–π –≤–∏–Ω—è—Ç–æ–∫, —â–æ –≤–∏–Ω–∏–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ**, —Ç–æ–±—Ç–æ `ExceptionC` (–±–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –π–¥–µ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É).
> * `ExceptionB` –±—É–≤ –±–∏ –¥–æ–¥–∞–Ω–∏–π –¥–æ `ExceptionC` —è–∫ –ø—Ä–∏–¥—É—à–µ–Ω–∏–π.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –≤–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤—Ç—Ä–∞—á–∞—î—Ç–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—Å—ñ –ø–æ–º–∏–ª–∫–∏, —â–æ —Å—Ç–∞–ª–∏—Å—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø—Ä–∏–¥—É—à–µ–Ω–Ω—è —É —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∫–∞—Å—Ç–æ–º–Ω—ñ –∫–ª–∞—Å–∏ –≤ `try-with-resources`? –©–æ –¥–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –∑–≤—ñ—Å–Ω–æ.** –î–ª—è —Ü—å–æ–≥–æ –≤–∞—à –∫–∞—Å—Ç–æ–º–Ω–∏–π –∫–ª–∞—Å –ø–æ–≤–∏–Ω–µ–Ω **—Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `java.lang.AutoCloseable`**.
>
> **–ö—Ä–æ–∫–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ "—Ä–µ—Å—É—Ä—Å–Ω–æ–≥–æ" –∫–ª–∞—Å—É:**
>
> 1. –û–≥–æ–ª–æ—Å—ñ—Ç—å, —â–æ –≤–∞—à –∫–ª–∞—Å —Ä–µ–∞–ª—ñ–∑—É—î `AutoCloseable`.
> 2. –ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á—Ç–µ (`@Override`) –º–µ—Ç–æ–¥ `public void close()`.
> 3. –í—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–µ—Ç–æ–¥—É `close()` —Ä–æ–∑–º—ñ—Å—Ç—ñ—Ç—å –ª–æ–≥—ñ–∫—É, —è–∫–∞ –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–∞ –¥–ª—è –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞–∫—Ä–∏—Ç—Ç—è –∑'—î–¥–Ω–∞–Ω–Ω—è, —Å–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É, –∑–∞–ø–∏—Å –¥–∞–Ω–∏—Ö —É –ª–æ–≥).
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public class MyConnection implements AutoCloseable {
>     public MyConnection() { System.out.println("–†–µ—Å—É—Ä—Å –≤—ñ–¥–∫—Ä–∏—Ç–æ"); }
>     public void doWork() { System.out.println("–†–æ–±–æ—Ç–∞ –∑ —Ä–µ—Å—É—Ä—Å–æ–º"); }
>
>     @Override
>     public void close() {
>         System.out.println("–†–µ—Å—É—Ä—Å –∑–∞–∫—Ä–∏—Ç–æ!");
>     }
> }
>
> // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
> try (MyConnection conn = new MyConnection()) {
>     conn.doWork();
> }
> ```
>
> `conn.close()` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –∫–æ–¥—É —Ç–∞ –∑–Ω–∞–Ω–Ω—è, —è–∫ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∫–ª–∞—Å–∏ –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º–∏ –º–µ—Ö–∞–Ω—ñ–∑–º–∞–º–∏ –º–æ–≤–∏.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–º—ñ–Ω–∏–ª–∞—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` —É Java 9? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –£ Java 9 –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –∫–æ—Ä–∏—Å–Ω–µ **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è**, —è–∫–µ —Ä–æ–±–∏—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –±—ñ–ª—å—à –≥–Ω—É—á–∫–æ—é.
>
> **–î–æ Java 9:**
> –†–µ—Å—É—Ä—Å –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ —ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥—É–∂–æ–∫ `try`**.
> `try (MyResource r = new MyResource()) { ... }`
>
> **–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ Java 9:**
> –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å, —è–∫–∏–π –±—É–≤ –æ–≥–æ–ª–æ—à–µ–Ω–∏–π **—Ä–∞–Ω—ñ—à–µ**, –∑–∞ –º–µ–∂–∞–º–∏ –±–ª–æ–∫—É `try`.
>
> **–í–∏–º–æ–≥–∞:** —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ **`final` –∞–±–æ `effectively final`** (—Ç–æ–±—Ç–æ, –π–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è –ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó).
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> MyResource resource = createResource(); // –†–µ—Å—É—Ä—Å —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç—É—Ç
>
> // 'resource' —î effectively final
> try (resource) { // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î–º–æ —ñ—Å–Ω—É—é—á—É –∑–º—ñ–Ω–Ω—É
>     resource.doWork();
> }
> ```
>
> –¶–µ —É—Å—É–Ω—É–ª–æ –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω—ñ—Å—Ç—å —É –≤–∏–ø–∞–¥–∫–∞—Ö, –∫–æ–ª–∏ —Ä–µ—Å—É—Ä—Å —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —É–º–æ–≤–Ω–æ –∞–±–æ –≤ —ñ–Ω—à–æ–º—É –º–µ—Ç–æ–¥—ñ, —ñ –∑—Ä–æ–±–∏–ª–æ –∫–æ–¥ —á–∏—Å—Ç—ñ—à–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –µ–≤–æ–ª—é—Ü—ñ—ó –º–æ–≤–∏ Java —Ç–∞ —ó—ó —Å—É—á–∞—Å–Ω–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω—å—Ç–µ —Ç–∞–∫–∏–π –∫–æ–¥. –ß–∏ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è –≤—ñ–Ω? –ß–æ–º—É?
`try (String s = "hello") { ... }` ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ù—ñ, –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è.**
>
> **–ü—Ä–∏—á–∏–Ω–∞:**
> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` –Ω–∞–∫–ª–∞–¥–∞—î —Å—Ç—Ä–æ–≥—É –≤–∏–º–æ–≥—É: **–∫–æ–∂–Ω–∞ –∑–º—ñ–Ω–Ω–∞, –æ–≥–æ–ª–æ—à–µ–Ω–∞ –≤ —ó—ó –¥—É–∂–∫–∞—Ö, –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —Ç–∏–ø—É, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î `java.lang.AutoCloseable`**.
>
> –ö–ª–∞—Å **`java.lang.String` –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î** —Ü–µ–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ—Å–∫—ñ–ª—å–∫–∏ —Ä—è–¥–æ–∫ –Ω–µ —î —Ä–µ—Å—É—Ä—Å–æ–º, —â–æ –ø–æ—Ç—Ä–µ–±—É—î —è–≤–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è.
>
> –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–¥–∞—Å—Ç—å –ø–æ–º–∏–ª–∫—É:
> `incompatible types: String cannot be converted to AutoCloseable`
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `try-with-resources` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –∑—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ –¥–ª—è —Ü—å–æ–≥–æ –∫–ª–∞—Å–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–¢–æ—á–Ω–µ –∑–Ω–∞–Ω–Ω—è –≤–∏–º–æ–≥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –Ω–µ –±—É–¥—å-—è–∫–∏–π –æ–±'—î–∫—Ç –º–æ–∂–µ –±—É—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–º.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ —É –≤–∞—Å —î –¥–≤–∞ —Ä–µ—Å—É—Ä—Å–∏, —ñ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ **–ø–µ—Ä—à–æ–≥–æ** –≤–∏–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–æ–∫, –∞ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ **–¥—Ä—É–≥–æ–≥–æ** ‚Äî –Ω—ñ, —è–∫–∏–π –≤–∏–Ω—è—Ç–æ–∫ –±—É–¥–µ –∫–∏–Ω—É—Ç–æ –∑ `try-with-resources` –±–ª–æ–∫—É? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ —Ç–∞–∫–∏–π –∫–æ–¥:
> `try (Resource1 r1; Resource2 r2) {}` –¥–µ `close()` –¥–ª—è `r1` –∫–∏–¥–∞—î `ExceptionA`, –∞ `close()` –¥–ª—è `r2` ‚Äî –Ω–µ –∫–∏–¥–∞—î –Ω—ñ—á–æ–≥–æ. –ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –≤ `try` –±–ª–æ—Ü—ñ –ø–æ–º–∏–ª–æ–∫ –Ω–µ –±—É–ª–æ.
>
> **–ü–æ—Ä—è–¥–æ–∫ –¥—ñ–π:**
>
> 1. –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É**: —Å–ø–æ—á–∞—Ç–∫—É `r2`, –ø–æ—Ç—ñ–º `r1`.
> 2. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r2.close()`. –í—ñ–Ω –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ.
> 3. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r1.close()`. –í—ñ–Ω –∫–∏–¥–∞—î `ExceptionA`.
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
> –ó –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-with-resources` –±—É–¥–µ –∫–∏–Ω—É—Ç–æ **`ExceptionA`**. –í—ñ–Ω –±—É–¥–µ —î–¥–∏–Ω–∏–º, **–æ—Å–Ω–æ–≤–Ω–æ—é –ø–æ–º–∏–ª–∫–æ—é**, –æ—Å–∫—ñ–ª—å–∫–∏ —ñ–Ω—à–∏–π `close()` –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
>
> –ú–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –≤–∂–µ —î **–æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫**, —ñ –ø—ñ–¥ —á–∞—Å –æ—á–∏—â–µ–Ω–Ω—è –≤–∏–Ω–∏–∫–∞—é—Ç—å **–¥–æ–¥–∞—Ç–∫–æ–≤—ñ** –ø–æ–º–∏–ª–∫–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–µ—Ç–∞–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫–∏–π —Å–∞–º–µ –≤–∏–Ω—è—Ç–æ–∫ —Å—Ç–∞—î "–æ—Å–Ω–æ–≤–Ω–∏–º", –∞ —è–∫–∏–π ‚Äî "–ø—Ä–∏–¥—É—à–µ–Ω–∏–º".*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –∫—Ä–∞—â–µ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤: `try-with-resources` —á–∏ –ø–∞—Ç–µ—Ä–Ω `finally` –∑ `if (res != null)`? –ù–∞–∑–≤—ñ—Ç—å 3 –ø—Ä–∏—á–∏–Ω–∏. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`try-with-resources` —î –∞–±—Å–æ–ª—é—Ç–Ω–æ –∫—Ä–∞—â–∏–º –≤–∏–±–æ—Ä–æ–º.**
>
> **3 –æ—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏:**
>
> 1. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —Ç–∞ –±–µ–∑–ø–µ–∫–∞:** `try-with-resources` **–∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—î –ø—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏**. –†—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `try-finally` –∑–∞–∑–≤–∏—á–∞–π –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –≤—Ç—Ä–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ—á–∞—Ç–∫–æ–≤—É –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞—î —ñ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Ä–µ—Å—É—Ä—Å—É.
>
> 2. **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –ª–∞–∫–æ–Ω—ñ—á–Ω—ñ—Å—Ç—å:** –ö–æ–¥ –∑ `try-with-resources` –∑–Ω–∞—á–Ω–æ –∫–æ—Ä–æ—Ç—à–∏–π, —á–∏—Å—Ç—ñ—à–∏–π —ñ –ø—Ä–æ—Å—Ç—ñ—à–∏–π –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è. –í—ñ–Ω —É—Å—É–≤–∞—î "–ø—ñ—Ä–∞–º—ñ–¥—É —Å–º–µ—Ä—Ç—ñ" –∑ –≤–∫–ª–∞–¥–µ–Ω–∏—Ö `try-catch` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `finally` –±–ª–æ–∫—É.
>
> 3. **–ó–º–µ–Ω—à–µ–Ω–Ω—è —Ä–∏–∑–∏–∫—É –ª—é–¥—Å—å–∫–æ—ó –ø–æ–º–∏–ª–∫–∏:** `try-with-resources` –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î –ø—Ä–æ—Ü–µ—Å –∑–∞–∫—Ä–∏—Ç—Ç—è. –†–æ–∑—Ä–æ–±–Ω–∏–∫ –Ω–µ –º–æ–∂–µ –≤–∏–ø–∞–¥–∫–æ–≤–æ –∑–∞–±—É—Ç–∏ –∑–∞–∫—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å –∞–±–æ –∑–∞–±—É—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –π–æ–≥–æ –Ω–∞ `null` –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä–∏—Ç—Ç—è–º. –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –±—ñ–ª—å—à —Å—Ç—ñ–π–∫–∏–º –¥–æ –ø–æ–º–∏–ª–æ–∫.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –æ–±“ë—Ä—É–Ω—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ —Å—É—á–∞—Å–Ω–∏—Ö –º–æ–≤–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –Ω–∞–¥ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏ –ø—ñ–¥—Ö–æ–¥–∞–º–∏.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑—ñ —Å—Ç–∞—Ä–∏–º API, –¥–µ –∫–ª–∞—Å `LegacyResource` –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î `AutoCloseable`, –∞–ª–µ –º–∞—î –º–µ—Ç–æ–¥ `release()`. –Ø–∫ –±–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–ª–∏ –π–æ–≥–æ –≤ `try-with-resources`? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–∞–ø—Ä—è–º—É ‚Äî –Ω—ñ—è–∫. –ê–ª–µ –º–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π **–∫–ª–∞—Å-–æ–±–≥–æ—Ä—Ç–∫—É (Adapter)**, —è–∫–∏–π –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ `AutoCloseable` —ñ –¥–µ–ª–µ–≥—É–≤–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ `close()` –¥–æ –º–µ—Ç–æ–¥—É `release()`.
>
> **–†—ñ—à–µ–Ω–Ω—è:**
>
> 1. **–°—Ç–≤–æ—Ä—é—î–º–æ –∫–ª–∞—Å-–∞–¥–∞–ø—Ç–µ—Ä:**
>
>     ```java
>     public class LegacyResourceAdapter implements AutoCloseable {
>         private final LegacyResource legacyResource;
>
>         public LegacyResourceAdapter(LegacyResource resource) {
>             this.legacyResource = resource;
>         }
>
>         // –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É
>         public LegacyResource getResource() {
>             return legacyResource;
>         }
>
>         @Override
>         public void close() { // –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ 'throws' —è–∫—â–æ release() –π–æ–≥–æ –∫–∏–¥–∞—î
>             System.out.println("–ê–¥–∞–ø—Ç–µ—Ä –≤–∏–∫–ª–∏–∫–∞—î release()...");
>             legacyResource.release();
>         }
>     }
>     ```
>
> 2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∞–¥–∞–ø—Ç–µ—Ä —É `try-with-resources`:**
>
>     ```java
>     LegacyResource legacy = new LegacyResource(); // –°—Ç–≤–æ—Ä—é—î–º–æ —Å—Ç–∞—Ä–∏–π —Ä–µ—Å—É—Ä—Å
>
>     try (LegacyResourceAdapter adapter = new LegacyResourceAdapter(legacy)) {
>         // –ü—Ä–∞—Ü—é—î–º–æ –∑ —Ä–µ—Å—É—Ä—Å–æ–º —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä
>         adapter.getResource().doWork();
>     }
>     ```
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–∏ "–∞–¥–∞–ø—Ç—É–≤–∞–ª–∏" —Å—Ç–∞—Ä–∏–π –∫–ª–∞—Å –¥–æ –Ω–æ–≤–æ–≥–æ API `try-with-resources`, –Ω–µ –∑–º—ñ–Ω—é—é—á–∏ –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≥–Ω—É—á–∫—ñ—Å—Ç—å —ñ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –ø–∞—Ç–µ—Ä–Ω—É "–ê–¥–∞–ø—Ç–µ—Ä".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ù–∞–≤–∏—á–∫–∏ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —è–∫ "–ø—Ä–∏—Å—Ç–æ—Å—É–≤–∞—Ç–∏" —Å—Ç–∞—Ä–∏–π –∫–æ–¥ –¥–æ —Å—É—á–∞—Å–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –º–æ–≤–∏.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ `try-with-resources` –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –∑ —Ä–µ—Å—É—Ä—Å–æ–º, —É —è–∫–æ–≥–æ –º–µ—Ç–æ–¥ `close()` —î –ø—Ä–∏–≤–∞—Ç–Ω–∏–º? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ `AutoCloseable`.
>
> –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AutoCloseable` –≤–∏–º–∞–≥–∞—î –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ **–ø—É–±–ª—ñ—á–Ω–æ–≥–æ (`public`)** –º–µ—Ç–æ–¥—É `close()`.
> `public void close() throws Exception;`
>
> –ö–æ–ª–∏ –∫–ª–∞—Å —Ä–µ–∞–ª—ñ–∑—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –Ω–∞–¥–∞—Ç–∏ –ø—É–±–ª—ñ—á–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–ª—è –π–æ–≥–æ –º–µ—Ç–æ–¥—ñ–≤. –¢–æ–º—É `private void close()` –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é —Ü—å–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
>
> ```java
> public class MyResource implements AutoCloseable {
>     // –ü–û–ú–ò–õ–ö–ê –ö–û–ú–ü–Ü–õ–Ø–¶–Ü–á: 'close()' in 'MyResource'
>     // cannot implement 'close()' in 'AutoCloseable';
>     // attempting to assign weaker access privileges; was public
>     private void close() { /* ... */ }
> }
> ```
>
> –ö–ª–∞—Å `MyResource` –ø—Ä–æ—Å—Ç–æ **–Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è**. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø–æ–≤—ñ–¥–æ–º–∏—Ç—å, —â–æ –≤–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—è –∑–≤—É–∑–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, —â–æ —î –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–º.
>
> –û—Ç–∂–µ, —Å–∏—Ç—É–∞—Ü—ñ—è, –∫–æ–ª–∏ –≤ `try-with-resources` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å –∑ `private` –º–µ—Ç–æ–¥–æ–º `close`, —î –Ω–µ–º–æ–∂–ª–∏–≤–æ—é –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–¢–æ—á–Ω–µ –∑–Ω–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ç–∞ –ø—Ä–∞–≤–∏–ª –≤–∏–¥–∏–º–æ—Å—Ç—ñ –ø—Ä–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –†–æ–∑—É–º—ñ–Ω–Ω—è, —è–∫ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∑–∞–ø–æ–±—ñ–≥–∞—î —Ç–∞–∫–∏–º –ø–æ–º–∏–ª–∫–∞–º.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω—å—Ç–µ `java.util.Scanner`. –Ø–∫ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î –∑ `try-with-resources`, —è–∫—â–æ –≤—ñ–Ω –º–æ–∂–µ –æ–±–≥–æ—Ä—Ç–∞—Ç–∏ –ø–æ—Ç—ñ–∫, —è–∫–∏–π –Ω–µ —Å–ª—ñ–¥ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `System.in`)? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ —á—É–¥–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è, —â–æ —ñ–ª—é—Å—Ç—Ä—É—î –≤–∞–∂–ª–∏–≤–∏–π –Ω—é–∞–Ω—Å.
>
> * `Scanner` —Ä–µ–∞–ª—ñ–∑—É—î `Closeable`, —Ç–æ–º—É –π–æ–≥–æ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources`.
> * –ô–æ–≥–æ –º–µ—Ç–æ–¥ `close()` **–∑–∞–∫—Ä–∏–≤–∞—î –Ω–µ —Ç—ñ–ª—å–∫–∏ —Å–∞–º `Scanner`, –∞–ª–µ –π –±–∞–∑–æ–≤–∏–π –ø–æ—Ç—ñ–∫ (underlying stream)**, –∑ —è–∫–æ–≥–æ –≤—ñ–Ω —á–∏—Ç–∞—î, —è–∫—â–æ —Ü–µ–π –ø–æ—Ç—ñ–∫ —Ç–∞–∫–æ–∂ —î `Closeable`.
>
> **–ü—Ä–æ–±–ª–µ–º–∞:**
>
> –Ø–∫—â–æ –≤–∏ –ø–∏—à–µ—Ç–µ —Ç–∞–∫:
>
> ```java
> try (Scanner scanner = new Scanner(System.in)) {
>     // ...
> } // –¢—É—Ç scanner.close() –≤–∏–∫–ª–∏—á–µ System.in.close()!
> ```
>
> –í–∏ **–Ω–∞–∑–∞–≤–∂–¥–∏ –∑–∞–∫—Ä–∏—î—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–æ—Ç—ñ–∫ –≤–≤–æ–¥—É (`System.in`)** –¥–ª—è –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É. –ë—É–¥—å-—è–∫–∞ –ø–æ–¥–∞–ª—å—à–∞ —Å–ø—Ä–æ–±–∞ —á–∏—Ç–∞—Ç–∏ –∑ –∫–æ–Ω—Å–æ–ª—ñ –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è. –¶–µ –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞.
>
> **–Ø–∫ —É–Ω–∏–∫–Ω—É—Ç–∏:**
>
> * –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `try-with-resources` –¥–ª—è `Scanner`, —â–æ –æ–±–≥–æ—Ä—Ç–∞—î `System.in`. –ó–∞–∫—Ä–∏–≤–∞—Ç–∏ –π–æ–≥–æ –≤—Ä—É—á–Ω—É —Ç–∞–∫–æ–∂ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ. –ó–±–∏—Ä–∞—á —Å–º—ñ—Ç—Ç—è –ø–æ–¥–±–∞—î –ø—Ä–æ `Scanner`, –∞ `System.in` –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∑–∞–∫—Ä–∏—Ç–∏–º.
> * –î–ª—è —ñ–Ω—à–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤, —è–∫—ñ –Ω–µ —Å–ª—ñ–¥ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏, –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±–≥–æ—Ä—Ç–∫—É, —è–∫–∞ —ñ–≥–Ω–æ—Ä—É—î –≤–∏–∫–ª–∏–∫ `close()`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `new NonClosingInputStream(inputStream)`.
>
> –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è `try-with-resources` –º–æ–∂–µ —ñ–Ω–æ–¥—ñ –º–∞—Ç–∏ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ñ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏, —è–∫—â–æ –Ω–µ —Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ –ø—Ä–∞—Ü—é—î –º–µ—Ç–æ–¥ `close()` –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ—Ç–æ–∫–∏ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É —Ç–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏ –ø—Ä–æ —Ü—é –ø–æ—à–∏—Ä–µ–Ω—É –ø–∞—Å—Ç–∫—É.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π –∑–≤'—è–∑–æ–∫ –º—ñ–∂ `finally` —Ç–∞ `return` —É –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü—Ä—è–º–æ–≥–æ –∑–≤'—è–∑–∫—É –Ω–µ–º–∞—î.** –ú–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ —î –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—é **–ª–∏—à–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-with-resources`**.
>
> –ö–ª–∞—Å–∏—á–Ω–∏–π `try-catch-finally` –±–ª–æ–∫ **–Ω–µ –º–∞—î** –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤.
>
> **–†–æ–∑–≥–ª—è–Ω–µ–º–æ —Å—Ü–µ–Ω–∞—Ä—ñ–π —É `try-finally`:**
>
> ```java
> void test() throws ExceptionA {
>     try {
>         throw new ExceptionA();
>     } finally {
>         throw new ExceptionB();
>     }
> }
> ```
>
> * –ó —Ü—å–æ–≥–æ –º–µ—Ç–æ–¥—É –±—É–¥–µ –∫–∏–Ω—É—Ç–æ **–ª–∏—à–µ `ExceptionB`**.
> * –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ `ExceptionA` –±—É–¥–µ **–ø–æ–≤–Ω—ñ—Å—Ç—é –≤—Ç—Ä–∞—á–µ–Ω–∞**. –í–æ–Ω–∞ **–Ω–µ** –±—É–¥–µ –¥–æ–¥–∞–Ω–∞ —è–∫ –ø—Ä–∏–¥—É—à–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫.
>
> –¶–µ —ñ —î –æ–¥–Ω–∞ –∑ –∫–ª—é—á–æ–≤–∏—Ö –ø—Ä–æ–±–ª–µ–º, —è–∫—É `try-with-resources` –≤–∏—Ä—ñ—à—É—î. –í—ñ–Ω –±—É–≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π, —â–æ–± –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—ó, –∫–æ–ª–∏ –ø–æ–º–∏–ª–∫–∏ –≤–∏–Ω–∏–∫–∞—é—Ç—å —è–∫ –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ, —Ç–∞–∫ —ñ –ø—Ä–∏ –æ—á–∏—â–µ–Ω–Ω—ñ, –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –º–µ—Ö–∞–Ω—ñ–∑–º `suppressed exceptions` —î —É–Ω—ñ–∫–∞–ª—å–Ω–æ—é –ø–µ—Ä–µ–≤–∞–≥–æ—é —Å–∞–º–µ `try-with-resources`, –∞ –Ω–µ –∑–∞–≥–∞–ª—å–Ω–æ—é –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—é `finally`.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –≤–∏–≤–µ–¥–µ —Ü–µ–π –∫–æ–¥ —ñ —á–æ–º—É?

```java
static class Res implements AutoCloseable {
    String name;
    Res(String name) { this.name = name; }
    public void close() { System.out.println("Closing " + name); }
}

public static void main(String[] args) {
    try (Res r1 = new Res("R1"); Res r2 = new Res("R2")) {
        throw new RuntimeException();
    } catch (Exception e) {
        System.out.println("Caught exception");
    }
}
```

‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–í–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å:**
>
> ```
> Closing R2
> Closing R1
> Caught exception
> ```
>
> **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> 1. –û–≥–æ–ª–æ—à—É—é—Ç—å—Å—è —Ç–∞ —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è –¥–≤–∞ —Ä–µ—Å—É—Ä—Å–∏: `r1` —Ç–∞ `r2`.
> 2. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª–æ `try` –±–ª–æ–∫—É, –¥–µ –Ω–µ–≥–∞–π–Ω–æ –∫–∏–¥–∞—î—Ç—å—Å—è `RuntimeException`.
> 3. –í–∏–∫–æ–Ω–∞–Ω–Ω—è `try` –±–ª–æ–∫—É –ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å—è.
> 4. **–ü–µ—Ä–µ–¥ —Ç–∏–º**, —è–∫ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ `catch` –±–ª–æ–∫—É, `try-with-resources` –ø–æ—á–∏–Ω–∞—î **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤**.
> 5. –ó–∞–∫—Ä–∏—Ç—Ç—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –¥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è**:
>     * –°–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r2.close()`. –ù–∞ –µ–∫—Ä–∞–Ω –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"Closing R2"`.
>     * –ü–æ—Ç—ñ–º –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r1.close()`. –ù–∞ –µ–∫—Ä–∞–Ω –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"Closing R1"`.
> 6. –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤—Å—ñ —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏—Ç–æ, –ø–æ—Ç—ñ–∫ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ `catch (Exception e)` –±–ª–æ–∫—É.
> 7. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∫–æ–¥ `catch` –±–ª–æ–∫—É, —ñ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"Caught exception"`.
>
> –¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ —á—ñ—Ç–∫–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –¥–≤—ñ –∫–ª—é—á–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ `try-with-resources`: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–∞ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ —Ü—å–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü–æ–≤–Ω–µ —Ç–∞ —Ç–æ—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-with-resources`, –≤–∫–ª—é—á–∞—é—á–∏ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ `catch`.*
