---
layout: default
title: "try-with-resources (TWR)"
parent: "–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (Exceptions)"
grand_parent: "Java Core"
nav_order: 9
---

# try-with-resources (TWR)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `try-with-resources` (TWR) ‚Äì —Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏ (—è–∫—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AutoCloseable`) –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `try`-–±–ª–æ–∫—É, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—ñ–≤. –î–æ—Å—Ç—É–ø–Ω–æ –∑ Java 7.

* –ø–æ–Ω—è—Ç—Ç—è: `try-with-resources`, `AutoCloseable` (—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å).

* –ø—Ä–∏–∫–ª–∞–¥–∏: `try (BufferedReader reader = new BufferedReader(new FileReader("f.txt"))) { ... }`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ó–∞–±–µ–∑–ø–µ—á—É—î —á–∏—Å—Ç—ñ—à–∏–π —Ç–∞ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ `try-finally`, —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –≤–∏—Ç–æ–∫—ñ–≤ —Ä–µ—Å—É—Ä—Å—ñ–≤.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ü–µ—Ä–µ–≤–∞–≥–∏ TWR, —è–∫ –ø—Ä–∞—Ü—é—î, —è–∫—ñ –∫–ª–∞—Å–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ TWR.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`AutoCloseable`** ‚Äî —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –æ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º

```java
void close() throws Exception;
```

–í—Å—ñ –∫–ª–∞—Å–∏, —â–æ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Ü–µ–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É **`try-with-resources.`**

---

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ –∫–ª–∞—Å —ñ–∑ —Å—É–ø–µ—Ä—Å–∏–ª–æ—é ‚Äî –≤—ñ–Ω –≤–º—ñ—î —Å–∞–º —Å–µ–±–µ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏, –∫–æ–ª–∏ —Ç–∏ –∑ –Ω–∏–º –∑–∞–∫—ñ–Ω—á—É—î—à.

–ü—Ä–∏–∫–ª–∞–¥–∏: **`Scanner, BufferedReader, FileInputStream, Connection (JDBC).`**

---

## **–Ø–∫ –ø—Ä–∞—Ü—é—î try-with-resources (TWR)?**

##### **‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```java
try(ResourceType resource = new ResourceType()){
        // —Ä–æ–±–æ—Ç–∞ –∑ —Ä–µ—Å—É—Ä—Å–æ–º
        }catch(
Exception e){
        // –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
        }
```

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–Ø–∫ —Ç—ñ–ª—å–∫–∏ **`try`** –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è (–Ω–∞–≤—ñ—Ç—å –∑ –≤–∏–Ω—è—Ç–∫–æ–º), Java –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î **`close()`** –Ω–∞ —Ä–µ—Å—É—Ä—Å—ñ.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **‚úîÔ∏è Scanner:**

```java
try(Scanner scanner = new Scanner(new File("data.txt"))){
        while(scanner.

hasNextLine()){
        System.out.

println(scanner.nextLine());
        }
        }catch(
FileNotFoundException e){
        System.out.

println("–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
}
```

### **‚úîÔ∏è BufferedReader:**

```java
try(BufferedReader reader = new BufferedReader(new FileReader("file.txt"))){
String line;
    while((line =reader.

readLine())!=null){
        System.out.

println(line);
    }
            }catch(
IOException e){
        System.out.

println("–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è");
}
```

üìå **`finally`** —Ç—É—Ç –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω ‚Äî —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ try-finally (‚öñÔ∏è)**

|            –ö—Ä–∏—Ç–µ—Ä—ñ–π            | try-with-resources |             try-finally              |
|:------------------------------:|:------------------:|:------------------------------------:|
|     **–ó–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤**      |    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ     | –†—É—á–Ω–µ (—á–µ—Ä–µ–∑ if (resource \!= null)) |
|     **–ö–æ—Ä–æ—Ç–∫–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**     |         ‚úÖ          |           ‚ùå (–±—ñ–ª—å—à–µ –∫–æ–¥—É)            |
|   **–ë–µ–∑–ø–µ—á–Ω–µ –ø—Ä–∏ –≤–∏–Ω—è—Ç–∫–∞—Ö**    |         ‚úÖ          |    ‚ùå (–º–æ–∂–Ω–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è)     |
| **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤** |         ‚úÖ          |          ‚úÖ (–∞–ª–µ —Å–∫–ª–∞–¥–Ω—ñ—à–µ)           |
|        **–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å**         |     –ó Java 7+      |              –£—Å—ñ –≤–µ—Ä—Å—ñ—ó              |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**`TWR = try (—Ä–µ—Å—É—Ä—Å) -> Java —Å–∞–º–∞ –∑–∞–∫—Ä–∏—î`**

–ê–±–æ:  
**`try-with-resources = try + AutoCloseable = –∞–≤—Ç–æ-clean`**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`try-with-resources`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏, —è–∫—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å **`AutoCloseable`**.
* –ü—ñ–¥—Ç—Ä–∏–º—É—î –∫–ª–∞—Å–∏ —Ç–∏–ø—É **`Scanner, BufferedReader, FileInputStream, Connection`** —Ç–æ—â–æ.
* –ó–∞–º—ñ—Å—Ç—å –≥—Ä–æ–º—ñ–∑–¥–∫–æ–≥–æ **`finally`** ‚Äî —á–∏—Å—Ç–∏–π, –±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–¥.
* –ú–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —ñ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `try-with-resources` —ñ —è–∫—É –≥–æ–ª–æ–≤–Ω—É –ø—Ä–æ–±–ª–µ–º—É –≤—ñ–Ω –≤–∏—Ä—ñ—à—É—î?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`try-with-resources`** ‚Äî —Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤, –¥–æ–¥–∞–Ω–∞ –≤ Java 7, —è–∫–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î –ø—Ä–æ—Ü–µ—Å –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤**.
>
> **–ì–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞, —è–∫—É –≤—ñ–Ω –≤–∏—Ä—ñ—à—É—î:**
>
> –í—ñ–Ω —É—Å—É–≤–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ **–≥—Ä–æ–º—ñ–∑–¥–∫–∏—Ö —Ç–∞ —Å—Ö–∏–ª—å–Ω–∏—Ö –¥–æ –ø–æ–º–∏–ª–æ–∫ `finally` –±–ª–æ–∫—ñ–≤** –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (—Ç–∞–∫–∏—Ö —è–∫ —Ñ–∞–π–ª–æ–≤—ñ –ø–æ—Ç–æ–∫–∏, –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, —Å–æ–∫–µ—Ç–∏).
>
> –î–æ Java 7, –ø—Ä–∞–≤–∏–ª—å–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—É –≤–∏–º–∞–≥–∞–ª–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è `try-catch-finally`, –¥–µ `finally` –±–ª–æ–∫, —É —Å–≤–æ—é —á–µ—Ä–≥—É, —Ç–µ–∂ –º–∞–≤ –º—ñ—Å—Ç–∏—Ç–∏ `try-catch` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –º–æ–∂–ª–∏–≤–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ. `try-with-resources` —Ä–æ–±–∏—Ç—å —Ü–µ–π –ø—Ä–æ—Ü–µ—Å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º, –∫–æ—Ä–æ—Ç—à–∏–º —ñ –∑–Ω–∞—á–Ω–æ –Ω–∞–¥—ñ–π–Ω—ñ—à–∏–º**.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> // –†–µ—Å—É—Ä—Å reader –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏—Ç–æ
> try (BufferedReader reader = new BufferedReader(new FileReader("file.txt"))) {
>     System.out.println(reader.readLine());
> } catch (IOException e) {
>     e.printStackTrace();
> }
> ```

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–¶–µ —è–∫ –æ—Ä–µ–Ω–¥–∞ —Å–∞–º–æ–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ –¥–æ–¥–∞—Ç–æ–∫. –í–∏ –±–µ—Ä–µ—Ç–µ —Å–∞–º–æ–∫–∞—Ç, –∫–∞—Ç–∞—î—Ç–µ—Å—å (–±–ª–æ–∫ `try`), —ñ —è–∫ —Ç—ñ–ª—å–∫–∏ –≤–∏ –∑–∞–≤–µ—Ä—à—É—î—Ç–µ –ø–æ—ó–∑–¥–∫—É, –¥–æ–¥–∞—Ç–æ–∫ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** —ó—ó –∑–∞–∫—Ä–∏–≤–∞—î —ñ –±–ª–æ–∫—É—î —Å–∞–º–æ–∫–∞—Ç. –í–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –¥–∑–≤–æ–Ω–∏—Ç–∏ –≤ —Å–µ—Ä–≤—ñ—Å —ñ –ø—Ä–æ—Å–∏—Ç–∏ –π–æ–≥–æ –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ë–∞–∑–æ–≤–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è `try-with-resources` —è–∫ —Å—É—á–∞—Å–Ω–æ–≥–æ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±—É —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–∞–º–∏.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ–π —É–º–æ–≤—ñ –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –æ–±'—î–∫—Ç, —â–æ–± –π–æ–≥–æ –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ë—É–¥—å-—è–∫–∏–π –æ–±'—î–∫—Ç, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `try-with-resources`, –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`java.lang.AutoCloseable`**.
>
> **–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AutoCloseable`:**
>
> * –í—ñ–Ω –±—É–≤ –≤–≤–µ–¥–µ–Ω–∏–π —É Java 7 —Ä–∞–∑–æ–º –∑ `try-with-resources`.
> * –ú–∞—î –ª–∏—à–µ –æ–¥–∏–Ω –º–µ—Ç–æ–¥: `void close() throws Exception;`.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
>
> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –º–µ—Ç–æ–¥ `close()` –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π –¥–ª—è —Ü—å–æ–≥–æ –æ–±'—î–∫—Ç–∞ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `try` –±–ª–æ–∫—É, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫.
>
> **–í–∞–∂–ª–∏–≤–∏–π –Ω—é–∞–Ω—Å:** `AutoCloseable` —î –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–º –¥–ª—è –±—ñ–ª—å—à —Å—Ç–∞—Ä–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `java.io.Closeable`. –ë—ñ–ª—å—à—ñ—Å—Ç—å –∫–ª–∞—Å—ñ–≤ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≤–≤–æ–¥–æ–º/–≤–∏–≤–æ–¥–æ–º —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Å–∞–º–µ `Closeable`, –∞ –æ—Ç–∂–µ, —ñ `AutoCloseable`, —â–æ —Ä–æ–±–∏—Ç—å —ó—Ö —Å—É–º—ñ—Å–Ω–∏–º–∏ –∑ `try-with-resources`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `AutoCloseable`, —è–∫–∏–π —î –æ—Å–Ω–æ–≤–æ—é –¥–ª—è —Ü—å–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ `AutoCloseable` —Ç–∞ `Closeable`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `java.io.Closeable` —î **–ø—ñ–¥-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º** `java.lang.AutoCloseable`.
>
> `public interface Closeable extends AutoCloseable`
>
> **–ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ:**
>
> 1. **–°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥—É `close()`:**
>     * `AutoCloseable`: `void close() throws Exception;` ‚Äî –º–æ–∂–µ –∫–∏–¥–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π `Exception`. –¶–µ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
>     * `Closeable`: `void close() throws IOException;` ‚Äî –∑–≤—É–∂—É—î –≤–∏–Ω—è—Ç–æ–∫ –¥–æ `IOException`. –¶–µ –±—ñ–ª—å—à —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É.
>
> 2. **–Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å:**
>     * **`Closeable`** –≤–∏–º–∞–≥–∞—î, —â–æ–± –π–æ–≥–æ –º–µ—Ç–æ–¥ `close()` –±—É–≤ **—ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º**. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–æ–≤—Ç–æ—Ä–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ `close()` –Ω–∞ –≤–∂–µ –∑–∞–∫—Ä–∏—Ç–æ–º—É —Ä–µ—Å—É—Ä—Å—ñ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –µ—Ñ–µ–∫—Ç—É —ñ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫.
>     * **`AutoCloseable`** —Ç–∞–∫–æ—ó –≤–∏–º–æ–≥–∏ **–Ω–µ –º–∞—î**. –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫ `close()` –º–æ–∂–µ –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è –ø–æ-—Ä—ñ–∑–Ω–æ–º—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫).
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:**
> `AutoCloseable` ‚Äî —Ü–µ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –±—É–¥—å-—è–∫–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤, —â–æ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –æ—á–∏—â–µ–Ω–Ω—è. `Closeable` ‚Äî —Ü–µ –π–æ–≥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É. –£ `try-with-resources` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏, —â–æ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –±—É–¥—å-—è–∫–∏–π –∑ —Ü–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ —Ç–æ–Ω–∫–∏—Ö –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç–µ–π –º—ñ–∂ —Å—Ö–æ–∂–∏–º–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `try-with-resources` –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏. –£ —è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –∑–∞–∫—Ä–∏—Ç—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `try-with-resources` –¥–æ–∑–≤–æ–ª—è—î –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤, —Ä–æ–∑–¥—ñ–ª—è—é—á–∏ —ó—Ö –∫—Ä–∞–ø–∫–æ—é –∑ –∫–æ–º–æ—é.
>
> **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è:**
>
> –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –¥–æ —ó—Ö–Ω—å–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è**. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –±—É–¥—É—Ç—å –∑–∞–∫—Ä–∏—Ç—ñ –∫–æ—Ä–µ–∫—Ç–Ω–æ (—Å–ø–æ—á–∞—Ç–∫—É —Ä–µ—Å—É—Ä—Å, —â–æ –∑–∞–ª–µ–∂–∏—Ç—å, –ø–æ—Ç—ñ–º ‚Äî –π–æ–≥–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å).
>
> **–ü—Ä–∏–∫–ª–∞–¥: –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É**
>
> ```java
> try (FileInputStream fis = new FileInputStream("source.txt");
>      FileOutputStream fos = new FileOutputStream("destination.txt")) {
>
>     byte[] buffer = new byte[1024];
>     int length;
>     while ((length = fis.read(buffer)) > 0) {
>         fos.write(buffer, 0, length);
>     }
>
> } catch (IOException e) {
>     e.printStackTrace();
> }
> ```
>
> **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è –±—É–¥–µ —Ç–∞–∫–∏–º:**
>
> 1. –°–ø–æ—á–∞—Ç–∫—É –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `fos.close()` (–±–æ `fos` –æ–≥–æ–ª–æ—à–µ–Ω–æ –æ—Å—Ç–∞–Ω–Ω—ñ–º).
> 2. –ü–æ—Ç—ñ–º –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `fis.close()` (–±–æ `fis` –æ–≥–æ–ª–æ—à–µ–Ω–æ –ø–µ—Ä—à–∏–º).
>
> –¶–µ –ª–æ–≥—ñ—á–Ω–æ —ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –±–æ —Ü–µ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º, –∫–æ–ª–∏ –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —ñ–Ω—à–æ–≥–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `ObjectOutputStream` –æ–±–≥–æ—Ä—Ç–∞—î `FileOutputStream`).

#### **üìù –ú–Ω–µ–º–æ–Ω—ñ–∫–∞:**

–ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è ‚Äî —è–∫ —Ä–æ–∑–±–∏—Ä–∞—Ç–∏ –º–∞—Ç—Ä—å–æ—à–∫—É: –≤—ñ–¥ –Ω–∞–π–º–µ–Ω—à–æ—ó (–æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Å—Ç–≤–æ—Ä–µ–Ω–æ—ó) –¥–æ –Ω–∞–π–±—ñ–ª—å—à–æ—ó (–ø–µ—Ä—à–æ—ó).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ –≤–∞–∂–ª–∏–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫—É —ó—Ö –∑–∞–∫—Ä–∏—Ç—Ç—è.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ "–ø—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏" (suppressed exceptions) —ñ —è–∫ `try-with-resources` —ó—Ö –æ–±—Ä–æ–±–ª—è—î? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏** ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î **–Ω–µ –≤—Ç—Ä–∞—á–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é** –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —è–∫—â–æ –≤ —Å–∞–º–æ–º—É `try` –±–ª–æ—Ü—ñ –≤–∂–µ —Å—Ç–∞–≤—Å—è –≤–∏–Ω—è—Ç–æ–∫.
>
> **–ü—Ä–æ–±–ª–µ–º–∞, —è–∫—É –≤–æ–Ω–∏ –≤–∏—Ä—ñ—à—É—é—Ç—å:**
>
> * –£—è–≤—ñ–º–æ, —â–æ –≤ `try` –±–ª–æ—Ü—ñ –≤–∏–Ω–∏–∫–∞—î `ExceptionA`.
> * –ü–æ—Ç—ñ–º, –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –∑–∞–∫—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å, –π–æ–≥–æ –º–µ—Ç–æ–¥ `close()` –∫–∏–¥–∞—î `ExceptionB`.
> * –£ —Å—Ç–∞—Ä—ñ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-finally`, `ExceptionB` –ø—Ä–æ—Å—Ç–æ "–∑–∞—Ç–µ—Ä" –±–∏ `ExceptionA`, —ñ –º–∏ –± –≤—Ç—Ä–∞—Ç–∏–ª–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—á–∞—Ç–∫–æ–≤—É –ø—Ä–æ–±–ª–µ–º—É.
>
> **–Ø–∫ –ø—Ä–∞—Ü—é—î `try-with-resources`:**
>
> * `ExceptionA` (–∑ `try` –±–ª–æ–∫—É) –≤–≤–∞–∂–∞—î—Ç—å—Å—è **–æ—Å–Ω–æ–≤–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º**.
> * `ExceptionB` (–∑ `close()`) **–Ω–µ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞—î** –π–æ–≥–æ, –∞ **–¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É** —è–∫ "–ø—Ä–∏–¥—É—à–µ–Ω–∏–π".
>
> –û–±—Ä–æ–±–∏–≤—à–∏ –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ —É `catch` –±–ª–æ—Ü—ñ, –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥—É `e.getSuppressed()`. –¶–µ —Ä–æ–±–∏—Ç—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø–æ–º–∏–ª–æ–∫ –Ω–∞–±–∞–≥–∞—Ç–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–æ—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ —Ä–æ–±–æ—Ç—É `try-with-resources` —Ç–∞ –∫–ª—é—á–æ–≤—É –ø–µ—Ä–µ–≤–∞–≥—É, —è–∫—É –Ω–∞–¥–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ `try-finally`.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –≤–∏–≤–µ–¥–µ —Ü–µ–π –∫–æ–¥ —ñ —á–æ–º—É?

```java
class MyResource implements AutoCloseable {
    public void process() { throw new RuntimeException("–ü–æ–º–∏–ª–∫–∞ –≤ process()"); }
    @Override public void close() throws Exception { throw new IOException("–ü–æ–º–∏–ª–∫–∞ –≤ close()"); }
}
//... main:
try (MyResource r = new MyResource()) {
    r.process();
} catch (Exception e) {
    System.out.println("–ó–ª–æ–≤–ª–µ–Ω–æ: " + e.getMessage());
    for (Throwable t : e.getSuppressed()) {
        System.out.println("–ü—Ä–∏–¥—É—à–µ–Ω–æ: " + t.getMessage());
    }
}
```

‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–í–∏–≤—ñ–¥ —É –∫–æ–Ω—Å–æ–ª—å:**
>
> ```
> –ó–ª–æ–≤–ª–µ–Ω–æ: –ü–æ–º–∏–ª–∫–∞ –≤ process()
> –ü—Ä–∏–¥—É—à–µ–Ω–æ: –ü–æ–º–∏–ª–∫–∞ –≤ close()
> ```
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> 1. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–±'—î–∫—Ç `MyResource` —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –±–ª–æ–∫ `try-with-resources`.
> 2. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –º–µ—Ç–æ–¥ `r.process()`, —è–∫–∏–π –∫–∏–¥–∞—î `RuntimeException("–ü–æ–º–∏–ª–∫–∞ –≤ process()")`.
> 3. –í–∏–∫–æ–Ω–∞–Ω–Ω—è `try` –±–ª–æ–∫—É –ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å—è. –¶–µ–π `RuntimeException` —Å—Ç–∞—î **–æ—Å–Ω–æ–≤–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º**.
> 4. **–ü–µ—Ä–µ–¥ —Ç–∏–º**, —è–∫ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ `catch` –±–ª–æ–∫—É, `try-with-resources` –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–∞–∫—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å `r`, –≤–∏–∫–ª–∏–∫–∞—é—á–∏ `r.close()`.
> 5. –ú–µ—Ç–æ–¥ `close()` —Ç–∞–∫–æ–∂ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫ ‚Äî `IOException("–ü–æ–º–∏–ª–∫–∞ –≤ close()")`.
> 6. –û—Å–∫—ñ–ª—å–∫–∏ –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ –≤–∂–µ —ñ—Å–Ω—É—î, —Ü–µ–π `IOException` **–Ω–µ –ø—Ä–æ–∫–∏–¥–∞—î—Ç—å—Å—è –¥–∞–ª—ñ**, –∞ **–¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ `RuntimeException` —è–∫ "–ø—Ä–∏–¥—É—à–µ–Ω–∏–π"**.
> 7. `catch(Exception e)` –ª–æ–≤–∏—Ç—å **–æ—Å–Ω–æ–≤–Ω–∏–π** `RuntimeException`.
> 8. –í–∏–≤–æ–¥–∏—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É, –∞ –ø–æ—Ç—ñ–º –≤ —Ü–∏–∫–ª—ñ ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏–¥—É—à–µ–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—î –º–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—ñ–≤.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `final` –∑–º—ñ–Ω–Ω—ñ –≤ `try-with-resources`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞, –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ Java 9.**
>
> **–î–æ Java 9:**
>
> * –†–µ—Å—É—Ä—Å –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ **–æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏** –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥—É–∂–æ–∫ `try`.
> `try (BufferedReader reader = new BufferedReader(...)) { ... }`
>
> **–ó Java 9:**
>
> * –¶–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –±—É–ª–æ –∑–Ω—è—Ç–æ. –¢–µ–ø–µ—Ä —É `try-with-resources` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å, —è–∫–∏–π –±—É–≤ –æ–≥–æ–ª–æ—à–µ–Ω–∏–π **—Ä–∞–Ω—ñ—à–µ**, –∑–∞ —É–º–æ–≤–∏, —â–æ —Ü—è –∑–º—ñ–Ω–Ω–∞ —î **`final` –∞–±–æ `effectively final`**.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> BufferedReader reader = new BufferedReader(...); // –†–µ—Å—É—Ä—Å —Å—Ç–≤–æ—Ä–µ–Ω–æ –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å
> // `reader` —î effectively final, –±–æ –Ω–µ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–æ—é—î—Ç—å—Å—è
>
> try (reader) { // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î–º–æ –∑–º—ñ–Ω–Ω—É
>     // ...
> }
> ```
>
> –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ —Ä–µ—Å—É—Ä—Å —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –º–µ—Ç–æ–¥—ñ, –∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ —ñ–Ω—à–æ–º—É, –∞–±–æ –π–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —è–∫–∏—Ö–æ—Å—å —É–º–æ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö (–∑ Java 9) –ø–æ–∫—Ä–∞—â–µ–Ω—å –º–æ–≤–∏.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–ø–∏—à—ñ—Ç—å –≤–ª–∞—Å–Ω–∏–π –∫–ª–∞—Å, —è–∫–∏–π –º–æ–∂–Ω–∞ –±—É–ª–æ –± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –©–æ–± –∫–ª–∞—Å –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources`, –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`AutoCloseable`** —ñ –Ω–∞–¥–∞—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–ª—è –π–æ–≥–æ –º–µ—Ç–æ–¥—É `close()`.
>
> **–ü—Ä–∏–∫–ª–∞–¥: –∫–ª–∞—Å, —â–æ –º–æ–¥–µ–ª—é—î –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.**
>
> ```java
> public class DatabaseConnection implements AutoCloseable {
>
>     public DatabaseConnection() {
>         System.out.println("–í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î...");
>     }
>
>     public void executeQuery(String query) {
>         System.out.println("–í–∏–∫–æ–Ω—É—î–º–æ –∑–∞–ø–∏—Ç: " + query);
>     }
>
>     // –†–µ–∞–ª—ñ–∑—É—î–º–æ –º–µ—Ç–æ–¥ –∑ AutoCloseable
>     @Override
>     public void close() {
>         System.out.println("–ó–∞–∫—Ä–∏–≤–∞—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î.");
>     }
> }
> ```
>
> **–Ø–∫ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
>
> ```java
> public static void main(String[] args) {
>     try (DatabaseConnection connection = new DatabaseConnection()) {
>         connection.executeQuery("SELECT * FROM users");
>     } // –¢—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ connection.close()
> }
> ```
>
> **–í–∏–≤—ñ–¥:**
>
> ```
>
> –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î...
> –í–∏–∫–æ–Ω—É—î–º–æ –∑–∞–ø–∏—Ç: SELECT * FROM users
> –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î.
>
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –∫–æ–¥—É, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `null`-–ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤ `try-with-resources`? `try(Resource r = null)` ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Ü–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–ø–µ—á–Ω–æ.**
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` —Å–ø—Ä–æ–µ–∫—Ç–æ–≤–∞–Ω–∞ —Ç–∞–∫, —â–æ–± **–Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `close()` –Ω–∞ `null`-–ø–æ—Å–∏–ª–∞–Ω–Ω—ñ**.
>
> 1. –ù–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ `try` –±–ª–æ–∫—É JVM –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —Ä–µ—Å—É—Ä—Å, –æ–≥–æ–ª–æ—à–µ–Ω–∏–π –≤ –¥—É–∂–∫–∞—Ö, —î `null`.
> 2. –Ø–∫—â–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å `null`, –º–µ—Ç–æ–¥ `close()` –ø—Ä–æ—Å—Ç–æ **–Ω–µ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ**.
> 3. –¶–µ —É—Å—É–≤–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å —É —Ä—É—á–Ω—ñ–π –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ `if (resource != null)` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `finally`, —è–∫–∞ –±—É–ª–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ—é —É —Å—Ç–∞—Ä–æ–º—É –ø—ñ–¥—Ö–æ–¥—ñ.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –≤–∏ –º–æ–∂–µ—Ç–µ –±–µ–∑–ø–µ—á–Ω–æ –ø–∏—Å–∞—Ç–∏ –∫–æ–¥, –¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ `null` –∑–∞ –ø–µ–≤–Ω–∏—Ö —É–º–æ–≤, —ñ `try-with-resources` –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ü–µ –æ–±—Ä–æ–±–∏—Ç—å.
>
> ```java
> // –¶–µ–π –∫–æ–¥ —î –±–µ–∑–ø–µ—á–Ω–∏–º, NullPointerException –Ω–µ –≤–∏–Ω–∏–∫–Ω–µ
> try (BufferedReader reader = createReaderIfFileExists()) {
>     if (reader != null) {
>         // ...
>     }
> }
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `try-with-resources` –æ–±—Ä–æ–±–ª—è—î `null` –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ —î –æ–¥–Ω—ñ—î—é –∑ –π–æ–≥–æ –ø–µ—Ä–µ–≤–∞–≥ —É –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ `try-with-resources` –Ω–µ –º–∞—î `catch` –∞–±–æ `finally` –±–ª–æ–∫—ñ–≤? –ß–∏ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è —Ç–∞–∫–∏–π –∫–æ–¥? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è.**
>
> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` –º–æ–∂–µ —ñ—Å–Ω—É–≤–∞—Ç–∏ **–±–µ–∑ –∂–æ–¥–Ω–æ–≥–æ `catch` –∞–±–æ `finally` –±–ª–æ–∫—É**.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public void processFile() throws IOException {
>     try (FileInputStream fis = new FileInputStream("file.txt")) {
>         // ... —è–∫–∞—Å—å —Ä–æ–±–æ—Ç–∞ ...
>     }
> }
> ```
>
> **–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É:**
>
> * `try-with-resources` –≤—Å–µ –æ–¥–Ω–æ **–≥–∞—Ä–∞–Ω—Ç—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—É `fis`** –Ω–∞ –≤–∏—Ö–æ–¥—ñ –∑ –±–ª–æ–∫—É.
> * –Ø–∫—â–æ –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–æ–º –∞–±–æ –ø—ñ–¥ —á–∞—Å –π–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –≤–∏–Ω–∏–∫–Ω–µ **`checked` –≤–∏–Ω—è—Ç–æ–∫** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `IOException`), –≤—ñ–Ω **–Ω–µ –±—É–¥–µ –æ–±—Ä–æ–±–ª–µ–Ω–∏–π** —ñ –±—É–¥–µ **–ø—Ä–æ–∫–∏–Ω—É—Ç–∏–π –¥–∞–ª—ñ** –∑ –º–µ—Ç–æ–¥—É. –°–∞–º–µ —Ç–æ–º—É –º–µ—Ç–æ–¥ `processFile()` –ø–æ–≤–∏–Ω–µ–Ω –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ `throws IOException`.
>
> –ü–æ —Å—É—Ç—ñ, `try-with-resources` –Ω–µ—è–≤–Ω–æ –≤–∏–∫–æ–Ω—É—î —Ç—É –∂ —Ä–æ–ª—å, —â–æ –π `finally` –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ `try-with-resources` —Å–∞–º –ø–æ —Å–æ–±—ñ –≤–∂–µ —î –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–±–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É `try-with-resources` –≤—Ä—É—á–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `try-catch-finally`, —è–∫–∏–π –∫–æ–¥ –≤–∏ –± –Ω–∞–ø–∏—Å–∞–ª–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è, —â–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥—Ç–≤–æ—Ä—é—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É `try-with-resources` (–≤–∫–ª—é—á–∞—é—á–∏ –æ–±—Ä–æ–±–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤), —î –¥–æ—Å–∏—Ç—å —Å–∫–ª–∞–¥–Ω–æ—é.
>
> **–ö–æ–¥ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É:**
>
> ```java
> public void manualTryWithResources() throws IOException {
>     Resource resource = new Resource();
>     Throwable primaryException = null;
>
>     try {
>         resource.doWork(); // –ú–æ–∂–µ –∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫
>     } catch (Throwable e) {
>         primaryException = e;
>         throw e;
>     } finally {
>         if (resource != null) {
>             if (primaryException != null) {
>                 try {
>                     resource.close(); // close() —Ç–∞–∫–æ–∂ –º–æ–∂–µ –∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫
>                 } catch (Throwable suppressedException) {
>                     primaryException.addSuppressed(suppressedException);
>                 }
>             } else {
>                 resource.close();
>             }
>         }
>     }
> }
> ```
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏:**
>
> 1. –ú–∏ –æ–≥–æ–ª–æ—à—É—î–º–æ –∑–º—ñ–Ω–Ω—É –¥–ª—è **–æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É (`primaryException`)**.
> 2. –£ `try` –º–∏ –≤–∏–∫–æ–Ω—É—î–º–æ —Ä–æ–±–æ—Ç—É.
> 3. –£ `catch` –º–∏ **–ª–æ–≤–∏–º–æ –±—É–¥—å-—è–∫–∏–π `Throwable`**, –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –π–æ–≥–æ –≤ `primaryException`, —ñ **–ø—Ä–æ–∫–∏–¥–∞—î–º–æ –¥–∞–ª—ñ**.
> 4. –£ `finally` –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –±—É–≤ –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫.
>     * –Ø–∫—â–æ **—Ç–∞–∫**, –º–∏ –æ–±–≥–æ—Ä—Ç–∞—î–º–æ –≤–∏–∫–ª–∏–∫ `close()` –≤ —â–µ –æ–¥–∏–Ω `try-catch`, —â–æ–± –∑–ª–æ–≤–∏—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —ñ **–¥–æ–¥–∞—Ç–∏ –π–æ–≥–æ —è–∫ –ø—Ä–∏–¥—É—à–µ–Ω–∏–π** –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ.
>     * –Ø–∫—â–æ **–Ω—ñ**, –º–∏ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–ª–∏–∫–∞—î–º–æ `close()`, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –±—É–¥—å-—è–∫–æ–º—É –≤–∏–Ω—è—Ç–∫—É –∑ –Ω—å–æ–≥–æ –ø—Ä–æ–∫–∏–Ω—É—Ç–∏—Å—è –¥–∞–ª—ñ.
>
> –¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ —á—ñ—Ç–∫–æ –ø–æ–∫–∞–∑—É—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ `try-with-resources` —Å–ø—Ä–æ—â—É—î –∫–æ–¥ —ñ —Ä–æ–±–∏—Ç—å –π–æ–≥–æ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è "–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º" `try-with-resources`. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –≥–ª–∏–±–æ–∫–µ –∑–Ω–∞–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—É.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –∑–º—ñ–Ω–Ω—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `try-with-resources`, —è–∫–∞ –Ω–µ —î —Ä–µ—Å—É—Ä—Å–æ–º?
`try (int i = 0; ...)` ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ù—ñ, –Ω–µ –º–æ–∂–Ω–∞.**
>
> –¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ **–ø–æ–º–∏–ª–∫–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó**.
>
> **–ü—Ä–∞–≤–∏–ª–æ:**
> –ö–æ–∂–Ω–∞ –∑–º—ñ–Ω–Ω–∞, –æ–≥–æ–ª–æ—à–µ–Ω–∞ –≤ –¥—É–∂–∫–∞—Ö `try-with-resources`, **–ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —Ç–∏–ø—É, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `java.lang.AutoCloseable`**.
>
> –ü—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —Ç–∏–ø–∏, —è–∫ `int`, –∞–±–æ –∫–ª–∞—Å–∏, —â–æ –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Ü–µ–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –≤ —Ü—ñ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó.
>
> `try (int i = 0)` ‚Üí `incompatible types: int cannot be converted to AutoCloseable`
> `try (String s = "hello")` ‚Üí `incompatible types: String cannot be converted to AutoCloseable`
>
> –¶—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–æ–≤–∞–Ω–∞ –ª–∏—à–µ –¥–ª—è **—É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º —Ä–µ—Å—É—Ä—Å—ñ–≤**, –∞ –Ω–µ –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–¢–æ—á–Ω–µ –∑–Ω–∞–Ω–Ω—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏—Ö —Ç–∞ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏—Ö –æ–±–º–µ–∂–µ–Ω—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–º—ñ–Ω–∏–ª–∞—Å—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `try-with-resources` —É Java 9? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –£ Java 9 –±—É–ª–æ –≤–≤–µ–¥–µ–Ω–æ –æ–¥–Ω–µ, –∞–ª–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–µ **–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è** –¥–ª—è `try-with-resources`.
>
> **–î–æ Java 9:**
> –†–µ—Å—É—Ä—Å –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ **–æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ —ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥—É–∂–æ–∫ `try`**. –¶–µ –æ–∑–Ω–∞—á–∞–ª–æ, —â–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å –Ω–µ –±—É–ª–æ –¥–æ—Å—Ç—É–ø–Ω–∏–º –ø—ñ—Å–ª—è –±–ª–æ–∫—É.
>
> **–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ Java 9:**
> –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources` –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å, —è–∫–∏–π –±—É–≤ **–æ–≥–æ–ª–æ—à–µ–Ω–∏–π —ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ä–∞–Ω—ñ—à–µ**, –∑–∞ —É–º–æ–≤–∏, —â–æ —Ü—è –∑–º—ñ–Ω–Ω–∞ —î **`final` –∞–±–æ `effectively final`**.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public void process(BufferedReader reader) throws IOException {
>     // reader —î effectively final, –±–æ –º–∏ –π–æ–≥–æ –Ω–µ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–æ—é—î–º–æ
>     try (reader) { // –ü–µ—Ä–µ–¥–∞—î–º–æ —ñ—Å–Ω—É—é—á–∏–π —Ä–µ—Å—É—Ä—Å
>         System.out.println(reader.readLine());
>     }
> }
>
> // ... –¥–µ—Å—å –≤ —ñ–Ω—à–æ–º—É –º—ñ—Å—Ü—ñ
> BufferedReader br = createReader();
> process(br); // –ü–µ—Ä–µ–¥–∞—î–º–æ —Ä–µ—Å—É—Ä—Å –≤ –º–µ—Ç–æ–¥
> ```
>
> –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–º, –æ—Å–∫—ñ–ª—å–∫–∏ —Ä–µ—Å—É—Ä—Å –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø—Ä—è–º–æ –Ω–∞ –º—ñ—Å—Ü—ñ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å Java, —â–æ –ø—ñ–¥–≤–∏—â—É—é—Ç—å –≥–Ω—É—á–∫—ñ—Å—Ç—å –∫–æ–¥—É.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ `main` –º–µ—Ç–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `try-with-resources`, –∞ –º–µ—Ç–æ–¥ `close()` –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ –¥–≤–∞ –≤–∏–ø–∞–¥–∫–∏.
>
> **–í–∏–ø–∞–¥–æ–∫ 1: –£ `try` –±–ª–æ—Ü—ñ –≤—Å–µ —É—Å–ø—ñ—à–Ω–æ.**
>
> ```java
> public static void main(String[] args) throws Exception {
>     try (MyResource r = new MyResource()) { /* ... —É—Å–ø—ñ—à–Ω–æ ... */ }
> }
> ```
>
> * –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `try`, –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r.close()`.
> * `close()` –∫–∏–¥–∞—î, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `IOException`.
> * –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π `IOException` –Ω—ñ–¥–µ –Ω–µ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è (`catch` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π), –≤—ñ–Ω –±—É–¥–µ –ø—Ä–æ–∫–∏–Ω—É—Ç–∏–π –∑ –º–µ—Ç–æ–¥—É `main`.
> * JVM –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç—å –π–æ–≥–æ, **–∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–∏** —ñ –≤–∏–≤–µ–¥–µ —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å `IOException`.
>
> **–í–∏–ø–∞–¥–æ–∫ 2: –Ü –≤ `try`, —ñ –≤ `close()` –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫–∏.**
>
> ```java
> try (MyResource r = new MyResource()) {
>     throw new RuntimeException("Error in try");
> }
> ```
>
> * `try` –±–ª–æ–∫ –∫–∏–¥–∞—î `RuntimeException`.
> * –ü—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ `close()` –∫–∏–¥–∞—î `IOException`.
> * `RuntimeException` —Å—Ç–∞—î **–æ—Å–Ω–æ–≤–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º**, –∞ `IOException` ‚Äî **–ø—Ä–∏–¥—É—à–µ–Ω–∏–º**.
> * JVM –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç—å **–æ—Å–Ω–æ–≤–Ω–∏–π** `RuntimeException`, –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É —ñ –≤–∏–≤–µ–¥–µ —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å, —è–∫–∏–π –≤–∫–ª—é—á–∞—Ç–∏–º–µ —ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–∏–¥—É—à–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `try-with-resources` –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ—Ä–µ–∫—Ç–Ω—É –ø–µ—Ä–µ–¥–∞—á—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –Ω–∞–≤—ñ—Ç—å –Ω–∞ –Ω–∞–π–≤–∏—â–æ–º—É —Ä—ñ–≤–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É `try-with-resources` —É –ø–æ—î–¥–Ω–∞–Ω–Ω—ñ –∑ –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º `main` –º–µ—Ç–æ–¥—É.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π `AutoCloseable` —Ä–µ—Å—É—Ä—Å, `close()` —è–∫–æ–≥–æ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫? –ß–∏ —î –≤ —Ü—å–æ–º—É –ø–µ—Ä–µ–≤–∞–≥–∏? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Ü–µ –Ω–µ —Ç—ñ–ª—å–∫–∏ –º–æ–∂–ª–∏–≤–æ, –∞ –π —î –≥–∞—Ä–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é, —è–∫—â–æ —Ü–µ –ª–æ–≥—ñ—á–Ω–æ –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–æ.**
>
> –ú–µ—Ç–æ–¥ `close()` –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ `AutoCloseable` –æ–≥–æ–ª–æ—à–µ–Ω–∏–π —è–∫ `throws Exception`, —â–æ –¥–∞—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –≥–Ω—É—á–∫—ñ—Å—Ç—å, –∞–ª–µ –Ω–µ –∑–æ–±–æ–≤'—è–∑—É—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫.
>
> **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
>
> –í–∏ –ø—Ä–æ—Å—Ç–æ –æ–≥–æ–ª–æ—à—É—î—Ç–µ –º–µ—Ç–æ–¥ `close()` –±–µ–∑ –∫–ª–∞—É–∑–∏ `throws`.
>
> ```java
> public class SafeResource implements AutoCloseable {
>     @Override
>     public void close() { // –ù–µ–º–∞—î throws
>         System.out.println("–†–µ—Å—É—Ä—Å –±–µ–∑–ø–µ—á–Ω–æ –∑–∞–∫—Ä–∏—Ç–æ. –ù—ñ—è–∫–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤.");
>     }
> }
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:**
>
> 1. **–°–ø—Ä–æ—â–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–≥–æ –∫–æ–¥—É:** –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∫–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–∞–∫–∏–π —Ä–µ—Å—É—Ä—Å —É `try-with-resources`, –π–æ–º—É **–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ** –±—É–¥–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫ `Exception` –∑ –º–µ—Ç–æ–¥—É `close()`.
>
>     ```java
>     // –ù–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω catch –¥–ª—è –≤–∏–Ω—è—Ç–∫—É –∑ close()
>     try (SafeResource r = new SafeResource()) {
>         // ...
>     }
>     ```
>
> 2. **–Ø–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç:** –í–∏ —á—ñ—Ç–∫–æ —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –≤–∞—à–æ–≥–æ API, —â–æ –æ–ø–µ—Ä–∞—Ü—ñ—è –∑–∞–∫—Ä–∏—Ç—Ç—è —î –Ω–∞–¥—ñ–π–Ω–æ—é —ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –ø–æ–º–∏–ª–∫–∏.
>
> –¶–µ –≥–∞—Ä–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —á–∏—î –∑–∞–∫—Ä–∏—Ç—Ç—è —î –ø—Ä–æ—Å—Ç–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é –≤ –ø–∞–º'—è—Ç—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫–∏–¥–∞–Ω–Ω—è —è–∫–æ–≥–æ—Å—å –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É) —ñ –Ω–µ –ø–æ–≤'—è–∑–∞–Ω–µ –∑ —Ä–∏–∑–∏–∫–æ–≤–∞–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É.
>
> **–í–∞–∂–ª–∏–≤–æ:** –ù–µ –º–æ–∂–Ω–∞ "–∫–æ–≤—Ç–∞—Ç–∏" —Ä–µ–∞–ª—å–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `close()`, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–∏–¥–∏–º—ñ—Å—Ç—å –±–µ–∑–ø–µ–∫–∏. –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –º–æ–∂–µ —Å—Ç–∞—Ç–∏—Å—è, —ó—ó —Å–ª—ñ–¥ –ø—Ä–æ–∫–∏–¥–∞—Ç–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ API, —è–∫—ñ —î –∑—Ä—É—á–Ω–∏–º–∏ —Ç–∞ –±–µ–∑–ø–µ—á–Ω–∏–º–∏ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.*
