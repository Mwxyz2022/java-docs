---
layout: default
title: "try-with-resources (TWR)"
parent: "–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (Exceptions)"
grand_parent: "Java Core"
nav_order: 9
---

# try-with-resources (TWR)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `try-with-resources` (TWR) ‚Äì —Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏ (—è–∫—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AutoCloseable`) –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è `try`-–±–ª–æ–∫—É, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—ñ–≤. –î–æ—Å—Ç—É–ø–Ω–æ –∑ Java 7.
* –ø–æ–Ω—è—Ç—Ç—è: `try-with-resources`, `AutoCloseable` (—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å).
* –ø—Ä–∏–∫–ª–∞–¥–∏: `try (BufferedReader reader = new BufferedReader(new FileReader("f.txt"))) { ... }`.
* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ó–∞–±–µ–∑–ø–µ—á—É—î —á–∏—Å—Ç—ñ—à–∏–π —Ç–∞ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ `try-finally`, —É–Ω–∏–∫–Ω–µ–Ω–Ω—è
  –≤–∏—Ç–æ–∫—ñ–≤ —Ä–µ—Å—É—Ä—Å—ñ–≤.
* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ü–µ—Ä–µ–≤–∞–≥–∏ TWR, —è–∫ –ø—Ä–∞—Ü—é—î, —è–∫—ñ –∫–ª–∞—Å–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ TWR.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`AutoCloseable`** ‚Äî —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –æ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º

```java
void close() throws Exception;
```

–í—Å—ñ –∫–ª–∞—Å–∏, —â–æ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Ü–µ–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É **`try-with-resources.`**

---

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ –∫–ª–∞—Å —ñ–∑ —Å—É–ø–µ—Ä—Å–∏–ª–æ—é ‚Äî –≤—ñ–Ω –≤–º—ñ—î —Å–∞–º —Å–µ–±–µ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏, –∫–æ–ª–∏ —Ç–∏ –∑ –Ω–∏–º –∑–∞–∫—ñ–Ω—á—É—î—à.

–ü—Ä–∏–∫–ª–∞–¥–∏: **`Scanner, BufferedReader, FileInputStream, Connection (JDBC).`**

---

## ** –Ø–∫ –ø—Ä–∞—Ü—é—î try-with-resources (TWR)?**

##### **‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å:**

```java
try(ResourceType resource = new ResourceType()){
        // —Ä–æ–±–æ—Ç–∞ –∑ —Ä–µ—Å—É—Ä—Å–æ–º
        }catch(
Exception e){
        // –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
        }
```

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–Ø–∫ —Ç—ñ–ª—å–∫–∏ **`try`** –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è (–Ω–∞–≤—ñ—Ç—å –∑ –≤–∏–Ω—è—Ç–∫–æ–º), Java –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î **`close()`** –Ω–∞ —Ä–µ—Å—É—Ä—Å—ñ.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **‚úîÔ∏è Scanner:**

```java
try(Scanner scanner = new Scanner(new File("data.txt"))){
        while(scanner.

hasNextLine()){
        System.out.

println(scanner.nextLine());
        }
        }catch(
FileNotFoundException e){
        System.out.

println("–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
}
```

### **‚úîÔ∏è BufferedReader:**

```java
try(BufferedReader reader = new BufferedReader(new FileReader("file.txt"))){
String line;
    while((line =reader.

readLine())!=null){
        System.out.

println(line);
    }
            }catch(
IOException e){
        System.out.

println("–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è");
}
```

üìå **`finally`** —Ç—É—Ç –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω ‚Äî —Ä–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

---

## ** –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ try-finally (‚öñÔ∏è)**

|            –ö—Ä–∏—Ç–µ—Ä—ñ–π            | try-with-resources |             try-finally              |
|:------------------------------:|:------------------:|:------------------------------------:|
|     **–ó–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤**      |    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ     | –†—É—á–Ω–µ (—á–µ—Ä–µ–∑ if (resource \!= null)) |
|     **–ö–æ—Ä–æ—Ç–∫–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**     |         ‚úÖ          |           ‚ùå (–±—ñ–ª—å—à–µ –∫–æ–¥—É)            |
|   **–ë–µ–∑–ø–µ—á–Ω–µ –ø—Ä–∏ –≤–∏–Ω—è—Ç–∫–∞—Ö**    |         ‚úÖ          |    ‚ùå (–º–æ–∂–Ω–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è)     |
| **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤** |         ‚úÖ          |          ‚úÖ (–∞–ª–µ —Å–∫–ª–∞–¥–Ω—ñ—à–µ)           |
|        **–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å**         |     –ó Java 7+      |              –£—Å—ñ –≤–µ—Ä—Å—ñ—ó              |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**



 –¢–∞–∫\! –ü—Ä–æ—Å—Ç–æ —Ä–æ–∑–¥—ñ–ª—è–π —á–µ—Ä–µ–∑ –∫—Ä–∞–ø–∫—É –∑ –∫–æ–º–æ—é:

```java
try(
BufferedReader r1 = new BufferedReader(new FileReader("1.txt"));
BufferedReader r2 = new BufferedReader(new FileReader("2.txt"))
){
        // –æ–±—Ä–æ–±–∫–∞
        }
```

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Å–≤–æ—ó –∫–ª–∞—Å–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ TWR?


### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**



 –ó–≤—ñ—Å–Ω–æ\! –†–µ–∞–ª—ñ–∑—É–π **`AutoCloseable`**:

```java
class MyResource implements AutoCloseable {
    public void close() {
        System.out.println("–†–µ—Å—É—Ä—Å –∑–∞–∫—Ä–∏—Ç–æ!");
    }
}
```

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ —Ç—Ä–µ–±–∞ –ª–æ–≤–∏—Ç–∏ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∏ `close()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**



 –ù—ñ, Java —Ü–µ —Ä–æ–±–∏—Ç—å —Å–∞–º–∞. –Ø–∫—â–æ —Ö–æ—á–µ—à, –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ —á–µ—Ä–µ–∑ **`getSuppressed().`**

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**`TWR = try (—Ä–µ—Å—É—Ä—Å) -> Java —Å–∞–º–∞ –∑–∞–∫—Ä–∏—î`**

–ê–±–æ:  
**`try-with-resources = try + AutoCloseable = –∞–≤—Ç–æ-clean`**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`try-with-resources`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏, —è–∫—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å **`AutoCloseable`**.
* –ü—ñ–¥—Ç—Ä–∏–º—É—î –∫–ª–∞—Å–∏ —Ç–∏–ø—É **`Scanner, BufferedReader, FileInputStream, Connection`** —Ç–æ—â–æ.
* –ó–∞–º—ñ—Å—Ç—å –≥—Ä–æ–º—ñ–∑–¥–∫–æ–≥–æ **`finally`** ‚Äî —á–∏—Å—Ç–∏–π, –±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–¥.
* –ú–æ–∂–Ω–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —ñ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.