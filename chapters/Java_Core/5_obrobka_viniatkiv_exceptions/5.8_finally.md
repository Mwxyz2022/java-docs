---
layout: default
title: "finally"
parent: "–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (Exceptions)"
grand_parent: "Java Core"
nav_order: 8
---

# finally

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ë–ª–æ–∫ `finally` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∑–∞–≤–∂–¥–∏ –ø—ñ—Å–ª—è `try` –∞–±–æ `catch`, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫, —á–∏ –Ω—ñ. –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤.

* –ø–æ–Ω—è—Ç—Ç—è: `finally`, –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–∞–∫—Ä–∏—Ç—Ç—è `FileReader` —É `finally` –±–ª–æ—Ü—ñ.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —É `try`/`catch` —î `return` –∞–±–æ —ñ–Ω—à–∏–π –≤–∏–Ω—è—Ç–æ–∫. –ù–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –∂–æ—Ä—Å—Ç–∫–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ JVM.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è, –∫–æ–ª–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è/–Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `finally`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**`finally`** ‚Äî —Ü–µ –±–ª–æ–∫ –∫–æ–¥—É, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è **`try`** –∞–±–æ **`catch`** —É –±—É–¥—å-—è–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É ‚Äî –≤–∏–Ω—è—Ç–æ–∫ –±—É–≤ —á–∏ –Ω—ñ.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ –≥–∞—Ä–∞–Ω—Ç—ñ—è –≤—ñ–¥ Java: ¬´–©–æ –± –Ω–µ —Å—Ç–∞–ª–æ—Å—è ‚Äî —Ü–µ–π –∫–æ–¥ —è –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –≤–∏–∫–æ–Ω–∞—é.¬ª

---

## **–ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω finally?**

**üì¶ –¢–∏–ø–æ–≤—ñ —Ü—ñ–ª—ñ:**

* –ó–∞–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏ –∞–±–æ –º–µ—Ä–µ–∂–µ–≤—ñ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è
* –ó–≤—ñ–ª—å–Ω–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ (Scanner, Streams, DB connection)
* –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ
* –ó—Ä–æ–±–∏—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∞–±–æ –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è

### **‚úîÔ∏è –ü—Ä–∏–∫–ª–∞–¥:**

```java
FileReader reader = null;
try {
    reader = new FileReader("file.txt");
    // —Ä–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–æ–º
} catch (IOException e) {
    System.out.println("–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è");
} finally {
    if (reader != null) {
        try {
            reader.close();
        } catch (IOException e) {
            System.out.println("–ü–æ–º–∏–ª–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è");
        }
    }
}
```

üìå **`finally`** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫.

---

## **–ö–æ–ª–∏ finally –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î? (‚ö†Ô∏è)**

| –°–∏—Ç—É–∞—Ü—ñ—è | –ß–æ–º—É –Ω–µ –ø—Ä–∞—Ü—é—î |
| :---: | :---: |
| **`System.exit(0);`** | JVM –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç—É –Ω–µ–≥–∞–π–Ω–æ |
| **`Runtime.getRuntime().halt()`** | JVM –∂–æ—Ä—Å—Ç–∫–æ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è |
| JVM crash (**`OutOfMemoryError`**, **`StackOverflowError`**) | JVM –∞–≤–∞—Ä—ñ–π–Ω–æ –ø–∞–¥–∞—î |
| **`Thread.stop()`** (–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π) | –ü–æ—Ç—ñ–∫ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∏–π `finally`, —è–∫—â–æ –≤ `try` —î `return`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –¢–∞–∫\! –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî `finally` –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ `return`.

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ `try` —ñ `finally` –±–µ–∑ `catch`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

 –¢–∞–∫. –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

```java
try {
   // –∫–æ–¥
} finally {
   // –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è
}
```

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**`finally`** ‚Äî —è–∫ –ø—Ä–∏–±–∏—Ä–∞–ª—å–Ω–∏–∫: –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞–≤–∂–¥–∏ –ø—ñ—Å–ª—è –ø–æ–¥—ñ—ó.

–ê–±–æ:  
**`try`** ‚Äî —Å–ø—Ä–æ–±—É–π  
**`catch`** ‚Äî –≤–ø—ñ–π–º–∞–π  
**`finally`** ‚Äî –≤—Å–µ –æ–¥–Ω–æ –ø—Ä–∏–±–µ—Ä–∏

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`finally`** –∑–∞–≤–∂–¥–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è **`try`** / **`catch`**.
* –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤.
* –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è **`return`** –∞–±–æ –≤–∏–Ω—è—Ç–∫—ñ–≤.
* –ù–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—Ä–∏ –∂–æ—Ä—Å—Ç–∫–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ JVM (**`System.exit`**, –∞–≤–∞—Ä—ñ–π–Ω–∏–π –∫—Ä–∞—à).
