---
layout: default
title: "Suppressed Exceptions (–ü—Ä–∏–≥–ª—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏)"
parent: "–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (Exceptions)"
grand_parent: "Java Core"
nav_order: 13
---

# Suppressed Exceptions (–ü—Ä–∏–≥–ª—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Suppressed exceptions` ‚Äì —Ü–µ –ø–æ–±—ñ—á–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —É `try-with-resources` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É `close()` –º–µ—Ç–æ–¥—ñ), –∞–ª–µ –Ω–µ –∑–∞–º—ñ–Ω—é—é—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, –∞ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –Ω—å–æ–≥–æ.

* –ø–æ–Ω—è—Ç—Ç—è: `Suppressed Exceptions`, `Throwable.addSuppressed()`, `Throwable.getSuppressed()`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –Ø–∫—â–æ –≤ `try` –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫, –∞ –ø–æ—Ç—ñ–º —É `close()` —Ä–µ—Å—É—Ä—Å—É —Ç–µ–∂, —Ç–æ –≤–∏–Ω—è—Ç–æ–∫ –∑ `close()` —Å—Ç–∞–Ω–µ `suppressed`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–±–∞–≥—ñ–Ω–≥—É. –î–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ `Throwable.getSuppressed()`.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –©–æ —Ü–µ, –∫–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—é—Ç—å, —è–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**Suppressed exceptions** ‚Äî —Ü–µ –≤–∏–Ω—è—Ç–∫–∏, —è–∫—ñ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—É –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó **`try-with-resources`**, –∞–ª–µ –Ω–µ –∑–∞–º—ñ–Ω—é—é—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, –∞ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –Ω—å–æ–≥–æ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ **`Throwable.addSuppressed().`**

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

Java –Ω–µ –≤—Ç—Ä–∞—á–∞—î –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Ä–µ—Å—É—Ä—Å—ñ–≤. –Ø–∫—â–æ –æ—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞ –≤–∂–µ —Å—Ç–∞–ª–∞—Å—è –≤ **`try`**, –∞ —â–µ –æ–¥–Ω–∞ –≤–∏–Ω–∏–∫–ª–∞ –≤ **`close()`** ‚Äî –≤–æ–Ω–∞ –Ω–µ –∑–∞–º—ñ–Ω—é—î –ø–µ—Ä—à—É, –∞ –∞–∫—É—Ä–∞—Ç–Ω–æ "–ø—Ä–∏—à–∏–≤–∞—î—Ç—å—Å—è" –¥–æ –Ω–µ—ó —è–∫ suppressed.

---

## **üìä –û—Å–Ω–æ–≤–Ω—ñ —Ç–∏–ø–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —É **`try-with-resources:`****

* **–û—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫** ‚Äî –≤–∏–Ω–∏–∫–∞—î –≤ –±–ª–æ—Ü—ñ **`try`** —ñ –≤–∏–∫–∏–¥–∞—î—Ç—å—Å—è –ø–µ—Ä—à–∏–º.
* **Suppressed –≤–∏–Ω—è—Ç–æ–∫** ‚Äî –≤–∏–Ω–∏–∫–∞—î –ø—ñ–¥ —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—É –≤ **`close()`** —ñ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ.

üìå –ú–µ—Ç–æ–¥–∏:

* **`Throwable.getSuppressed()`** ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ suppressed –≤–∏–Ω—è—Ç–∫—ñ–≤.

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —Ç–∏ –∑–∞–±—É–≤ –∑–∞–∫—Ä–∏—Ç–∏ –¥–≤–µ—Ä—ñ (—Ä–µ—Å—É—Ä—Å), –±–æ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–∂–µ–∂–∞ (–≤–∏–Ω—è—Ç–æ–∫ —É try). –ü–æ–∂–µ–∂–∞ ‚Äî –≥–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞. –ê–ª–µ –≤ –º–æ–º–µ–Ω—Ç, –∫–æ–ª–∏ –¥–≤–µ—Ä—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—á–∏–Ω—è—é—Ç—å—Å—è (TWR), –≤–æ–Ω–∏ –ª–∞–º–∞—é—Ç—å—Å—è ‚Äî —Ü–µ –¥—Ä—É–≥–∞ –ø—Ä–æ–±–ª–µ–º–∞, –∞–ª–µ –≤–æ–Ω–∞ –Ω–µ –ø–µ—Ä–µ–∫—Ä–∏—î –ø–æ–∂–µ–∂—É. Java –Ω–µ –∑–∞–±—É–¥–µ –ø—Ä–æ –∑–ª–∞–º–∞–Ω—ñ –¥–≤–µ—Ä—ñ, –≤–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—à–µ: ‚Äú–û–π, —â–µ –π –¥–≤–µ—Ä—ñ –∑–ª–∞–º–∞–ª–∏—Å—å\!‚Äù

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
class TestResource implements AutoCloseable {
    private final String name;

    TestResource(String name) {
        this.name = name;
    }

    @Override
    public void close() throws Exception {
        throw new Exception("–ü–æ–º–∏–ª–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è: " + name);
    }
}

public class SuppressedExample {
    public static void main(String[] args) {
        try (
                TestResource r1 = new TestResource("R1");
                TestResource r2 = new TestResource("R2");
        ) {
            throw new Exception("–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞");
        } catch (Exception e) {
            System.out.println("–û—Å–Ω–æ–≤–Ω–∞: " + e.getMessage());
            for (Throwable suppressed : e.getSuppressed()) {
                System.out.println("–ü—Ä–∏–≥–ª—É—à–µ–Ω–æ: " + suppressed.getMessage());
            }
        }
    }
}
```

üßæ –†–µ–∑—É–ª—å—Ç–∞—Ç:

```java
–û—Å–Ω–æ–≤–Ω–∞:
–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞
–ü—Ä–∏–≥–ª—É—à–µ–Ω–æ:
–ü–æ–º–∏–ª–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è:R2
–ü—Ä–∏–≥–ª—É—à–µ–Ω–æ:
–ü–æ–º–∏–ª–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è:R1  
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|    –í–∏–Ω—è—Ç–æ–∫     |        –î–µ –≤–∏–Ω–∏–∫–∞—î         |                  –Ø–∫ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è                   |
|:--------------:|:-------------------------:|:--------------------------------------------------:|
|  **–û—Å–Ω–æ–≤–Ω–∏–π**  | –£—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–ª–æ–∫—É **`try`** |             –í–∏–∫–∏–¥–∞—î—Ç—å—Å—è —É **`catch`**              |
| **Suppressed** |  –£ **`close()`** —Ä–µ—Å—É—Ä—Å—É  | –î–æ–¥–∞—î—Ç—å—Å—è –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–µ—Ä–µ–∑ **`addSuppressed()`** |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**Suppressed \= ‚Äú–ø—Ä–∏–≥–ª—É—à–µ–Ω–æ, –∞–ª–µ –Ω–µ –∑–∞–±—É—Ç–æ\!‚Äù**

**–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞ ‚Äî –≤ catch, –∞ –∑–∞–∫—Ä–∏—Ç—Ç—è ‚Äî –≤ suppressed.**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **Suppressed exceptions** –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —É **`try-with-resources.`**
* –í–æ–Ω–∏ –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è, –∞ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É.
* –ú–µ—Ç–æ–¥ **`Throwable.getSuppressed()`** –¥–æ–∑–≤–æ–ª—è—î —ó—Ö –æ—Ç—Ä–∏–º–∞—Ç–∏.
* –¶–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è **–ª–æ–≥—É–≤–∞–Ω–Ω—è** —Ç–∞ **–≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è** –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–æ–±–ª–µ–º –æ–¥–Ω–æ—á–∞—Å–Ω–æ.
* **–ü—Ä–∞—Ü—é—î –ª–∏—à–µ –∑ try-with-resources**, –∞ –Ω–µ –∑ finally.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**üîó Oracle Docs ‚Äî Throwable.getSuppressed()**](https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html#getSuppressed--)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –ø—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ (suppressed exceptions) —ñ —è–∫—É –ø—Ä–æ–±–ª–µ–º—É –≤–æ–Ω–∏ –≤–∏—Ä—ñ—à—É—é—Ç—å?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏** ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º, –≤–≤–µ–¥–µ–Ω–∏–π —É Java 7 —Ä–∞–∑–æ–º –∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é `try-with-resources`, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î **–Ω–µ –≤—Ç—Ä–∞—á–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏**, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —è–∫—â–æ –≤ —Å–∞–º–æ–º—É `try` –±–ª–æ—Ü—ñ –≤–∂–µ –≤–∏–Ω–∏–∫ —ñ–Ω—à–∏–π, –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫.
>
> **–ü—Ä–æ–±–ª–µ–º–∞, —è–∫—É –≤–æ–Ω–∏ –≤–∏—Ä—ñ—à—É—é—Ç—å:**
>
> –£ –∫–ª–∞—Å–∏—á–Ω—ñ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `try-catch-finally`, —è–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞–≤ —ñ –≤ `try`, —ñ –≤ `finally` –±–ª–æ—Ü—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏ `close()`), —Ç–æ **–≤–∏–Ω—è—Ç–æ–∫ –∑ `finally` "–ø–µ—Ä–µ–∫—Ä–∏–≤–∞–≤" —ñ –ø–æ–≤–Ω—ñ—Å—Ç—é "–∑–∞—Ç–∏—Ä–∞–≤" –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫**. –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–µ—Ä—à–æ–ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º–∏ –≤—Ç—Ä–∞—á–∞–ª–∞—Å—è.
>
> **–ú–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤:**
>
> `try-with-resources` –∑–±–µ—Ä—ñ–≥–∞—î **–ø–µ—Ä—à–∏–π –≤–∏–Ω—è—Ç–æ–∫ (–æ—Å–Ω–æ–≤–Ω–∏–π)**, –∞ –±—É–¥—å-—è–∫—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Ä–µ—Å—É—Ä—Å—ñ–≤, **–Ω–µ –∑–∞–º—ñ–Ω—é—é—Ç—å –π–æ–≥–æ**, –∞ **–¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –Ω—å–æ–≥–æ** —É —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ "–ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö".

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–¶–µ —è–∫ –∑–≤—ñ—Ç –ø—Ä–æ –î–¢–ü. –û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –∞–≤–∞—Ä—ñ—ó (`primary exception`) ‚Äî –≤—ñ–¥–º–æ–≤–∏–ª–∏ –≥–∞–ª—å–º–∞. –ê–ª–µ –∫–æ–ª–∏ –º–∞—à–∏–Ω—É –Ω–∞–º–∞–≥–∞–ª–∏—Å—è –µ–≤–∞–∫—É—é–≤–∞—Ç–∏, —É –Ω–µ—ó —â–µ –π –≤—ñ–¥–≤–∞–ª–∏–ª–æ—Å—è –∫–æ–ª–µ—Å–æ (`suppressed exception`). –£ –∑–≤—ñ—Ç—ñ –±—É–¥–µ –≤–∫–∞–∑–∞–Ω–æ —ñ –ø—Ä–æ –≥–∞–ª—å–º–∞, —ñ –ø—Ä–æ –∫–æ–ª–µ—Å–æ. –ù—ñ—á–æ–≥–æ –Ω–µ –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–æ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ë–∞–∑–æ–≤–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, –Ω–∞–≤—ñ—â–æ —Ü–µ–π –º–µ—Ö–∞–Ω—ñ–∑–º –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ ‚Äî –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤—Ç—Ä–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —Å–ø–∏—Å–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–µ—Ç–æ–¥ **`getSuppressed()`**, —è–∫–∏–π —î –≤ –∫–ª–∞—Å—ñ `java.lang.Throwable`.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
>
> 1. –¶–µ–π –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î **–º–∞—Å–∏–≤ `Throwable[]`**, —â–æ –º—ñ—Å—Ç–∏—Ç—å —É—Å—ñ –≤–∏–Ω—è—Ç–∫–∏, —è–∫—ñ –±—É–ª–∏ –ø—Ä–∏–¥—É—à–µ–Ω—ñ.
> 2. –Ø–∫—â–æ –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –Ω–µ –±—É–ª–æ, –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î **–ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤**.
> 3. –í–∏ –º–æ–∂–µ—Ç–µ —ñ—Ç–µ—Ä—É–≤–∞—Ç–∏—Å—è –ø–æ —Ü—å–æ–º—É –º–∞—Å–∏–≤—É, —â–æ–± –∑–∞–ª–æ–≥—É–≤–∞—Ç–∏ –∞–±–æ –æ–±—Ä–æ–±–∏—Ç–∏ –∫–æ–∂–Ω—É –∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**
>
> ```java
> catch (Exception primaryException) {
>     System.err.println("–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞: " + primaryException.getMessage());
>
>     // –û—Ç—Ä–∏–º—É—î–º–æ —Ç–∞ –≤–∏–≤–æ–¥–∏–º–æ –≤—Å—ñ –ø—Ä–∏–¥—É—à–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏
>     for (Throwable suppressed : primaryException.getSuppressed()) {
>         System.err.println("  –ü—Ä–∏–¥—É—à–µ–Ω–æ: " + suppressed.getMessage());
>     }
> }
> ```
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `try-catch` –ª–æ–≤–∏—Ç—å –ª–∏—à–µ –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, –∞ –≤–∂–µ –∑ –Ω—å–æ–≥–æ –º–æ–∂–Ω–∞ "–¥—ñ—Å—Ç–∞—Ç–∏" –≤—Å—ñ —ñ–Ω—à—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ API –∫–ª–∞—Å—É `Throwable`, –∑–æ–∫—Ä–µ–º–∞ –º–µ—Ç–æ–¥—ñ–≤ `getSuppressed()` —Ç–∞ `addSuppressed()`.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –≤–∏–Ω–∏–∫–Ω–µ –ª–∏—à–µ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Ä–µ—Å—É—Ä—Å—É, –∞ –Ω–µ –≤ `try` –±–ª–æ—Ü—ñ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ `try` –±–ª–æ–∫ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è **—É—Å–ø—ñ—à–Ω–æ**, –∞–ª–µ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–º—É –∑–∞–∫—Ä–∏—Ç—Ç—ñ —Ä–µ—Å—É—Ä—Å—É –º–µ—Ç–æ–¥ `close()` –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫, —Ç–æ **—Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫ —Å—Ç–∞–Ω–µ –æ—Å–Ω–æ–≤–Ω–∏–º**.
>
> **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–¥—ñ–π:**
>
> 1. `try` –±–ª–æ–∫ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫.
> 2. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` –≤–∏–∫–ª–∏–∫–∞—î `close()` –Ω–∞ —Ä–µ—Å—É—Ä—Å—ñ.
> 3. –ú–µ—Ç–æ–¥ `close()` –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `IOException`).
> 4. –¶–µ–π `IOException` –±—É–¥–µ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º `catch` –±–ª–æ–∫–æ–º (—è–∫—â–æ –≤—ñ–Ω —î), –∞–±–æ –ø—Ä–æ–∫–∏–Ω—É—Ç–æ –¥–∞–ª—ñ –ø–æ —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> try (MyResource r = new MyResource()) { // MyResource.close() –∫–∏–¥–∞—î IOException
>     System.out.println("–†–æ–±–æ—Ç–∞ –≤ try –≤–∏–∫–æ–Ω–∞–Ω–∞");
> } catch (IOException e) {
>     System.out.println("–ó–ª–æ–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É –∑ close(): " + e.getMessage());
> }
> ```
>
> **–í–∏–≤—ñ–¥:**
>
> ```
>
> –†–æ–±–æ—Ç–∞ –≤ try –≤–∏–∫–æ–Ω–∞–Ω–∞
> –ó–ª–æ–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É –∑ close(): ...
>
> ```
>
> –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Å–ø–∏—Å–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ –Ω–µ –±—É–¥–µ, –±–æ –±—É–ª–∞ –ª–∏—à–µ –æ–¥–Ω–∞ –ø–æ–º–∏–ª–∫–∞.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø—Ä–∞—Ü—é—î `try-with-resources`, –∫–æ–ª–∏ `try` –±–ª–æ–∫ "—á–∏—Å—Ç–∏–π".*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω—å—Ç–µ —Ç–∞–∫–∏–π –∫–æ–¥ –∑ –¥–≤–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏. –©–æ –±—É–¥–µ –æ—Å–Ω–æ–≤–Ω–∏–º, –∞ —â–æ –ø—Ä–∏–¥—É—à–µ–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º?

```java
// close() –¥–ª—è R1 –∫–∏–¥–∞—î ExceptionA
// close() –¥–ª—è R2 –∫–∏–¥–∞—î ExceptionB
try (Resource1 r1 = ...; Resource2 r2 = ...) {
    // try –±–ª–æ–∫ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
} catch (Exception e) { ... }
```

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–∫—ñ–ª—å–∫–∏ –≤ `try` –±–ª–æ—Ü—ñ –ø–æ–º–∏–ª–∫–∏ –Ω–µ–º–∞—î, –æ—Å–Ω–æ–≤–Ω–∏–º –≤–∏–Ω—è—Ç–∫–æ–º —Å—Ç–∞–Ω–µ **–ø–µ—Ä—à–∏–π –≤–∏–Ω—è—Ç–æ–∫, —â–æ –≤–∏–Ω–∏–∫ –ø—ñ–¥ —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è**.
>
> **–ü–æ—Ä—è–¥–æ–∫ –¥—ñ–π:**
>
> 1. –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É**: —Å–ø–æ—á–∞—Ç–∫—É `r2`, –ø–æ—Ç—ñ–º `r1`.
> 2. –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r2.close()`, —è–∫–∏–π –∫–∏–¥–∞—î `ExceptionB`. –¶–µ–π –≤–∏–Ω—è—Ç–æ–∫ —Å—Ç–∞—î **–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω–∏–π**.
> 3. –î–∞–ª—ñ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r1.close()`, —è–∫–∏–π –∫–∏–¥–∞—î `ExceptionA`. –û—Å–∫—ñ–ª—å–∫–∏ –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ –≤–∂–µ "–∑–∞—Ä–µ–∑–µ—Ä–≤–æ–≤–∞–Ω–æ", `ExceptionA` —Å—Ç–∞—î **–ø—Ä–∏–¥—É—à–µ–Ω–∏–º** —ñ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ `ExceptionB`.
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
>
> * **–û—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫** (—Ç–æ–π, —â–æ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É `catch (Exception e)`): `ExceptionB`.
> * **–ü—Ä–∏–¥—É—à–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫** (–¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ `e.getSuppressed()`): `ExceptionA`.
>
> –û—Ç–∂–µ, –≤ —Ä–∞–∑—ñ –∫—ñ–ª—å–∫–æ—Ö –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ, **–æ—Å–Ω–æ–≤–Ω–æ—é —Å—Ç–∞—î —Ç–∞, —â–æ —Å—Ç–∞–ª–∞—Å—è –ø–µ—Ä—à–æ—é** (—Ç–æ–±—Ç–æ, –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ –∑–Ω–∞–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—É –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –∫—ñ–ª—å–∫–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `try-finally` –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–í—Ä—É—á–Ω—É ‚Äî —Ç–∞–∫, –∞–ª–µ —Ü–µ –¥—É–∂–µ —Å–∫–ª–∞–¥–Ω–æ —ñ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è.**
>
> –ú–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ **–Ω–µ —î –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—é "–º–∞–≥—ñ—î—é" `try-with-resources`**. –¶–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å, –¥–æ–¥–∞–Ω–∞ –¥–æ —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—É `Throwable`.
>
> –í–∏ –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ **`addSuppressed(Throwable exception)`** –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É, —â–æ–± –¥–æ–¥–∞—Ç–∏ –¥–æ –Ω—å–æ–≥–æ –ø—Ä–∏–¥—É—à–µ–Ω—ñ.
>
> **–°–ø—Ä–æ–±–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –≤—Ä—É—á–Ω—É –≤–∏–≥–ª—è–¥–∞–ª–∞ –± –∂–∞—Ö–ª–∏–≤–æ:**
>
> ```java
> Throwable primaryException = null;
> try {
>     // ...
> } catch (Throwable e) {
>     primaryException = e;
>     throw e;
> } finally {
>     if (primaryException != null) {
>         try {
>             // ... –∑–∞–∫—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å
>         } catch (Throwable suppressed) {
>             primaryException.addSuppressed(suppressed);
>         }
>     } else {
>         // ... –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–∏—Ç–∏
>     }
> }
> ```
>
> –¶–µ–π –∫–æ–¥ —î —Å–∫–ª–∞–¥–Ω–∏–º, —Å—Ö–∏–ª—å–Ω–∏–º –¥–æ –ø–æ–º–∏–ª–æ–∫ —ñ –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–ª—é—Å—Ç—Ä—É—î, —á–æ–º—É **`try-with-resources` —î –∑–Ω–∞—á–Ω–æ –∫—Ä–∞—â–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º**. –í—ñ–Ω —ñ–Ω–∫–∞–ø—Å—É–ª—é—î –≤—Å—é —Ü—é —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É "–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `addSuppressed()` ‚Äî —Ü–µ –∑–∞–≥–∞–ª—å–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º, –∞–ª–µ `try-with-resources` ‚Äî —Ü–µ –∑—Ä—É—á–Ω–∏–π "—Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∏–π —Ü—É–∫–æ—Ä" –¥–ª—è –π–æ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥, –¥–µ –º–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–¥—É—à–µ–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É. ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –º–æ–∂–µ —Å—Ç–∞—Ç–∏—Å—è, —è–∫—â–æ —É –≤–∞—Å –±—ñ–ª—å—à–µ –¥–≤–æ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤, —ñ –≤—Å—ñ —ó—Ö–Ω—ñ –º–µ—Ç–æ–¥–∏ `close()` –∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫–∏, –ø–ª—é—Å –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞—î –≤ —Å–∞–º–æ–º—É `try` –±–ª–æ—Ü—ñ.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
>
> 1. `try` –±–ª–æ–∫ –∫–∏–¥–∞—î `ExceptionA`.
> 2. –ó–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å `r3`, `close()` –∫–∏–¥–∞—î `ExceptionB`.
> 3. –ó–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å `r2`, `close()` –∫–∏–¥–∞—î `ExceptionC`.
> 4. –ó–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å `r1`, `close()` –∫–∏–¥–∞—î `ExceptionD`.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:**
>
> ```java
> class NoisyResource implements AutoCloseable {
>     private String name;
>     public NoisyResource(String name) { this.name = name; }
>     public void close() throws Exception { throw new Exception("–ü–æ–º–∏–ª–∫–∞ –∑ " + name); }
> }
>
> try (NoisyResource r1 = new NoisyResource("R1");
>      NoisyResource r2 = new NoisyResource("R2");
>      NoisyResource r3 = new NoisyResource("R3")) {
>
>     throw new RuntimeException("–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞!");
>
> } catch (Exception e) {
>     System.out.println("–û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞: " + e.getMessage());
>     for (Throwable t : e.getSuppressed()) {
>         System.out.println("  –ü—Ä–∏–¥—É—à–µ–Ω–æ: " + t.getMessage());
>     }
> }
> ```
>
> **–í–∏–≤—ñ–¥:**
>
> ```
>
> –û—Å–Ω–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞: –û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞!
> –ü—Ä–∏–¥—É—à–µ–Ω–æ: –ü–æ–º–∏–ª–∫–∞ –∑ R3
> –ü—Ä–∏–¥—É—à–µ–Ω–æ: –ü–æ–º–∏–ª–∫–∞ –∑ R2
> –ü—Ä–∏–¥—É—à–µ–Ω–æ: –ü–æ–º–∏–ª–∫–∞ –∑ R1
>
> ```
>
> –Ø–∫ –≤–∏–¥–Ω–æ, `RuntimeException` —Å—Ç–∞–≤ –æ—Å–Ω–æ–≤–Ω–∏–º, –∞ –≤—Å—ñ —Ç—Ä–∏ –ø–æ–º–∏–ª–∫–∏ –∑ `close()` –±—É–ª–∏ –¥–æ–¥–∞–Ω—ñ –¥–æ –Ω—å–æ–≥–æ —è–∫ –ø—Ä–∏–¥—É—à–µ–Ω—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–Ω—è –¥–æ –±—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –∑ –∫—ñ–ª—å–∫–æ–º–∞ –¥–∂–µ—Ä–µ–ª–∞–º–∏ –ø–æ–º–∏–ª–æ–∫.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Ü–µ–π –∫–æ–¥ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º —ñ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –≤—Ç—Ä–∞—Ç–∏ –≤–∏–Ω—è—Ç–∫—É?

```java
finally {
    resource.close(); // –±–µ–∑ try-catch
}
```

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º, —Ç–æ–º—É —â–æ —è–∫—â–æ –≤ `try` –±–ª–æ—Ü—ñ –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫ `A`, –∞ –º–µ—Ç–æ–¥ `resource.close()` —É `finally` —Ç–∞–∫–æ–∂ –∫–∏–Ω–µ –≤–∏–Ω—è—Ç–æ–∫ `B`, —Ç–æ **`B` "–∑–∞—Ç—Ä–µ" `A`**, —ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–æ—á–∞—Ç–∫–æ–≤—É –ø—Ä–æ–±–ª–µ–º—É –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–∞.
>
> **–ü–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
>
> 1. –í `try` –∫–∏–¥–∞—î—Ç—å—Å—è `ExceptionA`.
> 2. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ `finally`.
> 3. –£ `finally` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `resource.close()`, —è–∫–∏–π –∫–∏–¥–∞—î `ExceptionB`.
> 4. **`ExceptionB` –Ω–µ–≥–∞–π–Ω–æ –ø—Ä–æ–∫–∏–¥–∞—î—Ç—å—Å—è** –∑ –º–µ—Ç–æ–¥—É.
>
> `ExceptionA`, —è–∫–∏–π –±—É–≤ "–Ω–∞ —à–ª—è—Ö—É" –Ω–∞–∑–æ–≤–Ω—ñ, –ø—Ä–æ—Å—Ç–æ –∑–Ω–∏–∫–∞—î. –¶–µ —ñ —î –ø—Ä–æ–±–ª–µ–º–∞, —è–∫—É –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏—Ä—ñ—à—É—î –º–µ—Ö–∞–Ω—ñ–∑–º –ø—Ä–∏–¥—É—à–µ–Ω–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤ —É `try-with-resources`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `finally` –æ–±—Ä–æ–±–ª—è—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —ñ —á–æ–º—É —Ü–µ–π –ø—ñ–¥—Ö—ñ–¥ —î —Ä–∏–∑–∏–∫–æ–≤–∞–Ω–∏–º.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π –∑–≤'—è–∑–æ–∫ –º—ñ–∂ `AutoCloseable` —Ç–∞ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—é? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ —Å–≤–æ–≥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω–∏–∫–∞ `java.io.Closeable`, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`AutoCloseable` –Ω–µ –≤–∏–º–∞–≥–∞—î, —â–æ–± –π–æ–≥–æ –º–µ—Ç–æ–¥ `close()` –±—É–≤ —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º**.
>
> * **–Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å** –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–æ–≤—Ç–æ—Ä–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ –º–µ—Ç–æ–¥—É –º–∞—é—Ç—å —Ç–∞–∫–∏–π —Å–∞–º–∏–π –µ—Ñ–µ–∫—Ç, —è–∫ —ñ –ø–µ—Ä—à–∏–π (–∞–±–æ –Ω–µ –º–∞—é—Ç—å –µ—Ñ–µ–∫—Ç—É –≤–∑–∞–≥–∞–ª—ñ).
> * –î–ª—è `Closeable.close()`, –ø–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –Ω—ñ—á–æ–≥–æ —Ä–æ–±–∏—Ç–∏ —ñ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫.
> * –î–ª—è `AutoCloseable.close()`, —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è **–¥–æ–∑–≤–æ–ª—è—î** –ø–æ–≤—Ç–æ—Ä–Ω–∏–º –≤–∏–∫–ª–∏–∫–∞–º –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `IllegalStateException`, —â–æ —Å–≤—ñ–¥—á–∏—Ç—å –ø—Ä–æ —Ç–µ, —â–æ —Ä–µ—Å—É—Ä—Å –≤–∂–µ –∑–∞–∫—Ä–∏—Ç–æ).
>
> **–ß–æ–º—É —Ç–∞–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è:**
>
> `AutoCloseable` –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ —è–∫ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤ –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É, –∞–ª–µ —ñ –¥–ª—è –±—É–¥—å-—è–∫–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤, —â–æ –≤–∏–º–∞–≥–∞—é—Ç—å –æ—á–∏—â–µ–Ω–Ω—è. –î–µ—è–∫—ñ –∑ —Ç–∞–∫–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –º–æ–∂—É—Ç—å –º–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—É –ª–æ–≥—ñ–∫—É –∑–∞–∫—Ä–∏—Ç—Ç—è, –¥–µ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫ `close()` —î –ø–æ–º–∏–ª–∫–æ—é –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞.
>
> –û–¥–Ω–∞–∫, **–Ω–∞–π–∫—Ä–∞—â–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é** –ø—Ä–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤–ª–∞—Å–Ω–æ–≥–æ `AutoCloseable` –≤—Å–µ —â–µ –≤–≤–∞–∂–∞—î—Ç—å—Å—è —Ä–æ–±–∏—Ç–∏ –º–µ—Ç–æ–¥ `close()` —ñ–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∏–º, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω–æ–∫.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ç–æ–Ω–∫–∏—Ö –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç–µ–π —É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ `catch` –±–ª–æ–∫ –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, –∞ –ø–æ—Ç—ñ–º —Å–∞–º –∫–∏–Ω–µ –Ω–æ–≤–∏–π, –∞ –≤ `finally` —Ç–∞–∫–æ–∂ –≤–∏–Ω–∏–∫–Ω–µ –≤–∏–Ω—è—Ç–æ–∫? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –£ —Ü—å–æ–º—É –¥—É–∂–µ —Å–∫–ª–∞–¥–Ω–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —è–∫ —ñ –≤ —ñ–Ω—à–∏—Ö, **–≤–∏–Ω—è—Ç–æ–∫ –∑ `finally` –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–º–∞–≥–∞—î**.
>
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ —Ç–∞–∫–∏–π –∫–æ–¥:
>
> ```java
> try { throw new Exception("A"); }
> catch (Exception e) { throw new RuntimeException("B"); }
> finally { throw new IllegalStateException("C"); }
> ```
>
> **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:**
>
> 1. `try` –∫–∏–¥–∞—î `Exception("A")`.
> 2. `catch` –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –π–æ–≥–æ.
> 3. `catch` –∫–∏–¥–∞—î –Ω–æ–≤–∏–π `RuntimeException("B")`. –¢–µ–ø–µ—Ä `Exception("A")` –≤—Ç—Ä–∞—á–µ–Ω–æ, —ñ –ø—Ä–æ–≥—Ä–∞–º–∞ –≥–æ—Ç—É—î—Ç—å—Å—è –ø—Ä–æ–∫–∏–Ω—É—Ç–∏ `RuntimeException("B")`.
> 4. **–ü–µ—Ä–µ–¥ —Ç–∏–º**, —è–∫ `RuntimeException("B")` –ø–æ–∫–∏–Ω–µ –º–µ—Ç–æ–¥, **–≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `finally`**.
> 5. `finally` –∫–∏–¥–∞—î —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π `IllegalStateException("C")`.
> 6. `IllegalStateException("C")` **–ø–µ—Ä–µ–∫—Ä–∏–≤–∞—î** `RuntimeException("B")`.
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó –º–µ—Ç–æ–¥—É –±—É–¥–µ –∫–∏–Ω—É—Ç–æ –ª–∏—à–µ `IllegalStateException("C")`. –í—Å—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ `A` —Ç–∞ `B` –±—É–¥–µ –≤—Ç—Ä–∞—á–µ–Ω–∞. –¶–µ –ø—ñ–¥–∫—Ä–µ—Å–ª—é—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ –∫–∏–¥–∞—Ç–∏ –≤–∏–Ω—è—Ç–∫–∏ –∑ `finally`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª "–æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Å–ª–æ–≤–∞" –¥–ª—è `finally` —É –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ `try-with-resources` –æ–±—Ä–æ–±–ª—è—î `null` —Ä–µ—Å—É—Ä—Å–∏? `try (Resource r = null) {}` ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í—ñ–Ω –æ–±—Ä–æ–±–ª—è—î —ó—Ö **–±–µ–∑–ø–µ—á–Ω–æ**. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` –º—ñ—Å—Ç–∏—Ç—å –Ω–µ—è–≤–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ `null`.
>
> **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:**
>
> * –ù–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ `try` –±–ª–æ–∫—É, –ø–µ—Ä–µ–¥ —Ç–∏–º —è–∫ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `close()` –Ω–∞ —Ä–µ—Å—É—Ä—Å—ñ, JVM –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –Ω–µ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—Å—É—Ä—Å `null`.
> * –Ø–∫—â–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è `null`, –º–µ—Ç–æ–¥ `close()` **–ø—Ä–æ—Å—Ç–æ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è**.
> * `NullPointerException` –Ω–µ –≤–∏–Ω–∏–∫–∞—î.
>
> –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –∑–Ω–∞—á–Ω–æ –Ω–∞–¥—ñ–π–Ω—ñ—à–∏–º, –Ω—ñ–∂ —Ä—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤ `finally`, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± –ø–∏—Å–∞—Ç–∏ `if (resource != null)` –ø–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º `close()`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è "–≤–±—É–¥–æ–≤–∞–Ω–∏—Ö" –ø–µ—Ä–µ–≤–∞–≥ `try-with-resources`, —è–∫—ñ —Ä–æ–±–ª—è—Ç—å –π–æ–≥–æ –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —è–≤–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ `addSuppressed()`? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ –¥–ª—è —á–æ–≥–æ? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞.** –ú–µ—Ç–æ–¥ `addSuppressed(Throwable t)` —î –ø—É–±–ª—ñ—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º –∫–ª–∞—Å—É `Throwable`.
>
> **–î–ª—è —á–æ–≥–æ —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
>
> –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –ø—Ä–∏–¥—É—à–µ–Ω–Ω—è —É –≤–ª–∞—Å–Ω–∏—Ö, –∫–∞—Å—Ç–æ–º–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö, —è–∫—ñ –Ω–µ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ `try-with-resources`.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:** –£ –≤–∞—Å —î –º–µ—Ç–æ–¥, —è–∫–∏–π –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π, —ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑—ñ–±—Ä–∞—Ç–∏ **–≤—Å—ñ –ø–æ–º–∏–ª–∫–∏**, —â–æ —Å—Ç–∞–ª–∏—Å—è, –∞ –Ω–µ –∑—É–ø–∏–Ω—è—Ç–∏—Å—è –Ω–∞ –ø–µ—Ä—à—ñ–π.
>
> ```java
> public void processAllTasks(List<Task> tasks) throws TaskProcessingException {
>     TaskProcessingException mainException = null;
>
>     for (Task task : tasks) {
>         try {
>             task.execute();
>         } catch (Exception e) {
>             if (mainException == null) {
>                 mainException = new TaskProcessingException("–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ", e);
>             } else {
>                 mainException.addSuppressed(e); // –î–æ–¥–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–º–∏–ª–∫–∏ —è–∫ –ø—Ä–∏–¥—É—à–µ–Ω—ñ
>             }
>         }
>     }
>
>     if (mainException != null) {
>         throw mainException;
>     }
> }
> ```
>
> –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –∑–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –≤–∏–Ω—è—Ç–∫–∏, —â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ —Ç–∞—Å–∫—ñ–≤. –ü–µ—Ä—à–∏–π –≤–∏–Ω—è—Ç–æ–∫ —Å—Ç–∞—î –æ—Å–Ω–æ–≤–Ω–∏–º, –∞ –≤—Å—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ ‚Äî –ø—Ä–∏–¥—É—à–µ–Ω–∏–º–∏. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –Ω–µ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ –∂–æ–¥–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø—Ä–∏–¥—É—à–µ–Ω–Ω—è —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑–∞ –º–µ–∂–∞–º–∏ `try-with-resources`.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î 3 —Ä–µ—Å—É—Ä—Å–∏ –≤ `try-with-resources`. –í–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞—î –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó **–ø–µ—Ä—à–æ–≥–æ**. –©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ `catch`/`finally` –±–ª–æ–∫–∞–º–∏? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞—î –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø–µ—Ä—à–æ–≥–æ —Ä–µ—Å—É—Ä—Å—É, —Ç–æ:
>
> 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–ª–æ–∫—É —Ä–µ—Å—É—Ä—Å—ñ–≤ **–Ω–µ–≥–∞–π–Ω–æ –ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å—è**.
> 2. **–Ü–Ω—à—ñ —Ä–µ—Å—É—Ä—Å–∏ (`r2`, `r3`) –Ω–µ –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ –≤–∑–∞–≥–∞–ª—ñ.**
> 3. –û—Å–∫—ñ–ª—å–∫–∏ –∂–æ–¥–µ–Ω —Ä–µ—Å—É—Ä—Å –Ω–µ –±—É–≤ —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π, **–Ω–µ–º–∞—î —á–æ–≥–æ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏**. –ù—ñ—è–∫—ñ –º–µ—Ç–æ–¥–∏ `close()` –Ω–µ –±—É–¥—É—Ç—å –≤–∏–∫–ª–∏–∫–∞–Ω—ñ.
> 4. –ü–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–¥—Ä–∞–∑—É –∂ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ `catch` –±–ª–æ–∫—É (—è–∫—â–æ –≤—ñ–Ω —î).
> 5. –ü—ñ—Å–ª—è `catch` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `finally` (—è–∫—â–æ –≤—ñ–Ω —î).
>
> ```java
> try (Resource r1 = new ResourceThatFails(); // –í–∏–Ω—è—Ç–æ–∫ —Ç—É—Ç
>      Resource r2 = new Resource()) {
>     // –¶–µ–π –∫–æ–¥ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è
> } catch (Exception e) {
>     // ...
> }
> ```
>
> **–ö–ª—é—á–æ–≤–∏–π –º–æ–º–µ–Ω—Ç:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ª–∏—à–µ –¥–æ **—É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö** —Ä–µ—Å—É—Ä—Å—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ —Ç–æ—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ —ó—ó –≤–ø–ª–∏–≤—É –Ω–∞ –ø–æ—Ç—ñ–∫ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `try-with-resources` –Ω–µ –ø—Ä–∞—Ü—é—î –¥–ª—è –∑–º—ñ–Ω–Ω–∏—Ö, —è–∫—ñ –Ω–µ —î `final` –∞–±–æ `effectively final` (–∑ Java 9+)? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –í–∏–º–æ–≥–∞, —â–æ–± —Ä–µ—Å—É—Ä—Å –±—É–≤ `final` –∞–±–æ `effectively final`, —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—é –¥–ª—è **–≥–∞—Ä–∞–Ω—Ç—É–≤–∞–Ω–Ω—è —Ç–æ–≥–æ, —â–æ —Ä–µ—Å—É—Ä—Å, —è–∫–∏–π –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, —î —Ç–∏–º —Å–∞–º–∏–º —Ä–µ—Å—É—Ä—Å–æ–º, —è–∫–∏–π –±—É–≤ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π**.
>
> **–ü—Ä–æ–±–ª–µ–º–∞, —è–∫—É —Ü–µ –∑–∞–ø–æ–±—ñ–≥–∞—î:**
>
> –£—è–≤—ñ–º–æ, —â–æ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–æ—î–Ω–Ω—è –±—É–ª–æ –± –¥–æ–∑–≤–æ–ª–µ–Ω–æ.
>
> ```java
> Resource r = new Resource1();
> try (r) {
>     // ...
>     // –ù–ï–ó–ê–ö–û–ù–ù–ï –ü–ï–†–ï–ü–†–ò–°–í–û–Ñ–ù–ù–Ø:
>     r = new Resource2();
>     // ...
> }
> ```
>
> * –ù–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ –±–ª–æ–∫—É `try`, —è–∫–∏–π –æ–±'—î–∫—Ç `r` –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∑–∞–∫—Ä–∏—Ç–∏–π? `Resource1` —á–∏ `Resource2`?
> * –Ø–∫–±–∏ –∑–∞–∫—Ä–∏–≤–∞–≤—Å—è `Resource2`, —Ç–æ **`Resource1` –∑–∞–ª–∏—à–∏–≤—Å—è –± –Ω–µ–∑–∞–∫—Ä–∏—Ç–∏–º**, —â–æ –ø—Ä–∏–∑–≤–µ–ª–æ –± –¥–æ –≤–∏—Ç–æ–∫—É —Ä–µ—Å—É—Ä—Å—ñ–≤.
> * –Ø–∫–±–∏ –∑–∞–∫—Ä–∏–≤–∞–≤—Å—è `Resource1`, —Ü–µ –±—É–ª–æ –± –Ω–µ–ª–æ–≥—ñ—á–Ω–æ, –±–æ –∑–º—ñ–Ω–Ω–∞ `r` –≤–∂–µ –≤–∫–∞–∑—É—î –Ω–∞ —ñ–Ω—à–∏–π –æ–±'—î–∫—Ç.
>
> –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Ç–∞–∫–æ—ó –ø–ª—É—Ç–∞–Ω–∏–Ω–∏ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏, —â–æ –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –∑–∞–∫—Ä–∏—Ç–æ —Å–∞–º–µ —Ç–æ–π —Ä–µ—Å—É—Ä—Å, —â–æ –±—É–≤ –ø–µ—Ä–µ–¥–∞–Ω–∏–π —É –±–ª–æ–∫, Java –≤–∏–º–∞–≥–∞—î, —â–æ–± –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ –Ω–µ –∑–º—ñ–Ω—é–≤–∞–ª–æ—Å—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –¥–∏–∑–∞–π–Ω–µ—Ä—Å—å–∫–∏—Ö —Ä—ñ—à–µ–Ω—å, —â–æ —Å—Ç–æ—è—Ç—å –∑–∞ –Ω–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏ –º–æ–≤–∏, —Ç–∞ —ó—Ö–Ω—é —Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ—Å—Ç—å –Ω–∞ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –∫–æ–¥—É.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π `AutoCloseable`, —É —è–∫–æ–≥–æ –º–µ—Ç–æ–¥ `close()` –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç—å? –Ø–∫—â–æ —Ç–∞–∫, —á–∏ —î –≤ —Ü—å–æ–º—É —Å–µ–Ω—Å? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞.** –¶–µ –Ω–µ –ø–æ—Ä—É—à—É—î –∂–æ–¥–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª –º–æ–≤–∏.
>
> ```java
> public class DummyResource implements AutoCloseable {
>     @Override
>     public void close() {
>         // –ü—É—Å—Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è
>     }
> }
> ```
>
> **–ß–∏ —î –≤ —Ü—å–æ–º—É —Å–µ–Ω—Å?**
>
> –ù–∞ –ø–µ—Ä—à–∏–π –ø–æ–≥–ª—è–¥, —Ü–µ –±–µ–∑–≥–ª—É–∑–¥–æ. –û–¥–Ω–∞–∫, —ñ—Å–Ω—É—é—Ç—å –¥—É–∂–µ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, –¥–µ —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–∏–º, –∑–∞–∑–≤–∏—á–∞–π –ø—Ä–∏ **—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ** –∞–±–æ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è **null-–æ–±'—î–∫—Ç—ñ–≤**.
>
> **–ü—Ä–∏–∫–ª–∞–¥: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
>
> –£—è–≤—ñ—Ç—å, –≤–∏ —Ç–µ—Å—Ç—É—î—Ç–µ –º–µ—Ç–æ–¥, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î `InputStream`. –£ —Ç–µ—Å—Ç—ñ –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º —Ñ–∞–π–ª–æ–º, –∞–ª–µ –º–µ—Ç–æ–¥ –≤–∏–º–∞–≥–∞—î `InputStream`. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–º—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `ByteArrayInputStream`, —ñ –≤–∞–º –±–∞–π–¥—É–∂–µ, —á–∏ –±—É–¥–µ –≤—ñ–Ω –∑–∞–∫—Ä–∏—Ç–æ.
>
> –ê–ª–µ, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ "–∑–∞–≥–ª—É—à–∫—É" (`stub`), —è–∫–∞ –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É, –∞–ª–µ –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç—å, –ø–æ—Ä–æ–∂–Ω—ñ–π `close()` —î —á–∞—Å—Ç–∏–Ω–æ—é —Ü—å–æ–≥–æ.
>
> **–ü—Ä–∏–∫–ª–∞–¥: Null Object Pattern**
>
> –Ü–Ω–æ–¥—ñ –∑–∞–º—ñ—Å—Ç—å –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `null` –º–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π "–Ω—É–ª—å–æ–≤–∏–π" –æ–±'—î–∫—Ç, —è–∫–∏–π –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç—å.
>
> ```java
> class NullResource implements Resource {
>     public void doWork() { /* –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏ */ }
>     public void close() { /* –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏ */ }
> }
> ```
>
> –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ–º—É –∫–æ–¥—É –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–∏–º, –Ω–µ –¥–æ–¥–∞—é—á–∏ `if (resource != null)`.
>
> –í—Ç—ñ–º, —É –ø–µ—Ä–µ–≤–∞–∂–Ω—ñ–π –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ `AutoCloseable` —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –¥–ª—è –∫–ª–∞—Å—ñ–≤, —â–æ —Å–ø—Ä–∞–≤–¥—ñ –∫–µ—Ä—É—é—Ç—å —Å–∏—Å—Ç–µ–º–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –º–∏—Å–ª–∏—Ç–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ, –∑–Ω–∞—Ö–æ–¥—è—á–∏ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥–ª—è, –Ω–∞ –ø–µ—Ä—à–∏–π –ø–æ–≥–ª—è–¥, –Ω–µ–ª–æ–≥—ñ—á–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –≤–∏–≤–µ–¥–µ —Ü–µ–π –∫–æ–¥ —ñ —á–æ–º—É?
`try(MyResource r = new MyResource()){return;} finally{System.out.println("Finally");}` ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–í–∏–≤—ñ–¥:**
>
> ```
> Closing MyResource
> Finally
> ```
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è (–¥—É–∂–µ —Ç–æ–Ω–∫–∏–π –º–æ–º–µ–Ω—Ç):**
>
> –¶–µ–π –∫–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∑–∞—î–º–æ–¥—ñ—é —Ç—Ä—å–æ—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π: `try-with-resources`, `return` —Ç–∞ `finally`.
>
> **–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
>
> 1. –†–µ—Å—É—Ä—Å `r` —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.
> 2. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è `try` –±–ª–æ–∫. –ó—É—Å—Ç—Ä—ñ—á–∞—î—Ç—å—Å—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è **`return`**.
> 3. –ú–µ—Ç–æ–¥ –≥–æ—Ç—É—î—Ç—å—Å—è –¥–æ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è, –∞–ª–µ –ø–µ—Ä–µ–¥ —Ü–∏–º –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–∫–æ–Ω–∞—Ç–∏ **–æ–±–∏–¥–≤—ñ** –¥—ñ—ó –ø–æ –æ—á–∏—â–µ–Ω–Ω—é.
> 4. –°–ø–æ—á–∞—Ç–∫—É —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –º–µ—Ö–∞–Ω—ñ–∑–º **`try-with-resources`**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `r.close()`. –ù–∞ –µ–∫—Ä–∞–Ω –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"Closing MyResource"`.
> 5. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **`finally` –±–ª–æ–∫**. –ù–∞ –µ–∫—Ä–∞–Ω –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `"Finally"`.
> 6. –Ü –ª–∏—à–µ –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —ñ `finally` –±–ª–æ–∫ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Å–≤–æ—é —Ä–æ–±–æ—Ç—É, –º–µ—Ç–æ–¥ —Ñ–∞–∫—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î `return`.
>
> **–í–∞–∂–ª–∏–≤–æ:** –ù–µ—è–≤–Ω–∏–π `finally` –≤—ñ–¥ `try-with-resources` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–¥–æ** —è–≤–Ω–æ–≥–æ `finally` –±–ª–æ–∫—É.
>
> –¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ –ø–æ–∫–∞–∑—É—î, —â–æ Java —Å—É–≤–æ—Ä–æ –¥–æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤—Å—ñ—Ö —Å–≤–æ—ó—Ö –≥–∞—Ä–∞–Ω—Ç—ñ–π —â–æ–¥–æ –æ—á–∏—â–µ–Ω–Ω—è, –≤–∏–∫–æ–Ω—É—é—á–∏ —ó—Ö —É –≤–∏–∑–Ω–∞—á–µ–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –º–µ—Ç–æ–¥.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ, –ø–æ-—Å–ø—Ä–∞–≤–∂–Ω—å–æ–º—É –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤.*
