---
layout: default
title: "Thread-safety —ñ immutable –æ–±‚Äô—î–∫—Ç–∏"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 7
---

# Thread-safety —ñ immutable –æ–±‚Äô—î–∫—Ç–∏

*   –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Immutable` –æ–±'—î–∫—Ç–∏ —î `thread-safe` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é, –æ—Å–∫—ñ–ª—å–∫–∏ —ó—Ö–Ω—ñ–π —Å—Ç–∞–Ω –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –¶–µ —É—Å—É–≤–∞—î –ø—Ä–æ–±–ª–µ–º–∏ –≥–æ–Ω–∫–∏ –∑–∞ –∑–º—ñ–Ω–Ω—ñ (`race conditions`) —Ç–∞ –ø–æ—Ç—Ä–µ–±—É –≤ —è–≤–Ω—ñ–π —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.
*   –ø–æ–Ω—è—Ç—Ç—è: `Thread-safety`, `concurrency`, `safe publishing`.
*   –ø—Ä–∏–∫–ª–∞–¥–∏: `String`, `Integer`, `LocalDate` ‚Äì –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
*   –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å `race conditions`, –ª–µ–≥–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á—ñ –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ `safe publishing`.
*   —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ß–æ–º—É `immutable` —î `thread-safe`, `safe publishing`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**Thread-safety (–ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å)** ‚Äî —Ü–µ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –æ–±‚Äô—î–∫—Ç–∞ –∞–±–æ –º–µ—Ç–æ–¥—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø—ñ –∑ –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–Ø–∫—â–æ **–∫—ñ–ª—å–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤** –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–∏–Ω –æ–±‚Äô—î–∫—Ç **–±–µ–∑ –≤–∑–∞—î–º–Ω–æ–≥–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è —á–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤**, ‚Äî –≤—ñ–Ω **thread-safe**. Immutable –æ–±'—î–∫—Ç–∏ –¥–æ—Å—è–≥–∞—é—Ç—å —Ü—å–æ–≥–æ "–∑ –∫–æ—Ä–æ–±–∫–∏", –±–æ... –Ω—É, —ó—Ö –ø—Ä–æ—Å—Ç–æ –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ üíé.


---

## **üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è thread-safe –ø—ñ–¥—Ö–æ–¥—ñ–≤:**



| –ü—ñ–¥—Ö—ñ–¥ | Thread-safe? | –ü–æ—Ç—Ä–µ–±—É—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó? | –ü—Ä–∏–∫–ª–∞–¥ |
| :---: | :---: | :---: | :---: |
| **Immutable –æ–±'—î–∫—Ç–∏** | ‚úÖ | ‚ùå | **`String, Integer, LocalDate`** |
| **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –±–ª–æ–∫–∏** | ‚úÖ | ‚úÖ | **`synchronized`** –º–µ—Ç–æ–¥–∏ |
| **Volatile –ø–æ–ª—è** | –ß–∞—Å—Ç–∫–æ–≤–æ | –ó–∞–ª–µ–∂–∏—Ç—å | –ó–º—ñ–Ω–Ω—ñ –≤–∏–¥–∏–º—ñ –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏ |
| **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó** | ‚úÖ | ‚ùå | **`ConcurrentHashMap`** |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

**–£—è–≤–∏ –ø–µ–ª—å–º–µ–Ω–Ω—É üçΩÔ∏è.**

* –Ø–∫—â–æ **immutable –æ–±‚Äô—î–∫—Ç** ‚Äî —Ü–µ –∑–∞–º–æ—Ä–æ–∂–µ–Ω—ñ –ø–µ–ª—å–º–µ–Ω—ñ ü•∂: –Ω—ñ—Ö—Ç–æ —ó—Ö –Ω–µ –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏, —Ç–æ–∂ –Ω–µ —Ç—Ä–µ–±–∞ –¥–æ–º–æ–≤–ª—è—Ç–∏—Å—å, —Ö—Ç–æ –∫–æ–ª–∏ —ó—Ö –ª—ñ–ø–∏—Ç—å.
* –Ø–∫—â–æ mutable ‚Äî —Ç—Ä–µ–±–∞ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —á–µ—Ä–≥—É, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è, mutex'–∏ –π –Ω–µ—Ä–≤–æ–≤–∏–π —Ç–∏–∫.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// Immutable –∫–ª–∞—Å -- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ thread-safe
public final class Money {
    private final int amount;
    private final String currency;

    public Money(int amount, String currency) {
        this.amount = amount;
        this.currency = currency;
    }

    public int getAmount() { return amount; }
    public String getCurrency() { return currency; }
}
```
* –ñ–æ–¥–µ–Ω –ø–æ—Ç—ñ–∫ –Ω–µ –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ **`amount`** –∞–±–æ **`currency`** –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.

* **–ë–µ–∑ –∂–æ–¥–Ω–æ–≥–æ synchronized** –≤—Å–µ –ø—Ä–∞—Ü—é—î –±–µ–∑–ø–µ—á–Ω–æ.

---

## ** –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Immutable –æ–±'—î–∫—Ç–∏ | Mutable \+ synchronized |
| :---: | :---: | :---: |
| **Thread-safe –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑—É—Å–∏–ª—å** | ‚úÖ | ‚ùå (–ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è) |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | –í–∏—â–∞ | –ù–∏–∂—á–∞ —á–µ—Ä–µ–∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è |
| **–£—Å–∫–ª–∞–¥–Ω–µ–Ω—ñ—Å—Ç—å –∫–æ–¥—É** | –ù–∏–∑—å–∫–∞ | –í–∏—Å–æ–∫–∞ (lock, unlock, race conditions) |
| **–ì–∞—Ä–∞–Ω—Ç—ñ—ó –±–µ–∑–ø–µ–∫–∏** | –°—Ç–∞—Ç–∏—á–Ω—ñ | –î–∏–Ω–∞–º—ñ—á–Ω—ñ (runtime errors –º–æ–∂–ª–∏–≤—ñ) |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É immutable –æ–±‚Äô—î–∫—Ç–∏ thread-safe? ‚≠êÔ∏è‚≠êÔ∏è**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**





–¢–æ–º—É —â–æ —ó—Ö **—Å—Ç–∞–Ω –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è** –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –í—Å—ñ –ø–æ—Ç–æ–∫–∏ —á–∏—Ç–∞—é—Ç—å –æ–¥–Ω—ñ –π —Ç—ñ —Å–∞–º—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, –æ—Ç–∂–µ **–Ω–µ –≤–∏–Ω–∏–∫–∞—î –≥–æ–Ω–∫–∏ –∑–∞ –∑–º—ñ–Ω–Ω—ñ**.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏—á–∏–Ω, —á–æ–º—É –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å –≤–µ–¥–µ –¥–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ—Å—Ç—ñ.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –©–æ —Ç–∞–∫–µ "safe publishing" —ñ —è–∫ —Ü–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è immutable –æ–±‚Äô—î–∫—Ç—ñ–≤? ‚≠êÔ∏è**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**





Safe publishing ‚Äî –≥–∞—Ä–∞–Ω—Ç—ñ—è —Ç–æ–≥–æ, —â–æ –æ–±‚Äô—î–∫—Ç –±—É–¥–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —Å–∫–æ–Ω—Å—Ç—Ä—É–π–æ–≤–∞–Ω–∏–π —ñ –≤–∏–¥–∏–º–∏–π –≤—Å—ñ–º –ø–æ—Ç–æ–∫–∞–º —É —Å—Ç–∞–±—ñ–ª—å–Ω–æ–º—É —Å—Ç–∞–Ω—ñ.  
–Ø–∫—â–æ –æ–±‚Äô—î–∫—Ç immutable —ñ –ø–µ—Ä–µ–¥–∞–Ω–∏–π —á–µ—Ä–µ–∑ **`final`** –ø–æ—Å–∏–ª–∞–Ω–Ω—è ‚Äî safe publishing –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ –ø–∞–º'—è—Ç–∫–æ–≤—É –º–æ–¥–µ–ª—å Java —Ç–∞ –≤–∏–¥–∏–º—ñ—Å—Ç—å –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ö–æ–ª–∏ immutable –æ–±‚Äô—î–∫—Ç–∏ –Ω–µ –ø—ñ–¥—Ö–æ–¥—è—Ç—å —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—ñ?**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**





–ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω **–¥—É–∂–µ —á–∞—Å—Ç–æ** (–Ω–∞–ø—Ä. –ª—ñ—á–∏–ª—å–Ω–∏–∫) ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö immutable –æ–±'—î–∫—Ç—ñ–≤ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º. –£ —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`AtomicInteger`**, **`ConcurrentHashMap`** —Ç–æ—â–æ.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–£–º—ñ–Ω–Ω—è –≤–∏–±–∏—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—ñ–¥ –∑–∞–¥–∞—á—É.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Immutable \= Invisible for Locks"**

* Immutable –æ–±‚Äô—î–∫—Ç—ñ–≤ **–Ω–µ –≤–∏–¥–Ω–æ** –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω—å, –±–æ –≤ –Ω–∏—Ö –Ω–µ–º–∞—î –∑–º—ñ–Ω.
* –ù—ñ—Ö—Ç–æ –Ω–µ –≤–æ—é—î –∑–∞ –∑–º—ñ–Ω–Ω—ñ, —è–∫—â–æ –Ω–µ–º–∞ –∑–º—ñ–Ω üëª.

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **Immutable –æ–±‚Äô—î–∫—Ç–∏ ‚Äî —Ü–µ –ø—Ä–∏—Ä–æ–¥–Ω–æ thread-safe**, –±–æ —ó—Ö –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏.
* –í–æ–Ω–∏ **–Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó**, –ª–µ–≥–∫–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏ –π –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å –±–µ–∑–ø–µ–∫—É.
* –í–∞–∂–ª–∏–≤–æ –≤–º—ñ—Ç–∏ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ —ó—Ö —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏** —ñ –∑–Ω–∞—Ç–∏, –∫–æ–ª–∏ –≤–æ–Ω–∏ **–∫—Ä–∞—â–∏–π –≤–∏–±—ñ—Ä** —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Brian Goetz: Java Concurrency in Practice ‚Äî Immutable Objects**](https://jcip.net)
* [**Oracle Docs: Java Memory Model**](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html)