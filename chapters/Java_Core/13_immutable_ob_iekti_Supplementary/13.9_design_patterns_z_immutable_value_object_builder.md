---
layout: default
title: "Design Patterns –∑ immutable (Value Object, Builder)"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 9
---

# Design Patterns –∑ immutable (Value Object, Builder)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Immutable` –æ–±'—î–∫—Ç–∏ –¥–æ–±—Ä–µ —ñ–Ω—Ç–µ–≥—Ä—É—é—Ç—å—Å—è –∑ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏ `Value Object` (–æ–±'—î–∫—Ç–∏, —â–æ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –ª–∏—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `Money`) —Ç–∞ `Builder Pattern` (–ø–æ–µ—Ç–∞–ø–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ –±–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ñ–≤).

* –ø–æ–Ω—è—Ç—Ç—è: `Value Object`, `Builder Pattern`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ö–ª–∞—Å `Money` (VO) –∑ –ø–æ–ª—è–º–∏ `amount` —Ç–∞ `currency`. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `User` —á–µ—Ä–µ–∑ `User.Builder().withName().withAge().build()`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:  `Builder` –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ `immutable` –æ–±'—î–∫—Ç–∏ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤. `Value Object` —î `immutable` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –Ø–∫ —Ü—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `immutable` –æ–±'—î–∫—Ç—ñ–≤.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Value Object (VO)** ‚Äî –æ–±‚Äô—î–∫—Ç –±–µ–∑ —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ, —â–æ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –ª–∏—à–µ **–∑–Ω–∞—á–µ–Ω–Ω—è–º –ø–æ–ª—ñ–≤**.
* **Builder Pattern** ‚Äî —à–∞–±–ª–æ–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤ –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º, –æ—Å–æ–±–ª–∏–≤–æ –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, **–Ω–µ –ø–æ—Ä—É—à—É—é—á–∏ –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å**.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* Value Object ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π –∂–∏–≤–µ –∑–∞—Ä–∞–¥–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, –∞ –Ω–µ —ñ–º–µ–Ω—ñ (—è–∫ **`Money`**, **`Coordinate`**, **`Email`**).
* Builder ‚Äî —Ü–µ —è–∫ LEGO: –æ–±–∏—Ä–∞—î—à –±–ª–æ–∫–∏ –π –æ—Ç—Ä–∏–º—É—î—à **immutable**\-—Ç–≤–æ—Ä—ñ–Ω–Ω—è, –±–µ–∑ –º—ñ–ª—å–π–æ–Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ–≤.

---

## **üìä –í–∑–∞—î–º–æ–¥—ñ—è —à–∞–±–ª–æ–Ω—ñ–≤:**

| –®–∞–±–ª–æ–Ω | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è | Immutable-–¥—Ä—É–∂–Ω—ñ–π? |
| :---: | :---: | :---: |
| **Value Object** | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∑–Ω–∞—á–µ–Ω–Ω—è –±–µ–∑ ID | ‚úÖ |
| **Builder** | –ü–æ–±—É–¥–æ–≤–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö immutable –æ–±'—î–∫—Ç—ñ–≤ | ‚úÖ |
| **Factory** | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É, –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ immutable | ‚úÖ |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **`Value Object`** ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è**, –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ **`equals`**, –∞ –Ω–µ **`==,`** —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∞—Ç–æ–º–∞—Ä–Ω–∞ —Å—É—Ç–Ω—ñ—Å—Ç—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **`Money(100, "USD")`**).
* **`Builder`** ‚Äî —Ü–µ **—Å—Ü–µ–Ω–∞—Ä—ñ–π –ø–æ–±—É–¥–æ–≤–∏**: –º–∏ –º–æ–∂–µ–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—Å—Ç—É–ø–æ–≤–æ, –∞–ª–µ –Ω–∞ –≤–∏—Ö–æ–¥—ñ –æ—Ç—Ä–∏–º–∞—î–º–æ **immutable –æ–±‚Äô—î–∫—Ç**.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üß± Value Object:**

```java
public final class Money {
    private final int amount;
    private final String currency;

    public Money(int amount, String currency) {
        this.amount = amount;
        this.currency = currency;
    }

    public int getAmount() {
        return amount;
    }

    public String getCurrency() {
        return currency;
    }

    @Override
    public boolean equals(Object o) { /* –ª–æ–≥—ñ–∫–∞ */ }

    @Override
    public int hashCode() { /* –ª–æ–≥—ñ–∫–∞ */ }
}
```

---

### **üèóÔ∏è Builder –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–µ–∑–º—ñ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—É:**

```java
public final class User {
    private final String name;
    private final int age;

    private User(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
    }

    public static class Builder {
        private String name;
        private int age;

        public Builder name(String name) {
            this.name = name;
            return this;
        }

        public Builder age(int age) {
            this.age = age;
            return this;
        }

        public User build() {
            return new User(this);
        }
    }

    public String getName() { return name; }
    public int getAge() { return age; }
}
```

**üß™ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```java
User user = new User.Builder()
    .name("Alice")
    .age(30)
    .build();
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Value Object | Builder |
| :---: | :---: | :---: |
| **–ú–µ—Ç–∞** | –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è | –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç |
| **–ù–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å** | –¢–∞–∫ | –¢–∞–∫ (–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ) |
| **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É JDK** | –ß–µ—Ä–µ–∑ record –∞–±–æ –≤—Ä—É—á–Ω—É | –í—Ä—É—á–Ω—É –∞–±–æ —á–µ—Ä–µ–∑ Lombok |
| **–ì–Ω—É—á–∫—ñ—Å—Ç—å** | –û–±–º–µ–∂–µ–Ω–∞ | –í–∏—Å–æ–∫–∞ |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É Builder ‚Äî —ñ–¥–µ–∞–ª—å–Ω–∏–π —Å—É–ø—É—Ç–Ω–∏–∫ immutable –∫–ª–∞—Å—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

Immutable –∫–ª–∞—Å –Ω–µ –º–æ–∂–µ –º–∞—Ç–∏ —Å–µ—Ç—Ç–µ—Ä—ñ–≤. –ê–ª–µ Builder –¥–æ–∑–≤–æ–ª—è—î **–≥–Ω—É—á–∫–æ —Å–∫–æ–Ω—Å—Ç—Ä—É—é–≤–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç**, –∞ –ø–æ—Ç—ñ–º "–∑–∞–∫—Ä–∏—Ç–∏" –π–æ–≥–æ –≤ –Ω–µ–∑–º—ñ–Ω–Ω–æ–º—É —Å—Ç–∞–Ω—ñ.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–£–º—ñ–Ω–Ω—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —á–∏—Å—Ç—ñ, –≥–Ω—É—á–∫—ñ –π thread-safe –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –±–µ–∑ –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ Value Object —Ä–µ–∞–ª—ñ–∑—É—î –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å? ‚≠êÔ∏è

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ú–∞—î **`final`** –ø–æ–ª—è, –Ω–µ–º–∞—î —Å–µ—Ç—Ç–µ—Ä—ñ–≤, –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î **`equals`** —Ç–∞ **`hashCode`**, –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è **–∑–Ω–∞—á–µ–Ω–Ω—è–º, –∞ –Ω–µ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—é**.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ü–µ–ø—Ç—É —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Value Object'—ñ–≤ —É –¥–æ–º–µ–Ω–Ω—ñ–π –º–æ–¥–µ–ª—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É DDD).

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ –ø–æ—î–¥–Ω–∞—Ç–∏ –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å –∑ –≥–Ω—É—á–∫—ñ—Å—Ç—é?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ß–µ—Ä–µ–∑ **Builder –∞–±–æ Factory** ‚Äî –º–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É—î–º–æ –∑–º—ñ–Ω–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ –≤ –±—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫—É, –∞–ª–µ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±‚Äô—î–∫—Ç **immutable**.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–ó–Ω–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—ñ–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—é—Ç—å —Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–¥ —á–∏—Å—Ç–∏–º —ñ –±–µ–∑–ø–µ—á–Ω–∏–º, –Ω–µ –≤—Ç—Ä–∞—á–∞—é—á–∏ –∑—Ä—É—á–Ω–æ—Å—Ç—ñ.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Builder builds ‚Äî Immutable chills"**

–ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫ –ø—Ä–∞—Ü—é—î ‚Äî –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è
---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* Immutable –∫–ª–∞—Å–∏ —ñ–¥–µ–∞–ª—å–Ω–æ –ø–æ—î–¥–Ω—É—é—Ç—å—Å—è –∑ **Value Object** —Ç–∞ **Builder** —à–∞–±–ª–æ–Ω–∞–º–∏.
* Builder –¥–æ–∑–≤–æ–ª—è—î **–∑—Ä—É—á–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏** —Å–∫–ª–∞–¥–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤.
* Value Object ‚Äî –Ω–µ–∑–º—ñ–Ω–Ω—ñ, —Ä—ñ–≤–Ω—ñ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º, —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —è–∫ –∫–ª—é—á—ñ, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–æ—â–æ.
* –¶–µ –ø—ñ–¥–≤–∏—â—É—î **—á–∏—Å—Ç–æ—Ç—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏**, **–ø—Ä–æ—Å—Ç–æ—Ç—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** —Ç–∞ **–±–µ–∑–ø–µ–∫—É –≤ –ø–æ—Ç–æ–∫–∞—Ö**.
