---
layout: default
title: "Design Patterns –∑ immutable (Value Object, Builder)"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 9
---

# Design Patterns –∑ immutable (Value Object, Builder)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Immutable` –æ–±'—î–∫—Ç–∏ –¥–æ–±—Ä–µ —ñ–Ω—Ç–µ–≥—Ä—É—é—Ç—å—Å—è –∑ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏ `Value Object` (–æ–±'—î–∫—Ç–∏, —â–æ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –ª–∏—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `Money`) —Ç–∞ `Builder Pattern` (–ø–æ–µ—Ç–∞–ø–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ –±–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ñ–≤).

* –ø–æ–Ω—è—Ç—Ç—è: `Value Object`, `Builder Pattern`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ö–ª–∞—Å `Money` (VO) –∑ –ø–æ–ª—è–º–∏ `amount` —Ç–∞ `currency`. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `User` —á–µ—Ä–µ–∑ `User.Builder().withName().withAge().build()`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:  `Builder` –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ `immutable` –æ–±'—î–∫—Ç–∏ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤. `Value Object` —î `immutable` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –Ø–∫ —Ü—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `immutable` –æ–±'—î–∫—Ç—ñ–≤.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Value Object (VO)** ‚Äî –æ–±‚Äô—î–∫—Ç –±–µ–∑ —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—ñ, —â–æ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è –ª–∏—à–µ **–∑–Ω–∞—á–µ–Ω–Ω—è–º –ø–æ–ª—ñ–≤**.
* **Builder Pattern** ‚Äî —à–∞–±–ª–æ–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤ –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º, –æ—Å–æ–±–ª–∏–≤–æ –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, **–Ω–µ –ø–æ—Ä—É—à—É—é—á–∏ –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å**.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* Value Object ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π –∂–∏–≤–µ –∑–∞—Ä–∞–¥–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, –∞ –Ω–µ —ñ–º–µ–Ω—ñ (—è–∫ **`Money`**, **`Coordinate`**, **`Email`**).
* Builder ‚Äî —Ü–µ —è–∫ LEGO: –æ–±–∏—Ä–∞—î—à –±–ª–æ–∫–∏ –π –æ—Ç—Ä–∏–º—É—î—à **immutable**\-—Ç–≤–æ—Ä—ñ–Ω–Ω—è, –±–µ–∑ –º—ñ–ª—å–π–æ–Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ–≤.

---

## **üìä –í–∑–∞—î–º–æ–¥—ñ—è —à–∞–±–ª–æ–Ω—ñ–≤:**

| –®–∞–±–ª–æ–Ω | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è | Immutable-–¥—Ä—É–∂–Ω—ñ–π? |
| :---: | :---: | :---: |
| **Value Object** | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∑–Ω–∞—á–µ–Ω–Ω—è –±–µ–∑ ID | ‚úÖ |
| **Builder** | –ü–æ–±—É–¥–æ–≤–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö immutable –æ–±'—î–∫—Ç—ñ–≤ | ‚úÖ |
| **Factory** | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É, –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ immutable | ‚úÖ |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **`Value Object`** ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è**, –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ **`equals`**, –∞ –Ω–µ **`==,`** —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∞—Ç–æ–º–∞—Ä–Ω–∞ —Å—É—Ç–Ω—ñ—Å—Ç—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **`Money(100, "USD")`**).
* **`Builder`** ‚Äî —Ü–µ **—Å—Ü–µ–Ω–∞—Ä—ñ–π –ø–æ–±—É–¥–æ–≤–∏**: –º–∏ –º–æ–∂–µ–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—Å—Ç—É–ø–æ–≤–æ, –∞–ª–µ –Ω–∞ –≤–∏—Ö–æ–¥—ñ –æ—Ç—Ä–∏–º–∞—î–º–æ **immutable –æ–±‚Äô—î–∫—Ç**.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üß± Value Object:**

```java
public final class Money {
    private final int amount;
    private final String currency;

    public Money(int amount, String currency) {
        this.amount = amount;
        this.currency = currency;
    }

    public int getAmount() {
        return amount;
    }

    public String getCurrency() {
        return currency;
    }

    @Override
    public boolean equals(Object o) { /* –ª–æ–≥—ñ–∫–∞ */ }

    @Override
    public int hashCode() { /* –ª–æ–≥—ñ–∫–∞ */ }
}
```

---

### **üèóÔ∏è Builder –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–µ–∑–º—ñ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—É:**

```java
public final class User {
    private final String name;
    private final int age;

    private User(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
    }

    public static class Builder {
        private String name;
        private int age;

        public Builder name(String name) {
            this.name = name;
            return this;
        }

        public Builder age(int age) {
            this.age = age;
            return this;
        }

        public User build() {
            return new User(this);
        }
    }

    public String getName() { return name; }
    public int getAge() { return age; }
}
```

**üß™ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```java
User user = new User.Builder()
    .name("Alice")
    .age(30)
    .build();
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Value Object | Builder |
| :---: | :---: | :---: |
| **–ú–µ—Ç–∞** | –ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è | –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –æ–±'—î–∫—Ç |
| **–ù–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å** | –¢–∞–∫ | –¢–∞–∫ (–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ) |
| **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É JDK** | –ß–µ—Ä–µ–∑ record –∞–±–æ –≤—Ä—É—á–Ω—É | –í—Ä—É—á–Ω—É –∞–±–æ —á–µ—Ä–µ–∑ Lombok |
| **–ì–Ω—É—á–∫—ñ—Å—Ç—å** | –û–±–º–µ–∂–µ–Ω–∞ | –í–∏—Å–æ–∫–∞ |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"Builder builds ‚Äî Immutable chills"**

–ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫ –ø—Ä–∞—Ü—é—î ‚Äî –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* Immutable –∫–ª–∞—Å–∏ —ñ–¥–µ–∞–ª—å–Ω–æ –ø–æ—î–¥–Ω—É—é—Ç—å—Å—è –∑ **Value Object** —Ç–∞ **Builder** —à–∞–±–ª–æ–Ω–∞–º–∏.
* Builder –¥–æ–∑–≤–æ–ª—è—î **–∑—Ä—É—á–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏** —Å–∫–ª–∞–¥–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤.
* Value Object ‚Äî –Ω–µ–∑–º—ñ–Ω–Ω—ñ, —Ä—ñ–≤–Ω—ñ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º, —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —è–∫ –∫–ª—é—á—ñ, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–æ—â–æ.
* –¶–µ –ø—ñ–¥–≤–∏—â—É—î **—á–∏—Å—Ç–æ—Ç—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏**, **–ø—Ä–æ—Å—Ç–æ—Ç—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** —Ç–∞ **–±–µ–∑–ø–µ–∫—É –≤ –ø–æ—Ç–æ–∫–∞—Ö**.

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `try-with-resources` —ñ —è–∫—É –ø—Ä–æ–±–ª–µ–º—É –≤–æ–Ω–∞ –≤–∏—Ä—ñ—à—É—î?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`try-with-resources`** ‚Äî —Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤, –≤–≤–µ–¥–µ–Ω–∞ –≤ Java 7, —è–∫–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î —Ä–µ—Å—É—Ä—Å–∏** –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –∑ –Ω–∏–º–∏.
>
> **–ü—Ä–æ–±–ª–µ–º–∞, —è–∫—É –≤–æ–Ω–∞ –≤–∏—Ä—ñ—à—É—î:**
>
> –î–æ Java 7, –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (—Ç–∞–∫–∏—Ö —è–∫ —Ñ–∞–π–ª–æ–≤—ñ –ø–æ—Ç–æ–∫–∏, –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö) –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≥—Ä–æ–º—ñ–∑–¥–∫—ñ —Ç–∞ —Å—Ö–∏–ª—å–Ω—ñ –¥–æ –ø–æ–º–∏–ª–æ–∫ –±–ª–æ–∫–∏ `try-finally`. –†–æ–∑—Ä–æ–±–Ω–∏–∫ –º—ñ–≥ –ª–µ–≥–∫–æ –∑–∞–±—É—Ç–∏ –∑–∞–∫—Ä–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å –∞–±–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–∏—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫, —â–æ –≤–∏–Ω–∏–∫–∞–≤ —É –±–ª–æ—Ü—ñ `finally`, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ **–≤–∏—Ç–æ–∫—É —Ä–µ—Å—É—Ä—Å—ñ–≤ (resource leaks)**.
>
> `try-with-resources` –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î —Ü–µ–π –ø—Ä–æ—Ü–µ—Å, —Ä–æ–±–ª—è—á–∏ –∫–æ–¥ –∑–Ω–∞—á–Ω–æ —á–∏—Å—Ç—ñ—à–∏–º, –∫–æ—Ä–æ—Ç—à–∏–º —ñ –Ω–∞–¥—ñ–π–Ω—ñ—à–∏–º.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**</h4>

–¶–µ —è–∫ –≤–∑—è—Ç–∏ –≤ –æ—Ä–µ–Ω–¥—É –∞–≤—Ç–æ–º–æ–±—ñ–ª—å (`—Ä–µ—Å—É—Ä—Å`). `try-finally` ‚Äî —Ü–µ –∫–æ–ª–∏ –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –Ω–µ –∑–∞–±—É—Ç–∏ –≤–ª–∞—Å–Ω–æ—Ä—É—á –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∫–ª—é—á—ñ –Ω–∞ —Å—Ç—ñ–π–∫—É –ø—ñ—Å–ª—è –ø–æ—ó–∑–¥–∫–∏. `try-with-resources` ‚Äî —Ü–µ —è–∫ —Å—É—á–∞—Å–Ω–∏–π —Å–µ—Ä–≤—ñ—Å, –¥–µ –≤–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ª–∏—à–∞—î—Ç–µ –∞–≤—Ç–æ–º–æ–±—ñ–ª—å –Ω–∞ –ø–∞—Ä–∫–æ–≤—Ü—ñ, –∞ –≤—ñ–Ω —Å–∞–º –∑–∞–º–∏–∫–∞—î—Ç—å—Å—è —ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ—Ä–µ–Ω–¥–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è `try-with-resources` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–∞ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è —Ä–µ—Å—É—Ä—Å—ñ–≤ —Ç–∞ –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è —ó—Ö –≤–∏—Ç–æ–∫—É.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–æ–º—É —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∫–ª–∞—Å, —â–æ–± –π–æ–≥–æ –æ–±'—î–∫—Ç –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ `try-with-resources`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ö–ª–∞—Å –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`java.lang.AutoCloseable`**.
>
> –¶–µ–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞—î –ª–∏—à–µ –æ–¥–∏–Ω –º–µ—Ç–æ–¥: **`void close() throws Exception;`**.
>
> –ë—É–¥—å-—è–∫–∏–π –æ–±'—î–∫—Ç, –æ–≥–æ–ª–æ—à–µ–Ω–∏–π —É –¥—É–∂–∫–∞—Ö –±–ª–æ–∫—É `try-with-resources`, –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–æ–º –∫–ª–∞—Å—É, —â–æ —Ä–µ–∞–ª—ñ–∑—É—î `AutoCloseable`. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –±–ª–æ–∫—É `try` (–Ω–µ–≤–∞–∂–ª–∏–≤–æ, —É—Å–ø—ñ—à–Ω–æ —á–∏ –∑ –≤–∏–Ω—è—Ç–∫–æ–º), –¥–ª—è —Ü—å–æ–≥–æ –æ–±'—î–∫—Ç–∞ –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –º–µ—Ç–æ–¥ `close()`.
>
> –Ü—Å–Ω—É—î —Ç–∞–∫–æ–∂ –ø—ñ–¥—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `java.io.Closeable`, —è–∫–∏–π —Ä–æ–∑—à–∏—Ä—é—î `AutoCloseable`. –ô–æ–≥–æ –º–µ—Ç–æ–¥ `close()` –∫–∏–¥–∞—î –±—ñ–ª—å—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π `IOException`. –ë—ñ–ª—å—à—ñ—Å—Ç—å –∫–ª–∞—Å—ñ–≤ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ I/O (—è–∫-–æ—Ç `InputStream`, `OutputStream`, `Reader`, `Writer`) —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Å–∞–º–µ `Closeable`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∫–ª—é—á–æ–≤–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `AutoCloseable` —Ç–∞ –π–æ–≥–æ —Ä–æ–ª—ñ –≤ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ `try-with-resources`.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `try-with-resources` —ñ –ø–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –π–æ–≥–æ –∑ `try-finally`.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ `try-finally` (—Å—Ç–∞—Ä–∏–π –ø—ñ–¥—Ö—ñ–¥):**
>
> ```java
> BufferedReader reader = null;
> try {
>     reader = new BufferedReader(new FileReader("file.txt"));
>     String line = reader.readLine();
>     System.out.println(line);
> } catch (IOException e) {
>     e.printStackTrace();
> } finally {
>     if (reader != null) {
>         try {
>             reader.close();
>         } catch (IOException e) {
>             // –ù–µ –º–æ–∂–Ω–∞ –Ω—ñ—á–æ–≥–æ –∑—Ä–æ–±–∏—Ç–∏, —ñ–≥–Ω–æ—Ä—É—î–º–æ –∞–±–æ –ª–æ–≥—É—î–º–æ
>             e.printStackTrace();
>         }
>     }
> }
> ```
>
> –ö–æ–¥ –≥—Ä–æ–º—ñ–∑–¥–∫–∏–π, –º—ñ—Å—Ç–∏—Ç—å –≤–∫–ª–∞–¥–µ–Ω–∏–π `try-catch`, –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ `null`.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ `try-with-resources` (—Å—É—á–∞—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥):**
>
> ```java
> // –†–µ—Å—É—Ä—Å –æ–≥–æ–ª–æ—à—É—î—Ç—å—Å—è –≤ –¥—É–∂–∫–∞—Ö
> try (BufferedReader reader = new BufferedReader(new FileReader("file.txt"))) {
>     String line = reader.readLine();
>     System.out.println(line);
> } catch (IOException e) {
>     e.printStackTrace();
> }
> // `reader.close()` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏ –æ—á–µ–≤–∏–¥–Ω—ñ:**
>
> 1. –ö–æ–¥ –Ω–∞–±–∞–≥–∞—Ç–æ –∫–æ—Ä–æ—Ç—à–∏–π —ñ —á–∏—Å—Ç—ñ—à–∏–π.
> 2. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–∏ –≤ –±–ª–æ—Ü—ñ `finally` —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞—Ö –Ω–∞ `null`.
> 3. –ë—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (–≤–∫–ª—é—á–∞—é—á–∏ "–ø—Ä–∏–≥–Ω—ñ—á–µ–Ω—ñ").

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –Ω–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–¥ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –æ–±–æ—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ —Ç–∞ —á—ñ—Ç–∫–æ –ø–æ—è—Å–Ω–∏—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ —Å—É—á–∞—Å–Ω–æ–≥–æ.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤ –æ–¥–Ω–æ–º—É –±–ª–æ—Ü—ñ `try-with-resources`? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ —è–∫?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–Ω–∞. –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ —É –¥—É–∂–∫–∞—Ö `try`, —Ä–æ–∑–¥—ñ–ª–∏–≤—à–∏ —ó—Ö **–∫—Ä–∞–ø–∫–æ—é –∑ –∫–æ–º–æ—é (`;`)**.
>
> **–ü—Ä–∏–∫–ª–∞–¥ (–∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É):**
>
> ```java
> try (FileInputStream in = new FileInputStream("source.txt");
>      FileOutputStream out = new FileOutputStream("destination.txt")) {
>
>     byte[] buffer = new byte[1024];
>     int bytesRead;
>     while ((bytesRead = in.read(buffer)) != -1) {
>         out.write(buffer, 0, bytesRead);
>     }
> } catch (IOException e) {
>     e.printStackTrace();
> }
> ```
>
> –í–∞–∂–ª–∏–≤–∞ –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å: —Ä–µ—Å—É—Ä—Å–∏ –±—É–¥—É—Ç—å –∑–∞–∫—Ä–∏—Ç—ñ —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É** –¥–æ —ó—Ö —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ —Å–ø–æ—á–∞—Ç–∫—É –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `out.close()`, –∞ –ø–æ—Ç—ñ–º ‚Äî `in.close()`. –¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫, —è–∫–∏–π –∑–∞–ø–æ–±—ñ–≥–∞—î –ø—Ä–æ–±–ª–µ–º–∞–º —ñ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É —ó—Ö –∑–∞–∫—Ä–∏—Ç—Ç—è.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–µ `try-with-resources` –º–∞—Ç–∏ –±–ª–æ–∫–∏ `catch` —Ç–∞ `finally`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–µ. `try-with-resources` ‚Äî —Ü–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ `try`, —Ç–æ–º—É –≤—ñ–Ω –º–æ–∂–µ –º–∞—Ç–∏ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –±–ª–æ–∫–∏ `catch` —Ç–∞ `finally` —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ.
>
> **–ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
>
> 1. –û–≥–æ–ª–æ—à—É—é—Ç—å—Å—è —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å–∏.
> 2. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª–æ –±–ª–æ–∫—É `try`.
> 3. **(–Ø–∫—â–æ —î –≤–∏–Ω—è—Ç–æ–∫) –°–ø–µ—Ä—à—É –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å–∏.**
> 4. (–Ø–∫—â–æ —î –≤–∏–Ω—è—Ç–æ–∫) –ü–æ—Ç—ñ–º –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –±–ª–æ–∫ `catch`.
> 5. –ù–∞—Ä–µ—à—Ç—ñ, **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –±–ª–æ–∫ `finally`.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> try (MyResource resource = new MyResource()) {
>     System.out.println("–†–æ–±–æ—Ç–∞ –∑ —Ä–µ—Å—É—Ä—Å–æ–º...");
> } catch (Exception e) {
>     System.out.println("–û–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—É..."); // –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è close()
> } finally {
>     System.out.println("–ë–ª–æ–∫ finally..."); // –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ —Å–∞–º–æ–º—É –∫—ñ–Ω—Ü—ñ
> }
> ```
>
> –ë–ª–æ–∫ `finally` —É `try-with-resources` –º–æ–∂–µ –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–∏–º –¥–ª—è –¥—ñ–π, –Ω–µ –ø–æ–≤'—è–∑–∞–Ω–∏—Ö —ñ–∑ –∑–∞–∫—Ä–∏—Ç—Ç—è–º —Ä–µ—Å—É—Ä—Å—ñ–≤, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∞–±–æ –æ—á–∏—â–µ–Ω–Ω—è —è–∫–∏—Ö–æ—Å—å —ñ–Ω—à–∏—Ö —Å—Ç–∞–Ω—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `try-with-resources` –º–æ–∂–Ω–∞ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –∑ `catch` —Ç–∞ `finally`, —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Ä—è–¥–∫—É —ó—Ö –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–æ–º—É –ø–æ—Ä—è–¥–∫—É –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —Ä–µ—Å—É—Ä—Å–∏, –æ–≥–æ–ª–æ—à–µ–Ω—ñ –≤ `try-with-resources`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–µ—Å—É—Ä—Å–∏ –∑–∞–∫—Ä–∏–≤–∞—é—Ç—å—Å—è —É **–∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É** –¥–æ —ó—Ö –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> try (ResourceA resA = new ResourceA(); // 1. –°—Ç–≤–æ—Ä–µ–Ω–æ –ø–µ—Ä—à–∏–º
>      ResourceB resB = new ResourceB()) { // 2. –°—Ç–≤–æ—Ä–µ–Ω–æ –¥—Ä—É–≥–∏–º
>     // ...
> }
> ```
>
> **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä–∏—Ç—Ç—è –±—É–¥–µ —Ç–∞–∫–∏–º:**
>
> 1. –°–ø–æ—á–∞—Ç–∫—É –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `resB.close()`.
> 2. –ü–æ—Ç—ñ–º –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `resA.close()`.
>
> –¶–µ–π –ø–æ—Ä—è–¥–æ–∫ —î –ª–æ–≥—ñ—á–Ω–∏–º —ñ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º. –ß–∞—Å—Ç–æ –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —ñ–Ω—à–æ–≥–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `BufferedReader` "–æ–±–≥–æ—Ä—Ç–∞—î" `FileReader`). –Ø–∫—â–æ –± –≤–æ–Ω–∏ –∑–∞–∫—Ä–∏–≤–∞–ª–∏—Å—è –≤ –ø–æ—Ä—è–¥–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –º–∏ –º–æ–≥–ª–∏ –± —Å–ø—Ä–æ –ø–µ—Ä–µ–ø–ª—É—Ç–∞—Ç–∏.
>
> –û—Ç–∂–µ, –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ `Builder` —î –æ–≤–µ—Ä–∏–Ω–∂–∏–Ω—ñ—Ä–∏–Ω–≥–æ–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `Builder` –Ω–µ —î —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —Ä—ñ—à–µ–Ω–Ω—è–º, —ñ –≤–º—ñ–Ω–Ω—è –≤–∏–±—Ä–∞—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø–∞—Ç–µ—Ä–Ω, –∫–æ–ª–∏ –≤—ñ–Ω –±—ñ–ª—å—à –¥–æ—Ä–µ—á–Ω–∏–π.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–ª–∞—Å `Report` –∑ –ø–æ–ª—è–º–∏ `title` —ñ `data`, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ `Builder`. –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é, —â–æ–± `data` –Ω–µ –º–æ–≥–ª–∞ –±—É—Ç–∏ `null`, —è–∫—â–æ `title` ‚Äî "Full Report"? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫—É **–∫—Ä–æ—Å-–ø–æ–ª—ñ–≤–Ω—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—é** —Å–ª—ñ–¥ —Ä–æ–∑–º—ñ—â—É–≤–∞—Ç–∏ –≤ **–º–µ—Ç–æ–¥—ñ `build()`** –±—ñ–ª–¥–µ—Ä–∞.
>
> –¢—ñ–ª—å–∫–∏ –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –±—ñ–ª–¥–µ—Ä –º–∞—î –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—Å—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø–æ–ª—è —ñ –º–æ–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ó—Ö–Ω—é –≤–∑–∞—î–º–Ω—É –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å.
>
> **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
>
> ```java
> public static class Builder {
>     private String title;
>     private byte[] data;
>
>     // ... —Å–µ—Ç—Ç–µ—Ä–∏ withTitle(), withData() ...
>
>     public Report build() {
>         // –í–∞–ª—ñ–¥–∞—Ü—ñ—è
>         if ("Full Report".equals(this.title) && this.data == null) {
>             throw new IllegalStateException("–î–ª—è 'Full Report' –ø–æ–ª–µ data —î –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º.");
>         }
>
>         return new Report(this);
>     }
> }
> ```
>
> **–ß–æ–º—É –Ω–µ –≤ —Å–µ—Ç—Ç–µ—Ä–∞—Ö?**
> –Ø–∫–±–∏ –≤–∏ —Ä–æ–±–∏–ª–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –≤ `withTitle()`, –Ω–∞ —Ç–æ–π –º–æ–º–µ–Ω—Ç –ø–æ–ª–µ `data` –º–æ–≥–ª–æ –± —â–µ –Ω–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º. –Ø–∫–±–∏ —Ä–æ–±–∏–ª–∏ –≤ `withData()`, —Ç–æ `title` –º—ñ–≥ –±–∏ –∑–º—ñ–Ω–∏—Ç–∏—Å—è –ø—ñ–∑–Ω—ñ—à–µ. `build()` ‚Äî —î–¥–∏–Ω–µ –º—ñ—Å—Ü–µ, –¥–µ —Å—Ç–∞–Ω –±—ñ–ª–¥–µ—Ä–∞ —î —Ñ—ñ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `build()` —î —ñ–¥–µ–∞–ª—å–Ω–∏–º –º—ñ—Å—Ü–µ–º –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –æ–±'—î–∫—Ç–∞.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `Lombok` –∑ `@Builder` —ñ `@Value` –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ü–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `Lombok` **–∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥—É, –∑–Ω–∞—á–Ω–æ —Å–ø—Ä–æ—â—É—é—á–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é.
>
> **`@Value`**:
>
> * –°—Ç–≤–æ—Ä—é—î **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π `Value Object`**.
> * –†–æ–±–∏—Ç—å –∫–ª–∞—Å `final`.
> * –†–æ–±–∏—Ç—å –ø–æ–ª—è `private final`.
> * –ì–µ–Ω–µ—Ä—É—î –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ —É—Å—ñ–º–∞ –ø–æ–ª—è–º–∏, –≥–µ—Ç—Ç–µ—Ä–∏, `equals`, `hashCode` —Ç–∞ `toString`.
>
> **`@Builder`**:
>
> * –°—Ç–≤–æ—Ä—é—î –≤–∫–ª–∞–¥–µ–Ω–∏–π –∫–ª–∞—Å `Builder`.
> * –ì–µ–Ω–µ—Ä—É—î –ø–ª–∏–Ω–Ω—ñ (fluent) –º–µ—Ç–æ–¥–∏ –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—ñ–≤.
> * –ì–µ–Ω–µ—Ä—É—î –º–µ—Ç–æ–¥ `build()`, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.
>
> **–ü—Ä–∏ –ø–æ—î–¥–Ω–∞–Ω–Ω—ñ (`@Value` + `@Builder`):**
> Lombok –≥–µ–Ω–µ—Ä—É—î —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–ª–∞—Å —ñ `Builder` –¥–ª—è –Ω—å–æ–≥–æ, –ø–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—é—á–∏ –ø–∞—Ç–µ—Ä–Ω.
>
> ```java
> @Value
> @Builder
> public class User {
>     String name;
>     int age;
> }
> ```
>
> –¶–µ —É—Å—É–≤–∞—î –ø–æ—Ç—Ä–µ–±—É –≤ —Ä—É—á–Ω–æ–º—É –Ω–∞–ø–∏—Å–∞–Ω–Ω—ñ –¥–µ—Å—è—Ç–∫—ñ–≤ —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É, –∞–ª–µ –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Å–∞–º–µ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è "–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —â–æ –ø—ñ–¥–≤–∏—â—É—é—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, —Ç–∞ —ó—Ö–Ω—ñ—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π –ø–∞—Ç–µ—Ä–Ω (Value Object —á–∏ Singleton) –∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –∫–ª–∞—Å—É, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø—Ä–∏—Ä–æ–¥–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.
>
> 1. **`Singleton` –∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å**, —è–∫—â–æ:
>     * –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è **–æ–¥–Ω–∞ –Ω–∞ –≤–µ—Å—å –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫**.
>     * –í–æ–Ω–∞ –º–∞—î –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –∑ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—å **–≥–ª–æ–±–∞–ª—å–Ω–æ**.
>     * –í–æ–Ω–∞ –º–æ–∂–µ –º–∞—Ç–∏ **–∑–º—ñ–Ω—é–≤–∞–Ω–∏–π —Å—Ç–∞–Ω** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–∏–Ω–∞–º—ñ—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å).
>     * –ö–µ—Ä—É—î —è–∫–∏–º–æ—Å—å —Å–ø—ñ–ª—å–Ω–∏–º —Ä–µ—Å—É—Ä—Å–æ–º.
>
> 2. **–Ü–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π `Value Object` –∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å**, —è–∫—â–æ:
>     * –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ **–Ω–µ–∑–º—ñ–Ω–Ω–∞ "–∑—Ä—ñ–∑" –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** –Ω–∞ –ø–µ–≤–Ω–∏–π –º–æ–º–µ–Ω—Ç —á–∞—Å—É.
>     * –í–∏ –º–æ–∂–µ—Ç–µ –º–∞—Ç–∏ **–∫—ñ–ª—å–∫–∞ —Ä—ñ–∑–Ω–∏—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–±–æ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤).
>     * –í–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —è–∫ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å ( **Dependency Injection**), –∞ –Ω–µ –æ—Ç—Ä–∏–º—É—î—Ç–µ —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω–∏–π `getInstance()`.
>
> **–°—É—á–∞—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:**
>
> –ù–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **–≥—ñ–±—Ä–∏–¥**. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –≤ **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π `Value Object`**. –ê **–æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä** —Ü—å–æ–≥–æ –æ–±'—î–∫—Ç–∞ –∫–µ—Ä—É—î—Ç—å—Å—è **DI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º** (—è–∫ `Spring`), —è–∫–∏–π –ø–æ —Å—É—Ç—ñ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É "—Å–∏–Ω–≥–ª—Ç–æ–Ω–∞", –∞–ª–µ –±–µ–∑ –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤ –ø–∞—Ç–µ—Ä–Ω—É `Singleton`.
>
> –û—Ç–∂–µ, —Å–∞–º–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è ‚Äî —Ü–µ `Value Object`, –∞ —Å–ø–æ—Å—ñ–± —ó—ó –Ω–∞–¥–∞–Ω–Ω—è ‚Äî `singleton-scope bean`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–º–ø—Ä–æ–º—ñ—Å–∏ —Ä—ñ–∑–Ω–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤. –†–æ–∑—É–º—ñ–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –∑ DI.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ "non-destructive mutation" —ñ —è–∫ –≤–æ–Ω–æ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –¥–ª—è —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **"Non-destructive mutation" (–Ω–µ—Ä—É–π–Ω—ñ–≤–Ω–∞ –º—É—Ç–∞—Ü—ñ—è)** ‚Äî —Ü–µ –ø–∞—Ç–µ—Ä–Ω, –ø—Ä–∏ —è–∫–æ–º—É –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ **–º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—É –∫–æ–ø—ñ—é** —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞, –∑–∞–ª–∏—à–∞—é—á–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª –Ω–µ–¥–æ—Ç–æ—Ä–∫–∞–Ω–∏–º.
>
> –¶–µ –æ—Å–Ω–æ–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± "–∑–º—ñ–Ω—é–≤–∞—Ç–∏" —Å—Ç–∞–Ω —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.
>
> **–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è:**
>
> 1. **–ü—Ä–æ—Å—Ç—ñ –º–µ—Ç–æ–¥–∏ "–∑–º—ñ–Ω–∏":**
>     * –ö–ª–∞—Å –Ω–∞–¥–∞—î –º–µ—Ç–æ–¥–∏ (—á–∞—Å—Ç–æ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º `with...`), —è–∫—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å **–Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä** –∑ –æ–¥–Ω–∏–º –∑–º—ñ–Ω–µ–Ω–∏–º –ø–æ–ª–µ–º.
>
>     ```java
>     public Money withAmount(long newAmount) {
>         return new Money(newAmount, this.currency);
>     }
>     ```
>
> 2. **`Builder` –∑ –º–µ—Ç–æ–¥–æ–º `toBuilder()`:**
>
>     * –¶–µ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–ª—è –æ–±'—î–∫—Ç—ñ–≤ –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–æ–ª—è–º–∏.
>     * –ú–µ—Ç–æ–¥ `toBuilder()` —Å—Ç–≤–æ—Ä—é—î `Builder`, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –¥–∞–Ω–∏–º–∏ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞.
>     * –í–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –≤ –±—ñ–ª–¥–µ—Ä—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è —ñ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `build()`, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤—É, –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—É –∫–æ–ø—ñ—é.
>
>     `User modifiedUser = originalUser.toBuilder().setAge(31).build();`
>
> –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ —î –æ—Å–Ω–æ–≤–æ—é –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏, –æ—Å–æ–±–ª–∏–≤–æ —É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–º—É —Å—Ç–∏–ª—ñ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ "–∑–º—ñ–Ω—é–≤–∞—Ç–∏" –Ω–µ–∑–º—ñ–Ω–Ω–µ.*
