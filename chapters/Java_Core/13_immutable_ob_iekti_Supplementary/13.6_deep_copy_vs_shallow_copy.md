---
layout: default
title: "Deep Copy vs Shallow Copy"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 6
---

# Deep Copy vs Shallow Copy

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Shallow copy` (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è) ‚Äì –∫–æ–ø—ñ—é—î –ø—Ä–∏–º—ñ—Ç–∏–≤–∏ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ (–≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ). `Deep copy` (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è) ‚Äì —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø—ñ—é—î –≤—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏, —Å—Ç–≤–æ—Ä—é—é—á–∏ –ø–æ–≤–Ω—É –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é.

* –ø–æ–Ω—è—Ç—Ç—è: Shallow copy, Deep copy, `clone()`, `defensive copy`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–º—ñ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ `Address` —É `Person` –≤ `shallow copy` –≤–ø–ª–∏–≤–∞—î –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª, —Ç–æ–¥—ñ —è–∫ —É `deep copy` ‚Äì –Ω—ñ.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:  `Deep copy` –æ–±–æ–≤'—è–∑–∫–æ–≤–∞ –¥–ª—è `mutable` –ø–æ–ª—ñ–≤ –≤ `immutable` –∫–ª–∞—Å–∞—Ö, —â–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –ø–æ–≤–Ω—É –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ deep copy.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Shallow copy (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è)** ‚Äî —Ü–µ –∫–æ–ø—ñ—è –æ–±‚Äô—î–∫—Ç–∞, —è–∫–∞ –∫–æ–ø—ñ—é—î **—Ç—ñ–ª—å–∫–∏ —Å–∞–º –æ–±‚Äô—î–∫—Ç**, –∞–ª–µ **–Ω–µ –∫–æ–ø—ñ—é—î –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏** (—Ç—ñ–ª—å–∫–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è).
* **Deep copy (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è)** ‚Äî —Ü–µ –∫–æ–ø—ñ—è –æ–±‚Äô—î–∫—Ç–∞ —Ä–∞–∑–æ–º –∑ **—É—Å—ñ–º–∞ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏**, —Ç–æ–±—Ç–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –≤—Å—ñ –ø–æ–ª—è.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **Shallow copy**: –∫–æ–ø—ñ—è –∫–æ—Ä–æ–±–∫–∏ üì¶, –∞–ª–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç—ñ —Å–∞–º—ñ —Ä–µ—á—ñ.
* **Deep copy**: –∫–æ–ø—ñ—è –∫–æ—Ä–æ–±–∫–∏ üì¶, —ñ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç–µ–∂ —É—Å–µ –Ω–æ–≤–µ.

---

## **üìä –ü—Ä–∏–∫–ª–∞–¥–∏:**

| –¢–∏–ø –∫–æ–ø—ñ—ó | –©–æ –∫–æ–ø—ñ—é—î—Ç—å—Å—è | –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ | –ü—Ä–∏–∫–ª–∞–¥ |
| :---: | :---: | :---: | :---: |
| **`Shallow copy`** | –ü—Ä–∏–º—ñ—Ç–∏–≤–∏, –ø–æ—Å–∏–ª–∞–Ω–Ω—è | –û–±‚Äô—î–∫—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ | **`clone()`** –±–µ–∑ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è |
| **`Deep copy`** | –ü—Ä–∏–º—ñ—Ç–∏–≤–∏ \+ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ | –í—Å–µ –Ω–æ–≤–µ | –ö–∞—Å—Ç–æ–º–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —â–æ —Ç–∏ —Ä–æ–±–∏—à –∫–æ–ø—ñ—é —Ä–µ—Ü–µ–ø—Ç–∞ üßæ.

* **Shallow copy**: —Å–∫–æ–ø—ñ—é–≤–∞–≤ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é, –∞–ª–µ **–≤—Å—ñ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ ‚Äî —Å–ø—ñ–ª—å–Ω—ñ**.
* **Deep copy**: –Ω–µ –ª–∏—à–µ —Ä–µ—Ü–µ–ø—Ç, –∞ –π **–Ω–æ–≤—ñ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏** ‚Äî –æ–∫—Ä–µ–º—ñ, –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
class Address {
    String city;
    Address(String city) { this.city = city; }
}

class Person implements Cloneable {
    String name;
    Address address;

    Person(String name, Address address) {
        this.name = name;
        this.address = address;
    }

    // Shallow copy
    protected Person clone() throws CloneNotSupportedException {
        return (Person) super.clone(); // address –ø–æ—Å–∏–ª–∞–Ω–Ω—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è
    }

    // Deep copy
    Person deepCopy() {
        return new Person(name, new Address(address.city));
    }
}
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å | Shallow Copy | Deep Copy |
| :---: | :---: | :---: |
| **–ì–ª–∏–±–∏–Ω–∞ –∫–æ–ø—ñ—ó** | –õ–∏—à–µ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –æ–±‚Äô—î–∫—Ç | –£—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ |
| **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∫–æ–ø—ñ—ó** | –ß–∞—Å—Ç–∫–æ–≤–∞ | –ü–æ–≤–Ω–∞ |
| **–†–∏–∑–∏–∫ –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤** | –í–∏—Å–æ–∫–∏–π | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ immutable** | –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—ñ–π | –û–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π —É —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç–∞—Ö |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ shallow —Ç–∞ deep copy? ‚≠êÔ∏è‚≠êÔ∏è**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

Shallow copy –∫–æ–ø—ñ—é—î –ª–∏—à–µ —Å–∞–º –æ–±‚Äô—î–∫—Ç, –∞–ª–µ –Ω–µ –∫–æ–ø—ñ—é—î –≤–∫–ª–∞–¥–µ–Ω—ñ. –í–æ–Ω–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è —Å–ø—ñ–ª—å–Ω–∏–º–∏. Deep copy ‚Äî —Ü–µ –ø–æ–≤–Ω–∞ –∫–æ–ø—ñ—è, –≤–∫–ª—é—á–Ω–æ –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –æ–±‚Äô—î–∫—Ç–∞–º–∏.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–ß–∏ —Ä–æ–∑—É–º—ñ—î—à —Ç–∏, —á–æ–º—É —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–µ–∑–º—ñ–Ω–Ω–æ—Å—Ç—ñ, –æ–±—Ä–æ–±–∫–∏ —Å—Ç–∞–Ω—ñ–≤ —ñ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—ñ.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É deep copy –≤–∞–∂–ª–∏–≤–∏–π –¥–ª—è immutable –∫–ª–∞—Å—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–©–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å, —Ç—Ä–µ–±–∞ **–∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –∑–º—ñ–Ω–Ω–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É**. –Ø–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –∑–º—ñ–Ω–Ω–∏–π –æ–±'—î–∫—Ç —É –ø–æ–ª–µ –∫–ª–∞—Å—É –±–µ–∑ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è ‚Äî –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–æ–¥ –º–æ–∂–µ –π–æ–≥–æ –∑–º—ñ–Ω–∏—Ç–∏.

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–í–º—ñ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É–≤–∞—Ç–∏ –Ω–∞–¥—ñ–π–Ω—ñ, –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ –æ–±'—î–∫—Ç–∏ –±–µ–∑ "–¥—ñ—Ä" —É –±–µ–∑–ø–µ—Ü—ñ.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ deep copy –≤ Java?**

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* –ß–µ—Ä–µ–∑ **–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** (—è–∫ —É –ø—Ä–∏–∫–ª–∞–¥—ñ –≤–∏—â–µ)
* –ß–µ—Ä–µ–∑ **—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é**
* –ß–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (**`Apache Commons Lang`, `Kryo`**)

##### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

–ó–Ω–∞–Ω–Ω—è –ø—Ä–∞–∫—Ç–∏—á–Ω–∏—Ö —Ç–µ—Ö–Ω—ñ–∫ —ñ —Ä–æ–∑—É–º—ñ–Ω–Ω—è, –∫–æ–ª–∏ —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"SSD" \= Shallow ‚Äî Shared Data, Deep ‚Äî Separate Data** üíΩ

* **S** ‚Äî Shallow
* **S** ‚Äî Shared
* **D** ‚Äî Deep (copy \= different\!)

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **`Shallow copy`** ‚Äî —Ü–µ –∫–æ–ø—ñ—è –æ–±‚Äô—î–∫—Ç–∞ –∑ —Ç–∏–º–∏ —Å–∞–º–∏–º–∏ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏.
* **`Deep copy`** ‚Äî —Ü–µ –ø–æ–≤–Ω–∞, –Ω–µ–∑–∞–ª–µ–∂–Ω–∞ –∫–æ–ø—ñ—è –≤—Å—å–æ–≥–æ —Å—Ç–∞–Ω—É.
* –£ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ **immutable –∫–ª–∞—Å—ñ–≤**, deep copy **–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö —ñ –≥–µ—Ç—Ç–µ—Ä–∞—Ö** ‚Äî must-have, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–º—ñ–Ω —á–µ—Ä–µ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏.
