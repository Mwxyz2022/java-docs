---
layout: default
title: "–ö–µ—à—É–≤–∞–Ω–Ω—è –æ–± º—î–∫—Ç—ñ–≤ (String Pool / Integer Cache)"
parent: "–û—Å–Ω–æ–≤–∏ Java: Memory, Wrappers, String"
grand_parent: "Java Core"
nav_order: 7
---

# –ö–µ—à—É–≤–∞–Ω–Ω—è –æ–± º—î–∫—Ç—ñ–≤ (String Pool / Integer Cache)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ú–µ—Ö–∞–Ω—ñ–∑–º–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤: String Pool (–¥–ª—è —Ä—è–¥–∫–æ–≤–∏—Ö –ª—ñ—Ç–µ—Ä–∞–ª—ñ–≤) —Ç–∞ Integer Cache (–¥–ª—è `Integer` –≤—ñ–¥ -128 –¥–æ 127), —â–æ –æ–ø—Ç–∏–º—ñ–∑—É—î –ø–∞–º'—è—Ç—å.

* –ø–æ–Ω—è—Ç—Ç—è: String Pool, Integer Cache, –∫–µ—à—É–≤–∞–Ω–Ω—è, `==` vs `equals()`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `String s1 = "hi"; String s2 = "hi"; System.out.println(s1 == s2);` (true), `Integer i1 = 100; Integer i2 = 100; System.out.println(i1 == i2);` (true).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞–º'—è—Ç—ñ, –≤–ø–ª–∏–≤ –Ω–∞ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —á–µ—Ä–µ–∑ `==`. –î–ª—è –æ–±'—î–∫—Ç—ñ–≤ –∑–∞–≤–∂–¥–∏ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `equals()` –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–º—ñ—Å—Ç—É.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ß–æ–º—É `==` –¥–∞—î —Ä—ñ–∑–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è `Integer` –∑–∞ –º–µ–∂–∞–º–∏ –∫–µ—à—É, —Ä—ñ–∑–Ω–∏—Ü—è `==` —ñ `equals()`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **String Pool** —ñ **Integer Pool** ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è —É Java, —â–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –æ–±'—î–∫—Ç–∏ —É —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö –ø–∞–º º—è—Ç—ñ.
* –í–æ–Ω–∏ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –∑–º–µ–Ω—à–∏—Ç–∏ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –ø–∞–º º—è—Ç—ñ —Ç–∞ –ø—Ä–∏—à–≤–∏–¥—à–∏—Ç–∏ –¥–æ—Å—Ç—É–ø.

üîπ –£ **String Pool** –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è **—Ä—è–¥–∫–∏-–ª—ñ—Ç–µ—Ä–∞–ª–∏**.  
üîπ –£ **Integer Pool** ‚Äî —Ü—ñ–ª—ñ —á–∏—Å–ª–∞ –≤ **–¥—ñ–∞–ø–∞–∑–æ–Ω—ñ \[-128; 127\]**, —Å—Ç–≤–æ—Ä–µ–Ω—ñ —á–µ—Ä–µ–∑ **autoboxing** –∞–±–æ **`valueOf()`**.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

Java –Ω–µ –ª—é–±–∏—Ç—å –∑–∞–π–≤—ñ –¥—É–±–ª—ñ–∫–∞—Ç–∏. –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∂–µ —ñ—Å–Ω—É—î –≤ "–ø—É–ª—ñ" ‚Äî –≤–æ–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è. –ê–ª–µ —Ü–µ –ø—Ä–∞—Ü—é—î –ª–∏—à–µ **–∑–∞ –ø–µ–≤–Ω–∏—Ö —É–º–æ–≤**

---

## **–û—Å–Ω–æ–≤–Ω–µ**

| –¢–∏–ø | –©–æ –∫–µ—à—É—î—Ç—å—Å—è | –ü—Ä–∏–∫–ª–∞–¥ | –ü—Ä–∏–º—ñ—Ç–∫–∞ |
| :---: | :---: | :---: | :---: |
| **String Pool** | –†—è–¥–∫–∏-–ª—ñ—Ç–µ—Ä–∞–ª–∏ | **`"hello"`** | –ö–µ—à—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ |
| **Integer Pool** | –¶—ñ–ª—ñ —á–∏—Å–ª–∞ **`[-128; 127]`** | **`Integer x = 127;`** | –õ–∏—à–µ —á–µ—Ä–µ–∑ **autoboxing** –∞–±–æ **`valueOf()`** |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

### **üî∏ String Pool**

```java
String a = "hello";
String b = "hello";
System.out.println(a == b); // true ‚úÖ

```

* –û–±–∏–¥–≤–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è ‚Äî –Ω–∞ **–æ–¥–∏–Ω –æ–±'—î–∫—Ç** –∑ –ø—É–ª—É.

```java
String c = new String("hello");
System.out.println(a == c); // false ‚ùå (—Ä—ñ–∑–Ω—ñ –æ–± º—î–∫—Ç–∏)
System.out.println(a.equals(c)); // true ‚úÖ
```

* `new` –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π –æ–± º—î–∫—Ç —É heap**, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ä—è–¥–æ–∫ –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º.

---

### **üî∏ Integer Pool**

```java
Integer a = 100;
Integer b = 100;
System.out.println(a == b); // true ‚úÖ
```

* –ó–Ω–∞—á–µ–Ω–Ω—è –≤ –º–µ–∂–∞—Ö –∫–µ—à—É -> –æ–¥–∏–Ω –æ–± º—î–∫—Ç.

```java
Integer x = 200;
Integer y = 200;
System.out.println(x == y); // false ‚ùå
System.out.println(x.equals(y)); // true ‚úÖ
```

* –ó–Ω–∞—á–µ–Ω–Ω—è **–ø–æ–∑–∞ –∫–µ—à–µ–º** -> —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–æ–≤—ñ –æ–± º—î–∫—Ç–∏.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
// String Pool
String s1 = "Java";
String s2 = "Java";
System.out.println(s1 == s2); // true

String s3 = new String("Java");
System.out.println(s1 == s3); // false

// Integer Pool
Integer i1 = 127;
Integer i2 = 127;
System.out.println(i1 == i2); // true

Integer i3 = 128;
Integer i4 = 128;
System.out.println(i3 == i4); // false
```

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

```java
"Java" == "Java"        -> true ‚úÖ (–ª—ñ—Ç–µ—Ä–∞–ª–∏ -- –∑ –ø—É–ª—É)
new String("Java") == "Java" -> false ‚ùå (–Ω–æ–≤–∏–π –æ–± º—î–∫—Ç)

127 == 127   -> true ‚úÖ (–≤ –ø—É–ª—ñ)
128 == 128   -> false ‚ùå (–Ω–µ –∫–µ—à—É—î—Ç—å—Å—è!)
```

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

Java **–∫–µ—à—É—î –æ–± º—î–∫—Ç–∏** –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:

* –†—è–¥–∫–∏-–ª—ñ—Ç–µ—Ä–∞–ª–∏ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å —É **String Pool**.
* –¶—ñ–ª—ñ —á–∏—Å–ª–∞ **`[-128; 127]`** ‚Äî –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å —É **Integer Pool**, **—è–∫—â–æ** —Å—Ç–≤–æ—Ä–µ–Ω—ñ —á–µ—Ä–µ–∑ **autoboxing –∞–±–æ `valueOf()`**.
üî∏ **`==`** –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏, —è–∫—â–æ –æ–±–∏–¥–≤–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ –æ–¥–∏–Ω –æ–± º—î–∫—Ç.  
üî∏ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **`equals()`** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ **–∑–Ω–∞—á–µ–Ω—å**.  
üî∏ –Ø–∫—â–æ —Ö–æ—á–µ—à –≤—Ä—É—á–Ω—É –∑–∞–≥–Ω–∞—Ç–∏ —Ä—è–¥–æ–∫ —É –ø—É–ª ‚Äî –≤–∏–∫–ª–∏–∫–∞–π **`.intern()`**.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Oracle Docs: Strings and the String Pool**](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#intern--)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ String Pool (–ø—É–ª —Ä—è–¥–∫—ñ–≤) —ñ –Ω–∞–≤—ñ—â–æ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **String Pool** ‚Äî —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±–ª–∞—Å—Ç—å –ø–∞–º'—è—Ç—ñ –≤ **Heap**, –¥–µ Java –∑–±–µ—Ä—ñ–≥–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ —Ä—è–¥–∫–æ–≤–∏—Ö –ª—ñ—Ç–µ—Ä–∞–ª—ñ–≤.
>
> **–ù–∞–≤—ñ—â–æ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω:**
> –ô–æ–≥–æ –æ—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ ‚Äî **–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ —Ç–∞ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**. –†—è–¥–∫–∏ —î –æ–¥–Ω–∏–º–∏ –∑ –Ω–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ —É Java. –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ–¥–Ω–∞–∫–æ–≤–æ–≥–æ —Ä—è–¥–∫–æ–≤–æ–≥–æ –ª—ñ—Ç–µ—Ä–∞–ª—É –≤ –∫–æ–¥—ñ, JVM –∑–±–µ—Ä—ñ–≥–∞—î –ª–∏—à–µ –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä —É –ø—É–ª—ñ —Ç–∞ –∑–º—É—à—É—î –≤—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –Ω—å–æ–≥–æ.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
> –ö–æ–ª–∏ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ —Ä—è–¥–æ–∫ —è–∫ –ª—ñ—Ç–µ—Ä–∞–ª (`String s = "hello";`), JVM –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —î —Ä—è–¥–æ–∫ "hello" —É –ø—É–ª—ñ.
>
> * –Ø–∫—â–æ —Ç–∞–∫, –≤–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —ñ—Å–Ω—É—é—á–∏–π –æ–±'—î–∫—Ç.
> * –Ø–∫—â–æ –Ω—ñ, –≤–æ–Ω–∞ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç —É –ø—É–ª—ñ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—à–æ–º—É –æ—Ñ—ñ—Å—ñ —î —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Å–∫–ª–∞–¥ –∫–∞–Ω—Ü–µ–ª—è—Ä—Å—å–∫–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ (—Ü–µ String Pool). –ö–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –º–∞—Ä–∫–µ—Ä, –≤–∏ –Ω–µ –∫—É–ø—É—î—Ç–µ –Ω–æ–≤–∏–π, –∞ –±–µ—Ä–µ—Ç–µ –π–æ–≥–æ –∑—ñ —Å–∫–ª–∞–¥—É. –Ø–∫—â–æ –π–æ–≥–æ —Ç–∞–º –Ω–µ–º–∞—î, –≤–∏ –∫—É–ø—É—î—Ç–µ –æ–¥–∏–Ω, –∫–ª–∞–¥–µ—Ç–µ –Ω–∞ —Å–∫–ª–∞–¥, –∞ –ø–æ—Ç—ñ–º –±–µ—Ä–µ—Ç–µ –π–æ–≥–æ –∑–≤—ñ–¥—Ç–∏. –¶–µ –µ–∫–æ–Ω–æ–º–∏—Ç—å –º—ñ—Å—Ü–µ —Ç–∞ –≥—Ä–æ—à—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø–∞–º'—è—Ç—ñ –≤ Java —Ç–∞ –ø—Ä–∏—á–∏–Ω–∏, —á–æ–º—É —Ä—è–¥–∫–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –æ—Å–æ–±–ª–∏–≤–∏–º —á–∏–Ω–æ–º.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `String s1 = "Java";` —Ç–∞ `String s2 = new String("Java");`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∫–ª—é—á–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ String Pool. –†—ñ–∑–Ω–∏—Ü—è –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, **–¥–µ —ñ —è–∫ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –æ–±'—î–∫—Ç–∏**.
>
> * `String s1 = "Java";` **(–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª—ñ—Ç–µ—Ä–∞–ª—É):**
>   * –¶–µ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —ñ–Ω—Å—Ç—Ä—É–∫—Ç—É—î JVM —à—É–∫–∞—Ç–∏ —Ä—è–¥–æ–∫ "Java" —É **String Pool**.
>   * –Ø–∫—â–æ —Ä—è–¥–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–æ, `s1` –æ—Ç—Ä–∏–º–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ.
>   * –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, JVM —Å—Ç–≤–æ—Ä–∏—Ç—å –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç "Java" —É –ø—É–ª—ñ, —ñ `s1` –æ—Ç—Ä–∏–º–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ.
>
> * `String s2 = new String("Java");` **(–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä):**
>   * –û–ø–µ—Ä–∞—Ç–æ—Ä **`new` –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç** —É –ø–∞–º'—è—Ç—ñ **Heap**, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ —ñ—Å–Ω—É—î —Ç–∞–∫–∏–π —Å–∞–º–∏–π —Ä—è–¥–æ–∫ —É String Pool.
>   * –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ `s2` –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ —Å–≤—ñ–∂–æ—Å—Ç–≤–æ—Ä–µ–Ω–∏–π –æ–±'—î–∫—Ç –ø–æ–∑–∞ –ø—É–ª–æ–º.
>
> **–ù–∞—Å–ª—ñ–¥–æ–∫:**
> –Ø–∫—â–æ –º–∏ –ø–æ—Ä—ñ–≤–Ω—è—î–º–æ `s1 == s2`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ **`false`**, –æ—Å–∫—ñ–ª—å–∫–∏ `s1` —Ç–∞ `s2` –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ –¥–≤–∞ —Ä—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ –≤ –ø–∞–º'—è—Ç—ñ, —Ö–æ—á–∞ —ó—Ö–Ω—ñ–π –≤–º—ñ—Å—Ç –æ–¥–Ω–∞–∫–æ–≤–∏–π.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–ó–∞–≤–∂–¥–∏ –≤—ñ–¥–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–≤–∞–≥—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—é —Ä—è–¥–∫—ñ–≤ —á–µ—Ä–µ–∑ –ª—ñ—Ç–µ—Ä–∞–ª–∏ (`String s = "value";`), —è–∫—â–æ —Ç—ñ–ª—å–∫–∏ —É –≤–∞—Å –Ω–µ–º–∞—î —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó –ø—Ä–∏—á–∏–Ω–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ —Ä—ñ–∑–Ω—ñ —Å–ø–æ—Å–æ–±–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —ó—Ö–Ω—î —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –≤ –ø–∞–º'—è—Ç—ñ, —Ç–∞ –Ω–∞—Å–ª—ñ–¥–∫–∏ —Ü—å–æ–≥–æ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ Integer Cache —ñ —è–∫ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Integer Cache** (–∞–±–æ Integer Pool) ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º –∫–µ—à—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤-–æ–±–≥–æ—Ä—Ç–æ–∫ —Ç–∏–ø—É `Integer` –¥–ª—è –Ω–µ–≤–µ–ª–∏–∫–∏—Ö —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª, –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–π –∑–∞ —ñ–¥–µ—î—é –¥–æ String Pool.
>
> **–Ø–∫ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î:**
> –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –º–æ–≤–∏ Java –≤–∏–º–∞–≥–∞—î, —â–æ–± –æ–±'—î–∫—Ç–∏ `Integer` –¥–ª—è –∑–Ω–∞—á–µ–Ω—å —É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –≤—ñ–¥ **-128 –¥–æ 127** (–≤–∫–ª—é—á–Ω–æ) –∑–∞–≤–∂–¥–∏ –±—É–ª–∏ –æ–¥–Ω–∏–º–∏ –π —Ç–∏–º–∏ —Å–∞–º–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏ –∑ –∫–µ—à—É.
>
> –¶–µ–π –º–µ—Ö–∞–Ω—ñ–∑–º —Å–ø—Ä–∞—Ü—å–æ–≤—É—î **—Ç—ñ–ª—å–∫–∏** –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ **–∞–≤—Ç–æ—É–ø–∞–∫–æ–≤–∫–∏ (Autoboxing)** –∞–±–æ –ø—Ä—è–º–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –º–µ—Ç–æ–¥—É **`Integer.valueOf()`**. –í—ñ–Ω **–Ω–µ** –ø—Ä–∞—Ü—é—î –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ `new Integer()`.
>
> `Integer a = 100; // Autoboxing, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à`
> `Integer b = Integer.valueOf(100); // –Ø–≤–Ω–∏–π –≤–∏–∫–ª–∏–∫, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à`
> `Integer c = new Integer(100); // –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç, –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à`

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–¶–µ–π –∫–µ—à —ñ—Å–Ω—É—î –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–µ–≤–µ–ª–∏–∫—ñ —Ü—ñ–ª—ñ —á–∏—Å–ª–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥—É–∂–µ —á–∞—Å—Ç–æ (—è–∫ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏, —ñ–Ω–¥–µ–∫—Å–∏ —Ç–æ—â–æ), —ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ –¥–ª—è –Ω–∏—Ö –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –±—É–ª–æ –± –º–∞—Ä–Ω–æ—Ç—Ä–∞—Ç—Å—Ç–≤–æ–º —Ä–µ—Å—É—Ä—Å—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—É –∫–µ—à—É–≤–∞–Ω–Ω—è –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ä—è–¥–∫—ñ–≤, –∞–ª–µ –π –¥–ª—è —á–∏—Å–ª–æ–≤–∏—Ö –æ–±–≥–æ—Ä—Ç–æ–∫, –∞ —Ç–∞–∫–æ–∂ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —É–º–æ–≤, –∑–∞ —è–∫–∏—Ö –≤—ñ–Ω —Å–ø—Ä–∞—Ü—å–æ–≤—É—î.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —á–æ–º—É —Ü–µ–π –∫–æ–¥ –≤–∏–≤–æ–¥–∏—Ç—å `true`, –∞ –ø–æ—Ç—ñ–º `false`.

```java
Integer a = 100;
Integer b = 100;
System.out.println(a == b);

Integer c = 200;
Integer d = 200;
System.out.println(c == d);
```

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏ **Integer Cache**.
>
> 1. **`System.out.println(a == b);` ‚Üí `true`**
>     * –ó–Ω–∞—á–µ–Ω–Ω—è `100` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –º–µ–∂–∞—Ö –∫–µ—à–æ–≤–∞–Ω–æ–≥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É (–≤—ñ–¥ -128 –¥–æ 127).
>     * –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ `a` —Ç–∞ `b` —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—É–ø–∞–∫–æ–≤–∫—É JVM –Ω–µ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ –æ–±'—î–∫—Ç–∏, –∞ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ **–æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –æ–±'—î–∫—Ç** –∑ –∫–µ—à—É.
>     * –û—Å–∫—ñ–ª—å–∫–∏ `==` –ø–æ—Ä—ñ–≤–Ω—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±'—î–∫—Ç–∏, –∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∫–∞–∑—É—é—Ç—å –Ω–∞ —Ç–æ–π —Å–∞–º–∏–π –æ–±'—î–∫—Ç, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —î `true`.
>
> 2. **`System.out.println(c == d);` ‚Üí `false`**
>     * –ó–Ω–∞—á–µ–Ω–Ω—è `200` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è **–ø–æ–∑–∞ –º–µ–∂–∞–º–∏** –∫–µ—à–æ–≤–∞–Ω–æ–≥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É.
>     * –î–ª—è `c` —Ç–∞ `d` JVM –∑–º—É—à–µ–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **–¥–≤–∞ –Ω–æ–≤–∏—Ö, –æ–∫—Ä–µ–º–∏—Ö –æ–±'—î–∫—Ç–∏** `Integer` —É –∫—É–ø—ñ (Heap).
>     * –û—Å–∫—ñ–ª—å–∫–∏ `c` —Ç–∞ `d` –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ —Ä—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ –≤ –ø–∞–º'—è—Ç—ñ, –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `==` –ø–æ–≤–µ—Ä—Ç–∞—î `false`.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–¶–µ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ —Ü—é —Ç–µ–º—É. **–ì–æ–ª–æ–≤–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫:** –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ—Ä—ñ–≤–Ω—é–π—Ç–µ –æ–±'—î–∫—Ç–∏ (–≤–∫–ª—é—á–Ω–æ –∑ –æ–±–≥–æ—Ä—Ç–∫–∞–º–∏) –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `==`. –î–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —ó—Ö–Ω—å–æ–≥–æ –≤–º—ñ—Å—Ç—É **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–µ—Ç–æ–¥ `equals()`. `c.equals(d)` –ø–æ–≤–µ—Ä–Ω—É–ª–æ –± `true`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–∞—Å—Ç–∫–∏ –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º `Integer`. –¶–µ –∫–ª—é—á–æ–≤–∏–π —Ç–µ—Å—Ç, —â–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î –ª—é–¥–∏–Ω—É, —è–∫–∞ —Ä–æ–∑—É–º—ñ—î –º–µ—Ö–∞–Ω—ñ–∑–º, –≤—ñ–¥ —Ç—ñ—î—ó, —â–æ –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ –∫–æ–¥.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ä–æ–±–∏—Ç—å –º–µ—Ç–æ–¥ `String.intern()`? –ö–æ–ª–∏ –π–æ–≥–æ –¥–æ—Ü—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ú–µ—Ç–æ–¥ `public native String intern();` —î –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º –¥–ª—è —è–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑—ñ **String Pool**.
>
> **–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å:**
> –ö–æ–ª–∏ –≤–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ `.intern()` –Ω–∞ —Ä—è–¥–∫–æ–≤–æ–º—É –æ–±'—î–∫—Ç—ñ, –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω–µ:
>
> 1. JVM –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —ñ—Å–Ω—É—î –≤ String Pool —Ä—è–¥–æ–∫, –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∏–π (–∑–∞ `equals()`) –≤–∞—à–æ–º—É —Ä—è–¥–∫—É.
> 2. **–Ø–∫—â–æ —Ç–∞–∫**, –º–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä—è–¥–æ–∫ –∑ –ø—É–ª—É. –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç (—è–∫—â–æ –≤—ñ–Ω –±—É–≤ –ø–æ–∑–∞ –ø—É–ª–æ–º) –º–æ–∂–µ —Å—Ç–∞—Ç–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –¥–ª—è –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è.
> 3. **–Ø–∫—â–æ –Ω—ñ**, –º–µ—Ç–æ–¥ –¥–æ–¥–∞—î –≤–∞—à —Ä—è–¥–æ–∫ –¥–æ –ø—É–ª—É —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω—å–æ–≥–æ.
>
> **–ö–æ–ª–∏ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**
> –ú–µ—Ç–æ–¥ `intern()` –¥–æ—Ü—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, –∫–æ–ª–∏ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Ä—è–¥–∫—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç—å –¥—É–±–ª—é–≤–∞—Ç–∏—Å—è, —ñ —è–∫—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –¥–∂–µ—Ä–µ–ª (—Ñ–∞–π–ª–∏, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –º–µ—Ä–µ–∂–∞), –∞ –Ω–µ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —è–∫ –ª—ñ—Ç–µ—Ä–∞–ª–∏. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∏—Å—è—á –æ–¥–Ω–∞–∫–æ–≤–∏—Ö —Ä—è–¥–∫—ñ–≤ —É –ø–∞–º'—è—Ç—ñ.
>
> –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥—É –≤–µ–ª–∏–∫–æ–≥–æ XML, –¥–µ –Ω–∞–∑–≤–∏ —Ç–µ–≥—ñ–≤ –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–æ–≤—Ç–æ—Ä—é—é—Ç—å—Å—è.

#### **üìù –ü—Ä–∏–∫–ª–∞–¥:**

```java
String s1 = "hello";
String s2 = new String("hello");
String s3 = s2.intern();

System.out.println(s1 == s2); // false
System.out.println(s1 == s3); // true
```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–Ω–∞–Ω–Ω—è String API —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ–º –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–î–µ —Ñ—ñ–∑–∏—á–Ω–æ –≤ –ø–∞–º'—è—Ç—ñ JVM —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π String Pool?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è String Pool –∑–º—ñ–Ω—é–≤–∞–ª–æ—Å—è –∑ –≤–µ—Ä—Å—ñ—è–º–∏ Java, —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏.
>
> * **–î–æ Java 7 (–≤ Java 6 —ñ —Ä–∞–Ω—ñ—à–µ):** String Pool –∑–Ω–∞—Ö–æ–¥–∏–≤—Å—è –≤ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ–π –æ–±–ª–∞—Å—Ç—ñ –ø–∞–º'—è—Ç—ñ, —è–∫–∞ –Ω–∞–∑–∏–≤–∞–ª–∞—Å—è **PermGen (Permanent Generation)**. –¶—è –æ–±–ª–∞—Å—Ç—å –º–∞–ª–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —ñ –Ω–µ –±—É–ª–∞ —á–∞—Å—Ç–∏–Ω–æ—é –æ—Å–Ω–æ–≤–Ω–æ—ó –∫—É–ø–∏ (Heap). –¶–µ —á–∞—Å—Ç–æ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ –ø–æ–º–∏–ª–∫–∏ `OutOfMemoryError: PermGen space`, —è–∫—â–æ –ø—Ä–æ–≥—Ä–∞–º–∞ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∞ –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤.
>
> * **–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ Java 7:** String Pool –±—É–ª–æ **–ø–µ—Ä–µ–º—ñ—â–µ–Ω–æ –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –∫—É–ø–∏ (Heap)**.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏ —Ü—å–æ–≥–æ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è:**
>
> 1. String Pool –±—ñ–ª—å—à–µ –Ω–µ –æ–±–º–µ–∂–µ–Ω–∏–π —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º —Ä–æ–∑–º—ñ—Ä–æ–º PermGen —ñ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä –∫—É–ø–∏.
> 2. –†—è–¥–∫–∏ –≤ –ø—É–ª—ñ —Ç–µ–ø–µ—Ä –ø—ñ–¥–ª—è–≥–∞—é—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—É –∑–±–∏—Ä–∞–Ω–Ω—è —Å–º—ñ—Ç—Ç—è (Garbage Collection), —è–∫ —ñ –±—É–¥—å-—è–∫—ñ —ñ–Ω—à—ñ –æ–±'—î–∫—Ç–∏ –≤ –∫—É–ø—ñ.
> 3. –ó–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ `OutOfMemoryError: PermGen space` —á–µ—Ä–µ–∑ —Ä—è–¥–∫–∏.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–£ Java 8 PermGen –±—É–≤ –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–º—ñ–Ω–µ–Ω–∏–π –Ω–∞ Metaspace (—Ç–∞–∫–æ–∂ –ø–æ–∑–∞ –∫—É–ø–æ—é), –∞–ª–µ String Pool —Ç–∞–∫ —ñ –∑–∞–ª–∏—à–∏–≤—Å—è –≤ Heap. –ó–Ω–∞–Ω–Ω—è —Ü—ñ—î—ó –µ–≤–æ–ª—é—Ü—ñ—ó –ø–æ–∫–∞–∑—É—î –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è JVM.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó –±—É–¥–æ–≤–∏ JVM —Ç–∞ —ó—ó —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ—ó –µ–≤–æ–ª—é—Ü—ñ—ó. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è —á–∞—Å—Ç–æ —Å—Ç–∞–≤–ª—è—Ç—å Senior —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —â–µ –∫–ª–∞—Å–∏-–æ–±–≥–æ—Ä—Ç–∫–∏, –∫—Ä—ñ–º `Integer`, –º–∞—é—Ç—å –º–µ—Ö–∞–Ω—ñ–∑–º –∫–µ—à—É–≤–∞–Ω–Ω—è?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–æ `Integer`. JVM –∫–µ—à—É—î –æ–±'—î–∫—Ç–∏ —ñ –¥–ª—è —ñ–Ω—à–∏—Ö –æ–±–≥–æ—Ä—Ç–æ–∫, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, –¥–ª—è —Ç–∏—Ö, —è–∫—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –Ω–µ–≤–µ–ª–∏–∫—ñ –∞–±–æ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.
>
> * **`Byte`**, **`Short`**, **`Long`**: –∫–µ—à—É—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –≤—ñ–¥ **-128 –¥–æ 127**.
> * **`Character`**: –∫–µ—à—É—î –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –≤—ñ–¥ **0 –¥–æ 127** (`'\u0000'` –¥–æ `'\u007f'`).
> * **`Boolean`**: –∫–µ—à—É—î –¥–≤–∞ –æ–±'—î–∫—Ç–∏: **`Boolean.TRUE`** —ñ **`Boolean.FALSE`**. `Boolean.valueOf(boolean)` –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–¥–∏–Ω –∑ —Ü–∏—Ö –¥–≤–æ—Ö –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤.
>
> **–ù–µ –∫–µ—à—É—é—Ç—å—Å—è:**
>
> * **`Float`** —ñ **`Double`**: –∫–ª–∞—Å–∏ –¥–ª—è —á–∏—Å–µ–ª –∑ –ø–ª–∞–≤–∞—é—á–æ—é –∫–æ–º–æ—é **–Ω–µ –∫–µ—à—É—é—Ç—å** –∑–Ω–∞—á–µ–Ω–Ω—è. –¶–µ –ø–æ–≤'—è–∑–∞–Ω–æ –∑ —Ç–∏–º, —â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ–∂–ª–∏–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å –Ω–∞–≤—ñ—Ç—å —É –Ω–µ–≤–µ–ª–∏–∫–æ–º—É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ —î –≤–µ–ª–∏—á–µ–∑–Ω–æ—é, —ñ –∫–µ—à—É–≤–∞–Ω–Ω—è –±—É–ª–æ –± –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü–æ–≤–Ω–æ—Ç—É –∑–Ω–∞–Ω—å –ø—Ä–æ –∫–ª–∞—Å–∏-–æ–±–≥–æ—Ä—Ç–∫–∏. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —â–æ –∫–µ—à—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –∑–∞–≥–∞–ª—å–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –ø–µ–≤–Ω–∏—Ö —Ç–∏–ø—ñ–≤, –∞ –Ω–µ —É–Ω—ñ–∫–∞–ª—å–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `Integer`.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –≤–ø–ª–∏–≤–∞—î –Ω–∞ String Pool –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è —Ä—è–¥–∫—ñ–≤? –©–æ –±—É–¥–µ –≤ –ø—É–ª—ñ –ø—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ –∫–æ–¥—É?

```java
String s1 = "Hello";
String s2 = " World";
String s3 = "Hello World";
String s4 = s1 + s2;
```

‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ –º–æ–∂–µ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –æ–±—á–∏—Å–ª–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—ó –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.
>
> * **–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç:** –Ø–∫—â–æ –≤–∏ —Å–∫–ª–∞–¥–∞—î—Ç–µ —Ä—è–¥–∫–æ–≤—ñ –ª—ñ—Ç–µ—Ä–∞–ª–∏ (`"Hello" + " World"`), –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä —î –¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ä–æ–∑—É–º–Ω–∏–º, —â–æ–± –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –æ–±'—î–¥–Ω–∞—Ç–∏ —ó—Ö –≤ –æ–¥–∏–Ω —Ä—è–¥–æ–∫ `"Hello World"` —ñ –ø–æ–º—ñ—Å—Ç–∏—Ç–∏ —Å–∞–º–µ –π–æ–≥–æ –≤ String Pool.
>
> * **–ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö:** –Ø–∫—â–æ –∂ –≤–∏ —Å–∫–ª–∞–¥–∞—î—Ç–µ –∑–º—ñ–Ω–Ω—ñ (—è–∫ —É –ø—Ä–∏–∫–ª–∞–¥—ñ `s1 + s2`), —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è **–ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (runtime)**.
>
> **–©–æ–¥–æ –∫–æ–¥—É –≤ –ø–∏—Ç–∞–Ω–Ω—ñ:**
>
> 1. `s1 = "Hello"`: –†—è–¥–æ–∫ "Hello" –ø–æ–º—ñ—â–∞—î—Ç—å—Å—è –≤ String Pool.
> 2. `s2 = " World"`: –†—è–¥–æ–∫ " World" –ø–æ–º—ñ—â–∞—î—Ç—å—Å—è –≤ String Pool.
> 3. `s3 = "Hello World"`: –†—è–¥–æ–∫ "Hello World" –ø–æ–º—ñ—â–∞—î—Ç—å—Å—è –≤ String Pool.
> 4. `s4 = s1 + s2`: –ü—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è **–Ω–æ–≤–∏–π –æ–±'—î–∫—Ç** "Hello World" –≤ **Heap**, –∞–ª–µ **–Ω–µ –≤ String Pool**. –¶–µ–π –æ–±'—î–∫—Ç —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `StringBuilder` (–∞–±–æ `StringConcatFactory` –∑ Java 9).
>
> **–ù–∞—Å–ª—ñ–¥–æ–∫:** `s3 == s4` –ø–æ–≤–µ—Ä–Ω–µ **`false`**.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, —É String Pool –±—É–¥—É—Ç—å "Hello", " World" —Ç–∞ "Hello World". –ê –∑–º—ñ–Ω–Ω–∞ `s4` –ø–æ—Å–∏–ª–∞—Ç–∏–º–µ—Ç—å—Å—è –Ω–∞ –æ–∫—Ä–µ–º–∏–π –æ–±'—î–∫—Ç –≤ Heap.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—î—é —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º, –∞ —Ç–∞–∫–æ–∂ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ —Ç–µ, —è–∫ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –æ–ø—Ç–∏–º—ñ–∑—É—î –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ —Ä—è–¥–∫–∞–º–∏.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É –¥–ª—è `Integer`? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ —è–∫? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–Ω–∞, –∞–ª–µ —Ç—ñ–ª—å–∫–∏ –≤–µ—Ä—Ö–Ω—é –º–µ–∂—É.** –ù–∏–∂–Ω—è –º–µ–∂–∞ (`-128`) —î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—é.
>
> –†–æ–∑–º—ñ—Ä –∫–µ—à—É –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–∏—Å—Ç–µ–º–Ω–æ—ó –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ (system property) JVM, —è–∫–∞ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏. –¶—è –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å: `java.lang.Integer.IntegerCache.high`.
>
> **–Ø–∫ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏:**
>
> –ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏ –∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `-D` –ø—Ä–∞–ø–æ—Ä:
> `java -Djava.lang.Integer.IntegerCache.high=1000 MyProgram`
>
> –ü—ñ—Å–ª—è —Ç–∞–∫–æ–≥–æ –∑–∞–ø—É—Å–∫—É `IntegerCache` –±—É–¥–µ –∫–µ—à—É–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –≤—ñ–¥ **-128 –¥–æ 1000**.
>
> **–ö–æ–ª–∏ —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –∫–æ—Ä–∏—Å–Ω–æ:**
> –£ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫–∞—Ö, –¥–µ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è —Ü—ñ–ª—ñ —á–∏—Å–ª–∞ –∑ –ø–µ–≤–Ω–æ–≥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–¥–∏ HTTP-—Å—Ç–∞—Ç—É—Å—ñ–≤ 200-500), –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∫–µ—à—É –º–æ–∂–µ –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ —ñ —Ç—Ä–æ—Ö–∏ –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å. –û–¥–Ω–∞–∫, —Ü–µ –∑–±—ñ–ª—å—à—É—î –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ, —â–æ –ø–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–π–Ω—è—Ç–∏–π (—É Old Generation), —Ç–æ–º—É —Ü–µ —Å–ª—ñ–¥ —Ä–æ–±–∏—Ç–∏ –ª–∏—à–µ –ø—ñ—Å–ª—è –ø—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Ç–æ–Ω–∫–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è JVM. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ —Ä—ñ–≤–Ω—è Middle+ –∞–±–æ Senior, —è–∫—ñ —Ü—ñ–∫–∞–≤–ª—è—Ç—å—Å—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —â–æ –±—É–¥–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ –∫–æ–¥—É.

```java
String s1 = "abc";
final String s2 = "b";
String s3 = "a" + s2 + "c";

System.out.println(s1 == s3);
```

‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ –≤–∏–≤–µ–¥–µ **`true`**.
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∞–∂–ª–∏–≤—É –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é, —è–∫—É –≤–∏–∫–æ–Ω—É—î –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä Java, –ø–æ–≤'—è–∑–∞–Ω—É –∑ `final` –∑–º—ñ–Ω–Ω–∏–º–∏.
>
> 1. `String s2 = "b";` –æ–≥–æ–ª–æ—à–µ–Ω–∞ —è–∫ **`final`**.
> 2. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ `s2` —î **–∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ—é —á–∞—Å—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó**. –á—ó –∑–Ω–∞—á–µ–Ω–Ω—è (`"b"`) –≤—ñ–¥–æ–º–µ –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —ñ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–µ.
> 3. –ö–æ–ª–∏ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –æ–±—Ä–æ–±–ª—è—î –≤–∏—Ä–∞–∑ `"a" + s2 + "c"`, –≤—ñ–Ω –±–∞—á–∏—Ç—å, —â–æ –≤—Å—ñ –π–æ–≥–æ —á–∞—Å—Ç–∏–Ω–∏ —î –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ (`"a"`, –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `s2` —Ç–∞ `"c"`).
> 4. –ó–∞–≤–¥—è–∫–∏ —Ü—å–æ–º—É –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –º–æ–∂–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—é **–Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó** —ñ –∑–∞–º—ñ–Ω–∏—Ç–∏ –≤–µ—Å—å –≤–∏—Ä–∞–∑ –Ω–∞ –æ–¥–∏–Ω –ª—ñ—Ç–µ—Ä–∞–ª: `"abc"`.
> 5. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, —Ä—è–¥–æ–∫ `String s3 = "a" + s2 + "c";` —Ñ–∞–∫—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ `String s3 = "abc";`.
>
> –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ, —ñ `s1`, —ñ `s3` –ø–æ—Å–∏–ª–∞—Ç–∏–º—É—Ç—å—Å—è –Ω–∞ –æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π –æ–±'—î–∫—Ç `"abc"` —É String Pool, —Ç–æ–º—É `s1 == s3` –ø–æ–≤–µ—Ä–Ω–µ `true`.
>
> –Ø–∫–±–∏ `s2` –Ω–µ –±—É–ª–∞ `final`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–≤ –±–∏ `false`, –æ—Å–∫—ñ–ª—å–∫–∏ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞–ª–∞—Å—è –± –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ–π –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞ —Ç–∞ —Ä–æ–ª—ñ –∫–ª—é—á–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `final` —É —Ü–∏—Ö –ø—Ä–æ—Ü–µ—Å–∞—Ö.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ —î –º–µ—Ö–∞–Ω—ñ–∑–º –∫–µ—à—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º (thread-safe)? –ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Ü—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ —î –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∏–º–∏.**
>
> –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î—Ç—å—Å—è —Ç–∏–º, —â–æ —ñ String Pool, —ñ –∫–µ—à—ñ –¥–ª—è –æ–±–≥–æ—Ä—Ç–æ–∫ (`IntegerCache` —ñ —Ç.–¥.) —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è —Ç–∞ –∑–∞–ø–æ–≤–Ω—é—é—Ç—å—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–≤–µ—Ä–Ω–µ–Ω–Ω—ñ, —ñ –ø–æ—Ç—ñ–º —Å—Ç–∞—é—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ **—Ç—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è**.
>
> –í—Å—ñ –æ–±'—î–∫—Ç–∏, —â–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ü–∏—Ö –∫–µ—à–∞—Ö (`String`, `Integer` —Ç–æ—â–æ), —î **–Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏ (immutable)**.
>
> **–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ:**
>
> 1. **–ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –≥–æ–Ω–∏—Ç–≤–∏ (Race Condition):** –û—Å–∫—ñ–ª—å–∫–∏ –∫–µ—à—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤—Å—ñ–º–∞ –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–∏, —è–∫–±–∏ –≤–æ–Ω–∏ –∞–±–æ –æ–±'—î–∫—Ç–∏ –≤ –Ω–∏—Ö –±—É–ª–∏ –∑–º—ñ–Ω–Ω–∏–º–∏, –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫ –º—ñ–≥ –±–∏ –∑–º—ñ–Ω–∏—Ç–∏ –æ–±'—î–∫—Ç, —è–∫–∏–π –≤ —Ü–µ–π –∂–µ —á–∞—Å —á–∏—Ç–∞—î —ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫. –¶–µ –ø—Ä–∏–∑–≤–µ–ª–æ –± –¥–æ —Ö–∞–æ—Ç–∏—á–Ω–æ—ó —Ç–∞ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.
> 2. **–ì–∞—Ä–∞–Ω—Ç—ñ—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ:** –ù–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ `Integer.valueOf(10)` –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä–Ω–µ –æ–±'—î–∫—Ç, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è 10, —ñ –Ω—ñ—è–∫–∏–π —ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫ –Ω–µ –∑–º–æ–∂–µ —Ü—å–æ–≥–æ –∑–º—ñ–Ω–∏—Ç–∏.
>
> –ü–æ—î–¥–Ω–∞–Ω–Ω—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –Ω–µ–∑–º—ñ–Ω–Ω–æ—Å—Ç—ñ –æ–±'—î–∫—Ç—ñ–≤ —Ä–æ–±–∏—Ç—å —Ü—ñ –∫–µ—à—ñ —ñ–¥–µ–∞–ª—å–Ω–∏–º–∏ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏ —É –±—É–¥—å-—è–∫—ñ–π —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑ –±–æ–∫—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –∑–≤'—è–∑–∫—É –º—ñ–∂ –Ω–µ–∑–º—ñ–Ω–Ω—ñ—Å—Ç—é, –∫–µ—à—É–≤–∞–Ω–Ω—è–º —Ç–∞ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤—ñ—Å—Ç—é. –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –ø–æ—î–¥–Ω—É—î –∑–Ω–∞–Ω–Ω—è –∑ –∫—ñ–ª—å–∫–æ—Ö –≤–∞–∂–ª–∏–≤–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π Java.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `new Integer(100) == new Integer(100)` –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `false`, –Ω–µ–∑–≤–∞–∂–∞—é—á–∏ –Ω–∞ –∫–µ—à? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –≤–∏—Ä–∞–∑ –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î `false`, —Ç–æ–º—É —â–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä `new` –≤ Java –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é **–≥–∞—Ä–∞–Ω—Ç—É—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ, —É–Ω—ñ–∫–∞–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ –≤ –∫—É–ø—ñ (Heap)**.
>
> **–ú–µ—Ö–∞–Ω—ñ–∑–º –∫–µ—à—É–≤–∞–Ω–Ω—è `Integer` —Ç—É—Ç –Ω–µ –∑–∞–¥—ñ—è–Ω–∏–π –≤–∑–∞–≥–∞–ª—ñ.** –ö–µ—à —Å–ø—Ä–∞—Ü—å–æ–≤—É—î —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ **–∞–≤—Ç–æ—É–ø–∞–∫–æ–≤–∫–∏ (Autoboxing)** –∞–±–æ –º–µ—Ç–æ–¥—É `Integer.valueOf()`.
>
> –ö–æ–ª–∏ –≤–∏ –ø–∏—à–µ—Ç–µ `new Integer(100)`, –≤–∏ —è–≤–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ç—É—î—Ç–µ JVM: "–°—Ç–≤–æ—Ä–∏ –¥–ª—è –º–µ–Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç `Integer`, —ñ–≥–Ω–æ—Ä—É—é—á–∏ –±—É–¥—å-—è–∫—ñ –∫–µ—à—ñ".
>
> –û—Ç–∂–µ, —É –≤–∏—Ä–∞–∑—ñ `new Integer(100) == new Integer(100)`:
>
> 1. –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ `new Integer(100)` —Å—Ç–≤–æ—Ä—é—î –æ–¥–∏–Ω –æ–±'—î–∫—Ç –≤ Heap.
> 2. –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ `new Integer(100)` —Å—Ç–≤–æ—Ä—é—î **–¥—Ä—É–≥–∏–π, –∞–±—Å–æ–ª—é—Ç–Ω–æ —ñ–Ω—à–∏–π** –æ–±'—î–∫—Ç –≤ Heap.
> 3. –û–ø–µ—Ä–∞—Ç–æ—Ä `==` –ø–æ—Ä—ñ–≤–Ω—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è (–∞–¥—Ä–µ—Å–∏ –≤ –ø–∞–º'—è—Ç—ñ) —Ü–∏—Ö –¥–≤–æ—Ö –æ–±'—î–∫—Ç—ñ–≤.
> 4. –û—Å–∫—ñ–ª—å–∫–∏ –∞–¥—Ä–µ—Å–∏ —Ä—ñ–∑–Ω—ñ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∂–¥–∏ –±—É–¥–µ `false`.
>
> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `new Integer(int)` —î –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º (`deprecated`) –∑ Java 9, —ñ –π–æ–≥–æ —Å–ª—ñ–¥ —É–Ω–∏–∫–∞—Ç–∏ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å `Integer.valueOf(int)`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ß—ñ—Ç–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `new` —Ç–∞ —É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –∫–µ—à—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –∞ –Ω–µ –¥–ª—è –≤—Å—ñ—Ö.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ Garbage Collector –≤–∑–∞—î–º–æ–¥—ñ—î –∑—ñ String Pool? –ß–∏ –º–æ–∂–µ —Ä—è–¥–æ–∫ –∑ –ø—É–ª—É –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–º? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, –º–æ–∂–µ.** –í–∑–∞—î–º–æ–¥—ñ—è –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤–µ—Ä—Å—ñ—ó Java.
>
> * **–î–æ Java 7 (–∫–æ–ª–∏ String Pool –±—É–≤ —É PermGen):** –ó–±–∏—Ä–∞–Ω–Ω—è —Å–º—ñ—Ç—Ç—è –≤ PermGen –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è –Ω–∞–±–∞–≥–∞—Ç–æ —Ä—ñ–¥—à–µ —ñ –±—É–ª–æ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º, –Ω—ñ–∂ —É –æ—Å–Ω–æ–≤–Ω—ñ–π –∫—É–ø—ñ. –†—è–¥–æ–∫ –∑ –ø—É–ª—É –º—ñ–≥ –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–π, —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –∫–ª–∞—Å, —â–æ –Ω–∞ –Ω—å–æ–≥–æ –ø–æ—Å–∏–ª–∞–≤—Å—è, –±—É–≤ –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –∑ –ø–∞–º'—è—Ç—ñ, —â–æ —Ç—Ä–∞–ø–ª—è—î—Ç—å—Å—è –¥—É–∂–µ —Ä—ñ–¥–∫–æ. –¶–µ –±—É–ª–æ –¥–∂–µ—Ä–µ–ª–æ–º –≤–∏—Ç–æ–∫—ñ–≤ –ø–∞–º'—è—Ç—ñ.
>
> * **–ó Java 7 (–∫–æ–ª–∏ String Pool –ø–µ—Ä–µ–º—ñ—Å—Ç–∏–ª–∏ –≤ Heap):** –†—è–¥–∫–∏ –≤ –ø—É–ª—ñ —Å—Ç–∞–ª–∏ –∑–≤–∏—á–∞–π–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏ –¥–ª—è –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è. –†—è–¥–æ–∫ –∑ String Pool –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–π, —è–∫—â–æ –Ω–∞ –Ω—å–æ–≥–æ **–Ω–µ–º–∞—î –∂–æ–¥–Ω–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å** –∑ "–∂–∏–≤–æ–≥–æ" –∫–æ–¥—É –≤–∞—à–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏ (–∑—ñ —Å—Ç–µ–∫—ñ–≤, —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö –ø–æ–ª—ñ–≤ —Ç–æ—â–æ).
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public void myMethod() {
>     String s = "a very long and unique string that appears only here";
>     // –ö–æ–ª–∏ myMethod –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–±–æ—Ç—É, —ñ —è–∫—â–æ –Ω—ñ–¥–µ –±—ñ–ª—å—à–µ –Ω–µ–º–∞—î
>     // –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ —Ü–µ–π —Ä—è–¥–æ–∫, –ø—ñ–¥ —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ü–∏–∫–ª—É GC
>     // —Ü–µ–π —Ä—è–¥–æ–∫ –ú–û–ñ–ï –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–π –∑—ñ String Pool.
> }
> ```
>
> –°—É—á–∞—Å–Ω—ñ –∑–±–∏—Ä–∞—á—ñ —Å–º—ñ—Ç—Ç—è (—è–∫ G1GC) —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –¥–ª—è –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—ó —Ä—è–¥–∫—ñ–≤, —â–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –ø—Ä–æ—Ü–µ—Å —â–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º.
>
> –û—Ç–∂–µ, –≤ —Å—É—á–∞—Å–Ω–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö Java String Pool –Ω–µ —î –º—ñ—Å—Ü–µ–º, –¥–µ –æ–±'—î–∫—Ç–∏ –∂–∏–≤—É—Ç—å –≤—ñ—á–Ω–æ. –í–æ–Ω–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è GC, —è–∫ —ñ –≤—Å—ñ —ñ–Ω—à—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫—ñ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ —Ä–æ–±–æ—Ç—É –∑–±–∏—Ä–∞—á–∞ —Å–º—ñ—Ç—Ç—è —Ç–∞ –π–æ–≥–æ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ —Ä—ñ–∑–Ω–∏–º–∏ —á–∞—Å—Ç–∏–Ω–∞–º–∏ –ø–∞–º'—è—Ç—ñ JVM. –†–æ–∑—É–º—ñ–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –æ–±'—î–∫—Ç—ñ–≤ —É –ø—É–ª—ñ.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç–µ 100 000 –æ–±'—î–∫—Ç—ñ–≤ –∑ JSON, –¥–µ –ø–æ–ª–µ "status" –º–æ–∂–µ –º–∞—Ç–∏ –ª–∏—à–µ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–Ω—è: "NEW", "PROCESSING", "DONE". –Ø–∫ –≤–∏ –æ–ø—Ç–∏–º—ñ–∑—É—î—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ –¥–ª—è —Ü—å–æ–≥–æ –ø–æ–ª—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ –∫–µ—à—É–≤–∞–Ω–Ω—è? –ù–∞–≤–µ–¥—ñ—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥—É. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é JSON-–ø–∞—Ä—Å–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `new String(...)` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è "status"), —É –ø–∞–º'—è—Ç—ñ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ 100 000 —Ä—è–¥–∫–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤, —Ö–æ—á–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å –ª–∏—à–µ —Ç—Ä–∏.
>
> –ù–∞–π–∫—Ä–∞—â–∏–π —Å–ø–æ—Å—ñ–± –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó ‚Äî **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `String.intern()`** –¥–ª—è –ø–æ–ª—è "status" –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –¶–µ –∑–º—É—Å–∏—Ç—å —É—Å—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤–∫–∞–∑—É–≤–∞—Ç–∏ –ª–∏—à–µ –Ω–∞ —Ç—Ä–∏ –æ–±'—î–∫—Ç–∏ ("NEW", "PROCESSING", "DONE") —É String Pool.
>
> **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó (—É—è–≤–Ω–∏–π Post-Deserialization-–º–µ—Ç–æ–¥):**
>
> ```java
> class Order {
>     private long id;
>     private String status;
>     // ... –≥–µ—Ç—Ç–µ—Ä–∏ —Ç–∞ —Å–µ—Ç—Ç–µ—Ä–∏
>
>     // –ú–µ—Ç–æ–¥, —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—ñ—Å–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó,
>     // –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–Ω–æ—Ç–∞—Ü—ñ–π –¥–µ—è–∫–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ (Jackson)
>     public void optimize() {
>         if (this.status != null) {
>             this.status = this.status.intern();
>         }
>     }
> }
>
> // ... —É –≥–æ–ª–æ–≤–Ω—ñ–π –ª–æ–≥—ñ—Ü—ñ ...
> List<Order> orders = loadOrdersFromJSON();
> for (Order order : orders) {
>     order.optimize(); // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—é –¥–æ –∫–æ–∂–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞
> }
> ```
>
> **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:**
> –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–µ—à —É –≤–∏–≥–ª—è–¥—ñ `Map<String, String>`, –¥–µ –∫–ª—é—á ‚Äî —Ü–µ —Ä—è–¥–æ–∫, –∞ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –π–æ–≥–æ —ñ–Ω—Ç—Ä–µ–Ω–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è, —ñ –ø—Ä–æ–ø—É—Å–∫–∞—Ç–∏ –≤—Å—ñ —Å—Ç–∞—Ç—É—Å–∏ —á–µ—Ä–µ–∑ –Ω—å–æ–≥–æ. –ê–±–æ —â–µ –∫—Ä–∞—â–µ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Enum` –∑–∞–º—ñ—Å—Ç—å `String` –¥–ª—è —Å—Ç–∞—Ç—É—Å—ñ–≤.
>
> ```java
> public enum Status { NEW, PROCESSING, DONE }
> ```
>
> –¶–µ –Ω–∞–π–∫—Ä–∞—â–µ —Ä—ñ—à–µ–Ω–Ω—è –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ `Enum` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é —î —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞–º–∏, —ñ –º–∏ –±—É–¥–µ–º–æ –º–∞—Ç–∏ –ª–∏—à–µ —Ç—Ä–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ —Å—Ç–∞—Ç—É—Å—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –∑–Ω–∞–Ω–Ω—è (`intern()`) –¥–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ—ó –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—ó –∑–∞–¥–∞—á—ñ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó. –£–º—ñ–Ω–Ω—è –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä—ñ—à–µ–Ω—å, –≤–∫–ª—é—á–Ω–æ –∑ –Ω–∞–π–∫—Ä–∞—â–∏–º (Enum).*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å —Ü–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ß–æ–º—É –ø–µ—Ä—à–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è ‚Äî `true`, –∞ –¥—Ä—É–≥–µ ‚Äî `false`?

```java
String a = "Ja";
String b = "va";

String c = "Java";
String d = a + b;
String e = "Ja" + "va";

System.out.println(c == e);
System.out.println(c == d);
```

‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ —î —á—É–¥–æ–≤–æ—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—î—é —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ **–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—î—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç —á–∞—Å—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó** —Ç–∞ **–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—î—é –∑–º—ñ–Ω–Ω–∏—Ö —á–∞—Å—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**.
>
> 1. **`System.out.println(c == e);` ‚Üí `true`**
>     * `String e = "Ja" + "va";`
>     * –í–∏—Ä–∞–∑ `"Ja" + "va"` —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö **—Ä—è–¥–∫–æ–≤–∏—Ö –ª—ñ—Ç–µ—Ä–∞–ª—ñ–≤**, —è–∫—ñ —î –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏.
>     * **–ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä Java** –æ–ø—Ç–∏–º—ñ–∑—É—î —Ü–µ–π –≤–∏—Ä–∞–∑. –í—ñ–Ω –≤–∏–∫–æ–Ω—É—î –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—é –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –≤–µ—Å—å –≤–∏—Ä–∞–∑ –Ω–∞ –æ–¥–∏–Ω –ª—ñ—Ç–µ—Ä–∞–ª: `"Java"`.
>     * –û—Ç–∂–µ, —Ü–µ–π —Ä—è–¥–æ–∫ –∫–æ–¥—É —Å—Ç–∞—î –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∏–º `String e = "Java";`.
>     * –û—Å–∫—ñ–ª—å–∫–∏ —ñ `c`, —ñ `e` –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ —Ç–æ–π —Å–∞–º–∏–π –ª—ñ—Ç–µ—Ä–∞–ª `"Java"` —É String Pool, —ó—Ö–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —î –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏.
>
> 2. **`System.out.println(c == d);` ‚Üí `false`**
>     * `String d = a + b;`
>     * –í–∏—Ä–∞–∑ `a + b` —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑—ñ **–∑–º—ñ–Ω–Ω–∏—Ö**, –∞ –Ω–µ –ª—ñ—Ç–µ—Ä–∞–ª—ñ–≤.
>     * –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –æ–±—á–∏—Å–ª–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö `a` —ñ `b` —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–æ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω–∏—Ç–∏—Å—è.
>     * –¶—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (runtime)**. –ó–∞–∑–≤–∏—á–∞–π, –¥–ª—è —Ü—å–æ–≥–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `StringBuilder`, —è–∫–∏–π –æ–±'—î–¥–Ω—É—î —Ä—è–¥–∫–∏, —ñ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è **–Ω–æ–≤–∏–π –æ–±'—î–∫—Ç `String`** —É –∫—É–ø—ñ (Heap), –ø–æ–∑–∞ String Pool.
>     * `c` –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ –æ–±'—î–∫—Ç —É –ø—É–ª—ñ, –∞ `d` ‚Äî –Ω–∞ —â–æ–π–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –æ–±'—î–∫—Ç —É –∫—É–ø—ñ. –á—Ö–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Ä—ñ–∑–Ω—ñ.
>
> –¶–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, —è–∫ –Ω–µ–≤–µ–ª–∏–∫–∞ –∑–º—ñ–Ω–∞ –≤ –∫–æ–¥—ñ (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó –∑–∞–º—ñ—Å—Ç—å –ª—ñ—Ç–µ—Ä–∞–ª—É) –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –∑–º—ñ–Ω—é—î —Å–ø–æ—Å—ñ–± –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó —Ç–∞ —ó—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –≤ Java —Ç–∞ –π–æ–≥–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ–π. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —á—ñ—Ç–∫–æ —Ä–æ–∑—Ä—ñ–∑–Ω—è—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è compile-time —Ç–∞ runtime.*
