---
layout: default
title: "–ú–æ–∫–∏ —Ç–∞ –°—Ç–∞–±–∏ –≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ"
parent: "Java JUnit"
grand_parent: "Java Core"
nav_order: 13
---

# –ú–æ–∫–∏ —Ç–∞ –°—Ç–∞–±–∏ –≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Stub` ‚Äì —Ü–µ —Ç–µ—Å—Ç–æ–≤–∏–π –æ–±'—î–∫—Ç, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–∞–ø–µ—Ä–µ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –Ω–∞–¥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.
  `Mock` ‚Äì —Ü–µ —Ç–µ—Å—Ç–æ–≤–∏–π –æ–±'—î–∫—Ç, —è–∫–∏–π —ñ–º—ñ—Ç—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –Ω–∏–º (–≤–∏–∫–ª–∏–∫–∏
  –º–µ—Ç–æ–¥—ñ–≤, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ—Ä—è–¥–æ–∫).
* –ø–æ–Ω—è—Ç—Ç—è: `Stub`, `Mock`, `Mockito` (–ø–æ–ø—É–ª—è—Ä–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫), —Ç–µ—Å—Ç–æ–≤—ñ –¥—É–±–ª–µ—Ä–∏, `Spy` (—á–∞—Å—Ç–∫–æ–≤–∏–π –º–æ–∫).
* –ø—Ä–∏–∫–ª–∞–¥–∏: `when(service.get()).thenReturn(value);` (stub), `verify(service).callMethod();` (mock).
* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó Unit-—Ç–µ—Å—Ç—ñ–≤ –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π. `Mockito` ‚Äì –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π
  —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –º–æ–∫—ñ–Ω–≥—É.
* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `mock` —Ç–∞ `stub`, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Mockito`.

#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Stub** ‚Äî –æ–± º—î–∫—Ç, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–∞–ø–µ—Ä–µ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è. –ô–æ–≥–æ –º–µ—Ç–∞ ‚Äî **–Ω–∞–¥–∞—Ç–∏ –¥–∞–Ω—ñ**.
* **Mock** ‚Äî –æ–± º—î–∫—Ç, —è–∫–∏–π —ñ–º—ñ—Ç—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –æ–± º—î–∫—Ç–∞ —ñ –¥–æ–∑–≤–æ–ª—è—î **–ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é** –∑ –Ω–∏–º (–≤–∏–∫–ª–∏–∫–∏,
  –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤).

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **–°—Ç–∞–±** ‚Äî —Ü–µ "–∞–∫—Ç–æ–≤–∏–π –≥—ñ—Å—Ç—å", —è–∫–∏–π –∫–∞–∂–µ —Ç–µ, —â–æ —Ç–∏ –π–æ–º—É –ø—Ä–æ–ø–∏—Å–∞–≤.
* **–ú–æ–∫** ‚Äî —Ü–µ "–¥–µ—Ç–µ–∫—Ç–∏–≤", —è–∫–∏–π –∑–∞–ø–∏—Å—É—î, —Ö—Ç–æ, –∫–æ–ª–∏ —ñ —è–∫ –∑ –Ω–∏–º –≥–æ–≤–æ—Ä–∏–≤.

---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

üì¶ **–¢–∏–ø–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –æ–± º—î–∫—Ç—ñ–≤** (–∑–∞ –ú–∞—Ä—Ç—ñ–Ω–æ–º –§–∞—É–ª–µ—Ä–æ–º):

|    –¢–∏–ø    |                         –ú–µ—Ç–∞                          |
|:---------:|:-----------------------------------------------------:|
| **Dummy** |        –ü—É—Å—Ç–∏–π –æ–± º—î–∫—Ç, –ø—Ä–æ—Å—Ç–æ —â–æ–± –Ω–µ –±—É–ª–æ null         |
| **Stub**  |         –ü–æ–≤–µ—Ä—Ç–∞—î –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –∑–∞–¥–∞–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å         |
| **Fake**  |      –ú–∞—î –ø—Ä–æ—Å—Ç—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é (–Ω–∞–ø—Ä. in-memory DB)       |
| **Mock**  |              –í–∞–ª—ñ–¥—É—î –æ—á—ñ–∫—É–≤–∞–Ω—É –≤–∑–∞—î–º–æ–¥—ñ—é              |
|  **Spy**  | –°–ø—Ä–∞–≤–∂–Ω—ñ–π –æ–± º—î–∫—Ç, –∞–ª–µ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤ |

üõ† **–û—Å–Ω–æ–≤–Ω—ñ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏**:

* **Mockito** (–Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π)
* EasyMock, JMock (–º–µ–Ω—à –ø–æ–ø—É–ª—è—Ä–Ω—ñ)
* PowerMock (–¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤, deprecated —É JUnit 5\)
* JUnit 5 –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é **`@ExtendWith(MockitoExtension.class)`**

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* –£—è–≤–∏, —â–æ —Ç–µ—Å—Ç—É—î—à –∫–∞–≤–æ–≤–∞—Ä–∫—É. –ó–∞–º—ñ—Å—Ç—å —Å–ø—Ä–∞–≤–∂–Ω—å–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —á–∏ –∞–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –±–ª–æ–∫—É ‚Äî –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î—à **–º–æ–∫**.
* –°–ø—Ä–∞–≤–∂–Ω—ñ–π unit test –º–∞—î –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ **–ª–∏—à–µ –æ–¥–Ω—É –æ–¥–∏–Ω–∏—Ü—é –ª–æ–≥—ñ–∫–∏**. –Ø–∫—â–æ —Ç–≤—ñ–π –∫–ª–∞—Å —Ç—è–≥–Ω–µ HTTP-–∑–∞–ø–∏—Ç –∞–±–æ –ª—ñ–∑–µ –≤ –±–∞–∑—É ‚Äî
  –º–æ–∫–∞–π\!
* **Stub** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è, –∫–æ–ª–∏ —Ç–∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—à, —â–æ–± –º–µ—Ç–æ–¥ **`getTemperature()`** –ø–æ–≤–µ—Ä–Ω—É–≤ 95 —ñ –≤—Å–µ.
* **Mock** ‚Äî –∫–æ–ª–∏ –≤–∞–∂–ª–∏–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ **`sendEmail()`** –±—É–≤ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º **`"Warning"`**.

---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

üìå **Mockito: –º–æ–∫—ñ–Ω–≥ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–ª–∏–∫—ñ–≤**

```java
@ExtendWith(MockitoExtension.class)
class CoffeeMachineTest {

    @Mock
    WaterHeater heater;

    @InjectMocks
    CoffeeMachine machine;

    @Test
    void shouldHeatWater() {
        machine.makeCoffee();

        verify(heater).heatWater(); // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–ª–∏–∫—É
    }
}
```
üìå **Stub-–ø–æ–≤–µ–¥—ñ–Ω–∫–∞: –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è**

```java
when(heater.getTemperature()).thenReturn(95);

assertEquals(95, machine.getCurrentTemperature());
```
üìå **Spy: —á–∞—Å—Ç–∫–æ–≤–æ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –æ–± º—î–∫—Ç**


```java
@Spy
List<String> spyList = new ArrayList<>();

@Test
void testSpy() {
    spyList.add("Hello");
    verify(spyList).add("Hello");
}
```
---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

|     –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞     |             Stub             |            Mock             |
|:----------------------:|:----------------------------:|:---------------------------:|
|        **–ú–µ—Ç–∞**        | –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è |    –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é     |
| **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–ª–∏–∫—ñ–≤** |              ‚ùå               |              ‚úÖ              |
| **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏**  |    –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ / —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∞    | –ü–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥–º—ñ–Ω—è—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É |
|      **–ü—Ä–∏–∫–ª–∞–¥**       |  **`when().thenReturn()`**   |       **`verify()`**        |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –Ø–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ mock —ñ stub? ‚≠êÔ∏è‚≠êÔ∏è**

#### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* Stub –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.
* Mock –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏, —á–∏ –º–µ—Ç–æ–¥–∏ –±—É–ª–∏ –≤–∏–∫–ª–∏–∫–∞–Ω—ñ, –∑ —è–∫–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ —ñ —Å–∫—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤.

üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:

–ß–∏ —Ä–æ–∑—É–º—ñ—î—à —Ç–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–µ—Å—Ç–æ–≤–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.

---

### **‚ùì –ö–æ–ª–∏ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–æ–∫–∏ —É —Ç–µ—Å—Ç–∞—Ö? ‚≠êÔ∏è**

#### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–∑–æ–ª—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, HTTP-–∑–∞–ø–∏—Ç—ñ–≤, —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —á–∞—Å—É).

üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:

–ß–∏ –Ω–µ –ø–∏—à–µ—à —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Ç–µ—Å—Ç –ø—ñ–¥ –≤–∏–≥–ª—è–¥–æ–º unit —Ç–µ—Å—Ç—É.

---

### **‚ùì –Ø–∫–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞–π—á–∞—Å—Ç—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –¥–ª—è –º–æ–∫—ñ–Ω–≥—É –≤ Java?**

#### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

**Mockito** ‚Äî –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π —ñ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è JUnit 5\.

üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:

–ß–∏ –∑–Ω–∞–π–æ–º–∏–π –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —ñ –Ω–µ —Ç–µ–æ—Ä–µ—Ç–∏–∫.

---

### **‚ùì –ß–∏–º spy –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ mock?**

#### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

Spy –≤–∏–∫–ª–∏–∫–∞—î —Å–ø—Ä–∞–≤–∂–Ω—ñ –º–µ—Ç–æ–¥–∏, –∞–ª–µ –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é. Mock ‚Äî –ø—ñ–¥–º—ñ–Ω—è—î –≤—Å–µ.

üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:

–†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.

---

### **‚ùì –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –º–µ—Ç–æ–¥ –±—É–≤ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π –æ–¥–∏–Ω —Ä–∞–∑?**

#### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

```java
verify(service, times(1)).doSomething();
```
üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:

–ó–Ω–∞–Ω–Ω—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É —ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π Mockito.

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**"SMaSH"** ‚Äì –º–æ–∫–∏, —Å—Ç–∞–±–∏ —ñ –∫–æ–º–ø–∞–Ω—ñ—è:

* **S** ‚Äî Stub ‚Üí Simple return
* **M** ‚Äî Mock ‚Üí Monitor interaction
* **a** ‚Äî and
* **S** ‚Äî Spy ‚Üí Semi-real
* **H** ‚Äî Helper ‚Üí test doubles as test helpers

---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

* **–ú–æ–∫–∏** –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –æ–±‚Äô—î–∫—Ç–∞–º–∏.
* **–°—Ç–∞–±–∏** –ø—ñ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.
* –§—Ä–µ–π–º–≤–æ—Ä–∫ ‚Ññ1 ‚Äî **Mockito**, —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ JUnit 5\.
* Unit-—Ç–µ—Å—Ç–∏ –º–∞—é—Ç—å –±—É—Ç–∏ **—ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ** ‚Äî –º–æ–∫–∞–π—Ç–µ –≤—Å–µ, —â–æ –Ω–µ —î "unit".
* –ù–∞ —ñ–Ω—Ç–µ—Ä–≤‚Äô—é –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –ø–æ–∫–∞–∂–∏, —â–æ –∑–Ω–∞—î—à **–≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å —ñ –º–µ—Ç—É** –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É –∑–∞–º—ñ–Ω–Ω–∏–∫–∞.