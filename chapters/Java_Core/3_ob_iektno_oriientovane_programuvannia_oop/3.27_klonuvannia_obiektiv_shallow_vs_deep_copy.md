---
layout: default
title: "–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –æ–±‚Äô—î–∫—Ç—ñ–≤: shallow vs deep copy"
parent: "–û–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è (–û–û–ü)"
grand_parent: "Java Core"
nav_order: 27
---

# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –æ–±‚Äô—î–∫—Ç—ñ–≤: shallow vs deep copy

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Shallow copy` (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ) ‚Äì –∫–æ–ø—ñ—é—î –ø—Ä–∏–º—ñ—Ç–∏–≤–∏ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ (–≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ). `Deep copy` (–≥–ª–∏–±–æ–∫–µ) ‚Äì —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø—ñ—é—î –≤—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏, —Å—Ç–≤–æ—Ä—é—é—á–∏ –ø–æ–≤–Ω—É –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é.

* –ø–æ–Ω—è—Ç—Ç—è: `clone()`, `Cloneable`, Shallow copy, Deep copy.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–º—ñ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ `Address` —É `Person` –≤ `shallow copy` –≤–ø–ª–∏–≤–∞—î –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª, —Ç–æ–¥—ñ —è–∫ —É `deep copy` ‚Äì –Ω—ñ.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `clone()` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ä–æ–±–∏—Ç—å `shallow copy`. `Deep copy` –Ω–µ–æ–±—Ö—ñ–¥–Ω–∞, –∫–æ–ª–∏ –æ–±'—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å mutable –ø–æ–ª—è.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ deep copy, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ `clone()`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **clone()** ‚Äî –º–µ—Ç–æ–¥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É **`Cloneable`**, —â–æ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é –æ–±‚Äô—î–∫—Ç–∞.
* **Shallow copy (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è)** ‚Äî –∫–æ–ø—ñ—è –æ–±‚Äô—î–∫—Ç–∞, –≤ —è–∫—ñ–π –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ–ª—è –∫–æ–ø—ñ—é—é—Ç—å—Å—è, –∞ –æ–±‚Äô—î–∫—Ç–Ω—ñ –ø–æ–ª—è ‚Äî –∫–æ–ø—ñ—é—é—Ç—å—Å—è —è–∫ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (—Å–ø—ñ–ª—å–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏).
* **Deep copy (–≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è)** ‚Äî –ø–æ–≤–Ω–∞ –∫–æ–ø—ñ—è –æ–±‚Äô—î–∫—Ç–∞ —Ä–∞–∑–æ–º —ñ–∑ —É—Å—ñ–º–∞ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –æ–±‚Äô—î–∫—Ç–∞–º–∏ (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–æ–≤—ñ –æ–±‚Äô—î–∫—Ç–∏).

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **Shallow** ‚Äî —è–∫ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ—Ä–æ–±–∫—É, –∞–ª–µ –∑–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ —Å–∞–º—ñ —Ä–µ—á—ñ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ (–≤–æ–Ω–∏ —Å–ø—ñ–ª—å–Ω—ñ).
* **Deep** ‚Äî —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —ñ –∫–æ—Ä–æ–±–∫—É, —ñ –≤—Å–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é, —â–æ–± –≤—Å–µ –±—É–ª–æ –æ–∫—Ä–µ–º–æ.

---

## **–û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ –∫–æ–ø—ñ–π**

üìä **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:**

| –¢–∏–ø –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | –©–æ –∫–æ–ø—ñ—é—î—Ç—å—Å—è | –ü—Ä–∏–∫–ª–∞–¥ –≤–ø–ª–∏–≤—É –∑–º—ñ–Ω |
| :---: | :---: | :---: |
| **Shallow copy** | –ü—Ä–∏–º—ñ—Ç–∏–≤–∏ ‚Äî –∫–æ–ø—ñ—é—é—Ç—å—Å—è, –æ–±‚Äô—î–∫—Ç–∏ ‚Äî –ø–æ—Å–∏–ª–∞–Ω–Ω—è | –í–∫–ª–∞–¥–µ–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –≤ –æ–±–æ—Ö –∫–æ–ø—ñ—è—Ö |
| **Deep copy** | –ü—Ä–∏–º—ñ—Ç–∏–≤–∏ —ñ –æ–±‚Äô—î–∫—Ç–∏ ‚Äî –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ–ø—ñ—é—é—Ç—å—Å—è | –ó–º—ñ–Ω–∏ –≤ –∫–æ–ø—ñ—ó –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **`clone()`** —Ä–æ–±–∏—Ç—å shallow copy.
* –Ø–∫—â–æ –≤ –∫–ª–∞—Å—ñ —î –ø–æ–ª—è-–æ–±‚Äô—î–∫—Ç–∏ (—ñ–Ω—à—ñ –∫–ª–∞—Å–∏, —Å–ø–∏—Å–∫–∏), —Ç–æ shallow copy —Å–∫–æ–ø—ñ—é—î –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω–∏—Ö.
* –©–æ–± –º–∞—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é ‚Äî —Ç—Ä–µ–±–∞ –≤—Ä—É—á–Ω—É –∑—Ä–æ–±–∏—Ç–∏ deep copy, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ –Ω–æ–≤—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

üîπ **Shallow copy (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è):**

```java
class Address {
    String city;
    Address(String city) { this.city = city; }
}

class Person implements Cloneable {
    String name;
    Address address;

    Person(String name, Address address) {
        this.name = name;
        this.address = address;
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone(); // –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è
    }
}

Person p1 = new Person("Alice", new Address("Kyiv"));
Person p2 = (Person) p1.clone();

p2.address.city = "Lviv";

System.out.println(p1.address.city); // ‚ùó "Lviv" -- –∑–º—ñ–Ω–∏ –≤—ñ–¥–±–∏–ª–∏—Å—å —É –æ–±–æ—Ö, –±–æ —Å–ø—ñ–ª—å–Ω–∏–π –æ–±'—î–∫—Ç Address
```

---

üîπ **Deep copy (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è):**

```java
class Person implements Cloneable {
    String name;
    Address address;

    Person(String name, Address address) {
        this.name = name;
        this.address = address;
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        Person cloned = (Person) super.clone();
        cloned.address = new Address(this.address.city); // —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç –≤—Ä—É—á–Ω—É
        return cloned;
    }
}
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Shallow Copy | Deep Copy |
| :---: | :---: | :---: |
| **–ü—Ä–∏–º—ñ—Ç–∏–≤–∏** | –ö–æ–ø—ñ—é—é—Ç—å—Å—è | –ö–æ–ø—ñ—é—é—Ç—å—Å—è |
| **–í–∫–ª–∞–¥–µ–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏** | –°–ø—ñ–ª—å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è | –ù–æ–≤—ñ, –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ |
| **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** | –ó–º—ñ–Ω–∏ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –æ–±–∏–¥–≤—ñ –∫–æ–ø—ñ—ó | –ö–æ–ø—ñ—ó –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ |
| **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∫–æ–¥—É** | –ü—Ä–æ—Å—Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è | –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–∏—Å–∞—Ç–∏ –≤—Ä—É—á–Ω—É/—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

* **Shallow** \= *Same references* (–æ–¥–Ω—ñ –π —Ç—ñ —Å–∞–º—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è)
* **Deep** \= *Different everything* (—É—Å–µ –Ω–æ–≤–µ, –æ–∫—Ä–µ–º–µ)

"Shallow ‚Äî –∫–æ–ø—ñ—è –∑–≤–µ—Ä—Ö—É, Deep ‚Äî –∫–æ–ø—ñ—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ."

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –≤ Java –±—É–≤–∞—î –¥–≤–æ—Ö –≤–∏–¥—ñ–≤: **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ (shallow)** —ñ **–≥–ª–∏–±–æ–∫–µ (deep)**.

* –ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ ‚Äî –ø—Ä–æ—Å—Ç–µ, –∞–ª–µ —Ä–æ–∑–¥—ñ–ª—è—î –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ –º—ñ–∂ –∫–æ–ø—ñ—è–º–∏, —â–æ –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ –∑–º—ñ–Ω–∏.
* –ì–ª–∏–±–æ–∫–µ ‚Äî —Å—Ç–≤–æ—Ä—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é, –∞–ª–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó –ª–æ–≥—ñ–∫–∏ —ñ —á–∞—Å—Ç–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤.

–¶–µ –æ—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤–æ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –º–æ–¥–µ–ª—è–º–∏, DTO, –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏, –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω—ñ—Å—Ç—é ‚Äî —â–æ–± –∑–º—ñ–Ω–∏ –≤ –æ–¥–Ω–æ–º—É –æ–±‚Äô—î–∫—Ç—ñ –Ω–µ –≤–ø–ª–∏–≤–∞–ª–∏ –Ω–∞ —ñ–Ω—à—ñ.

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —É —á–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∏–º (shallow) —Ç–∞ –≥–ª–∏–±–æ–∫–∏–º (deep) –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º –æ–±'—î–∫—Ç—ñ–≤.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†—ñ–∑–Ω–∏—Ü—è –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, **—è–∫ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –ø–æ–ª—è, —â–æ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ —ñ–Ω—à—ñ –æ–±'—î–∫—Ç–∏**.
>
> **Shallow Copy (–ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è):**
>
> * –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç-"–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä".
> * **–ü—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ–ª—è** (`int`, `double` —Ç–æ—â–æ) –∫–æ–ø—ñ—é—é—Ç—å—Å—è –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º.
> * **–ü–æ–ª—è-–ø–æ—Å–∏–ª–∞–Ω–Ω—è** (`String`, `List`, –∫–∞—Å—Ç–æ–º–Ω—ñ –æ–±'—î–∫—Ç–∏) –∫–æ–ø—ñ—é—é—Ç—å—Å—è —è–∫ **–ø–æ—Å–∏–ª–∞–Ω–Ω—è (–∞–¥—Ä–µ—Å–∏ –≤ –ø–∞–º'—è—Ç—ñ)**.
> * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤–∏–π —Ç–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç–∏ **—Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å** —Ç—ñ —Å–∞–º—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏. –ó–º—ñ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ —á–µ—Ä–µ–∑ –æ–¥–Ω—É –∫–æ–ø—ñ—é –±—É–¥–µ –≤–∏–¥–∏–º–∞ —ñ –≤ —ñ–Ω—à—ñ–π.
>
> **Deep Copy (–ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è):**
>
> * –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç-"–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä".
> * **–ü—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ –ø–æ–ª—è** –∫–æ–ø—ñ—é—é—Ç—å—Å—è –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º.
> * **–ü–æ–ª—è-–ø–æ—Å–∏–ª–∞–Ω–Ω—è** –∫–æ–ø—ñ—é—é—Ç—å—Å—è **—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ**. –¢–æ–±—Ç–æ, –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ —Ç–∞–∫–æ–∂ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –π–æ–≥–æ **–ø–æ–≤–Ω–∞ –∫–æ–ø—ñ—è**.
> * **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤–∏–π —Ç–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç–∏ —î **–ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º–∏**. –í–æ–Ω–∏ –Ω–µ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏—Ö –∑–º—ñ–Ω—é–≤–∞–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**

* **Shallow Copy:** –í–∏ —Å–∫–æ–ø—ñ—é–≤–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç Word (`.docx`), —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–ø—ñ–ª—å–Ω—É —Ç–∞–±–ª–∏—Ü—é Excel, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –º–µ—Ä–µ–∂—ñ. –£ –≤–∞—Å –¥–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏, –∞–ª–µ —Ç–∞–±–ª–∏—Ü—è –æ–¥–Ω–∞.
* **Deep Copy:** –í–∏ —Å–∫–æ–ø—ñ—é–≤–∞–ª–∏ —ñ –¥–æ–∫—É–º–µ–Ω—Ç, —ñ —Å–∞–º—É —Ç–∞–±–ª–∏—Ü—é Excel, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ —ó—ó –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é. –¢–µ–ø–µ—Ä —É –≤–∞—Å –¥–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏, –∫–æ–∂–µ–Ω –∑—ñ —Å–≤–æ—î—é –≤–ª–∞—Å–Ω–æ—é —Ç–∞–±–ª–∏—Ü–µ—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –æ–±'—î–∫—Ç–∏ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å –≤ –ø–∞–º'—è—Ç—ñ, —Ç–∞ –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤ –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π —Ç–∏–ø –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ–Ω—É—î –º–µ—Ç–æ–¥ `Object.clone()`? –ü—Ä–æ—ñ–ª—é—Å—Ç—Ä—É–π—Ç–µ –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, `protected` –º–µ—Ç–æ–¥ `Object.clone()` –≤–∏–∫–æ–Ω—É—î **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (shallow copy)**.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
> –í—ñ–Ω —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä —Ç–æ–≥–æ –∂ –∫–ª–∞—Å—É —ñ –ø–æ–±—ñ—Ç–æ–≤–æ –∫–æ–ø—ñ—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤ –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ –≤ –Ω–æ–≤–∏–π.
>
> **–ü—Ä–∏–∫–ª–∞–¥, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–æ–±–ª–µ–º—É:**
>
> ```java
> class Address { public String city; }
>
> class User implements Cloneable {
>     public String name;
>     public Address address;
>
>     @Override
>     public User clone() throws CloneNotSupportedException {
>         return (User) super.clone(); // –í–∏–∫–ª–∏–∫ Object.clone()
>     }
> }
>
> Address originalAddress = new Address();
> originalAddress.city = "Kyiv";
>
> User user1 = new User();
> user1.name = "John";
> user1.address = originalAddress;
>
> User user2 = user1.clone();
>
> // –ó–º—ñ–Ω—é—î–º–æ –º—ñ—Å—Ç–æ –≤ –∫–æ–ø—ñ—ó
> user2.address.city = "Lviv";
>
> // –ú—ñ—Å—Ç–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è —ñ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ!
> System.out.println(user1.address.city); // –í–∏–≤–µ–¥–µ: Lviv
> ```
>
> –û—Å–∫—ñ–ª—å–∫–∏ `clone()` —Å–∫–æ–ø—ñ—é–≤–∞–≤ –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `Address`, –æ–±–∏–¥–≤–∞ –æ–±'—î–∫—Ç–∏ `user1` —Ç–∞ `user2` –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ **–æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π** –æ–±'—î–∫—Ç –∞–¥—Ä–µ—Å–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ `Object.clone()` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –¶–µ –∫–ª—é—á–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –º–∞—Ä–∫–µ—Ä–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Cloneable` —ñ —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `clone()` –±–µ–∑ –Ω—å–æ–≥–æ?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **`java.lang.Cloneable`** ‚Äî —Ü–µ **–º–∞—Ä–∫–µ—Ä–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**. –í—ñ–Ω —î "–ø–æ—Ä–æ–∂–Ω—ñ–º" —ñ –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –∂–æ–¥–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤.
>
> **–ô–æ–≥–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**
>
> * –°–∏–≥–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ JVM —Ç–∞ —ñ–Ω—à–∏–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º, —â–æ –æ–±'—î–∫—Ç–∏ —Ü—å–æ–≥–æ –∫–ª–∞—Å—É **–ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è** —ñ —â–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ –∫–ª–∞—Å—É –ø–æ–¥–±–∞–≤ –ø—Ä–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ü—å–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É.
>
> **–©–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è, —è–∫—â–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `clone()` –±–µ–∑ –Ω—å–æ–≥–æ:**
>
> * –Ø–∫—â–æ –∫–ª–∞—Å –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î `Cloneable`, –∞–ª–µ —É—Å–ø–∞–¥–∫–æ–≤—É—î `clone()` –≤—ñ–¥ `Object` —ñ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –π–æ–≥–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å—ñ—é –∞–±–æ –≤ –ø—ñ–¥–∫–ª–∞—Å—ñ, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î `Cloneable`), –º–µ—Ç–æ–¥ `Object.clone()` –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —á–∏ –æ–±'—î–∫—Ç `this` —î `instanceof Cloneable`.
> * –Ø–∫—â–æ –Ω—ñ, –≤—ñ–Ω –≤–∏–∫–∏–Ω–µ **`CloneNotSupportedException`**.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `implements Cloneable` —î —Å–≤–æ—î—Ä—ñ–¥–Ω–∏–º "–¥–æ–∑–≤–æ–ª–æ–º" –Ω–∞ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è. –¶–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π —Ç–∞ –¥–µ—â–æ "–∑–ª–∞–º–∞–Ω–∏–π" –º–µ—Ö–∞–Ω—ñ–∑–º, –∞–ª–µ –≤—ñ–Ω –≤—Å–µ —â–µ —î —á–∞—Å—Ç–∏–Ω–æ—é –º–æ–≤–∏.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> class MyClass { // –ù–µ —Ä–µ–∞–ª—ñ–∑—É—î Cloneable
>     public Object doClone() {
>         // return super.clone(); // –ü–û–ú–ò–õ–ö–ê: –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É, protected
>     }
> }
> ```
>
> –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –∑—Ä–æ–±–∏—Ç–∏ `doClone()` public, —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `Object.clone()` –≤—Å–µ –æ–¥–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î `Cloneable`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É `clone()` —Ç–∞ —Ä–æ–ª—ñ –º–∞—Ä–∫–µ—Ä–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `Cloneable`.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º `clone()` –≤–≤–∞–∂–∞—î—Ç—å—Å—è "–∑–ª–∞–º–∞–Ω–∏–º" —ñ –ø–æ–≥–∞–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é –≤ —Å—É—á–∞—Å–Ω—ñ–π Java?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –î–∂–æ—à—É–∞ –ë–ª–æ—Ö —Ç–∞ –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏—Ö Java-—Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –≤–≤–∞–∂–∞—é—Ç—å `clone()` –ø–æ–≥–∞–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é –∑ –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–∏—á–∏–Ω:
>
> 1. **–°–∫–ª–∞–¥–Ω–∏–π —Ç–∞ –Ω–µ—è–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç:** `Cloneable` ‚Äî —Ü–µ –º–∞—Ä–∫–µ—Ä–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —â–æ –Ω–µ –º–∞—î –º–µ—Ç–æ–¥—ñ–≤, –∞–ª–µ –º–∞–≥—ñ—á–Ω–∏–º —á–∏–Ω–æ–º –∑–º—ñ–Ω—é—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É `protected` –º–µ—Ç–æ–¥—É –≤ `Object`. –¶–µ –ø–æ–≥–∞–Ω–∏–π –¥–∏–∑–∞–π–Ω API.
>
> 2. **–ü—Ä–æ–±–ª–µ–º–∞ –∑ `final` –ø–æ–ª—è–º–∏:** `clone()` —Å—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç, –Ω–µ –≤–∏–∫–ª–∏–∫–∞—é—á–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. –¶–µ —É–Ω–µ–º–æ–∂–ª–∏–≤–ª—é—î –∑–º—ñ–Ω—É `final` –ø–æ–ª—ñ–≤, —â–æ —Ä–æ–±–∏—Ç—å –π–æ–≥–æ –Ω–µ—Å—É–º—ñ—Å–Ω–∏–º –∑ –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏.
>
> 3. **–ù–µ–±–µ–∑–ø–µ–∫–∞ –∑ –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è–º:** –Ø–∫—â–æ –≤–∏ —Ä–µ–∞–ª—ñ–∑—É—î—Ç–µ `clone()`, —Ç–æ –≤—Å—ñ –≤–∞—à—ñ –ø—ñ–¥–∫–ª–∞—Å–∏ —Ç–∞–∫–æ–∂ –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é, —ñ–Ω–∞–∫—à–µ –º–æ–∂—É—Ç—å –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ç–∏–ø–∞–º–∏.
>
> 4. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `clone()` –º–æ–∂–µ –±—É—Ç–∏ —Å–∫–ª–∞–¥–Ω–æ —Ç–∞ —Å—Ö–∏–ª—å–Ω–æ –¥–æ –ø–æ–º–∏–ª–æ–∫, –æ—Å–æ–±–ª–∏–≤–æ —É —Å–∫–ª–∞–¥–Ω–∏—Ö —ñ—î—Ä–∞—Ä—Ö—ñ—è—Ö.
>
> 5. **–ó–∞–æ—Ö–æ—á—É—î –∫–∞—Å—Ç–∏–Ω–≥:** –ú–µ—Ç–æ–¥ `Object.clone()` –ø–æ–≤–µ—Ä—Ç–∞—î `Object`, —â–æ –≤–∏–º–∞–≥–∞—î —è–≤–Ω–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ (`cast`) –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞.
>
> –ß–µ—Ä–µ–∑ —Ü—ñ –ø—Ä–æ–±–ª–µ–º–∏, –≤ —Å—É—á–∞—Å–Ω–æ–º—É –∫–æ–¥—ñ –ø–µ—Ä–µ–≤–∞–≥–∞ –Ω–∞–¥–∞—î—Ç—å—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–º —Å–ø–æ—Å–æ–±–∞–º –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ö—Ä–∏—Ç–∏—á–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è —Ç–∞ –∑–Ω–∞–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Å—É—á–∞—Å–Ω–æ—ó Java. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω –∑–Ω–∞—Ç–∏, —á–æ–º—É `clone()` —î –ø—Ä–æ–±–ª–µ–º–Ω–∏–º, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —è–∫ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —î –∫—Ä–∞—â—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é `Cloneable` —Ç–∞ `clone()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ü—Å–Ω—É—é—Ç—å –±—ñ–ª—å—à –ø—Ä–æ—Å—Ç—ñ, –±–µ–∑–ø–µ—á–Ω—ñ —Ç–∞ –≥–Ω—É—á–∫—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:
>
> 1. **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (Copy Constructor):**
>     * –¶–µ –Ω–∞–π–∫—Ä–∞—â–∏–π —ñ –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π –ø—ñ–¥—Ö—ñ–¥. –í–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —ñ–Ω—à–∏–π –æ–±'—î–∫—Ç —Ç–æ–≥–æ –∂ –∫–ª–∞—Å—É.
>     * **–ü–µ—Ä–µ–≤–∞–≥–∏:** –Ø–≤–Ω–∏–π, –±–µ–∑–ø–µ—á–Ω–∏–π, –ø—Ä–∞—Ü—é—î –∑ `final` –ø–æ–ª—è–º–∏, –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ/–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
>
>     ```java
>     public User(User other) {
>         this.name = other.name;
>         this.address = new Address(other.address); // –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>     }
>     ```
>
> 2. **–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥:**
>     * –°—Ö–æ–∂–∏–π –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —è–∫ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –º–µ—Ç–æ–¥.
>     `public static User newInstance(User other) { ... }`
>     * **–ü–µ—Ä–µ–≤–∞–≥–∏:** –î–æ–∑–≤–æ–ª—è—î –¥–∞—Ç–∏ –º–µ—Ç–æ–¥—É –∑—Ä–æ–∑—É–º—ñ–ª–µ —ñ–º'—è, –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø—ñ–¥—Ç–∏–ø.
>
> 3. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
>     * –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ–∑–≤–æ–ª—è—î –æ—Ç—Ä–∏–º–∞—Ç–∏ –≥–ª–∏–±–æ–∫—É –∫–æ–ø—ñ—é "–æ–±—Ö—ñ–¥–Ω–∏–º —à–ª—è—Ö–æ–º".
>     * **–Ü–¥–µ—è:** –í–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç–µ –æ–±'—î–∫—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É JSON), –∞ –ø–æ—Ç—ñ–º –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç–µ –π–æ–≥–æ –Ω–∞–∑–∞–¥ —É –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç.
>     * **–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏:** Jackson, Gson, Apache Commons SerializationUtils.
>     * **–ü–µ—Ä–µ–≤–∞–≥–∏:** –ü—Ä–æ—Å—Ç–∏–π —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–≤ –æ–±'—î–∫—Ç—ñ–≤.
>     * **–ù–µ–¥–æ–ª—ñ–∫–∏:** –ó–Ω–∞—á–Ω–æ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π, –Ω—ñ–∂ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–æ—à–∏—Ä–µ–Ω–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫, —è–∫—ñ –≤–∏—Ä—ñ—à—É—é—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∫—Ä–∞—â–µ, –Ω—ñ–∂ –≤–±—É–¥–æ–≤–∞–Ω—ñ, –∞–ª–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (deep copy) –¥–ª—è –æ–±'—î–∫—Ç–∞, —â–æ –º—ñ—Å—Ç–∏—Ç—å –∫–æ–ª–µ–∫—Ü—ñ—é –∑–º—ñ–Ω—é–≤–∞–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤? –ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥. ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –©–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—ó –Ω–µ —Ç—ñ–ª—å–∫–∏ –æ–±'—î–∫—Ç–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞–ª–µ –π **—É—Å—ñ—Ö –æ–±'—î–∫—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó**.
>
> **–ü—Ä–∏–∫–ª–∞–¥: `Invoice` –∑ —Å–ø–∏—Å–∫–æ–º `LineItem`**
>
> ```java
> class LineItem implements Cloneable { /* –∑–º—ñ–Ω—é–≤–∞–Ω–∏–π */
>     //...
>     @Override
>     public LineItem clone() throws CloneNotSupportedException {
>         return (LineItem) super.clone();
>     }
> }
>
> class Invoice implements Cloneable {
>     private List<LineItem> items;
>
>     @Override
>     public Invoice clone() throws CloneNotSupportedException {
>         // 1. –ü–æ—á–∏–Ω–∞—î–º–æ –∑ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–æ—ó –∫–æ–ø—ñ—ó Invoice
>         Invoice clonedInvoice = (Invoice) super.clone();
>
>         // 2. –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É –∫–æ–ª–µ–∫—Ü—ñ—é –¥–ª—è –∫–æ–ø—ñ—ó
>         clonedInvoice.items = new ArrayList<>();
>
>         // 3. –Ü—Ç–µ—Ä—É—î–º–æ –ø–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ–π –∫–æ–ª–µ–∫—Ü—ñ—ó —ñ –∫–ª–æ–Ω—É—î–º–æ –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç
>         for (LineItem item : this.items) {
>             clonedInvoice.items.add(item.clone()); // –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>         }
>
>         return clonedInvoice;
>     }
> }
> ```
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> * `super.clone()` —Å—Ç–≤–æ—Ä—é—î –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤—É –∫–æ–ø—ñ—é, –¥–µ –ø–æ–ª–µ `items` —É `clonedInvoice` –≤—Å–µ —â–µ –ø–æ—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞ —Ç–æ–π —Å–∞–º–∏–π —Å–ø–∏—Å–æ–∫, —â–æ —ñ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ.
> * –ú–∏ –Ω–µ–≥–∞–π–Ω–æ –∑–∞–º—ñ–Ω—é—î–º–æ —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `new ArrayList<>()`, —Å—Ç–≤–æ—Ä—é—é—á–∏ –Ω–æ–≤—É, –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—é.
> * –ü–æ—Ç—ñ–º –º–∏ –ø—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–º—É —Å–ø–∏—Å–∫—É, **–∫–ª–æ–Ω—É—î–º–æ –∫–æ–∂–µ–Ω `LineItem`** —ñ –¥–æ–¥–∞—î–º–æ —Ü—ñ **–Ω–æ–≤—ñ –∫–æ–ø—ñ—ó** –¥–æ –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —ñ —Å–∞–º—É –∫–æ–ª–µ–∫—Ü—ñ—é, —ñ —ó—ó –≤–º—ñ—Å—Ç.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `String` –ø–æ–ª—è –Ω–µ –≤–∏–º–∞–≥–∞—é—Ç—å –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `String` –ø–æ–ª—è –Ω–µ –≤–∏–º–∞–≥–∞—é—Ç—å –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —Ç–æ–º—É —â–æ –∫–ª–∞—Å `String` –≤ Java —î **–Ω–µ–∑–º—ñ–Ω–Ω–∏–º (immutable)**.
>
> * –ö–æ–ª–∏ –≤–∏ –≤–∏–∫–æ–Ω—É—î—Ç–µ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —ñ –∫–æ–ø—ñ—è, —ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª –±—É–¥—É—Ç—å –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ —Ç–æ–π —Å–∞–º–∏–π –æ–±'—î–∫—Ç `String` —É –ø–∞–º'—è—Ç—ñ.
> * **–ê–ª–µ**, –æ—Å–∫—ñ–ª—å–∫–∏ `String` –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏, –Ω–µ–º–∞—î –Ω—ñ—è–∫–æ–≥–æ —Ä–∏–∑–∏–∫—É, —â–æ –∑–º—ñ–Ω–∞ —Ä—è–¥–∫–∞ –≤ –æ–¥–Ω–æ–º—É –æ–±'—î–∫—Ç—ñ –≤–ø–ª–∏–Ω–µ –Ω–∞ —ñ–Ω—à–∏–π.
> * –Ø–∫—â–æ –≤–∏ —Å–ø—Ä–æ–±—É—î—Ç–µ "–∑–º—ñ–Ω–∏—Ç–∏" —Ä—è–¥–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `myString += "!"`), –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ **–Ω–æ–≤–∏–π –æ–±'—î–∫—Ç `String`**, —ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –±—É–¥–µ –æ–Ω–æ–≤–ª–µ–Ω–æ –ª–∏—à–µ –¥–ª—è —Ç—ñ—î—ó –∑–º—ñ–Ω–Ω–æ—ó, –∑ —è–∫–æ—é –≤–∏ –ø—Ä–∞—Ü—é–≤–∞–ª–∏.
>
> –¢–æ–º—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `String` —î **–∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–ø–µ—á–Ω–∏–º**. –¢–µ –∂ —Å–∞–º–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –π —ñ–Ω—à–∏—Ö –Ω–µ–∑–º—ñ–Ω–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ –∫–ª–∞—Å–∏-–æ–±–≥–æ—Ä—Ç–∫–∏ (`Integer`, `Double`), `BigDecimal` —Ç–∞ `BigInteger`.
>
> –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–µ –ª–∏—à–µ –¥–ª—è –ø–æ–ª—ñ–≤, —è–∫—ñ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ **–∑–º—ñ–Ω–Ω—ñ (mutable)** –æ–±'—î–∫—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `ArrayList`, `Date`, –∫–∞—Å—Ç–æ–º–Ω—ñ POJO).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –Ω–µ–∑–º—ñ–Ω–Ω–æ—Å—Ç—ñ —Ç–∞ —ó—ó –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ –ø–æ–≤–µ—Ä–Ω–µ —Ü–µ–π –∫–æ–¥ —ñ —á–æ–º—É?

```java
int[] original = {1, 2, 3};
int[] copy = original.clone();
copy[0] = 99;
System.out.println(original[0]);
```

‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ–π –∫–æ–¥ –≤–∏–≤–µ–¥–µ **`1`**.
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> –•–æ—á–∞ –º–∞—Å–∏–≤–∏ –≤ Java —î –æ–±'—î–∫—Ç–∞–º–∏, —ñ `original.clone()` –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é `Object.clone()`, –¥–ª—è **–º–∞—Å–∏–≤—ñ–≤ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏—Ö —Ç–∏–ø—ñ–≤** –≤–æ–Ω–∞ –ø—Ä–∞—Ü—é—î —è–∫ **–≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**.
>
> * `original.clone()` —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π –º–∞—Å–∏–≤** `copy` —Ç–∞–∫–æ–≥–æ –∂ —Ä–æ–∑–º—ñ—Ä—É.
> * –ü–æ—Ç—ñ–º –≤—ñ–Ω **–∫–æ–ø—ñ—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞** –∑ `original` –≤ `copy`. –û—Å–∫—ñ–ª—å–∫–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ —î –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏ (`int`), –∫–æ–ø—ñ—é—é—Ç—å—Å—è —ó—Ö–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.
> * –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –¥–≤–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –º–∞—Å–∏–≤–∏.
>
> –ó–º—ñ–Ω–∞ `copy = 99` –≤–ø–ª–∏–≤–∞—î –ª–∏—à–µ –Ω–∞ –º–∞—Å–∏–≤ `copy` —ñ –Ω—ñ—è–∫ –Ω–µ –∑–∞—á—ñ–ø–∞—î –º–∞—Å–∏–≤ `original`.
>
> **–û–¥–Ω–∞–∫, —è–∫–±–∏ —Ü–µ –±—É–≤ –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤**, —Ç–æ `clone()` –≤–∏–∫–æ–Ω–∞–≤ –±–∏ **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**:
>
> ```java
> Address[] originalAddr = {new Address("A")};
> Address[] copyAddr = originalAddr.clone();
> copyAddr[0].city = "B";
> System.out.println(originalAddr[0].city); // –í–∏–≤–µ–¥–µ "B"!
> ```
>
> –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –∫–æ–ø—ñ—é—é—Ç—å—Å—è –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±'—î–∫—Ç–∏ `Address`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –Ω—é–∞–Ω—Å—ñ–≤ —Ä–æ–±–æ—Ç–∏ `clone()` –¥–ª—è –º–∞—Å–∏–≤—ñ–≤. –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–æ–≤–∏–Ω–µ–Ω —Ä–æ–∑—Ä—ñ–∑–Ω—è—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –¥–ª—è –º–∞—Å–∏–≤—ñ–≤ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ —Ç–∞ –º–∞—Å–∏–≤—ñ–≤ –æ–±'—î–∫—Ç—ñ–≤.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ —Ñ–∞–±—Ä–∏—á–Ω–∏–º –º–µ—Ç–æ–¥–æ–º –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û–±–∏–¥–≤–∞ —î –∫—Ä–∞—â–∏–º–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏ `clone()`, –∞–ª–µ –º–∞—é—Ç—å –Ω–µ–≤–µ–ª–∏–∫—ñ —Å–µ–º–∞–Ω—Ç–∏—á–Ω—ñ —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ.
>
> **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
> `public User(User other) { ... }`
>
> * **–ì–∞—Ä–∞–Ω—Ç—ñ—è:** –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç **—Ç–æ—á–Ω–æ —Ç–æ–≥–æ –∂ —Ç–∏–ø—É**.
> * **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ù–∞–π–±—ñ–ª—å—à –ø—Ä—è–º–æ–ª—ñ–Ω—ñ–π–Ω–∏–π —Å–ø–æ—Å—ñ–± —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ—ó.
>
> **–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥:**
> `public static User newInstance(User other) { ... }`
>
> * **–ì–Ω—É—á–∫—ñ—Å—Ç—å:**
>   * **–ù–µ –∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç.** –í—ñ–Ω –º–æ–∂–µ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∫–µ—à–æ–≤–∞–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä.
>   * –ú–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ **–ø—ñ–¥—Ç–∏–ø**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–µ—Ç–æ–¥ `UserFactory.copyUser(user)` –º–æ–∂–µ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∞–±–æ `AdminUser`, –∞–±–æ `RegularUser`.
>   * –ú–æ–∂–Ω–∞ –¥–∞—Ç–∏ **–∑—Ä–æ–∑—É–º—ñ–ª—É –Ω–∞–∑–≤—É** –º–µ—Ç–æ–¥—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `deepCopy()` –∞–±–æ `copyOf()`.
>
> **–©–æ –æ–±—Ä–∞—Ç–∏:**
>
> * **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** —î —ñ–¥–µ–∞–ª—å–Ω–∏–º, –∫–æ–ª–∏ –≤–∞–º –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ø—Ä–æ—Å—Ç–∏–π —ñ –∑—Ä–æ–∑—É–º—ñ–ª–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è –≤ –º–µ–∂–∞—Ö –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—É.
> * **–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥** –∫—Ä–∞—â–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å, –∫–æ–ª–∏ –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ—ó —î —Å–∫–ª–∞–¥–Ω—ñ—à–æ—é, –∞–±–æ –∫–æ–ª–∏ –≤–∏ —Ö–æ—á–µ—Ç–µ –Ω–∞–¥–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞–º –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–π –∞–±–æ "—Ä–æ–∑—É–º–Ω–∏–π" API –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
>
> –ó–∞–≥–∞–ª–æ–º, —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ –Ω–∞–¥–∞—î –±—ñ–ª—å—à–µ –≥–Ω—É—á–∫–æ—Å—Ç—ñ, –∞–ª–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —î –ø—Ä–æ—Å—Ç—ñ—à–∏–º —ñ –±—ñ–ª—å—à –ø–æ—à–∏—Ä–µ–Ω–∏–º –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—É Factory Method —Ç–∞ –π–æ–≥–æ –ø–µ—Ä–µ–≤–∞–≥ –Ω–∞–¥ –ø—Ä—è–º–∏–º –≤–∏–∫–ª–∏–∫–æ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ–≤.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó? –Ø–∫—ñ –≤ —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –Ω–µ–¥–æ–ª—ñ–∫–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ "–æ–±—Ö—ñ–¥–Ω–∏–π" —à–ª—è—Ö, —è–∫–∏–π –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ–± –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±'—î–∫—Ç –≤ –ø–æ—Ç—ñ–∫ –±–∞–π—Ç—ñ–≤, –∞ –ø–æ—Ç—ñ–º –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑ —Ü—å–æ–≥–æ –ø–æ—Ç–æ–∫—É –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç. –û—Å–∫—ñ–ª—å–∫–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–∑–≤–∏—á–∞–π –ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ –≤—Å—å–æ–º—É –≥—Ä–∞—Ñ—É –æ–±'—î–∫—Ç—ñ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –≥–ª–∏–±–æ–∫–æ—é –∫–æ–ø—ñ—î—é.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ `java.io.Serializable`:**
>
> ```java
> public static <T extends Serializable> T deepCopy(T object) {
>     try {
>         ByteArrayOutputStream baos = new ByteArrayOutputStream();
>         ObjectOutputStream oos = new ObjectOutputStream(baos);
>         oos.writeObject(object);
>
>         ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
>         ObjectInputStream ois = new ObjectInputStream(bais);
>         return (T) ois.readObject();
>     } catch (IOException | ClassNotFoundException e) {
>         throw new RuntimeException("–ü–æ–º–∏–ª–∫–∞ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è", e);
>     }
> }
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:**
>
> * **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:** –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –ø–∏—Å–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞. –¶–µ –ø—Ä–∞—Ü—é—î "–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ", —è–∫—â–æ –≤—Å—ñ –∫–ª–∞—Å–∏ –≤ —ñ—î—Ä–∞—Ä—Ö–∞—Ç—ñ —î `Serializable`.
>
> **–ù–µ–¥–æ–ª—ñ–∫–∏:**
>
> * **–î—É–∂–µ –Ω–∏–∑—å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è ‚Äî —Ü–µ –¥—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–∞ —Ç–∞ —Ä–µ—Å—É—Ä—Å–æ—î–º–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
> * **–í–∏–º–æ–≥–∞ –¥–æ `Serializable`:** –£—Å—ñ –∫–ª–∞—Å–∏ –≤ –≥—Ä–∞—Ñ—ñ –æ–±'—î–∫—Ç—ñ–≤ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Serializable`, —â–æ –Ω–µ –∑–∞–≤–∂–¥–∏ –º–æ–∂–ª–∏–≤–æ.
> * **–ù–µ –ø—Ä–∞—Ü—é—î –∑ `transient` –ø–æ–ª—è–º–∏:** –ü–æ–ª—è, –ø–æ–∑–Ω–∞—á–µ–Ω—ñ —è–∫ `transient`, –Ω–µ –±—É–¥—É—Ç—å —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ, —ñ –≤ –∫–æ–ø—ñ—ó –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
>
> –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é, –ø–µ—Ä–µ–≤–∞–∂–Ω–æ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–≤, –¥–µ —Ä—É—á–Ω–µ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —î –∑–∞–Ω–∞–¥—Ç–æ —Å–∫–ª–∞–¥–Ω–∏–º, –∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –Ω–µ —î –∫—Ä–∏—Ç–∏—á–Ω–æ—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏—Ö, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –∑–∞–¥–∞—á —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —ó—Ö–Ω—ñ—Ö –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ –∫–ª–∞—Å `Person` –º—ñ—Å—Ç–∏—Ç—å `final` –ø–æ–ª–µ `Address`, —è–∫ —Ü–µ –≤–ø–ª–∏–Ω–µ –Ω–∞ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `final` –ø–æ–ª–µ –º–æ–∂–µ –±—É—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–µ **–ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑** ‚Äî –∞–±–æ –ø—Ä–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—ñ, –∞–±–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ. –¶–µ —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ –¥–æ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —è–∫—ñ –±–∞–∑—É—é—Ç—å—Å—è –Ω–∞ –∑–º—ñ–Ω—ñ –ø–æ–ª—ñ–≤.
>
> **–ü—Ä–æ–±–ª–µ–º–∞ –∑ `clone()`:**
>
> ```java
> class Person implements Cloneable {
>     private final Address address; // final –ø–æ–ª–µ
>
>     @Override
>     public Person clone() {
>         Person cloned = (Person) super.clone();
>         // –ü–û–ú–ò–õ–ö–ê –ö–û–ú–ü–Ü–õ–Ø–¶–Ü–á! –ù–µ –º–æ–∂–Ω–∞ –ø—Ä–∏—Å–≤–æ—ó—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è final –ø–æ–ª—é
>         // cloned.address = new Address(this.address);
>         return cloned;
>     }
> }
> ```
>
> `clone()` —Å—Ç–≤–æ—Ä—é—î –ø–æ–±—ñ—Ç–æ–≤—É –∫–æ–ø—ñ—é, –¥–µ `cloned.address` –≤–∂–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –∞–¥—Ä–µ—Å—É. –ó–º—ñ–Ω–∏—Ç–∏ —Ü–µ `final` –ø–æ–ª–µ –≤–∂–µ –Ω–µ–º–æ–∂–ª–∏–≤–æ.
>
> **–ü—Ä–∞–≤–∏–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
>
> –Ñ–¥–∏–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–ø—ñ—é –æ–±'—î–∫—Ç–∞ –∑ `final` –ø–æ–ª—è–º–∏ ‚Äî —Ü–µ —á–µ—Ä–µ–∑ **–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**.
>
> ```java
> public class Person {
>     private final Address address;
>
>     // –ó–≤–∏—á–∞–π–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
>     public Person(Address address) {
>         // –†–æ–±–∏–º–æ –∑–∞—Ö–∏—â–µ–Ω—É –∫–æ–ø—ñ—é —Ç—É—Ç
>         this.address = new Address(address.getCity());
>     }
>
>     // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è
>     public Person(Person other) {
>         // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Å–≤—ñ–π –∂–µ –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
>         this(other.address);
>     }
> }
> ```
>
> –¶–µ —â–µ —Ä–∞–∑ –ø—ñ–¥–∫—Ä–µ—Å–ª—é—î, —á–æ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —î –Ω–∞–±–∞–≥–∞—Ç–æ –∫—Ä–∞—â–æ—é —ñ –≥–Ω—É—á–∫—ñ—à–æ—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ—é `clone()`, –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó `final` —Ç–∞ —Ä—ñ–∑–Ω–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≥–ª–∏–±–æ–∫–µ –∑–Ω–∞–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω—å –º–æ–≤–∏.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ **copy-on-write** —Å–µ–º–∞–Ω—Ç–∏–∫–∞, —ñ —è–∫ –≤–æ–Ω–∞ –ø–æ–≤'—è–∑–∞–Ω–∞ –∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Copy-on-Write (COW)** ‚Äî —Ü–µ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó, —è–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–ø—ñ—è–º–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤.
>
> **–Ü–¥–µ—è:**
>
> –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –æ–¥—Ä–∞–∑—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–æ–≤–Ω—É (–¥–æ—Ä–æ–≥—É) –∫–æ–ø—ñ—é –æ–±'—î–∫—Ç–∞, –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ –Ω–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ª–∏—à–µ **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è (shallow copy)**. –Ü –æ—Ä–∏–≥—ñ–Ω–∞–ª, —ñ –∫–æ–ø—ñ—è –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å —Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –¥–∞–Ω—ñ.
>
> **–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è "–ª—ñ–Ω–∏–≤–æ"** ‚Äî –ª–∏—à–µ –≤ —Ç–æ–π –º–æ–º–µ–Ω—Ç, –∫–æ–ª–∏ —Ö—Ç–æ—Å—å –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è **–∑–º—ñ–Ω–∏—Ç–∏** –æ–¥–Ω—É –∑ –∫–æ–ø—ñ–π. –ü–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø–æ–≤–Ω–∞ –∫–æ–ø—ñ—è –¥–∞–Ω–∏—Ö, —ñ –∑–º—ñ–Ω–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –≤–∂–µ –¥–æ –Ω–µ—ó.
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:**
>
> * –Ø–∫—â–æ –¥–∞–Ω—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è, –¥–æ—Ä–æ–≥–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è, —â–æ –µ–∫–æ–Ω–æ–º–∏—Ç—å —á–∞—Å —ñ –ø–∞–º'—è—Ç—å.
> * –¶–µ –æ—Å–æ–±–ª–∏–≤–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö, –∞–ª–µ —Ä—ñ–¥–∫–æ –∑–º—ñ–Ω—é–≤–∞–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö.
>
> **–ü—Ä–∏–∫–ª–∞–¥ —É Java:**
> `java.util.concurrent.CopyOnWriteArrayList` ‚Äî —Ü–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `List`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü—é —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é.
>
> * –ë—É–¥—å-—è–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è —á–∏—Ç–∞–Ω–Ω—è (`get`, `iterator`) —î –¥—É–∂–µ —à–≤–∏–¥–∫–æ—é —ñ –Ω–µ –≤–∏–º–∞–≥–∞—î –±–ª–æ–∫—É–≤–∞–Ω—å.
> * –ë—É–¥—å-—è–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –∑–∞–ø–∏—Å—É (`add`, `set`, `remove`) —î "–¥–æ—Ä–æ–≥–æ—é" ‚Äî –≤–æ–Ω–∞ —Å—Ç–≤–æ—Ä—é—î **–ø–æ–≤–Ω—É –Ω–æ–≤—É –∫–æ–ø—ñ—é** –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –º–∞—Å–∏–≤—É, –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –∑–º—ñ–Ω—É –¥–æ –Ω–µ—ó, –∞ –ø–æ—Ç—ñ–º –∞—Ç–æ–º–∞—Ä–Ω–æ –∑–∞–º—ñ–Ω—é—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –º–∞—Å–∏–≤.
>
> –¶—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è —ñ–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ "—á–∏—Ç–∞—î–º–æ —á–∞—Å—Ç–æ, –ø–∏—à–µ–º–æ —Ä—ñ–¥–∫–æ".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —Ç–∞ —ó—Ö–Ω—å–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ–π –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ –¥–ª—è –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ —Ä–æ–±–∏—Ç—å `Collections.unmodifiableList()` –≥–ª–∏–±–æ–∫—É –∫–æ–ø—ñ—é —Å–ø–∏—Å–∫—É? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ù—ñ, –Ω–µ —Ä–æ–±–∏—Ç—å.** –¶–µ –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–µ —ñ —á–∞—Å—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑—Ä–æ–∑—É–º—ñ–ª–µ –ø–∏—Ç–∞–Ω–Ω—è.
>
> `Collections.unmodifiableList(List<? extends T> list)` —Å—Ç–≤–æ—Ä—é—î –Ω–µ –∫–æ–ø—ñ—é, –∞ **–Ω–µ–∑–º—ñ–Ω–Ω—É –æ–±–≥–æ—Ä—Ç–∫—É (unmodifiable view)** –¥–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ —Å–ø–∏—Å–∫—É.
>
> **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**
>
> * –ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –æ–±'—î–∫—Ç-–æ–±–≥–æ—Ä—Ç–∫–∞, —è–∫–∏–π **–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ —É—Ç—Ä–∏–º—É—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è** –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫.
> * –í—Å—ñ –º–µ—Ç–æ–¥–∏, —â–æ **–º–æ–¥–∏—Ñ—ñ–∫—É—é—Ç—å** —Å–ø–∏—Å–æ–∫ (`add`, `remove`, `set`, `clear`), –≤ —Ü—ñ–π –æ–±–≥–æ—Ä—Ç—Ü—ñ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω—ñ —Ç–∞–∫, —â–æ –≤–æ–Ω–∏ –∫–∏–¥–∞—é—Ç—å `UnsupportedOperationException`.
> * –í—Å—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è **—á–∏—Ç–∞–Ω–Ω—è** (`get`, `size`, `iterator`) –ø—Ä–æ—Å—Ç–æ **–¥–µ–ª–µ–≥—É—é—Ç—å** –≤–∏–∫–ª–∏–∫ –¥–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏:**
>
> 1. **–ù—ñ—è–∫–æ–≥–æ –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω–µ–º–∞—î.** –û–±–≥–æ—Ä—Ç–∫–∞ —ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ —Ç—ñ –∂ —Å–∞–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏.
> 2. **–ó–º—ñ–Ω–∏ –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–º—É —Å–ø–∏—Å–∫—É –±—É–¥—É—Ç—å –≤–∏–¥–∏–º—ñ —á–µ—Ä–µ–∑ –æ–±–≥–æ—Ä—Ç–∫—É!**
>
>     ```java
>     List<String> original = new ArrayList<>();
>     original.add("A");
>     List<String> unmodifiable = Collections.unmodifiableList(original);
>
>     // unmodifiable.add("B"); // –ö–∏–Ω–µ UnsupportedOperationException
>
>     // –ê–ª–µ –º–∏ –º–æ–∂–µ–º–æ –∑–º—ñ–Ω–∏—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª...
>     original.add("B");
>
>     System.out.println(unmodifiable); // –í–∏–≤–µ–¥–µ [A, B]!
>     ```
> –û—Ç–∂–µ, —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è **read-only –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è**, –∞ –Ω–µ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–µ–∑–º—ñ–Ω–Ω–æ—ó –∫–æ–ø—ñ—ó. –î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø—Ä–∞–≤–∂–Ω—å–æ—ó –Ω–µ–∑–º—ñ–Ω–Ω–æ—ó –∫–æ–ø—ñ—ó —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `List.copyOf()` (–∑ Java 10).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î—É–∂–µ —Ç–æ—á–Ω–µ –∑–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ü—ñ –º—ñ–∂ –Ω–µ–∑–º—ñ–Ω–Ω–æ—é –æ–±–≥–æ—Ä—Ç–∫–æ—é —Ç–∞ –Ω–µ–∑–º—ñ–Ω–Ω–æ—é –∫–æ–ø—ñ—î—é.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–†–æ–∑–≥–ª—è–Ω—å—Ç–µ —Ç–∞–∫–∏–π –∫–æ–¥. –ß–∏ –±—É–¥–µ –≤—ñ–Ω –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —ñ —á–æ–º—É?

```java
final class ImmutablePoint {
    private final int x;
    public ImmutablePoint(int x) { this.x = x; }
    public int getX() { return x; }
}

class Test implements Cloneable {
    private final ImmutablePoint point;
    // ... –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ...
    @Override public Test clone() throws CloneNotSupportedException {
        return (Test) super.clone();
    }
}
```

‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–∞–∫, —Ü–µ–π –∫–æ–¥ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏.** –ë—ñ–ª—å—à–µ —Ç–æ–≥–æ, —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (`super.clone()`) —î –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–ø–µ—á–Ω–∏–º** —ñ —Ñ–∞–∫—Ç–∏—á–Ω–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–µ –≥–ª–∏–±–æ–∫–æ–º—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—é.
>
> **–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**
>
> 1. –ú–µ—Ç–æ–¥ `super.clone()` –≤–∏–∫–æ–Ω—É—î **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**. –í—ñ–Ω –∫–æ–ø—ñ—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤.
> 2. –î–ª—è –ø–æ–ª—è `point` –≤—ñ–Ω —Å–∫–æ–ø—ñ—é—î **–ø–æ—Å–∏–ª–∞–Ω–Ω—è**. –û—Ç–∂–µ, —ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç `Test`, —ñ –π–æ–≥–æ –∫–ª–æ–Ω –±—É–¥—É—Ç—å –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ **–æ–¥–∏–Ω —ñ —Ç–æ–π —Å–∞–º–∏–π** –æ–±'—î–∫—Ç `ImmutablePoint`.
> 3. **–ê–ª–µ**, –æ—Å–∫—ñ–ª—å–∫–∏ –∫–ª–∞—Å `ImmutablePoint` —î **–Ω–µ–∑–º—ñ–Ω–Ω–∏–º (immutable)**, –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±—É –∑–º—ñ–Ω–∏—Ç–∏ –π–æ–≥–æ —Å—Ç–∞–Ω –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.
> 4. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –Ω–µ —ñ—Å–Ω—É—î —Ä–∏–∑–∏–∫—É, —â–æ –∑–º—ñ–Ω–∞ –æ–±'—î–∫—Ç–∞ `point` —á–µ—Ä–µ–∑ –æ–¥–Ω—É –∫–æ–ø—ñ—é `Test` –≤–ø–ª–∏–Ω–µ –Ω–∞ —ñ–Ω—à—É. "–ó–º—ñ–Ω–∏—Ç–∏" –π–æ–≥–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ.
>
> **–í–∏—Å–Ω–æ–≤–æ–∫:**
> –°–ø—ñ–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–Ω–µ–∑–º—ñ–Ω–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤** —î –±–µ–∑–ø–µ—á–Ω–∏–º —ñ –¥—É–∂–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–º –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –ø–∞–º'—è—Ç—ñ. –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ó—Ö–Ω—ñ –∫–æ–ø—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –Ω–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω—ñ. –¶–µ –æ–¥–Ω–∞ –∑ –≥–æ–ª–æ–≤–Ω–∏—Ö –ø–µ—Ä–µ–≤–∞–≥ –Ω–µ–∑–º—ñ–Ω–Ω–æ—Å—Ç—ñ.
>
> –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–µ –ª–∏—à–µ –¥–ª—è –ø–æ–ª—ñ–≤, —è–∫—ñ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ **–∑–º—ñ–Ω–Ω—ñ (mutable)** –æ–±'—î–∫—Ç–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ï–∫—Å–ø–µ—Ä—Ç–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –Ω–µ–∑–º—ñ–Ω–Ω–æ—Å—Ç—ñ —Ç–∞ —ó—ó –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤ –¥–ª—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–º'—è—Ç—Ç—é.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ `record`-—Ç–∏–ø–∏ (–∑ Java 16) –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –∑ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è–º? –ß–∏ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –≤–æ–Ω–∏ `Cloneable`? ‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `record`-—Ç–∏–ø–∏ **–Ω–µ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å** —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Cloneable` —ñ **–Ω–µ –º–∞—é—Ç—å –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É `clone()`**.
>
> **–ß–æ–º—É —Ç–∞–∫ –∑—Ä–æ–±–ª–µ–Ω–æ:**
>
> **–¢–æ–º—É —â–æ —ó–º —Ü–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ.** `record`-—Ç–∏–ø–∏ —î **–Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏ (immutable)** –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é. –Ø–∫ —ñ –¥–ª—è —ñ–Ω—à–∏—Ö –Ω–µ–∑–º—ñ–Ω–Ω–∏—Ö —Ç–∏–ø—ñ–≤, —è–∫-–æ—Ç `String`, –Ω–µ–º–∞—î —Å–µ–Ω—Å—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ó—Ö–Ω—ñ –∑–∞—Ö–∏—â–µ–Ω—ñ –∫–æ–ø—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ —ó—Ö–Ω—ñ–π —Å—Ç–∞–Ω –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏.
>
> –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ "–∫–æ–ø—ñ—é" `record`-–æ–±'—î–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ –æ–¥–Ω–∏–º –∑–º—ñ–Ω–µ–Ω–∏–º –ø–æ–ª–µ–º), –¥–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —ñ–Ω—à–∞ —ñ–¥—ñ–æ–º–∞.
>
> **–Ü–¥—ñ–æ–º–∞ "with-er"**:
> –í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –≤ `record` –º–µ—Ç–æ–¥–∏, —è–∫—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ç–∞—Ä–æ–≥–æ, –∑–º—ñ–Ω—é—é—á–∏ –ª–∏—à–µ –ø–æ—Ç—Ä—ñ–±–Ω–µ –ø–æ–ª–µ.
>
> ```java
> public record Point(int x, int y) {
>     public Point withX(int newX) {
>         // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç
>         return new Point(newX, this.y);
>     }
> }
>
> Point p1 = new Point(10, 20);
> Point p2 = p1.withX(15); // p1 –Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è, p2 - –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç (15, 20)
> ```
>
> –Ø–∫—â–æ –∂ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Ç–æ—á–Ω–∞ –∫–æ–ø—ñ—è, –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–± ‚Äî **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**, —è–∫–∏–π –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –≤—Ä—É—á–Ω—É, —Ö–æ—á–∞ –≤—ñ–Ω –∑–∞–∑–≤–∏—á–∞–π –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.
>
> ```java
> public record Point(int x, int y) {
>     // –†—É—á–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>     public Point(Point other) {
>         this(other.x, other.y);
>     }
> }
> ```
>
> `record`-—Ç–∏–ø–∏ –∑–∞–æ—Ö–æ—á—É—é—Ç—å –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å –∑–∞–º—ñ—Å—Ç—å –∑–º—ñ–Ω–∏ —Å—Ç–∞—Ä–∏—Ö), –∞ –Ω–µ –¥–æ –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö —Ñ—ñ—á Java, —ó—Ö–Ω—å–æ–≥–æ –¥–∏–∑–∞–π–Ω—É —Ç–∞ —Ç–æ–≥–æ, —è–∫ –≤–æ–Ω–∏ —Ä–æ–±–ª—è—Ç—å —Å—Ç–∞—Ä—ñ, –ø—Ä–æ–±–ª–µ–º–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ (—è–∫ `Cloneable`) –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏–º–∏.*
