---
layout: default
title: "Thread-safety —ñ immutable –æ–±‚Äô—î–∫—Ç–∏"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 7
---

# Thread-safety —ñ immutable –æ–±‚Äô—î–∫—Ç–∏

*   –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Immutable` –æ–±'—î–∫—Ç–∏ —î `thread-safe` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é, –æ—Å–∫—ñ–ª—å–∫–∏ —ó—Ö–Ω—ñ–π —Å—Ç–∞–Ω –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –¶–µ —É—Å—É–≤–∞—î –ø—Ä–æ–±–ª–µ–º–∏ –≥–æ–Ω–∫–∏ –∑–∞ –∑–º—ñ–Ω–Ω—ñ (`race conditions`) —Ç–∞ –ø–æ—Ç—Ä–µ–±—É –≤ —è–≤–Ω—ñ–π —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.
*   –ø–æ–Ω—è—Ç—Ç—è: `Thread-safety`, `concurrency`, `safe publishing`.
*   –ø—Ä–∏–∫–ª–∞–¥–∏: `String`, `Integer`, `LocalDate` ‚Äì –Ω–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
*   –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å `race conditions`, –ª–µ–≥–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á—ñ –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ `safe publishing`.
*   —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ß–æ–º—É `immutable` —î `thread-safe`, `safe publishing`.
#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ —Ä–µ–∫—É—Ä—Å—ñ—ó ‚Äî —Ü–µ –ª–æ–≥—ñ—á–Ω—ñ –∞–±–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ñ —Ö–∏–±–∏, —è–∫—ñ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ —ñ –ø—Ä–∏–∑–≤–æ–¥—è—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `StackOverflowError`) –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —Ç—ñ "–≥—Ä–∞–±–ª—ñ", –Ω–∞ —è–∫—ñ –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—É–ø–∏—Ç–∏, –∫–æ–ª–∏ –ø–∏—à–µ—à –º–µ—Ç–æ–¥, —â–æ –≤–∏–∫–ª–∏–∫–∞—î —Å–∞–º —Å–µ–±–µ. –û—Å–æ–±–ª–∏–≤–æ, —è–∫—â–æ –∑–∞–±—É–≤, –¥–µ –≤—ñ–Ω –º–∞—î –∑—É–ø–∏–Ω–∏—Ç–∏—Å—å, –∞–±–æ –Ω–µ —Ä–æ–∑—É–º—ñ—î—à, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–∞–∑–∞–¥.
---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

üìä –ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à—ñ –ø–æ–º–∏–ª–∫–∏:

| –ü–æ–º–∏–ª–∫–∞ | –ü—Ä–∏–∫–ª–∞–¥ / –°—É—Ç—å |
| ----- | ----- |
| ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ–π –±–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫ | –ú–µ—Ç–æ–¥ –≤–∏–∫–ª–∏–∫–∞—î —Å–∞–º —Å–µ–±–µ –±–µ–∑ –∑—É–ø–∏–Ω–∫–∏ ‚Üí StackOverflow |
| ‚ùå –ë–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫ –Ω–µ –¥–æ—Å—è–∂–Ω–∏–π | –Ñ `if`, –∞–ª–µ —É–º–æ–≤–∞ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è |
| ‚ùå –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π `return` | –ü–æ–≤–µ—Ä—Ç–∞—î –Ω–µ —Ç–µ, –∞–±–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω—ñ—á–æ–≥–æ |
| ‚ö†Ô∏è –ó–∞–π–≤–∞ –ª–æ–≥—ñ–∫–∞ –≤ —Ä–µ–∫—É—Ä—Å—ñ—ó | –°–∫–ª–∞–¥–Ω—ñ —É–º–æ–≤–∏ –∞–±–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤ `fibonacci`) |
| ‚ùå –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É | –í–∏–∫–ª–∏–∫–∞—î –∑–º—ñ–Ω–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –≤ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—é |

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

**1\. –í—ñ–¥—Å—É—Ç–Ω—ñ–π –±–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫**  
–Ø–∫—â–æ –Ω–µ —Å–∫–∞–∑–∞—Ç–∏ –º–µ—Ç–æ–¥—É: "–ó—É–ø–∏–Ω–∏—Å—å, –∫–æ–ª–∏ n \== 0", ‚Äî –≤—ñ–Ω –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑—É–ø–∏–Ω–∏—Ç—å—Å—è. –Ø–∫ –±—ñ–≥—Ç–∏ —Å—Ö–æ–¥–∞–º–∏ –≤ –ø—ñ–¥–≤–∞–ª –±–µ–∑ –∫—ñ–Ω—Ü—è.

**2\. –ù–µ–¥–æ—Å—è–∂–Ω–∏–π base case**  
–ù–∞–ø—Ä–∏–∫–ª–∞–¥: `if (n < 0) return ...`, –∞–ª–µ —Ç–∏ –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–¥–∞—î—à `n > 0`. ‚Üí –¶—è —É–º–æ–≤–∞ –Ω—ñ–∫–æ–ª–∏ –Ω–µ —Å–ø—Ä–∞—Ü—é—î, —ñ —Å—Ç–µ–∫ –ø–µ—Ä–µ–ø–æ–≤–Ω–∏—Ç—å—Å—è.

**3\. –ü–æ–≥–∞–Ω–∏–π `return`**  
–Ø–∫—â–æ —Ç–∏ –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–±–æ –Ω–µ –∑—ñ–±—Ä–∞–≤ –π–æ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –æ—Ç—Ä–∏–º–∞—î—à –∞–±–æ `0`, –∞–±–æ `null`, –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

**4\. –ü–æ–¥–≤—ñ–π–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è**  
–£ –§—ñ–±–æ–Ω–∞—á—á—ñ: `fib(n - 1) + fib(n - 2)` ‚Äî –∫–æ–∂–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —â–µ —Ä–∞–∑ —ñ —â–µ... –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π, –∞–ª–µ –ø–æ–≤—ñ–ª—å–Ω–æ.
---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üîª –í—ñ–¥—Å—É—Ç–Ω—ñ–π –±–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫:**

```java
// ‚ùå –ø–æ–º–∏–ª–∫–∞: –º–µ—Ç–æ–¥ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑—É–ø–∏–Ω–∏—Ç—å—Å—è
public static void print(int n) {
    System.out.println(n);
    print(n - 1); // –Ω–µ–º–∞—î –∑—É–ø–∏–Ω–∫–∏
}
```
### **üîª –ë–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫ –Ω–µ –¥–æ—Å—è–∂–Ω–∏–π:**

```java
public static int factorial(int n) {
    if (n < 0) return 1;  // ‚ùå –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø—Ä–∏ n > 0
    return n * factorial(n - 1);
}
```
### **üîª –ü–æ–º–∏–ª–∫–∞ –≤ return:**

```java
public static int sum(int n) {
    if (n == 0) return 0;
    sum(n - 1); // ‚ùå –Ω—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è
}
```
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:

```java
public static int sum(int n) {
    if (n == 0) return 0;
    return n + sum(n - 1);
}
```
---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü–æ–º–∏–ª–∫–∞ | –°–∏–º–ø—Ç–æ–º | –Ø–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ |
| ----- | ----- | ----- |
| –í—ñ–¥—Å—É—Ç–Ω—ñ–π base case | StackOverflowError | –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π –Ω–∞ –∑—É–ø–∏–Ω–∫—É |
| –ù–µ–¥–æ—Å—è–∂–Ω–∏–π base case | –ë–µ—Å–∫—ñ–Ω–µ—á–Ω–∏–π —Ü–∏–∫–ª | –ü–µ—Ä–µ–≤—ñ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `return` | –ü–æ–º–∏–ª–∫–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ | –†–µ—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç—É–π –ø—Ä–∏–∫–ª–∞–¥–∏ |
| –ü–æ–≤—ñ–ª—å–Ω–∞ —Ä–µ–∫—É—Ä—Å—ñ—è | –î–æ–≤–≥–∏–π —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è | –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è –∞–±–æ —ñ—Ç–µ—Ä–∞—Ü—ñ—è |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –©–æ —Ç–∞–∫–µ `StackOverflowError`?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–¶–µ –ø–æ–º–∏–ª–∫–∞, —è–∫–∞ –≤–∏–Ω–∏–∫–∞—î, –∫–æ–ª–∏ —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ (call stack) –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è ‚Äî –∑–∞–∑–≤–∏—á–∞–π —á–µ—Ä–µ–∑ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—É —Ä–µ–∫—É—Ä—Å—ñ—é.

---

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î —Ä–µ–∫—É—Ä—Å—ñ—è?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ü–æ—á–Ω–∏ –∑ –ø—Ä–æ—Å—Ç–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `n=0`, `n=1`) —ñ –ø–µ—Ä–µ–≤—ñ—Ä, —â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π. –î–æ–¥–∞–π –ª–æ–≥—É–≤–∞–Ω–Ω—è –∞–±–æ `System.out.println()` –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—ñ–≤.

---

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –ß–∏ –º–æ–∂–Ω–∞ —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–¥–≤—ñ–π–Ω–æ–≥–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤ —Ä–µ–∫—É—Ä—Å—ñ—ó?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–¢–∞–∫, —á–µ—Ä–µ–∑ **–º–µ–º–æ—ñ–∑–∞—Ü—ñ—é** ‚Äî –∫–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–∏–∫–ª–∏–∫—ñ–≤. –¢–∞–∫–æ–∂ —á–∞—Å—Ç–æ –∑–∞–º—ñ–Ω—é—é—Ç—å –Ω–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ—é.

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**‚ÄúB-R-R‚Äù \= Base ‚Üí Reachable ‚Üí Return**

–¢–æ–±—Ç–æ:

* —î –±–∞–∑–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫ (Base),
* –≤—ñ–Ω —Ä–µ–∞–ª—å–Ω–æ –¥–æ—Å—è–≥–∞—î—Ç—å—Å—è (Reachable),
* —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è (Return).

---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

–†–µ–∫—É—Ä—Å—ñ—è ‚Äî –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∞–ª–µ –¥—É–∂–µ —á—É—Ç–ª–∏–≤–∏–π –¥–æ –ø–æ–º–∏–ª–æ–∫. –ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à—ñ –ø—Ä–æ–±–ª–µ–º–∏: –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∞–±–æ –Ω–µ–¥–æ—Å—è–∂–Ω—ñ—Å—Ç—å –±–∞–∑–æ–≤–æ–≥–æ –≤–∏–ø–∞–¥–∫—É, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É, –∞–±–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å. –ö–æ–∂–Ω—É —Ä–µ–∫—É—Ä—Å—ñ—é –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–æ–µ–∫—Ç—É–≤–∞—Ç–∏ –∞–∫—É—Ä–∞—Ç–Ω–æ –π –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –ø—Ä–∏–Ω—Ü–∏–ø ‚ÄúB-R-R‚Äù –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ.