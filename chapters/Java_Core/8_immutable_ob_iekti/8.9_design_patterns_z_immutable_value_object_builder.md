---
layout: default
title: "Design Patterns –∑ immutable (Value Object, Builder)"
parent: "Immutable –æ–±'—î–∫—Ç–∏"
grand_parent: "Java Core"
nav_order: 9
---

# Design Patterns –∑ immutable (Value Object, Builder)

*   –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Immutable` –æ–±'—î–∫—Ç–∏ –¥–æ–±—Ä–µ —ñ–Ω—Ç–µ–≥—Ä—É—é—Ç—å—Å—è –∑ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏ `Value Object` (–æ–±'—î–∫—Ç–∏, —â–æ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å—Å—è –ª–∏—à–µ –∑–Ω–∞—á–µ–Ω–Ω—è–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `Money`) —Ç–∞ `Builder Pattern` (–ø–æ–µ—Ç–∞–ø–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ –±–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ñ–≤).
*   –ø–æ–Ω—è—Ç—Ç—è: `Value Object`, `Builder Pattern`.
*   –ø—Ä–∏–∫–ª–∞–¥–∏: –ö–ª–∞—Å `Money` (VO) –∑ –ø–æ–ª—è–º–∏ `amount` —Ç–∞ `currency`. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `User` —á–µ—Ä–µ–∑ `User.Builder().withName().withAge().build()`.
*   –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `Builder` –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ `immutable` –æ–±'—î–∫—Ç–∏ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤. `Value Object` —î `immutable` –∑–∞ —Å–≤–æ—î—é –ø—Ä–∏—Ä–æ–¥–æ—é.
*   —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –Ø–∫ —Ü—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è `immutable` –æ–±'—î–∫—Ç—ñ–≤.
#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**Singleton Pattern** ‚Äî —Ü–µ –ø–æ—Ä–æ–¥–∂—É–≤–∞–ª—å–Ω–∏–π —à–∞–±–ª–æ–Ω –ø—Ä–æ—î–∫—Ç—É–≤–∞–Ω–Ω—è, —è–∫–∏–π –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∫–ª–∞—Å –º–∞—î –ª–∏—à–µ –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä, —ñ –Ω–∞–¥–∞—î –≥–ª–æ–±–∞–ª—å–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω—å–æ–≥–æ.

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ –∫–ª–∞—Å, —è–∫–∏–π –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑. –¢–∏–ø—É ‚Äú—î–¥–∏–Ω–∏–π –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç –∫—Ä–∞—ó–Ω–∏‚Äù –∞–±–æ ‚Äú—î–¥–∏–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö‚Äù. –í–∏–∫–ª–∏–∫–∞—î—à **`getInstance()`** ‚Äî —ñ –∑–∞–≤–∂–¥–∏ –æ—Ç—Ä–∏–º—É—î—à —Ç–æ–π —Å–∞–º–∏–π –æ–±'—î–∫—Ç.
---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

üìä –í–∞—Ä—ñ–∞–Ω—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Singleton –≤ Java:

| –¢–∏–ø —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó | –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ |
| ----- | ----- |
| –õ—ñ–Ω–∏–≤–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (lazy) | –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–ª–∏–∫—É |
| –ñ–∞–¥—ñ–±–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (eager) | –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–ª–∞—Å—É |
| Double-checked locking | –ü–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞ –ª—ñ–Ω–∏–≤–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è |
| Enum-based Singleton | –ù–∞–π–±–µ–∑–ø–µ—á–Ω—ñ—à–∞, –ø—Ä–æ—Å—Ç–∞ —ñ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è |

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **–ù–∞–≤—ñ—â–æ —Ü–µ?**  
  –©–æ–± –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –æ–±‚Äô—î–∫—Ç—ñ–≤, —è–∫—ñ –º–∞—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π —Å—Ç–∞–Ω –∞–±–æ —î–¥–∏–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è, –ª–æ–≥—É–≤–∞–Ω–Ω—è, –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è).
* **–£ —á–æ–º—É —Ñ—ñ—à–∫–∞?**  
  –ì–∞—Ä–∞–Ω—Ç—ñ—è, —â–æ –æ–± º—î–∫—Ç –ª–∏—à–µ –æ–¥–∏–Ω, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —Å–∫—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤ –π–æ–≥–æ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å.
* **–¢–∏–ø–æ–≤—ñ –≥—Ä–∞–±–ª—ñ?**
    * **–ü–æ—Ä—É—à–µ–Ω–Ω—è SRP** ‚Äî –æ–±‚Äô—î–∫—Ç –≤–∏–∫–æ–Ω—É—î —ñ –ª–æ–≥—ñ–∫—É, —ñ –∫–æ–Ω—Ç—Ä–æ–ª—å —ñ–Ω—Å—Ç–∞–Ω—Å—É.
    * **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º** ‚Äî –≤–∞–∂–∫–æ –ø—ñ–¥–º—ñ–Ω–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.
    * **–ü—Ä–∏—Ö–æ–≤–∞–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ñ—Å—Ç—å** ‚Äî –º–æ–∂–µ –±—É—Ç–∏ —è–∫ ‚Äú–≥–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞‚Äù.
* **–ß–æ–º—É –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω?**  
  –ë–æ —á–∞—Å—Ç–æ –∑–∞–º—ñ—Å—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å Singleton –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è, —â–æ –ø–æ—Ç—ñ–º —É—Å–∫–ª–∞–¥–Ω—é—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.

---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **üîª –ö–ª–∞—Å–∏—á–Ω–∞ –ª—ñ–Ω–∏–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**


```java
public class Singleton {
    private static Singleton instance;

    private Singleton() {}

    public static Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```
üü• ‚ùå –ù–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞.

---

### **üîª Double-Checked Locking (–ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–∞):**


```java
public class Singleton {
    private static volatile Singleton instance;

    private Singleton() {}

    public static Singleton getInstance() {
        if (instance == null) {
            synchronized (Singleton.class) {
                if (instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```
---

### **üîª Enum-–ø—ñ–¥—Ö—ñ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π):**


```java
public enum Singleton {
    INSTANCE;

    public void doSomething() {
        System.out.println("Singleton doing work");
    }
}
```
```java
Singleton.INSTANCE.doSomething();
```
‚úÖ –ü–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω–æ, –ø—Ä–æ—Å—Ç–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ serialization.

---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü—ñ–¥—Ö—ñ–¥ | –ü–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ì–Ω—É—á–∫—ñ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π |
| ----- | :---: | :---: | :---: | :---: |
| **Lazy Singleton** | ‚ùå –ù—ñ | ‚úÖ | ‚úÖ | ‚ùå |
| **Double-Checked Locking** | ‚úÖ –¢–∞–∫ | ‚ö†Ô∏è | ‚úÖ | ‚úÖ (–∑ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—é) |
| **Enum Singleton** | ‚úÖ –¢–∞–∫ | ‚úÖ | ‚ùå | ‚úÖ |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –ß–∏ –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ Singleton –∑ public –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ù—ñ. –¶–µ –ø–æ—Ä—É—à—É—î —Å–∞–º—É —ñ–¥–µ—é Singleton ‚Äî –±—É–¥–µ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ –æ–±'—î–∫—Ç—ñ–≤.

---

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –ß–∏–º –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è Singleton –≤—ñ–¥ –≥–ª–æ–±–∞–ª—å–Ω–æ—ó –∑–º—ñ–Ω–Ω–æ—ó?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

Singleton ‚Äî —Ü–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏–π –≥–ª–æ–±–∞–ª—å–Ω–∏–π –æ–±'—î–∫—Ç (–∑ lazy init, –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–æ–ª—è), –∞–ª–µ —ñ–¥–µ—è —Å—Ö–æ–∂–∞. –ì–æ–ª–æ–≤–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è ‚Äî —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—è —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É.

---

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è: –ß–æ–º—É Singleton –≤–≤–∞–∂–∞—é—Ç—å –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º?**

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ë–æ —á–∞—Å—Ç–æ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî —è–∫ –∑—Ä—É—á–Ω–∏–π —Å–ø–æ—Å—ñ–± –º–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω, —â–æ —É—Å–∫–ª–∞–¥–Ω—é—î –º–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ –ø—ñ–¥—Ç—Ä–∏–º–∫—É.

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**‚Äú–û–¥–∏–Ω –≤ —Å–∏—Å—Ç–µ–º—ñ ‚Äî Singleton –≤ –¥—ñ—ó‚Äù**

–∞–±–æ

**‚ÄúSingle ‚ûù Static ‚ûù Safe‚Äù** ‚Äî –æ–¥–∏–Ω, —Å—Ç–∞—Ç–∏—á–Ω–∏–π, –æ–±–≥–æ—Ä–Ω—É—Ç–∏–π.
---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

Singleton –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ª–∏—à–µ –æ–¥–Ω–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—É —Ç–∞ –Ω–∞–¥–∞—î –≥–ª–æ–±–∞–ª—å–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω—å–æ–≥–æ. –¶–µ –∫–æ—Ä–∏—Å–Ω–æ, –∞–ª–µ –º–æ–∂–µ –∑—ñ–ø—Å—É–≤–∞—Ç–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –≤—Å—é–¥–∏. –ù–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –æ–±–º–µ–∂–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Singleton –ª–∏—à–µ –¥–ª—è –¥—ñ–π—Å–Ω–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ (–ª–æ–≥—É–≤–∞–Ω–Ω—è, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è) —ñ –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥—É Enum-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó.