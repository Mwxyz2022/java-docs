---
layout: default
title: "Fail-fast vs Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏"
parent: "–ö–æ–ª–µ–∫—Ü—ñ—ó: ArrayList —Ç–∞ LinkedList"
grand_parent: "Java Core"
nav_order: 12
---

# Fail-fast vs Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Fail-fast` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –≤–∏–∫–∏–¥–∞—é—Ç—å `ConcurrentModificationException`, —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó (–±—É–¥—å-—è–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º, –∫—Ä—ñ–º —á–µ—Ä–µ–∑ —Å–∞–º —ñ—Ç–µ—Ä–∞—Ç–æ—Ä). `Fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –≤–∏–∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫—ñ–≤, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –∫–æ–ø—ñ—ó –¥–∞–Ω–∏—Ö –∞–±–æ –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º.

* –ø–æ–Ω—è—Ç—Ç—è: `Fail-fast`, `Fail-safe`, `ConcurrentModificationException`, `CopyOnWriteArrayList`, `ConcurrentHashMap`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–º—ñ–Ω–∞ `ArrayList` —É `for-each` —Ü–∏–∫–ª—ñ (`Fail-fast`). `CopyOnWriteArrayList` (–¥–ª—è `Fail-safe`).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `Fail-fast` ‚Äì –¥–ª—è –æ–¥–Ω–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π (–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–æ–∫), `Fail-safe` ‚Äì –¥–ª—è –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â (—É–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–∫—ñ–≤ –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ).

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è, —è–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ `ConcurrentModificationException`.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Fail-fast —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏** ‚Äî —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏, —è–∫—ñ –∫–∏–¥–∞—é—Ç—å **`ConcurrentModificationException`**, —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –±—É–¥—å-—è–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º, –æ–∫—Ä—ñ–º —á–µ—Ä–µ–∑ —Å–∞–º —ñ—Ç–µ—Ä–∞—Ç–æ—Ä.
* **Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏** ‚Äî —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏, —è–∫—ñ –Ω–µ –∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫—ñ–≤ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –∫–æ–ø—ñ—ó –¥–∞–Ω–∏—Ö –∞–±–æ –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **Fail-fast**: ¬´–•—Ç–æ—Å—å –ª—ñ–∑–µ –≤ –∫–æ–ª–µ–∫—Ü—ñ—é –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–≥–ª—è–¥—É? –ë–ê–ú ‚Äî Exception\!¬ª
* **Fail-safe**: ¬´–Ø –ø—Ä–∞—Ü—é—é –∑ –∫–æ–ø—ñ—î—é, –∂–∏–≤–∏ —è–∫ —Ö–æ—á–µ—à, –≥–æ–ª–æ–≤–Ω–µ ‚Äî –Ω–µ –∑–∞–≤–∞–∂–∞–π –º–µ–Ω—ñ¬ª.

---

## **üìä –¢–∞–±–ª–∏—Ü—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Fail-fast | Fail-safe |
| :---: | :---: | :---: |
| **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è** | **`ArrayList, HashSet, HashMap`** | **`CopyOnWriteArrayList, ConcurrentHashMap`** |
| **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –∑–º—ñ–Ω—ñ** | –ö–∏–¥–∞—î **`ConcurrentModificationException`** | –ù–µ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–∫—ñ–≤ |
| **–ú–µ—Ö–∞–Ω—ñ–∑–º —Ä–æ–±–æ—Ç–∏** | –ü–µ—Ä–µ–≤—ñ—Ä—è—î –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (**`modCount`**) | –ü—Ä–∞—Ü—é—î –∑ –∫–æ–ø—ñ—î—é / lock'–∞–º–∏ |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å** | –®–≤–∏–¥—à–∏–π | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π —á–µ—Ä–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —Ç–∏ –≤–µ–¥–µ—à –æ–±–ª—ñ–∫ –≥–æ—Å—Ç–µ–π —É —Å–ø–∏—Å–∫—É.

* **Fail-fast** ‚Äî —Ç–∏ –ø—Ä–æ—Ö–æ–¥–∏—à –ø–æ —Å–ø–∏—Å–∫—É, —ñ —è–∫—â–æ —Ö—Ç–æ—Å—å –ø—ñ–¥—Å—É–Ω—É–≤ —â–µ –æ–¥–Ω–æ–≥–æ –≥–æ—Å—Ç—è, —Ç–∏ –æ–¥—Ä–∞–∑—É –∑—Ä–∏–≤–∞—î—à –≤–µ—á—ñ—Ä–∫—É.
* **Fail-safe** ‚Äî —Ç–∏ –ø—Ä–∞—Ü—é—î—à –∑ –∫–æ–ø—ñ—î—é —Å–ø–∏—Å–∫—É –≥–æ—Å—Ç–µ–π: –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ö—Ç–æ—Å—å —É–≤—ñ—Ä–≤–∞–≤—Å—è, —Ç–∏ —Ü—å–æ–≥–æ –Ω–µ –ø–æ–º—ñ—á–∞—î—à, –±–æ –¥–∏–≤–∏—à—Å—è –Ω–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–µ —Ñ–æ—Ç–æ.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **Fail-fast: ArrayList**

```java
List<String> list = new ArrayList<>();
list.add("A");
list.add("B");

for (String item : list) {
    if (item.equals("A")) {
        list.remove(item); // üí• ConcurrentModificationException
    }
}
```

### **Safe –≤–∞—Ä—ñ–∞–Ω—Ç:**

```java
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    if (it.next().equals("A")) {
        it.remove(); // ‚úÖ safe way
    }
}
```

### **Fail-safe: CopyOnWriteArrayList**

```java
List<String> list = new CopyOnWriteArrayList<>();
list.add("A");
list.add("B");

for (String item : list) {
    if (item.equals("A")) {
        list.remove(item); // ‚úÖ No exception
    }
}
System.out.println(list); // [B]
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å | Fail-fast | Fail-safe |
| :---: | :---: | :---: |
| **–í–∏–Ω—è—Ç–æ–∫ –ø—Ä–∏ –∑–º—ñ–Ω—ñ** | –¢–∞–∫ | –ù—ñ |
| **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è** | –û–¥–Ω–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π | –ë–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | –í–∏—â–∞ | –ù–∏–∂—á–∞ (—á–µ—Ä–µ–∑ –∫–æ–ø—ñ—ó –∞–±–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è) |
| **–ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å** | –ú–µ–Ω—à–∞ | –í–∏—â–∞ |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**Fail-fast \= FATAL** –ø—Ä–∏ –∑–º—ñ–Ω—ñ\!

**Fail-safe \= FRIENDLY** –¥–æ –∑–º—ñ–Ω\

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

* **Fail-fast** ‚Äî —à–≤–∏–¥–∫–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è (–≤–∏–∫–ª—é—á–µ–Ω–Ω—è).
* **Fail-safe** ‚Äî –ø—Ä–∞—Ü—é—î –±–µ–∑ –∑–±–æ—ó–≤, –∞–ª–µ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
* –ó–Ω–∞—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ–∫–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É –∫–æ–ª–µ–∫—Ü—ñ–π —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞—Ö.

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Oracle Docs ‚Äî CopyOnWriteArrayList**](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ `fail-fast` —Ç–∞ `fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏? –£ —á–æ–º—É —ó—Ö–Ω—è –≥–æ–ª–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –¥–≤—ñ —Ä—ñ–∑–Ω—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –±–∞–∑–æ–≤–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
>
> * **`fail-fast` (—à–≤–∏–¥–∫–æ-–ø–∞–¥–∞—é—á–∏–π):**
>   * **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:** –¢–∞–∫–∏–π —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —è–∫–æ–º–æ–≥–∞ —Ä–∞–Ω—ñ—à–µ –≤–∏—è–≤–∏—Ç–∏, —â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –±—É–ª–∞ –∑–º—ñ–Ω–µ–Ω–∞ –∑–∑–æ–≤–Ω—ñ (–Ω–µ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥–∏ —Å–∞–º–æ–≥–æ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞) —ñ –Ω–µ–≥–∞–π–Ω–æ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫ **`ConcurrentModificationException`**.
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ù–µ –∑–∞–±–µ–∑–ø–µ—á—É–≤–∞—Ç–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å, –∞ **–¥—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç—Å—å–∫—É –ø–æ–º–∏–ª–∫—É** ‚Äî –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—é –∫–æ–ª–µ–∫—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å —ó—ó –æ–±—Ö–æ–¥—É.
>   * **–ü—Ä–∏–∫–ª–∞–¥–∏:** –Ü—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –∑ `java.util`, —Ç–∞–∫–∏—Ö —è–∫ `ArrayList`, `LinkedList`, `HashSet`, `HashMap`.
>
> * **`fail-safe` (–±–µ–∑–ø–µ—á–Ω–∏–π –¥–æ –∑–±–æ—ó–≤):**
>   * **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞:** –¢–∞–∫–∏–π —ñ—Ç–µ—Ä–∞—Ç–æ—Ä **–Ω–µ –∫–∏–¥–∞—î** `ConcurrentModificationException`. –í—ñ–Ω –ø—Ä–æ–¥–æ–≤–∂—É—î —Å–≤–æ—é —Ä–æ–±–æ—Ç—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –±–∞–∑–æ–≤–∞ –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è.
>   * **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ **–Ω–∞–¥—ñ–π–Ω–∏–π –æ–±—Ö—ñ–¥** —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ, –¥–µ –æ–¥–Ω–æ—á–∞—Å–Ω—ñ –∑–º—ñ–Ω–∏ —î –Ω–æ—Ä–º–æ—é.
>   * **–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:** –ó–∞–∑–≤–∏—á–∞–π –≤—ñ–Ω –ø—Ä–∞—Ü—é—î –∑ **–∫–æ–ø—ñ—î—é** –∞–±–æ **"–∑–Ω—ñ–º–∫–æ–º" (snapshot)** –∫–æ–ª–µ–∫—Ü—ñ—ó, —Å—Ç–≤–æ—Ä–µ–Ω–∏–º –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ—á–∞—Ç–∫—É —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
>   * **–ü—Ä–∏–∫–ª–∞–¥–∏:** –Ü—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –∑ `java.util.concurrent`, —Ç–∞–∫–∏—Ö —è–∫ `CopyOnWriteArrayList`, `ConcurrentHashMap`.

#### **üìù –ê–Ω–∞–ª–æ–≥—ñ—è:**</h4>

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ —á–∏—Ç–∞—î—Ç–µ –∫–Ω–∏–∂–∫—É.

* **`fail-fast`:** –•—Ç–æ—Å—å –≤–∏—Ä–∏–≤–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫—É, –ø–æ–∫–∏ –≤–∏ —á–∏—Ç–∞—î—Ç–µ. –í–∏ –Ω–µ–≥–∞–π–Ω–æ —Ü–µ –ø–æ–º—ñ—á–∞—î—Ç–µ —ñ "–ø–∞–¥–∞—î—Ç–µ –∑ –ø–æ–º–∏–ª–∫–æ—é" (–æ–±—É—Ä—é—î—Ç–µ—Å—è).
* **`fail-safe`:** –ü–µ—Ä–µ–¥ —á–∏—Ç–∞–Ω–Ω—è–º –≤–∏ —Ä–æ–±–∏—Ç–µ –ø–æ–≤–Ω—É –∫—Å–µ—Ä–æ–∫–æ–ø—ñ—é –∫–Ω–∏–≥–∏. –¢–µ–ø–µ—Ä, —è–∫—â–æ —Ö—Ç–æ—Å—å –±—É–¥–µ –ø—Å—É–≤–∞—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª, —Ü–µ –Ω—ñ—è–∫ –Ω–µ –≤–ø–ª–∏–Ω–µ –Ω–∞ –≤–∞—à–µ —á–∏—Ç–∞–Ω–Ω—è –∫–æ–ø—ñ—ó.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ß—ñ—Ç–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ —É –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ (`–∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫` vs `–Ω–µ –∫–∏–¥–∞—î`), –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è (`–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–∫–∏` vs `–Ω–∞–¥—ñ–π–Ω–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ—è`) —Ç–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ (`java.util` vs `java.util.concurrent`).*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –º–µ—Ö–∞–Ω—ñ–∑–º `fail-fast` –≤ `ArrayList`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ú–µ—Ö–∞–Ω—ñ–∑–º `fail-fast` –≤ `ArrayList` (—ñ –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ —ñ–Ω—à–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π –∑ `java.util`) —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **–ª—ñ—á–∏–ª—å–Ω–∏–∫–∞ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ–π**.
>
> 1. –£ –∫–ª–∞—Å—ñ `ArrayList` —î –ø–æ–ª–µ `protected transient int modCount = 0;`.
>     * –¶–µ–π –ª—ñ—á–∏–ª—å–Ω–∏–∫ **—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î—Ç—å—Å—è** –ø—Ä–∏ –±—É–¥—å-—è–∫—ñ–π **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ñ–π –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** –∫–æ–ª–µ–∫—Ü—ñ—ó ‚Äî —Ç–æ–±—Ç–æ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö, —â–æ –∑–º—ñ–Ω—é—é—Ç—å —ó—ó —Ä–æ–∑–º—ñ—Ä (`add()`, `remove()`, `clear()`). –ó–º—ñ–Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `set()` –Ω–µ —î —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ—é –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é.
>
> 2. –ö–æ–ª–∏ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä (`list.iterator()`), –≤—ñ–Ω –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è `modCount` —É –≤–ª–∞—Å–Ω–æ–º—É –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–º—É –ø–æ–ª—ñ `expectedModCount`.
>
> 3. –ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤–∏–∫–ª–∏–∫—É –º–µ—Ç–æ–¥—É —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `next()`, –≤—ñ–Ω —Å–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É:
>     `if (modCount != expectedModCount)`
>
> 4. –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è, —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –±—É–ª–∞ –∑–º—ñ–Ω–µ–Ω–∞ –∑–∑–æ–≤–Ω—ñ. –Ü—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–µ–≥–∞–π–Ω–æ –∫–∏–¥–∞—î `ConcurrentModificationException`.
>
> –ö–æ–ª–∏ –≤–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ `iterator.remove()`, —Ü–µ–π –º–µ—Ç–æ–¥ –Ω–µ —Ç—ñ–ª—å–∫–∏ –≤–∏–¥–∞–ª—è—î –µ–ª–µ–º–µ–Ω—Ç –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó, –∞–ª–µ –π –æ–Ω–æ–≤–ª—é—î `expectedModCount`, —â–æ–± –≤—ñ–Ω –∑–Ω–æ–≤—É –¥–æ—Ä—ñ–≤–Ω—é–≤–∞–≤ `modCount`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–µ—Ç–∞–ª—å–Ω–µ –∑–Ω–∞–Ω–Ω—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `fail-fast`, –∑–æ–∫—Ä–µ–º–∞ —Ä–æ–ª—ñ `modCount` —Ç–∞ `expectedModCount`.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ `ConcurrentModificationException`, —ñ –ø–æ–∫–∞–∂—ñ—Ç—å, —è–∫ –π–æ–≥–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ö–æ–¥, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ–º–∏–ª–∫–∏:**
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü–∏–∫–ª—É `for-each` –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> ```java
> import java.util.ArrayList;
> import java.util.List;
>
> public class CmeExample {
>     public static void main(String[] args) {
>         List<String> list = new ArrayList<>(List.of("A", "B", "C"));
>
>         try {
>             for (String item : list) {
>                 if (item.equals("B")) {
>                     // –ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–ª–µ–∫—Ü—ñ—ó –Ω–∞–ø—Ä—è–º—É –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó
>                     list.remove(item);
>                 }
>             }
>         } catch (ConcurrentModificationException e) {
>             System.out.println("–°–ø—ñ–π–º–∞–Ω–æ ConcurrentModificationException!");
>         }
>     }
> }
> ```
>
> –¶–∏–∫–ª `for-each` –Ω–µ—è–≤–Ω–æ —Å—Ç–≤–æ—Ä—é—î —ñ—Ç–µ—Ä–∞—Ç–æ—Ä. `list.remove()` –∑–º—ñ–Ω—é—î `modCount`, —ñ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —ñ—Ç–µ—Ä–∞—Ü—ñ—ó —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –≤–∏—è–≤–ª—è—î —Ü—é –∑–º—ñ–Ω—É.
>
> **–Ø–∫ —Ü–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏:**
>
> **–°–ø–æ—Å—ñ–± 1: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–≤–Ω–∏–π `Iterator` —Ç–∞ –π–æ–≥–æ –º–µ—Ç–æ–¥ `remove()`:**
>
> ```java
> Iterator<String> iterator = list.iterator();
> while (iterator.hasNext()) {
>     String item = iterator.next();
>     if (item.equals("B")) {
>         iterator.remove(); // –ë–µ–∑–ø–µ—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
>     }
> }
> ```
>
> **–°–ø–æ—Å—ñ–± 2: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `removeIf()` (–∑ Java 8):**
>
> ```java
> list.removeIf(item -> item.equals("B"));
> ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏: –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω–∏–π –∫–æ–¥ —ñ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ —ñ–¥—ñ–æ–º–∞—Ç–∏—á–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –π–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `fail-fast` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å –≤–∏—è–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏—Ö –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ–π?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ú–µ—Ö–∞–Ω—ñ–∑–º `fail-fast` –ø—Ä–∞—Ü—é—î –Ω–∞ –æ—Å–Ω–æ–≤—ñ **–Ω–∞–π–∫—Ä–∞—â–∏—Ö –∑—É—Å–∏–ª—å (best-effort)** —ñ –Ω–µ –¥–∞—î –∂–æ—Ä—Å—Ç–∫–∏—Ö –≥–∞—Ä–∞–Ω—Ç—ñ–π, –æ—Å–æ–±–ª–∏–≤–æ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
>
> **–ü—Ä–∏—á–∏–Ω–∞:**
> –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ `modCount != expectedModCount` –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –º–µ—Ç–æ–¥—ñ–≤ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞ (`next()`, `hasNext()` —Ç–æ—â–æ).
>
> –ú–æ–∂–ª–∏–≤–∏–π —Ç–∞–∫–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π (—Ö–æ—á —ñ –º–∞–ª–æ–π–º–æ–≤—ñ—Ä–Ω–∏–π):
>
> 1. –ü–æ—Ç—ñ–∫ A –≤–∏–∫–ª–∏–∫–∞—î `iterator.hasNext()`, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `modCount` –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ.
> 2. –ü–æ—Ç—ñ–∫ B –∑–º—ñ–Ω—é—î –∫–æ–ª–µ–∫—Ü—ñ—é, `modCount` –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è.
> 3. –ü–æ—Ç—ñ–∫ A –≤–∏–∫–ª–∏–∫–∞—î `iterator.next()`. –í —ñ–¥–µ–∞–ª—ñ, –≤—ñ–Ω –º–∞—î –∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫, –∞–ª–µ —è–∫—â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ `next()` –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, —è–∫ –∑–º—ñ–Ω–∞ –∑ –ü–æ—Ç–æ–∫—É B —Å—Ç–∞–Ω–µ –≤–∏–¥–∏–º–æ—é (—á–µ—Ä–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞), –≤–∏–Ω—è—Ç–∫—É –Ω–µ –±—É–¥–µ, —ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏.
>
> –¢–æ–º—É –≤ –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó —Å–∫–∞–∑–∞–Ω–æ, —â–æ `ConcurrentModificationException` –∫–∏–¥–∞—î—Ç—å—Å—è **"–Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–π–∫—Ä–∞—â–∏—Ö –∑—É—Å–∏–ª—å"** —ñ –Ω–µ —Å–ª—ñ–¥ –ø–∏—Å–∞—Ç–∏ –∫–æ–¥, —è–∫–∏–π –ø–æ–∫–ª–∞–¥–∞—î—Ç—å—Å—è –Ω–∞ —Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Å–≤–æ—î—ó –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ. –ô–æ–≥–æ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–∏—à–µ –¥–ª—è **–≤–∏—è–≤–ª–µ–Ω–Ω—è –±–∞–≥—ñ–≤**.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ `fail-fast` ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –∞ –Ω–µ –Ω–∞–¥—ñ–π–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ù–∞–∑–≤—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–ª–µ–∫—Ü—ñ–π, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏.

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `Fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏–º–∏ –∫–æ–ª–µ–∫—Ü—ñ—è–º–∏** –∑ –ø–∞–∫–µ—Ç—É `java.util.concurrent`. –í–æ–Ω–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
>
> **–û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏:**
>
> * **`CopyOnWriteArrayList` —Ç–∞ `CopyOnWriteArraySet`:**
>   * –á—Ö–Ω—ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑—ñ **"–∑–Ω—ñ–º–∫–æ–º" (snapshot)** –º–∞—Å–∏–≤—É, —è–∫–∏–π —ñ—Å–Ω—É–≤–∞–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞. –ë—É–¥—å-—è–∫—ñ –∑–º—ñ–Ω–∏ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó —Å—Ç–≤–æ—Ä—é—é—Ç—å –Ω–æ–≤—É –∫–æ–ø—ñ—é –º–∞—Å–∏–≤—É, –Ω–µ –≤–ø–ª–∏–≤–∞—é—á–∏ –Ω–∞ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä.
>
> * **`ConcurrentHashMap`:**
>   * –ô–æ–≥–æ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä —î `fail-safe`. –í—ñ–Ω –Ω–µ –∫–∏–¥–∞—î `ConcurrentModificationException`. –ì–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è, —â–æ –≤—ñ–Ω –ø—Ä–æ–π–¥–µ –ø–æ –∫–æ–∂–Ω–æ–º—É –µ–ª–µ–º–µ–Ω—Ç—É, —â–æ —ñ—Å–Ω—É–≤–∞–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç—É, —Ä—ñ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑. –í—ñ–Ω **–º–æ–∂–µ, –∞–ª–µ –Ω–µ –∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π**, –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –∑–º—ñ–Ω–∏, —â–æ –≤—ñ–¥–±—É–ª–∏—Å—è –ø—ñ—Å–ª—è –π–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.
>
> * **`ConcurrentLinkedQueue`, `ConcurrentLinkedDeque`:**
>   * –á—Ö–Ω—ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ —Ç–∞–∫–æ–∂ —î `fail-safe` —ñ –Ω–∞–¥–∞—é—Ç—å "—Å–ª–∞–±–∫–æ-–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–π" (weakly consistent) –∑–Ω—ñ–º–æ–∫.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π —Ç–∞ —ó—Ö–Ω—ñ—Ö –∫–ª—é—á–æ–≤–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —á–æ–º—É –æ—Å–Ω–æ–≤–Ω–∏–π –Ω–µ–¥–æ–ª—ñ–∫ `fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä—ñ–≤, —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (—è–∫ —É `CopyOnWriteArrayList`)? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–Ω–æ–≤–Ω–∏–π –Ω–µ–¥–æ–ª—ñ–∫ ‚Äî —Ü–µ **–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ** –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö –∑–∞–ø–∏—Å—É.
>
> `CopyOnWriteArrayList` –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (`add`, `remove`, `set`) —Å—Ç–≤–æ—Ä—é—î **–ø–æ–≤–Ω—É –Ω–æ–≤—É –∫–æ–ø—ñ—é** —Å–≤–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –º–∞—Å–∏–≤—É.
>
> **–ù–∞—Å–ª—ñ–¥–∫–∏:**
>
> 1. **"–î–æ—Ä–æ–≥—ñ" –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—Å—É:** –ö–æ–∂–Ω–∞ –∑–º—ñ–Ω–∞ –≤–∏–º–∞–≥–∞—î O(n) —á–∞—Å—É —ñ –ø–∞–º'—è—Ç—ñ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –º–∞—Å–∏–≤—É. –¶–µ —Ä–æ–±–∏—Ç—å `CopyOnWriteArrayList` –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–ø—Ä–∏–¥–∞—Ç–Ω–∏–º –¥–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –∑ —á–∞—Å—Ç–∏–º–∏ –∑–∞–ø–∏—Å–∞–º–∏.
>
> 2. **–Ü—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏ –¥–∞–Ω–∏–º–∏:** –û—Å–∫—ñ–ª—å–∫–∏ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∞—Ü—é—î –∑—ñ "–∑–Ω—ñ–º–∫–æ–º", –≤—ñ–Ω –Ω–µ –±–∞—á–∏—Ç—å –∂–æ–¥–Ω–∏—Ö –∑–º—ñ–Ω (–¥–æ–¥–∞–≤–∞–Ω—å, –≤–∏–¥–∞–ª–µ–Ω—å), —è–∫—ñ –±—É–ª–∏ –∑—Ä–æ–±–ª–µ–Ω—ñ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó –ø—ñ—Å–ª—è –π–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ —Ç—ñ—î—é –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é, —è–∫—É –æ—á—ñ–∫—É—î –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç.
>
> –¢–æ–º—É —Ç–∞–∫—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó —î –≤—É–∑—å–∫–æ—Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ —ñ –ø—ñ–¥—Ö–æ–¥—è—Ç—å —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤, –¥–µ **–∫—ñ–ª—å–∫—ñ—Å—Ç—å —á–∏—Ç–∞–Ω—å —Ç–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ–π –∑–Ω–∞—á–Ω–æ –ø–µ—Ä–µ–≤–∏—â—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è —Å–ø–∏—Å–∫—É —Å–ª—É—Ö–∞—á—ñ–≤ - listeners).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤ `fail-safe` –ø—ñ–¥—Ö–æ–¥—É: –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –¥–æ—Å—è–≥–∞—î—Ç—å—Å—è —Ü—ñ–Ω–æ—é –¥–æ—Ä–æ–≥–æ–≥–æ –∑–∞–ø–∏—Å—É —Ç–∞ –º–æ–∂–ª–∏–≤–æ—ó —Ä–æ–±–æ—Ç–∏ –∑—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏ –¥–∞–Ω–∏–º–∏.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–±–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –Ω–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–¥, —è–∫–∏–π —ñ—Ç–µ—Ä—É—î—Ç—å—Å—è –ø–æ —Å–ø–∏—Å–∫—É —ñ –¥–æ–¥–∞—î –Ω–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ—á–Ω–∏—Ö, —è–∫ –±–∏ –≤–∏ —Ü–µ –∑—Ä–æ–±–∏–ª–∏ –±–µ–∑–ø–µ—á–Ω–æ, –Ω–µ –æ—Ç—Ä–∏–º—É—é—á–∏ `ConcurrentModificationException`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ü—Ä—è–º–∞ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É, –ø–æ —è–∫–æ–º—É –π–¥–µ —ñ—Ç–µ—Ä–∞—Ü—ñ—è, –Ω–µ–º–æ–∂–ª–∏–≤–∞ (—è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ListIterator`, —â–æ –º–æ–∂–µ —É—Å–∫–ª–∞–¥–Ω–∏—Ç–∏ –ª–æ–≥—ñ–∫—É).
>
> **–ù–∞–π–∫—Ä–∞—â–∏–π –ø—ñ–¥—Ö—ñ–¥** ‚Äî —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤—É –∫–æ–ª–µ–∫—Ü—ñ—é –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∞ –ø–æ—Ç—ñ–º –¥–æ–¥–∞—Ç–∏ —ó—Ö —É—Å—ñ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> List<String> list = new ArrayList<>(List.of("a", "b"));
> List<String> toAdd = new ArrayList<>(); // –¢–∏–º—á–∞—Å–æ–≤–∞ –∫–æ–ª–µ–∫—Ü—ñ—è
>
> // 1. –Ü—Ç–µ—Ä—É—î–º–æ –ø–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ–π –∫–æ–ª–µ–∫—Ü—ñ—ó —ñ –∑–±–∏—Ä–∞—î–º–æ –Ω–æ–≤—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
> for (String item : list) {
>     if (item.equals("a")) {
>         toAdd.add("A");
>     }
> }
>
> // 2. –î–æ–¥–∞—î–º–æ –≤—Å—ñ –∑—ñ–±—Ä–∞–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó
> list.addAll(toAdd);
>
> System.out.println(list); // [a, b, A]
> ```
>
> –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ —î —á–∏—Å—Ç–∏–º, –±–µ–∑–ø–µ—á–Ω–∏–º —ñ –ª–µ–≥–∫–æ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º. –í—ñ–Ω —è–≤–Ω–æ –≤—ñ–¥–æ–∫—Ä–µ–º–ª—é—î —Ñ–∞–∑—É —á–∏—Ç–∞–Ω–Ω—è –≤—ñ–¥ —Ñ–∞–∑–∏ –∑–∞–ø–∏—Å—É, —â–æ –∑–∞–ø–æ–±—ñ–≥–∞—î `ConcurrentModificationException`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ –≤–º—ñ–Ω–Ω—è –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –ø–æ—à–∏—Ä–µ–Ω—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `Iterator.remove()` –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î `ConcurrentModificationException`, –∞ `list.remove()` ‚Äî –≤–∏–∫–ª–∏–∫–∞—î? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ –ø–æ–≤'—è–∑–∞–Ω–æ –∑ —Ç–∏–º, —Ö—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª—é—î –ø—Ä–æ—Ü–µ—Å –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —ñ —Ö—Ç–æ –º–æ–∂–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞.
>
> * **`list.remove()`:**
>   * –¶–µ–π –≤–∏–∫–ª–∏–∫ –∑–º—ñ–Ω—é—î –∫–æ–ª–µ–∫—Ü—ñ—é –Ω–∞–ø—Ä—è–º—É, —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—é—á–∏ —ó—ó `modCount`.
>   * –û–±'—î–∫—Ç `Iterator` –Ω—ñ—á–æ–≥–æ –ø—Ä–æ —Ü–µ "–Ω–µ –∑–Ω–∞—î". –ô–æ–≥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π `expectedModCount` –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Å—Ç–∞—Ä–∏–º.
>   * –ù–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∫—Ä–æ—Ü—ñ —ñ—Ç–µ—Ä–∞—Ü—ñ—ó `modCount != expectedModCount`, —ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫.
>
> * **`iterator.remove()`:**
>   * –¶–µ–π –º–µ—Ç–æ–¥ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –º–µ—Ö–∞–Ω—ñ–∑–º—É —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
>   * –ö–æ–ª–∏ –≤—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, –≤—ñ–Ω –Ω–µ —Ç—ñ–ª—å–∫–∏ **–≤–∏–¥–∞–ª—è—î –µ–ª–µ–º–µ–Ω—Ç** –∑ –±–∞–∑–æ–≤–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó (—ñ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î `modCount`), –∞–ª–µ –π –æ–¥–Ω–æ—á–∞—Å–Ω–æ **–æ–Ω–æ–≤–ª—é—î —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π `expectedModCount`**, —â–æ–± –≤—ñ–Ω –∑–Ω–æ–≤—É –∑–±—ñ–≥–∞–≤—Å—è –∑ `modCount` –∫–æ–ª–µ–∫—Ü—ñ—ó.
>   * –ö—Ä—ñ–º —Ç–æ–≥–æ, –≤—ñ–Ω –æ–Ω–æ–≤–ª—é—î —Å–≤—ñ–π –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–∑–∏—Ü—ñ—é "–∫—É—Ä—Å–æ—Ä–∞"), —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —ñ—Ç–µ—Ä–∞—Ü—ñ—é.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `iterator.remove()` —î —î–¥–∏–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é, —è–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î —Å—Ç–∞–Ω —ñ –∫–æ–ª–µ–∫—Ü—ñ—ó, —ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–î–µ—Ç–∞–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑ `modCount` —Ç–∞ `expectedModCount` –ø—Ä–∏ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø–∞—Ö –≤–∏–¥–∞–ª–µ–Ω–Ω—è.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–æ–º—É –ø–æ—Ç–æ—Ü—ñ –±—É–¥–µ –∫–∏–Ω—É—Ç–æ `ConcurrentModificationException` –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó? –£ —Ç–æ–º—É, —â–æ —ñ—Ç–µ—Ä—É—î, —á–∏ –≤ —Ç–æ–º—É, —â–æ –∑–º—ñ–Ω—é—î? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `ConcurrentModificationException` –±—É–¥–µ –∫–∏–Ω—É—Ç–æ —É **–ø–æ—Ç–æ—Ü—ñ, —è–∫–∏–π —ñ—Ç–µ—Ä—É—î—Ç—å—Å—è**.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
>
> 1. **–ü–æ—Ç—ñ–∫ A** –ø–æ—á–∏–Ω–∞—î —ñ—Ç–µ—Ä–∞—Ü—ñ—é –ø–æ `ArrayList` —ñ –≤–∏–∫–ª–∏–∫–∞—î `iterator.next()`.
> 2. **–ü–æ—Ç—ñ–∫ B** –≤ —Ü–µ–π —á–∞—Å –≤–∏–∫–ª–∏–∫–∞—î `list.add("new element")`. –¶–µ –∑–º—ñ–Ω—é—î `modCount`.
> 3. **–ü–æ—Ç—ñ–∫ A** –ø—Ä–æ–¥–æ–≤–∂—É—î —ñ—Ç–µ—Ä–∞—Ü—ñ—é —ñ –≤–∏–∫–ª–∏–∫–∞—î `iterator.next()` –≤–¥—Ä—É–≥–µ.
> 4. –í—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü—å–æ–≥–æ –≤–∏–∫–ª–∏–∫—É `next()` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ—Ä—ñ–≤–Ω—é—î —Å–≤—ñ–π `expectedModCount` –∑ –ø–æ—Ç–æ—á–Ω–∏–º `modCount` –∫–æ–ª–µ–∫—Ü—ñ—ó.
> 5. –í—ñ–Ω –±–∞—á–∏—Ç—å –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —ñ **—Å–∞–º–µ –ü–æ—Ç—ñ–∫ A** –∫–∏–¥–∞—î `ConcurrentModificationException`.
>
> –ü–æ—Ç—ñ–∫, —â–æ –∑–º—ñ–Ω—é—î –∫–æ–ª–µ–∫—Ü—ñ—é, –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —ñ—Ç–µ—Ä–∞—Ç–æ—Ä—ñ–≤ —ñ –ø—Ä–æ–¥–æ–≤–∂—É—î —Å–≤–æ—é —Ä–æ–±–æ—Ç—É –±–µ–∑ –ø–æ–º–∏–ª–æ–∫. –ü—Ä–æ–±–ª–µ–º–∞ –≤–∏–Ω–∏–∫–∞—î —Å–∞–º–µ —É —Ç–æ–≥–æ, —Ö—Ç–æ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –æ–±—Ö—ñ–¥ –≤–∂–µ –∑–º—ñ–Ω–µ–Ω–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, –≤ —è–∫–æ–º—É —Å–∞–º–µ –ø–æ—Ç–æ—Ü—ñ –ø—Ä–æ—è–≤–ª—è—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞, —â–æ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –ø—Ä–æ–≥—Ä–∞–º.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ `Stream API` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ü–∏–∫–ª `forEach`) –ø–æ–≤–æ–¥–∏—Ç—å—Å—è –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ñ–π –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó? –ß–∏ —î –≤—ñ–Ω `fail-fast`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–∂–µ—Ä–µ–ª–∞ —Å—Ç—Ä—ñ–º—É.
>
> –Ø–∫—â–æ —Å—Ç—Ä—ñ–º —Å—Ç–≤–æ—Ä–µ–Ω–æ –∑—ñ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó `fail-fast` –∫–æ–ª–µ–∫—Ü—ñ—ó** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `ArrayList`), —Ç–æ –π–æ–≥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —è–∫-–æ—Ç `forEach`, —Ç–∞–∫–æ–∂ –±—É–¥—É—Ç—å **`fail-fast`**.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> List<String> list = new ArrayList<>(List.of("a", "b", "c"));
>
> // –¶–µ–π –∫–æ–¥ –∫–∏–Ω–µ ConcurrentModificationException
> list.stream().forEach(s -> {
>     if (s.equals("b")) {
>         list.add("d");
>     }
> });
> ```
>
> **–ß–æ–º—É —Ç–∞–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
> –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç—Ä—ñ–º—É –¥–ª—è –∫–æ–ª–µ–∫—Ü—ñ—ó –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `Spliterator` (—Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è `Iterator`), —è–∫–∏–π —Ç–∞–∫–æ–∂ –º–æ–∂–µ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ `modCount`. –Ø–∫—â–æ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó `forEach` –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è, `Spliterator` –≤–∏—è–≤–ª—è—î —Ü–µ —ñ –∫–∏–¥–∞—î `ConcurrentModificationException`.
>
> –û–¥–Ω–∞–∫, –¥–ª—è **–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏—Ö (`fail-safe`) –∫–æ–ª–µ–∫—Ü—ñ–π**, —Å—Ç—Ä—ñ–º, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑ –Ω–∏—Ö, —Ç–∞–∫–æ–∂ –±—É–¥–µ `fail-safe`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `Stream API` —É—Å–ø–∞–¥–∫–æ–≤—É—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É `fail-fast`/`fail-safe` –≤—ñ–¥ —Å–≤–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞ –¥–∞–Ω–∏—Ö.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫–∏–π –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–º–ø—Ä–æ–º—ñ—Å –º—ñ–∂ `fail-fast` —Ç–∞ `fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞–º–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–º–ø—Ä–æ–º—ñ—Å –ø–æ–ª—è–≥–∞—î —É –≤–∏–±–æ—Ä—ñ –º—ñ–∂:
>
> 1. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é —Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—é –¥–∞–Ω–∏—Ö** (`fail-fast`).
> 2. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—é —ñ—Ç–µ—Ä–∞—Ü—ñ—ó —Ç–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—é** (`fail-safe`).
>
> * **`Fail-fast`:**
>   * **–ü–ª—é—Å:** –î—É–∂–µ —à–≤–∏–¥–∫—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—é –∫–æ–ª–µ–∫—Ü—ñ—î—é. –ù–µ–º–∞—î –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç –Ω–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∞–±–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è.
>   * **–ú—ñ–Ω—É—Å:** –ù–µ–Ω–∞–¥—ñ–π–Ω—ñ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ. –ë—É–¥—å-—è–∫–∞ –∑–º—ñ–Ω–∞ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –∑–±–æ—é —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.
>
> * **`Fail-safe`:**
>   * **–ü–ª—é—Å:** –î—É–∂–µ –Ω–∞–¥—ñ–π–Ω—ñ. –ì–∞—Ä–∞–Ω—Ç—É—é—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –±–µ–∑ –≤–∏–Ω—è—Ç–∫—ñ–≤, –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ñ–π –∑–º—ñ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó.
>   * **–ú—ñ–Ω—É—Å:** –ú–µ–Ω—à –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ. –ê–±–æ –≤–∏–º–∞–≥–∞—é—Ç—å "–¥–æ—Ä–æ–≥–∏—Ö" –æ–ø–µ—Ä–∞—Ü—ñ–π –∑–∞–ø–∏—Å—É (—è–∫ `CopyOnWriteArrayList`), –∞–±–æ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑—ñ **–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏ –¥–∞–Ω–∏–º–∏**. –í–∏ –±–∞—á–∏—Ç–µ "–∑–Ω—ñ–º–æ–∫" —Å—Ç–∞–Ω—É, –∞ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ.
>
> **–í–∏–±—ñ—Ä –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–∞–¥–∞—á—ñ:** –î–ª—è –æ–¥–Ω–æ–ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –∫–æ–¥—É `fail-fast` —î —ñ–¥–µ–∞–ª—å–Ω–∏–º –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫. –î–ª—è –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –∫–æ–¥—É, –¥–µ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å –æ–±—Ö–æ–¥—É –≤–∞–∂–ª–∏–≤—ñ—à–∞ –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö, ‚Äî `fail-safe`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –¥–≤–∞ –ø—ñ–¥—Ö–æ–¥–∏ –∑–∞ —ó—Ö–Ω—ñ–º–∏ –∫–ª—é—á–æ–≤–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π `fail-fast` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä? –Ø–∫—ñ –ø–æ–ª—è –¥–ª—è —Ü—å–æ–≥–æ –∑–Ω–∞–¥–æ–±–ª—è—Ç—å—Å—è? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–Ω–∞. –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –º–µ—Ö–∞–Ω—ñ–∑–º, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `ArrayList`.
>
> **–©–æ –¥–ª—è —Ü—å–æ–≥–æ –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è:**
>
> **–£ –≤–∞—à–æ–º—É –∫–ª–∞—Å—ñ-–∫–æ–ª–µ–∫—Ü—ñ—ó:**
>
> 1. –ü–æ–ª–µ-–ª—ñ—á–∏–ª—å–Ω–∏–∫ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ–π: `private int modCount = 0;`.
> 2. –¶–µ–π –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –≤ –∫–æ–∂–Ω–æ–º—É –º–µ—Ç–æ–¥—ñ, —è–∫–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ –∑–º—ñ–Ω—é—î –∫–æ–ª–µ–∫—Ü—ñ—é (`add`, `remove` —Ç–æ—â–æ).
>
> **–£ –≤–∞—à–æ–º—É –∫–ª–∞—Å—ñ-—ñ—Ç–µ—Ä–∞—Ç–æ—Ä—ñ:**
>
> 1. –ü–æ–ª–µ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –æ—á—ñ–∫—É–≤–∞–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞: `private int expectedModCount;`.
> 2. –£ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –ø–æ–ª–µ: `this.expectedModCount = myCollection.modCount;`.
> 3. –£ –∫–æ–∂–Ω–æ–º—É –º–µ—Ç–æ–¥—ñ (`next`, `hasNext`) –Ω–∞ —Å–∞–º–æ–º—É –ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É:
>
>     ```java
>     final void checkForComodification() {
>         if (modCount != expectedModCount) {
>             throw new ConcurrentModificationException();
>         }
>     }
>     ```
>
> 4. –£ –º–µ—Ç–æ–¥—ñ `remove()` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞, –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó, –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ `expectedModCount`:
>
>     ```java
>     public void remove() {
>         // ... –ª–æ–≥—ñ–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
>         myCollection.modCount++;
>         expectedModCount = myCollection.modCount;
>     }
>     ```

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `fail-fast` –º–µ—Ö–∞–Ω—ñ–∑–º—É. –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å —Å–ø—Ä–æ–µ–∫—Ç—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –∑ —Ç–∞–∫–æ—é –ø–æ–≤–µ–¥—ñ–Ω–∫–æ—é.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ `subList()` –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ `ConcurrentModificationException`? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `list.subList()` –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–µ –∫–æ–ø—ñ—é, –∞ **"–≤–∏–¥" (view)** –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –æ–±–∏–¥–≤–∞ –æ–±'—î–∫—Ç–∏ (`list` —Ç–∞ `subList`) –¥—ñ–ª—è—Ç—å —Å–ø—ñ–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
>
> –ó–≤'—è–∑–æ–∫ –∑ `ConcurrentModificationException` –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É —Ä–æ–±–∏—Ç—å "–≤–∏–¥" –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–º**.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ–π:**
>
> 1. –í–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ `List<String> list` —ñ –¥–æ–¥–∞—î—Ç–µ –≤ –Ω—å–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∏.
> 2. –í–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ "–≤–∏–¥": `List<String> sub = list.subList(1, 3);`.
> 3. –¢–µ–ø–µ—Ä –≤–∏ **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ –∑–º—ñ–Ω—é—î—Ç–µ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫**, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `list.add("new element");`.
> 4. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –±—É–¥—å-—è–∫–∞ —Å–ø—Ä–æ–±–∞ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ `sub` (–≤–∏–∫–ª–∏–∫–∞—Ç–∏ `sub.get()`, `sub.size()` –∞–±–æ —ñ—Ç–µ—Ä—É–≤–∞—Ç–∏ –ø–æ –Ω—å–æ–º—É) –Ω–µ–≥–∞–π–Ω–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –∫–∏–¥–∞–Ω–Ω—è **`ConcurrentModificationException`**.
>
> –¶–µ –∑—Ä–æ–±–ª–µ–Ω–æ —Ç–æ–º—É, —â–æ –∑–º—ñ–Ω–∞ —Ä–æ–∑–º—ñ—Ä—É –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É —Ä–æ–±–∏—Ç—å —ñ–Ω–¥–µ–∫—Å–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É "–≤–∏–¥—É" –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º–∏ —Ç–∞ –Ω–µ–¥—ñ–π—Å–Ω–∏–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–≤–µ–¥—ñ–Ω–∫—É `subList()` —Ç–∞ —ó—ó –∑–≤'—è–∑–æ–∫ –∑ –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º `fail-fast`.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É `ConcurrentHashMap.size()` –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–µ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è? –Ø–∫ —Ü–µ –ø–æ–≤'—è–∑–∞–Ω–æ –∑ —ó—ó `fail-safe` –ø—Ä–∏—Ä–æ–¥–æ—é? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ú–µ—Ç–æ–¥ `size()` –¥–ª—è `ConcurrentHashMap` –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –Ω–µ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–æ–º—É —â–æ –≤—ñ–Ω —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π —Ç–∞–∫, —â–æ–± **–Ω–µ –±–ª–æ–∫—É–≤–∞—Ç–∏** –≤—Å—é –º–∞–ø—É –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
>
> **–ß–æ–º—É —Ç–∞–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
>
> * `ConcurrentHashMap` —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∏, —ñ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ —Å–µ–≥–º–µ–Ω—Ç—ñ–≤.
> * –©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ—á–Ω–∏–π —Ä–æ–∑–º—ñ—Ä, –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –± –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –≤—Å—é –º–∞–ø—É, —â–æ–± –∂–æ–¥–µ–Ω –ø–æ—Ç—ñ–∫ –Ω–µ –º—ñ–≥ –¥–æ–¥–∞–≤–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª—è—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—ñ–¥ —á–∞—Å –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É. –¶–µ –± –∑–Ω–∞—á–Ω–æ –∑–Ω–∏–∑–∏–ª–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —ñ –Ω—ñ–≤–µ–ª—é–≤–∞–ª–æ –ø–µ—Ä–µ–≤–∞–≥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—ñ.
> * –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ `size()` –∑–∞–∑–≤–∏—á–∞–π —î **–æ—Ü—ñ–Ω–∫–æ—é**. –í—ñ–Ω –º–æ–∂–µ —à–≤–∏–¥–∫–æ –ø—ñ–¥—Å—É–º—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç—ñ–≤, –∞–ª–µ –≤ —Ç–æ–π –º–æ–º–µ–Ω—Ç, –∫–æ–ª–∏ –≤—ñ–Ω —Ü–µ —Ä–æ–±–∏—Ç—å, —ñ–Ω—à–∏–π –ø–æ—Ç—ñ–∫ –º–æ–∂–µ –≤–∂–µ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç –≤ –æ–¥–∏–Ω —ñ–∑ —Å–µ–≥–º–µ–Ω—Ç—ñ–≤.
>
> **–ó–≤'—è–∑–æ–∫ –∑ `fail-safe`:**
>
> –¶–µ —î —á–∞—Å—Ç–∏–Ω–æ—é –∑–∞–≥–∞–ª—å–Ω–æ—ó —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó "—Å–ª–∞–±–∫–æ—ó –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ" (weak consistency), —è–∫–∞ –ø—Ä–∏—Ç–∞–º–∞–Ω–Ω–∞ `fail-safe` –∫–æ–ª–µ–∫—Ü—ñ—è–º. –í–æ–Ω–∏ –Ω–∞–¥–∞—é—Ç—å –ø–µ—Ä–µ–≤–∞–≥—É **–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ —Ç–∞ –≤–∏—Å–æ–∫—ñ–π –ø—Ä–æ–ø—É—Å–∫–Ω—ñ–π –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ** –Ω–∞–¥ –∞–±—Å–æ–ª—é—Ç–Ω–æ—é —Ç–æ—á–Ω—ñ—Å—Ç—é —Ç–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—é –¥–∞–Ω–∏—Ö —É –∫–æ–∂–µ–Ω –º–æ–º–µ–Ω—Ç —á–∞—Å—É.
>
> –ú–µ—Ç–æ–¥ `size()` –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —è–∫–∏–π –±—É–≤ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º "—è–∫–∏–π—Å—å —á–∞—Å —Ç–æ–º—É", —Ç–∞–∫ —Å–∞–º–æ —è–∫ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∞—Ü—é—î –∑—ñ "–∑–Ω—ñ–º–∫–æ–º". –¶–µ —Ü—ñ–Ω–∞, —è–∫—É –º–∏ –ø–ª–∞—Ç–∏–º–æ –∑–∞ –≤–∏—Å–æ–∫—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ–≤ —É –¥–∏–∑–∞–π–Ω—ñ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π. –†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó "—Å–ª–∞–±–∫–æ—ó –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ".*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –∑–ª–æ–≤–∏—Ç–∏ `ConcurrentModificationException` —ñ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–æ–±–æ—Ç—É? –ß–∏ —Ü–µ –≥–∞—Ä–Ω–∞ —ñ–¥–µ—è? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–¢–µ—Ö–Ω—ñ—á–Ω–æ**, —Ç–∞–∫, –º–æ–∂–Ω–∞, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –Ω–µ–ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–∏–π (`RuntimeException`), –∞–ª–µ –Ω–µ `Error`.
>
> ```java
> try {
>     for (String s : list) { list.add("a"); }
> } catch (ConcurrentModificationException e) {
>     // —è–∫–∞—Å—å –ª–æ–≥—ñ–∫–∞
> }
> ```
>
> **–ß–∏ —Ü–µ –≥–∞—Ä–Ω–∞ —ñ–¥–µ—è?**
>
> **–ù—ñ, –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω—ñ.** –¶–µ **–¥—É–∂–µ –ø–æ–≥–∞–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞**.
>
> **–ü—Ä–∏—á–∏–Ω–∏:**
>
> 1. `ConcurrentModificationException` —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î –ø—Ä–æ **–ª–æ–≥—ñ—á–Ω—É –ø–æ–º–∏–ª–∫—É (–±–∞–≥)** —É –≤–∞—à–æ–º—É –∫–æ–¥—ñ. –í–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—è —Ä–æ–±–∏—Ç–∏ —â–æ—Å—å, —â–æ —Ä–æ–±–∏—Ç–∏ –Ω–µ –º–æ–∂–Ω–∞ (–∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó). –ô–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ **–Ω–µ –æ–±—Ä–æ–±–ª—è—Ç–∏, –∞ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏**.
>
> 2. –ö–æ–ª–∏ –∫–∏–¥–∞—î—Ç—å—Å—è —Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫, **—Å—Ç–∞–Ω —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∞ —Å—Ç–∞—î –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º**. –ü—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ —ñ—Ç–µ—Ä–∞—Ü—ñ—é –∞–±–æ –±—É–¥—å-—è–∫–∏–º —á–∏–Ω–æ–º –ø–æ–∫–ª–∞–¥–∞—Ç–∏—Å—è –Ω–∞ —Å—Ç–∞–Ω –∫–æ–ª–µ–∫—Ü—ñ—ó –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ —î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º.
>
> 3. –õ–æ–≥—ñ–∫–∞, —è–∫–∞ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —Ü—ñ—î—ó –ø–æ–º–∏–ª–∫–∏, —î –≤–∫—Ä–∞–π –∫—Ä–∏—Ö–∫–æ—é —ñ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ—é.
>
> –¢–∞–∫–∏–º —á–∏–Ω–æ–º, `catch` –¥–ª—è `ConcurrentModificationException` —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ö—ñ–±–∞ —â–æ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ –Ω–∞ –Ω–∞–π–≤–∏—â–æ–º—É —Ä—ñ–≤–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –ø–µ—Ä–µ–¥ –π–æ–≥–æ –∞–≤–∞—Ä—ñ–π–Ω–∏–º –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è–º, –∞–ª–µ –Ω—ñ–∫–æ–ª–∏ ‚Äî –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Ç–∞ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤. –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å —Ä–æ–∑—Ä—ñ–∑–Ω—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏, —è–∫—ñ –º–æ–∂–Ω–∞ –æ–±—Ä–æ–±–∏—Ç–∏, –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—Ç–∏.*
