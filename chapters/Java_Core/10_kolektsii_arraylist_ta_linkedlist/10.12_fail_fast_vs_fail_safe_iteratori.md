---
layout: default
title: "Fail-fast vs Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏"
parent: "–ö–æ–ª–µ–∫—Ü—ñ—ó: ArrayList —Ç–∞ LinkedList"
grand_parent: "Java Core"
nav_order: 12
---

# Fail-fast vs Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏

*   –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Fail-fast` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –≤–∏–∫–∏–¥–∞—é—Ç—å `ConcurrentModificationException`, —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó (–±—É–¥—å-—è–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º, –∫—Ä—ñ–º —á–µ—Ä–µ–∑ —Å–∞–º —ñ—Ç–µ—Ä–∞—Ç–æ—Ä). `Fail-safe` —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –≤–∏–∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫—ñ–≤, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –∫–æ–ø—ñ—ó –¥–∞–Ω–∏—Ö –∞–±–æ –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º.
*   –ø–æ–Ω—è—Ç—Ç—è: `Fail-fast`, `Fail-safe`, `ConcurrentModificationException`, `CopyOnWriteArrayList`, `ConcurrentHashMap`.
*   –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–º—ñ–Ω–∞ `ArrayList` —É `for-each` —Ü–∏–∫–ª—ñ (`Fail-fast`). `CopyOnWriteArrayList` (–¥–ª—è `Fail-safe`).
*   –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `Fail-fast` ‚Äì –¥–ª—è –æ–¥–Ω–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π (–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–æ–∫), `Fail-safe` ‚Äì –¥–ª—è –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â (—É–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–∫—ñ–≤ –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ).
*   —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è, —è–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ `ConcurrentModificationException`.
#### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

* **Fail-fast —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏** ‚Äî —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏, —è–∫—ñ –∫–∏–¥–∞—é—Ç—å **`ConcurrentModificationException`**, —è–∫—â–æ –∫–æ–ª–µ–∫—Ü—ñ—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –±—É–¥—å-—è–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º, –æ–∫—Ä—ñ–º —á–µ—Ä–µ–∑ —Å–∞–º —ñ—Ç–µ—Ä–∞—Ç–æ—Ä.
* **Fail-safe —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏** ‚Äî —ñ—Ç–µ—Ä–∞—Ç–æ—Ä–∏, —è–∫—ñ –Ω–µ –∫–∏–¥–∞—é—Ç—å –≤–∏–Ω—è—Ç–∫—ñ–≤ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ –∫–æ–ø—ñ—ó –¥–∞–Ω–∏—Ö –∞–±–æ –∑ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è–º.

#### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

* **Fail-fast**: ¬´–•—Ç–æ—Å—å –ª—ñ–∑–µ –≤ –∫–æ–ª–µ–∫—Ü—ñ—é –ø—ñ–¥ —á–∞—Å –ø–µ—Ä–µ–≥–ª—è–¥—É? –ë–ê–ú ‚Äî Exception\!¬ª
* **Fail-safe**: ¬´–Ø –ø—Ä–∞—Ü—é—é –∑ –∫–æ–ø—ñ—î—é, –∂–∏–≤–∏ —è–∫ —Ö–æ—á–µ—à, –≥–æ–ª–æ–≤–Ω–µ ‚Äî –Ω–µ –∑–∞–≤–∞–∂–∞–π –º–µ–Ω—ñ¬ª.

---

## **2Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω—ñ –≤–∏–¥–∏ / –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó / —Ç–∏–ø–∏**

**üìä –¢–∞–±–ª–∏—Ü—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Fail-fast | Fail-safe |
| :---: | :---: | :---: |
| **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è** | **`ArrayList, HashSet, HashMap`** | **`CopyOnWriteArrayList, ConcurrentHashMap`** |
| **–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –∑–º—ñ–Ω—ñ** | –ö–∏–¥–∞—î **`ConcurrentModificationException`** | –ù–µ –∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–∫—ñ–≤ |
| **–ú–µ—Ö–∞–Ω—ñ–∑–º —Ä–æ–±–æ—Ç–∏** | –ü–µ—Ä–µ–≤—ñ—Ä—è—î –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (**`modCount`**) | –ü—Ä–∞—Ü—é—î –∑ –∫–æ–ø—ñ—î—é / lock'–∞–º–∏ |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å** | –®–≤–∏–¥—à–∏–π | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π —á–µ—Ä–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è |

---

## **3Ô∏è‚É£ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

–£—è–≤–∏, —Ç–∏ –≤–µ–¥–µ—à –æ–±–ª—ñ–∫ –≥–æ—Å—Ç–µ–π —É —Å–ø–∏—Å–∫—É.

* **Fail-fast** ‚Äî —Ç–∏ –ø—Ä–æ—Ö–æ–¥–∏—à –ø–æ —Å–ø–∏—Å–∫—É, —ñ —è–∫—â–æ —Ö—Ç–æ—Å—å –ø—ñ–¥—Å—É–Ω—É–≤ —â–µ –æ–¥–Ω–æ–≥–æ –≥–æ—Å—Ç—è, —Ç–∏ –æ–¥—Ä–∞–∑—É –∑—Ä–∏–≤–∞—î—à –≤–µ—á—ñ—Ä–∫—É.
* **Fail-safe** ‚Äî —Ç–∏ –ø—Ä–∞—Ü—é—î—à –∑ –∫–æ–ø—ñ—î—é —Å–ø–∏—Å–∫—É –≥–æ—Å—Ç–µ–π: –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ö—Ç–æ—Å—å —É–≤—ñ—Ä–≤–∞–≤—Å—è, —Ç–∏ —Ü—å–æ–≥–æ –Ω–µ –ø–æ–º—ñ—á–∞—î—à, –±–æ –¥–∏–≤–∏—à—Å—è –Ω–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–µ —Ñ–æ—Ç–æ.

---

## **4Ô∏è‚É£ –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

### **Fail-fast: ArrayList**

```java
List<String> list = new ArrayList<>();
list.add("A");
list.add("B");

for (String item : list) {
    if (item.equals("A")) {
        list.remove(item); // üí• ConcurrentModificationException
    }
}
```
### **Safe –≤–∞—Ä—ñ–∞–Ω—Ç:**

```java
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    if (it.next().equals("A")) {
        it.remove(); // ‚úÖ safe way
    }
}
```
### **Fail-safe: CopyOnWriteArrayList**

```java
List<String> list = new CopyOnWriteArrayList<>();
list.add("A");
list.add("B");

for (String item : list) {
    if (item.equals("A")) {
        list.remove(item); // ‚úÖ No exception
    }
}
System.out.println(list); // [B]
```
---

## **5Ô∏è‚É£ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å | Fail-fast | Fail-safe |
| :---: | :---: | :---: |
| **–í–∏–Ω—è—Ç–æ–∫ –ø—Ä–∏ –∑–º—ñ–Ω—ñ** | –¢–∞–∫ | –ù—ñ |
| **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è** | –û–¥–Ω–æ–ø–æ—Ç–æ–∫–æ–≤–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π | –ë–∞–≥–∞—Ç–æ–ø–æ—Ç–æ–∫–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | –í–∏—â–∞ | –ù–∏–∂—á–∞ (—á–µ—Ä–µ–∑ –∫–æ–ø—ñ—ó –∞–±–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è) |
| **–ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å** | –ú–µ–Ω—à–∞ | –í–∏—â–∞ |

---

## **6Ô∏è‚É£ FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É **`ArrayList`** –∫–∏–¥–∞—î **`ConcurrentModificationException`** –ø—Ä–∏ –∑–º—ñ–Ω—ñ –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó?

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

**`ArrayList`** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **`modCount`** –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω. –Ø–∫—â–æ **`modCount`** –∑–º—ñ–Ω—é—î—Ç—å—Å—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ (–∞ –Ω–µ —á–µ—Ä–µ–∑ —ñ—Ç–µ—Ä–∞—Ç–æ—Ä), –ø—ñ–¥ —á–∞—Å —ñ—Ç–µ—Ä–∞—Ü—ñ—ó —Ü–µ —Å–ø—Ä–∏—á–∏–Ω—è—î –≤–∏–∫–ª—é—á–µ–Ω–Ω—è.

#### 

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è:**

–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **`CopyOnWriteArrayList`**?

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ö–æ–ª–∏ –≤–∏ —á–∞—Å—Ç–æ —á–∏—Ç–∞—î—Ç–µ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó —ñ —Ä—ñ–¥–∫–æ —ó—ó –∑–º—ñ–Ω—é—î—Ç–µ, –æ—Å–æ–±–ª–∏–≤–æ –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

#### 

#### **üîπ –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ **`ConcurrentModificationException`**?

##### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **`Iterator.remove()`**
* –ü—Ä–∞—Ü—é–π –∑ –∫–æ–ø—ñ—î—é –∫–æ–ª–µ–∫—Ü—ñ—ó
* –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π **`CopyOnWriteArrayList / ConcurrentHashMap`**

---

## **7Ô∏è‚É£ üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

**Fail-fast \= FATAL** –ø—Ä–∏ –∑–º—ñ–Ω—ñ\!

**Fail-safe \= FRIENDLY** –¥–æ –∑–º—ñ–Ω\!
---

## **8Ô∏è‚É£ –ü—ñ–¥—Å—É–º–æ–∫ (üü©)**

* **Fail-fast** ‚Äî —à–≤–∏–¥–∫–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –ø—Ä–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è (–≤–∏–∫–ª—é—á–µ–Ω–Ω—è).
* **Fail-safe** ‚Äî –ø—Ä–∞—Ü—é—î –±–µ–∑ –∑–±–æ—ó–≤, –∞–ª–µ –º–µ–Ω—à –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
* –ó–Ω–∞—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–ø–µ–∫–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É –∫–æ–ª–µ–∫—Ü—ñ–π —É –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∞—Ö.

**üîó –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:**

* [**Oracle Docs ‚Äî CopyOnWriteArrayList**](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)