---
layout: default
title: "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—é (clone() considered harmful)"
parent: "`equals()`, `hashCode()`, `clone()`"
grand_parent: "Java Core"
nav_order: 8
---

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—é (clone() considered harmful)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –ú–µ—Ç–æ–¥ `clone()` –º–∞—î –±–∞–≥–∞—Ç–æ –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤ (—Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó, —Ä–∏–∑–∏–∫–∏ `shallow copy`, `CloneNotSupportedException`). –ö—Ä–∞—â–∏–º–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –≤–≤–∞–∂–∞—é—Ç—å—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –º–µ—Ç–æ–¥–∏ `copy()` –∞–±–æ `Builder Pattern`.

* –ø–æ–Ω—è—Ç—Ç—è: –ê–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω `clone()`, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, `copy()` –º–µ—Ç–æ–¥, Builder pattern.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `new User(otherUser);` (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è), `user.copy();` (–º–µ—Ç–æ–¥ `copy()`), `new User.Builder().from(user).build();` (Builder pattern).

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –Ω–∞–¥–∞—é—Ç—å –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é, –∫—Ä–∞—â—É —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –±–µ–∑–ø–µ–∫—É.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –ß–æ–º—É `clone()` –ø–æ–≥–∞–Ω–∏–π, —è–∫—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ —ñ –∫–æ–ª–∏ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

–ú–µ—Ç–æ–¥ **`clone()`** —á–∞—Å—Ç–æ –≤–≤–∞–∂–∞—î—Ç—å—Å—è **–∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º** (–Ω–µ–¥–æ–±—Ä–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é), –±–æ –º–∞—î –±–∞–≥–∞—Ç–æ –ø—ñ–¥–≤–æ–¥–Ω–∏—Ö –∫–∞–º–µ–Ω—ñ–≤: –≤—ñ–¥ –Ω–µ–∑—Ä—É—á–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–æ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –≥–ª–∏–±–æ–∫–æ—ó –∫–æ–ø—ñ—ó. –ó–∞–º—ñ—Å—Ç—å –Ω—å–æ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–±—ñ–ª—å—à –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω—ñ —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏**: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –º–µ—Ç–æ–¥–∏ **`copy()`**, —à–∞–±–ª–æ–Ω Builder.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¢–∞–∫, **`clone()`** ‚Äî –∑—Ä—É—á–Ω–æ, –∞–ª–µ —è–∫ –±–æ–º–±–∞ –∑ –ø–æ–≤—ñ–ª—å–Ω–æ—é –¥—ñ—î—é. –í—ñ–Ω —Å–∫–ª–∞–¥–Ω–∏–π, –Ω–µ–æ—á–µ–≤–∏–¥–Ω–∏–π, –ª–µ–≥–∫–æ –∑–ª–∞–º–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç **`equals()/hashCode()`**, –∑—Ä–æ–±–∏—Ç–∏ –Ω–µ —Ç—É –∫–æ–ø—ñ—é, —á–∏ –∑–ª–æ–≤–∏—Ç–∏ **`CloneNotSupportedException`**. –£ —Å—É—á–∞—Å–Ω–æ–º—É Java-–∫–æ–¥—ñ —á–∞—Å—Ç–æ –∫–∞–∂—É—Ç—å: **"–ù–µ –∫–ª–æ–Ω—É–π ‚Äî –∫–æ–ø—ñ—é–π –Ω–æ—Ä–º–∞–ª—å–Ω–æ"**.

---

## **üìä –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ **`clone()`**:**

| –ü—ñ–¥—Ö—ñ–¥ | –ü–æ—è—Å–Ω–µ–Ω–Ω—è |
| ----- | ----- |
| –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ—ó —á–µ—Ä–µ–∑ –∑–≤–∏—á–∞–π–Ω–∏–π **`new`**, –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ |
| –ú–µ—Ç–æ–¥ **`copy()`** | –ú–µ—Ç–æ–¥, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç —ñ–∑ –∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ |
| **`Builder pattern`** | –ü–æ–±—É–¥–æ–≤–∞ –Ω–æ–≤–æ–≥–æ –æ–±'—î–∫—Ç–∞ –∑ –≤–∏–±—ñ—Ä–∫–æ–≤–∏–º–∏/–≤—Å—ñ–º–∞ –ø–æ–ª—è–º–∏ |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **`clone()`** ‚Äî —Ü–µ —è–∫ —Å—Ç–∞—Ä–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫–∏–π —â–µ –ø—Ä–∞—Ü—é—î, –∞–ª–µ –∫—Ä–∞—â–µ –π–æ–≥–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.
* –í—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **`super.clone()`**, –∫–∏–¥–∞—î –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–∏–π –≤–∏–Ω—è—Ç–æ–∫, —ñ **–Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.
* –ù–∞—Ç–æ–º—ñ—Å—Ç—å:  
  üîπ **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** –¥–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å  
  üîπ **–ú–µ—Ç–æ–¥ `copy()`** –¥–æ–∑–≤–æ–ª—è—î –ª–µ–≥–∫–æ –¥—É–±–ª—é–≤–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç  
  üîπ **`Builder pattern`** –¥–∞—î –≥–Ω—É—á–∫—ñ—Å—Ç—å —ñ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –ø—Ä–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—ñ —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

‚úÖ **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**:

```java
public class User {
    private String name;
    private int age;

    public User(User other) {
        this.name = other.name;
        this.age = other.age;
    }
}
```

‚úÖ **–ú–µ—Ç–æ–¥ `copy()`**:

```java
public User copy() {
    return new User(this.name, this.age);
}
```

‚úÖ **`Builder Pattern:`**

```java
public class User {
    private final String name;
    private final int age;

    private User(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
    }

    public static class Builder {
        private String name;
        private int age;

        public Builder from(User user) {
            this.name = user.name;
            this.age = user.age;
            return this;
        }

        public Builder name(String name) { this.name = name; return this; }
        public Builder age(int age) { this.age = age; return this; }

        public User build() {
            return new User(this);
        }
    }
}
```

üß™ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

```java
User copy = new User.Builder().from(original).build();
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –ü—ñ–¥—Ö—ñ–¥ | –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | –õ–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ | –ö–∏–¥–∞—î –≤–∏–Ω—è—Ç–∫–∏ | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ |
| :---: | :---: | :---: | :---: | :---: |
| **`clone()`** | ‚ùå (—Ä—É—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è) | ‚ùå | ‚úÖ | ‚ùå |
| **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ |
| **–ú–µ—Ç–æ–¥** **`copy()`** | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ |
| **`Builder pattern`** | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ (–æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤) |

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

üîÅ **C-C-B** \= **Copy Constructor, Copy Method, Builder**

üìõ –ê **`clone()`** ‚Äî **Caution: Legacy Object Nonsense Experience**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

–•–æ—á–∞ –º–µ—Ç–æ–¥ **`clone()`** –≤—Å–µ —â–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è, —Å—É—á–∞—Å–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î **—É–Ω–∏–∫–∞—Ç–∏ –π–æ–≥–æ**. –í—ñ–Ω —Å–∫–ª–∞–¥–Ω–∏–π —É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó, —Ä–∏–∑–∏–∫–æ–≤–∞–Ω–∏–π –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è. **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏** ‚Äî —Ü–µ –∫–æ–ø—ñ—é–≤–∞–ª—å–Ω—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏, –º–µ—Ç–æ–¥–∏ **`copy()`** —Ç–∞ —à–∞–±–ª–æ–Ω **`Builder`**, —è–∫—ñ —î –ø—Ä–æ—Å—Ç—ñ—à–∏–º–∏, –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–º–∏ —ñ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∏–º–∏ –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤.

---

### **üîó –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∂–µ—Ä–µ–ª–∞:**

* [**Effective Java ‚Äî Item 13: Prefer alternatives to clone()**](https://stackoverflow.com/questions/31885/why-is-the-clone-method-evil)

* * *

# **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **1 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É –º–µ—Ç–æ–¥ `clone()` —ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Cloneable` –≤–≤–∞–∂–∞—é—Ç—å—Å—è –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º –∞–±–æ "–∑–ª–∞–º–∞–Ω–∏–º" –º–µ—Ö–∞–Ω—ñ–∑–º–æ–º —É —Å—É—á–∞—Å–Ω—ñ–π Java?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> `clone()` –≤–≤–∞–∂–∞—î—Ç—å—Å—è –∞–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω–æ–º —á–µ—Ä–µ–∑ –Ω–∏–∑–∫—É —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º —É –π–æ–≥–æ –¥–∏–∑–∞–π–Ω—ñ, —è–∫—ñ —Ä–æ–±–ª—è—Ç—å –π–æ–≥–æ —Å–∫–ª–∞–¥–Ω–∏–º, –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º —ñ –Ω–µ—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–º:
>
> 1. **"–ó–ª–∞–º–∞–Ω–∏–π" —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `Cloneable` —î –º–∞—Ä–∫–µ—Ä–Ω–∏–º —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —è–∫–∏–π –Ω–µ –º–∞—î –º–µ—Ç–æ–¥—ñ–≤, –∞–ª–µ –º–∞–≥—ñ—á–Ω–∏–º —á–∏–Ω–æ–º –∑–º—ñ–Ω—é—î –ø–æ–≤–µ–¥—ñ–Ω–∫—É `protected`-–º–µ—Ç–æ–¥—É `Object.clone()`. –¶–µ –ø–æ—Ä—É—à—É—î –ø—Ä–∏–Ω—Ü–∏–ø —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —è–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤.
>
> 2. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –±–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:** `clone()` —Å—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç–∏ —à–ª—è—Ö–æ–º –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–π—Ç—ñ–≤, –æ–±—Ö–æ–¥—è—á–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏. –¶–µ –º–æ–∂–µ –ø–æ—Ä—É—à–∏—Ç–∏ —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ –∫–ª–∞—Å—É —ñ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø—Ä–æ–±–ª–µ–º –∑ `final`-–ø–æ–ª—è–º–∏.
>
> 3. **–ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** –¶–µ –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∞ –ø–∞—Å—Ç–∫–∞. –†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —á–∞—Å—Ç–æ –æ—á—ñ–∫—É—é—Ç—å –≥–ª–∏–±–æ–∫—É –∫–æ–ø—ñ—é, –∞ –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤—É, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤.
>
> 4. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `clone()` —Å–∫–ª–∞–¥–Ω–æ —ñ —Å—Ö–∏–ª—å–Ω–æ –¥–æ –ø–æ–º–∏–ª–æ–∫, –æ—Å–æ–±–ª–∏–≤–æ –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –≥—Ä–∞—Ñ–∞–º–∏ –æ–±'—î–∫—Ç—ñ–≤.
>
> 5. **–û–±–æ–≤'—è–∑–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ `CloneNotSupportedException`:** –¶–µ–π –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–∏–π –≤–∏–Ω—è—Ç–æ–∫ –¥–æ–¥–∞—î –∑–∞–π–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—ñ–Ω –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ –∫–∏–Ω—É—Ç–∏–π.
>
> –ß–µ—Ä–µ–∑ —Ü—ñ –ø—Ä–∏—á–∏–Ω–∏ –î–∂–æ—à—É–∞ –ë–ª–æ—Ö —É –∫–Ω–∏–∑—ñ "Effective Java" –Ω–∞—Å—Ç—ñ–π–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î —É–Ω–∏–∫–∞—Ç–∏ `clone()` —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫—Ä–∞—â—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏.

#### **üìù –ö–æ–º–µ–Ω—Ç–∞—Ä:**</h4>

–ö–æ—Ä–æ—Ç–∫–æ –∫–∞–∂—É—á–∏, `clone()` –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Ä–æ–±–∏—Ç–∏ –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ —Ä–µ—á–µ–π –æ–¥—Ä–∞–∑—É (—Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–±'—î–∫—Ç, –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω) —ñ —Ä–æ–±–∏—Ç—å —Ü–µ –≤ "–º–∞–≥—ñ—á–Ω–∏–π", –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π —Å–ø–æ—Å—ñ–±.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ö—Ä–∏—Ç–∏—á–Ω–µ –º–∏—Å–ª–µ–Ω–Ω—è —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö, –∞–ª–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ Java. –ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö "best practices".*

* * *

### **2 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (copy constructor) —ñ –≤ —á–æ–º—É –π–æ–≥–æ –ø–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ `clone()`?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** ‚Äî —Ü–µ –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î –Ω–∞ –≤—Ö—ñ–¥ –æ–±'—î–∫—Ç —Ç–æ–≥–æ –∂ –∫–ª–∞—Å—É —ñ —Å—Ç–≤–æ—Ä—é—î –π–æ–≥–æ –∫–æ–ø—ñ—é.
>
> ```java
> public class User {
>     private String name;
>     private Address address;
>
>     // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>     public User(User other) {
>         this.name = other.name;
>         // –î–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:
>         this.address = new Address(other.address); // –í–∏–∫–ª–∏–∫–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–ª—è Address
>     }
> }
>
> // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: User newUser = new User(originalUser);
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ `clone()`:**
>
> * **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —ñ —è—Å–Ω—ñ—Å—Ç—å:** –¶–µ –∑–≤–∏—á–∞–π–Ω–∏–π, –∑—Ä–æ–∑—É–º—ñ–ª–∏–π –∫–æ–¥ –±–µ–∑ –º–∞–≥—ñ—ó `super.clone()` —ñ `try-catch`.
> * **–ë–µ–∑–ø–µ–∫–∞ —Ç–∏–ø—ñ–≤:** –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ (`(User)`), —è–∫–µ —î –≤ `clone()`.
> * **–ù–µ–º–∞—î `Cloneable`:** –ù–µ–º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
> * **–ö–æ—Ä–µ–∫—Ç–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ `final`-–ø–æ–ª—è–º–∏:** –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –≤—ñ–Ω –º–æ–∂–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `final`-–ø–æ–ª—è.
> * **–ì–Ω—É—á–∫—ñ—Å—Ç—å:** –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –Ω–∞ –≤—Ö—ñ–¥ –æ–±'—î–∫—Ç —ñ–Ω—à–æ–≥–æ —Ç–∏–ø—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é –∑ —ñ–Ω—à–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó).

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –Ω–∞–π–±—ñ–ª—å—à –ø–æ—à–∏—Ä–µ–Ω–æ—ó —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ—ó –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ `clone()` —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –ø–æ—è—Å–Ω–∏—Ç–∏ —ó—ó –ø–µ—Ä–µ–≤–∞–≥–∏.*

* * *

### **3 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–©–æ —Ç–∞–∫–µ —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (copy factory) —ñ —á–∏–º –≤—ñ–Ω –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **–§–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** ‚Äî —Ü–µ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –º–µ—Ç–æ–¥, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î —Ç—É —Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ —ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è: —Å—Ç–≤–æ—Ä—é—î –∫–æ–ø—ñ—é –æ–±'—î–∫—Ç–∞.
>
> ```java
> public class User {
>     private String name;
>
>     // ...
>
>     public static User newInstance(User other) {
>         // –õ–æ–≥—ñ–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —ñ–¥–µ–Ω—Ç–∏—á–Ω–∞ –¥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>         return new User(other.getName());
>     }
> }
> ```
>
> **–í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
>
> 1. **–Ü–º'—è, —â–æ –≥–æ–≤–æ—Ä–∏—Ç—å —Å–∞–º–µ –∑–∞ —Å–µ–±–µ:** `User.newInstance(user)` –∞–±–æ `User.copyOf(user)` —î –±—ñ–ª—å—à —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∏–º, –Ω—ñ–∂ –ø—Ä–æ—Å—Ç–æ `new User(user)`.
> 2. **–ì–Ω—É—á–∫—ñ—Å—Ç—å —É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ —Ç–∏–ø—ñ–≤:** –§–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –æ–±'—î–∫—Ç –ø—ñ–¥–∫–ª–∞—Å—É –∞–±–æ –±—É–¥—å-—è–∫—É —ñ–Ω—à—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, —Ç–æ–¥—ñ —è–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç —Å–≤–æ–≥–æ –∫–ª–∞—Å—É.
> 3. **–ö–µ—à—É–≤–∞–Ω–Ω—è:** –§–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –∫–µ—à–æ–≤–∞–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –∑–∞–º—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ (—Ü–µ —Ä—ñ–¥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ —î –º–æ–∂–ª–∏–≤–æ—Å—Ç—é).
>
> –ü–æ —Å—É—Ç—ñ, —Ü–µ —Ç—Ä–æ—Ö–∏ –±—ñ–ª—å—à –≥–Ω—É—á–∫–∞ –≤–µ—Ä—Å—ñ—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —è–∫–∞ —Å–ª—ñ–¥—É—î –ø–∞—Ç–µ—Ä–Ω—É "–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥" –∑–∞–º—ñ—Å—Ç—å "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—É "–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥" —Ç–∞ –π–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥–ª—è –∑–∞–≤–¥–∞–Ω—å –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.*

* * *

### **4 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ö–æ–ª–∏ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Builder Pattern —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—é?

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> **Builder Pattern** —î —á—É–¥–æ–≤–æ—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ—é, –æ—Å–æ–±–ª–∏–≤–æ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é **—Å–∫–ª–∞–¥–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞** –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–æ–ª—è–º–∏, –∞–±–æ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **–º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—É –∫–æ–ø—ñ—é**.
>
> **–°—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
>
> 1. **–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤:** –Ø–∫—â–æ –æ–±'—î–∫—Ç –º–∞—î –±–∞–≥–∞—Ç–æ –ø–æ–ª—ñ–≤, Builder —Ä–æ–±–∏—Ç—å –∫–æ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ—ó –¥—É–∂–µ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º.
>
> 2. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –∫–æ–ø—ñ—ó:** –¶–µ –Ω–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π –≤–∏–ø–∞–¥–æ–∫. –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ø—ñ—é, –∞–ª–µ –∑–º—ñ–Ω–∏—Ç–∏ –æ–¥–Ω–µ –∞–±–æ –¥–≤–∞ –ø–æ–ª—è.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public class User {
>     // ... —ñ–º—É—Ç–∞–±–µ–ª—å–Ω—ñ –ø–æ–ª—è —ñ Builder ...
>     public Builder toBuilder() {
>         return new Builder(this); // Builder, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –¥–∞–Ω–∏–º–∏ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞
>     }
> }
>
> // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –∫–æ–ø—ñ—ó:
> User updatedUser = originalUser.toBuilder()
>                                 .setName("New Name")
>                                 .build();
> ```
>
> –ú–µ—Ç–æ–¥ `toBuilder()` —Å—Ç–≤–æ—Ä—é—î `Builder`, —è–∫–∏–π –≤–∂–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π –¥–∞–Ω–∏–º–∏ –∑ `originalUser`, —ñ –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ª–∏—à–µ —Ç–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ. –¶–µ –Ω–∞–±–∞–≥–∞—Ç–æ –∑—Ä—É—á–Ω—ñ—à–µ, –Ω—ñ–∂ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–µ—Å—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—É "–ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫" —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –π–æ–≥–æ –ø–µ—Ä–µ–≤–∞–≥ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.*

* * *

### **5 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—â–æ `clone()` —Ç–∞–∫–∏–π –ø–æ–≥–∞–Ω–∏–π, —á–æ–º—É –π–æ–≥–æ –¥–æ—Å—ñ –Ω–µ –≤–∏–¥–∞–ª–∏–ª–∏ –∑ Java –∞–±–æ –Ω–µ –æ–≥–æ–ª–æ—Å–∏–ª–∏ `deprecated`? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ô–æ–≥–æ –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å –∑ –æ–¥–Ω—ñ—î—ó –≥–æ–ª–æ–≤–Ω–æ—ó –ø—Ä–∏—á–∏–Ω–∏ ‚Äî **–∑–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å (backward compatibility)**.
>
> 1. **–í–µ–ª–∏—á–µ–∑–Ω–∞ –∫–æ–¥–æ–≤–∞ –±–∞–∑–∞:** –Ü—Å–Ω—É—î –≤–µ–ª–∏—á–µ–∑–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥—É, –Ω–∞–ø–∏—Å–∞–Ω–æ–≥–æ –ø—Ä–æ—Ç—è–≥–æ–º –¥–µ—Å—è—Ç–∏–ª—ñ—Ç—å, —è–∫–∏–π –ø–æ–∫–ª–∞–¥–∞—î—Ç—å—Å—è –Ω–∞ –º–µ—Ö–∞–Ω—ñ–∑–º `clone()`. –í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–±–æ –Ω–∞–≤—ñ—Ç—å –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è `deprecated` –ø—Ä–∏–∑–≤–µ–ª–æ –± –¥–æ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å –∞–±–æ –ø–æ–º–∏–ª–æ–∫ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –≤ —ñ—Å–Ω—É—é—á–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.
>
> 2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ JDK:** –°–∞–º JDK (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ Java) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `clone()` —É –¥–µ—è–∫–∏—Ö –º—ñ—Å—Ü—è—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –º–∞—Å–∏–≤—ñ–≤ –∞–±–æ –≤ —Å—Ç–∞—Ä–∏—Ö –∫–ª–∞—Å–∞—Ö –∫–æ–ª–µ–∫—Ü—ñ–π.
>
> 3. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –º–∞—Å–∏–≤—ñ–≤:** –ú–µ—Ç–æ–¥ `clone()` —î –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–º —ñ –Ω–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º —Å–ø–æ—Å–æ–±–æ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–æ—ó –∫–æ–ø—ñ—ó –º–∞—Å–∏–≤—É. –¶—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —î –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–æ—é —ñ —à–∏—Ä–æ–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–æ—é.
>
> –•–æ—á–∞ `clone()` –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –∫–ª–∞—Å—ñ–≤ –≤–≤–∞–∂–∞—î—Ç—å—Å—è –ø–æ–≥–∞–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é, –≤—ñ–Ω –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –≤ –º–æ–≤—ñ —è–∫ —á–∞—Å—Ç–∏–Ω–∞ —ó—ó —Å–ø–∞–¥—â–∏–Ω–∏. –ü–æ–ª—ñ—Ç–∏–∫–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ Java ‚Äî –¥—É–∂–µ –æ–±–µ—Ä–µ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç–∏—Å—è –¥–æ –∑–º—ñ–Ω, —è–∫—ñ –º–æ–∂—É—Ç—å "–∑–ª–∞–º–∞—Ç–∏" —Å—Ç–∞—Ä–∏–π –∫–æ–¥.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–†–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ —Ä–æ–∑–≤–∏—Ç–∫—É –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —Ç–∞–∫–∏—Ö —è–∫ –∑–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å, —Ç–∞ —ó—Ö –≤–ø–ª–∏–≤—É –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å "–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö" –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤.*

* * *

### **6 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫—ñ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –Ω–∞–¥–∞—é—Ç—å –∑—Ä—É—á–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ö—ñ–ª—å–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –ø—Ä–æ–ø–æ–Ω—É—é—Ç—å –≤–ª–∞—Å–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤, —è–∫—ñ —á–∞—Å—Ç–æ —î –±—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–∏–º–∏ —Ç–∞ –∑—Ä—É—á–Ω–∏–º–∏, –Ω—ñ–∂ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π `clone()`.
>
> 1. **Apache Commons Lang:**
>     * –ú–∞—î –∫–ª–∞—Å `SerializationUtils`, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –º–µ—Ç–æ–¥ `clone(T object)`. –í—ñ–Ω –≤–∏–∫–æ–Ω—É—î –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ö–∞–Ω—ñ–∑–º—É —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –¶–µ –ø—Ä–æ—Å—Ç–æ, –∞–ª–µ –ø–æ–≤—ñ–ª—å–Ω–æ, —ñ –≤–∏–º–∞–≥–∞—î, —â–æ–± –æ–±'—î–∫—Ç–∏ –±—É–ª–∏ `Serializable`.
>
> 2. **Jackson / GSON (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è JSON):**
>     * –ú–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–≤—à–∏ –æ–±'—î–∫—Ç –Ω–∞ JSON-—Ä—è–¥–æ–∫, –∞ –ø–æ—Ç—ñ–º –Ω–∞–∑–∞–¥ –Ω–∞ –æ–±'—î–∫—Ç. –¶–µ —Ç–∞–∫–æ–∂ –≤—ñ–¥–Ω–æ—Å–Ω–æ –ø–æ–≤—ñ–ª—å–Ω–æ, –∞–ª–µ –Ω–µ –≤–∏–º–∞–≥–∞—î `Serializable` —ñ —î –≥–Ω—É—á–∫–∏–º.
>
> 3. **ModelMapper / MapStruct (–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –º–µ–ø–ø—ñ–Ω–≥—É):**
>     * –•–æ—á–∞ —ó—Ö–Ω—î –æ—Å–Ω–æ–≤–Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –º–µ–ø–ø—ñ–Ω–≥ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –æ–±'—î–∫—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, DTO —Ç–∞ Entity), —ó—Ö –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –≤ –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä —Ç–æ–≥–æ –∂ –∫–ª–∞—Å—É. –í–æ–Ω–∏ –¥—É–∂–µ –≥–Ω—É—á–∫—ñ —ñ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ.
>
> –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∞–∫–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∏–º —É –≤–µ–ª–∏–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –¥–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —î —á–∞—Å—Ç–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–∞–≥–∞–ª—å–Ω—É –µ—Ä—É–¥–∏—Ü—ñ—é –≤ Java-–µ–∫–æ—Å–∏—Å—Ç–µ–º—ñ —Ç–∞ –∑–Ω–∞–Ω–Ω—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫, —è–∫—ñ –≤–∏—Ä—ñ—à—É—é—Ç—å –ø–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏.*

* * *

### **7 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –≥–ª–∏–±–æ–∫–æ—ó –∫–æ–ø—ñ—ó —á–µ—Ä–µ–∑ `clone()` —Ç–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è. –ù–∞–ø–∏—à—ñ—Ç—å –¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –π —Ç–æ–≥–æ –∂ –∫–ª–∞—Å—É. ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –†–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–ª–∞—Å `Employee` –∑ –ø–æ–ª–µ–º `Date hireDate`. `Date` —î –º—É—Ç–∞–±–µ–ª—å–Ω–∏–º, —Ç–æ–º—É –ø–æ—Ç—Ä–µ–±—É—î –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
>
> **1. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ `clone()`:**
>
> ```java
> import java.util.Date;
>
> public class Employee implements Cloneable {
>     private String name;
>     private Date hireDate;
>
>     // ...
>
>     @Override
>     public Employee clone() {
>         try {
>             Employee cloned = (Employee) super.clone();
>             // –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è Date
>             cloned.hireDate = (Date) this.hireDate.clone();
>             return cloned;
>         } catch (CloneNotSupportedException e) {
>             throw new AssertionError();
>         }
>     }
> }
> ```
>
> **–ù–µ–¥–æ–ª—ñ–∫–∏:** —à–∞–±–ª–æ–Ω–Ω–∏–π –∫–æ–¥ `try-catch`, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤, –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ `Cloneable`.
>
> **2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
>
> ```java
> public class Employee {
>     private String name;
>     private Date hireDate;
>
>     // ...
>
>     // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
>     public Employee(Employee other) {
>         this.name = other.name;
>         // –ì–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è Date
>         this.hireDate = new Date(other.hireDate.getTime());
>     }
> }
> ```
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏:** –ö–æ–¥ –Ω–∞–±–∞–≥–∞—Ç–æ —á–∏—Å—Ç—ñ—à–∏–π, –ø—Ä–æ—Å—Ç—ñ—à–∏–π –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è, –±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —Ç–∏–ø—ñ–≤ —ñ –Ω–µ –º–∞—î –∂–æ–¥–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—ñ–¥ –ø—Ä–æ–±–ª–µ–º–Ω–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –Ω–∞–≤–∏—á–∫–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –æ–±–æ—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤ —Ç–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤—ñ–∑—É–∞–ª—å–Ω–æ –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ —ó—Ö–Ω—é —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å.*

* * *

### **8 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£ —è–∫–∏—Ö —Ä—ñ–¥–∫—ñ—Å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `clone()` –≤—Å–µ –∂ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∏–º? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –•–æ—á–∞ `clone()` –ø–µ—Ä–µ–≤–∞–∂–Ω–æ —É–Ω–∏–∫–∞—é—Ç—å, —î –∫—ñ–ª—å–∫–∞ –≤—É–∑—å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤, –¥–µ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∏–º:
>
> 1. **–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –º–∞—Å–∏–≤—ñ–≤:** `array.clone()` ‚Äî —Ü–µ –Ω–∞–π–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—à–∏–π —ñ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤—É –∫–æ–ø—ñ—é –º–∞—Å–∏–≤—É. –¶–µ —î–¥–∏–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫, —è–∫–∏–π —à–∏—Ä–æ–∫–æ —ñ –±–µ–∑–∑–∞—Å—Ç–µ—Ä–µ–∂–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è.
>
> 2. **–í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –ø–æ—Ç—Ä–µ–±–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:** –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–µ–ª–∏—á–µ–∑–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ø—ñ–π –æ–±'—î–∫—Ç–∞ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ñ–π –¥–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥—ñ–ª—è–Ω—Ü—ñ –∫–æ–¥—É, –Ω–∞—Ç–∏–≤–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–±—ñ—Ç–æ–≤–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è `Object.clone()` –º–æ–∂–µ –±—É—Ç–∏ —à–≤–∏–¥—à–∏–º –∑–∞ –≤–∏–∫–ª–∏–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –¶–µ —Ä—ñ–¥–∫—ñ—Å–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫, —è–∫–∏–π –ø–æ—Ç—Ä–µ–±—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ—ñ–ª—é–≤–∞–Ω–Ω—è.
>
> 3. **–†–æ–±–æ—Ç–∞ –∑—ñ —Å–ø–∞–¥—â–∏–Ω–æ—é (Legacy Code):** –Ø–∫—â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ —ñ—Å–Ω—É—é—á–æ—é —ñ—î—Ä–∞—Ä—Ö—ñ—î—é –∫–ª–∞—Å—ñ–≤, —è–∫–∞ –≤–∂–µ –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞ –º–µ—Ö–∞–Ω—ñ–∑–º—ñ `clone()`, –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—à–µ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —Ü—å–æ–≥–æ –ø–∞—Ç–µ—Ä–Ω—É, –Ω—ñ–∂ –ø–µ—Ä–µ–ø–∏—Å—É–≤–∞—Ç–∏ –≤—Å—é —ñ—î—Ä–∞—Ä—Ö—ñ—é.
>
> –í –±—É–¥—å-—è–∫–æ–º—É –Ω–æ–≤–æ–º—É –∫–æ–¥—ñ, —â–æ –ø–∏—à–µ—Ç—å—Å—è –∑ –Ω—É–ª—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `clone()` –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –∫–ª–∞—Å—ñ–≤ –º–∞–π–∂–µ –Ω—ñ–∫–æ–ª–∏ –Ω–µ —î –Ω–∞–π–∫—Ä–∞—â–∏–º –≤–∏–±–æ—Ä–æ–º.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–∏–π –ø–æ–≥–ª—è–¥ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –Ω–∞–≤—ñ—Ç—å —É "–ø–æ–≥–∞–Ω–∏—Ö" —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Å–≤–æ—ó –Ω—ñ—à—ñ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è.*

* * *

### **9 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–Ø–∫ –∑–∞–ø–∏—Å–∏ (`record`) –≤ Java (–∑ Java 16+) –≤–∏—Ä—ñ—à—É—é—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è? ‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ó–∞–ø–∏—Å–∏ (`record`) –Ω–µ –Ω–∞–¥–∞—é—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –¥–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ —ó—Ö–Ω—è **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å** –∑–Ω–∞—á–Ω–æ —Å–ø—Ä–æ—â—É—î —Å–∏—Ç—É–∞—Ü—ñ—é.
>
> 1. –û—Å–∫—ñ–ª—å–∫–∏ `record` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —î **—ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–º** (—É—Å—ñ –ø–æ–ª—è `private final`), —Ç–æ **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –¥–ª—è –Ω—å–æ–≥–æ —Ü—ñ–ª–∫–æ–º –¥–æ—Å—Ç–∞—Ç–Ω—å–æ**, –∑–∞ —É–º–æ–≤–∏, —â–æ –π–æ–≥–æ –ø–æ–ª—è —Ç–∞–∫–æ–∂ —î —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏–º–∏. –ù–µ–º–∞—î —Ä–∏–∑–∏–∫—É, —â–æ —Å—Ç–∞–Ω –±—É–¥–µ –∑–º—ñ–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ —Å–ø—ñ–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è.
>
> 2. –î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è **–º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –∫–æ–ø—ñ—ó** –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ "Wither"-–º–µ—Ç–æ–¥–∏. –ó–∞–ø–∏—Å –º–∞—î –∫–∞–Ω–æ–Ω—ñ—á–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —è–∫–∏–π –ª–µ–≥–∫–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∑—ñ –∑–º—ñ–Ω–µ–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏.
>
> **–ü—Ä–∏–∫–ª–∞–¥ –∑ "Wither" –º–µ—Ç–æ–¥–æ–º:**
>
> ```java
> public record Point(int x, int y) {
>     // –ú–µ—Ç–æ–¥ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –∫–æ–ø—ñ—ó
>     public Point withX(int newX) {
>         return new Point(newX, this.y);
>     }
> }
>
> Point p1 = new Point(10, 20);
> Point p2 = p1.withX(15); // p2 - —Ü–µ –∫–æ–ø—ñ—è p1 –∑—ñ –∑–º—ñ–Ω–µ–Ω–∏–º x
> ```
>
> –•–æ—á–∞ —Ü–µ –Ω–µ –ø—Ä—è–º–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `clone()`, —ñ–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –∑—Ä—É—á–Ω—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ —Ä–æ–±–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ–π –ø—Ä–æ—Å—Ç–∏–º —ñ –±–µ–∑–ø–µ—á–Ω–∏–º, —â–æ —É—Å—É–≤–∞—î –ø–æ—Ç—Ä–µ–±—É –≤ —Å–∫–ª–∞–¥–Ω–æ–º—É –º–µ—Ö–∞–Ω—ñ–∑–º—ñ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–Ω–∞–Ω–Ω—è —Å—É—á–∞—Å–Ω–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π Java (`record`) —Ç–∞ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ —ñ–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–º –≤–∏—Ä—ñ—à–µ–Ω–Ω—è–º –±–∞–≥–∞—Ç—å–æ—Ö –ø—Ä–æ–±–ª–µ–º, –≤–∫–ª—é—á–∞—é—á–∏ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º.*

* * *

### **10 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø—Ä–∏–π–º–∞—Ç–∏ –Ω–∞ –≤—Ö—ñ–¥ –æ–±'—î–∫—Ç —ñ–Ω—à–æ–≥–æ —Ç–∏–ø—É? –ù–∞–≤–µ–¥—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–µ. –¶–µ –æ–¥–Ω–∞ –∑ –∫–ª—é—á–æ–≤–∏—Ö –ø–µ—Ä–µ–≤–∞–≥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ–≤ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω–∞–¥ `clone()` ‚Äî —ó—Ö–Ω—è –≥–Ω—É—á–∫—ñ—Å—Ç—å. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–∂–µ –±—É—Ç–∏ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∑ –æ–±'—î–∫—Ç–∞ —ñ–Ω—à–æ–≥–æ, —Å—É–º—ñ–∂–Ω–æ–≥–æ –∫–ª–∞—Å—É.
>
> –¶–µ —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ —à–∞—Ä–∞–º–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.
>
> **–ü—Ä–∏–∫–ª–∞–¥: –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è DTO –≤ Entity**
>
> ```java
> // –ö–ª–∞—Å –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö (Data Transfer Object)
> public class UserDto {
>     private String username;
>     private String email;
>     // ... –≥–µ—Ç—Ç–µ—Ä–∏
> }
>
> // –ö–ª–∞—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (Entity)
> public class User {
>     private Long id;
>     private String username;
>     private String email;
>
>     // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —â–æ "–∫–æ–ø—ñ—é—î" –¥–∞–Ω—ñ –∑ DTO
>     public User(UserDto dto) {
>         this.username = dto.getUsername();
>         this.email = dto.getEmail();
>     }
> }
>
> // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
> UserDto userDto = ...;
> User userEntity = new User(userDto);
> ```
>
> –•–æ—á–∞ —Ü–µ –Ω–µ –∑–æ–≤—Å—ñ–º "–∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è" –≤ –∫–ª–∞—Å–∏—á–Ω–æ–º—É —Å–µ–Ω—Å—ñ, —Ü–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≥–Ω—É—á–∫–∏–º —î –ø—ñ–¥—Ö—ñ–¥, –∑–∞—Å–Ω–æ–≤–∞–Ω–∏–π –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö, –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ –∂–æ—Ä—Å—Ç–∫–æ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–º `clone()`.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –º–∏—Å–ª–∏—Ç–∏ —à–∏—Ä—à–µ –∑–∞ —Ä–∞–º–∫–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ –ø–∞—Ç–µ—Ä–Ω–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –≤ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ –ø—Ä–æ–≥—Ä–∞–º–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.*

* * *

### **11 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ü–æ—è—Å–Ω—ñ—Ç—å, —è–∫ –º–æ–∂–Ω–∞ "–∑–ª–∞–º–∞—Ç–∏" –ø—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å –∫–ª–∞—Å—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è. ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –Ø–∫—â–æ –∫–ª–∞—Å –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–≤—ñ–π –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π —Å—Ç–∞–Ω, –≤—ñ–Ω –ø–æ—Ä—É—à—É—î —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—é —ñ —Å—Ç–∞—î –≤—Ä–∞–∑–ª–∏–≤–∏–º. –ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–µ –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —î –æ–¥–Ω–∏–º —ñ–∑ —Å–ø–æ—Å–æ–±—ñ–≤ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
> –£—è–≤—ñ–º–æ, —â–æ —î –∫–ª–∞—Å `AccessManager`, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –¥–æ—Å—Ç—É–ø–æ–º.
>
> ```java
> public final class AccessManager {
>     private final List<String> authorizedUsers;
>
>     public AccessManager(List<String> users) {
>         // –ü–æ–º–∏–ª–∫–∞: –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–ø–∏—Å–æ–∫!
>         this.authorizedUsers = users;
>     }
>
>     public boolean hasAccess(String user) {
>         return authorizedUsers.contains(user);
>     }
> }
> ```
>
> –¢–µ–ø–µ—Ä –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –º–æ–∂–µ –∑—Ä–æ–±–∏—Ç–∏ —Ç–∞–∫:
>
> ```java
> List<String> sudoers = new ArrayList<>();
> sudoers.add("admin");
> AccessManager manager = new AccessManager(sudoers);
>
> System.out.println(manager.hasAccess("hacker")); // false - –≤—Å–µ –¥–æ–±—Ä–µ
>
> // –ê —Ç–µ–ø–µ—Ä "–∑–ª–∞–º—É—î–º–æ"
> sudoers.add("hacker"); // –ú–∏ –∑–º—ñ–Ω—é—î–º–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–ø–∏—Å–æ–∫
>
> System.out.println(manager.hasAccess("hacker")); // true! - –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç –∑–ª–∞–º–∞–Ω–æ!
> ```
>
> –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤–∏–Ω–∏–∫–Ω–µ, —è–∫—â–æ –≥–µ—Ç—Ç–µ—Ä `getAuthorizedUsers()` –±—É–¥–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ `return authorizedUsers;` –∑–∞–º—ñ—Å—Ç—å –∫–æ–ø—ñ—ó. **–¶–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –≤–∏—Ç–æ–∫–æ–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è (leaking the reference).**
>
> **–†—ñ—à–µ–Ω–Ω—è** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–∑–∞—Ö–∏—Å–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è** (–≥–ª–∏–±–æ–∫–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è) –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö —Ç–∞ –≥–µ—Ç—Ç–µ—Ä–∞—Ö.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—ó —Ç–∞ —Å–ø–æ—Å–æ–±—ñ–≤ —ó—ó –ø–æ—Ä—É—à–µ–Ω–Ω—è. –ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –±–∞—á–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—é —Ç–∞ –ø–µ—Ä–µ–¥–∞—á–µ—é –ø–æ—Å–∏–ª–∞–Ω—å.*

* * *

### **12 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑—ñ —Å—Ç–æ—Ä–æ–Ω–Ω—å–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é, –¥–µ –∫–ª–∞—Å –Ω–µ –º–∞—î –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –π–æ–≥–æ –∫–æ–ø—ñ—é. –Ø–∫—ñ —î –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥—ñ–π? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¶–µ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∞ —ñ —Å–∫–ª–∞–¥–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è. –í–∞—Ä—ñ–∞–Ω—Ç–∏ –¥—ñ–π –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ "–≤—ñ–¥–∫—Ä–∏—Ç–∏–º" —î —Ü–µ–π –∫–ª–∞—Å.
>
> 1. **–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±–≥–æ—Ä—Ç–∫—É (Wrapper/Decorator) –∞–±–æ –Ω–æ–≤–∏–π –∫–ª–∞—Å:**
>     * –Ø–∫—â–æ –∫–ª–∞—Å –Ω–∞–¥–∞—î –≥–µ—Ç—Ç–µ—Ä–∏ –¥–ª—è –≤—Å—ñ—Ö –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –ø–æ–ª—ñ–≤, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–ª–∞—Å —ñ –Ω–∞–ø–∏—Å–∞—Ç–∏ –¥–ª—è –Ω—å–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —è–∫–∏–π –±—É–¥–µ –∑—á–∏—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑ –æ–±'—î–∫—Ç–∞ —Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ –∫–ª–∞—Å—É.
>
> 2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –º–µ–ø–ø—ñ–Ω–≥—É (MapStruct, ModelMapper):**
>     * –¶—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –º–æ–∂—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ–ª—è –∑ –æ–¥–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ –≤ —ñ–Ω—à–∏–π –∑–∞ –Ω–∞–∑–≤–æ—é, —è–∫—â–æ —É —Ü—ñ–ª—å–æ–≤–æ–≥–æ –∫–ª–∞—Å—É —î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Å–µ—Ç—Ç–µ—Ä–∏ –∞–±–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.
>
> 3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –≤ JSON —ñ –Ω–∞–∑–∞–¥:**
>     * –Ø–∫—â–æ –∫–ª–∞—Å –¥–æ–±—Ä–µ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –≤ JSON (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Jackson), –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –π–æ–≥–æ –≤ —Ä—è–¥–æ–∫ —ñ –Ω–∞–∑–∞–¥. –¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å –≥–ª–∏–±–æ–∫—É –∫–æ–ø—ñ—é.
>
> 4. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–µ—Ñ–ª–µ–∫—Å—ñ—é (Reflection API) - –∫—Ä–∞–π–Ω—ñ–π –∑–∞—Ö—ñ–¥:**
>     * –¶–µ –Ω–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∏–π, –∞–ª–µ –π –Ω–∞–π–Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ—à–∏–π –ø—ñ–¥—Ö—ñ–¥. –ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ `private`-–ø–æ–ª—ñ–≤, –∑—á–∏—Ç–∞—Ç–∏ —ó—Ö–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –∑–∞–ø–∏—Å–∞—Ç–∏ –≤ –Ω–æ–≤–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä. –¶–µ–π –ø—ñ–¥—Ö—ñ–¥ —î –∫—Ä–∏—Ö–∫–∏–º (–ª–∞–º–∞—î—Ç—å—Å—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–∞–∑–≤ –ø–æ–ª—ñ–≤ —É –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ) —ñ –ø–æ–≤—ñ–ª—å–Ω–∏–º.
>
> –ù–∞–π–∫—Ä–∞—â–∏–º –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º –∑–∞–∑–≤–∏—á–∞–π —î –ø–µ—Ä—à–∏–π –∞–±–æ –¥—Ä—É–≥–∏–π, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ —î –Ω–∞–π–±—ñ–ª—å—à —á–∏—Å—Ç–∏–º–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–º–∏. –†–µ—Ñ–ª–µ–∫—Å—ñ—é –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤ –∫—Ä–∞–π–Ω—å–æ–º—É –≤–∏–ø–∞–¥–∫—É.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –Ω–µ—Ç—Ä–∏–≤—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏, –∫–æ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å. –ó–Ω–∞–Ω–Ω—è –ø—Ä–æ—Å—É–Ω—É—Ç–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (—Ä–µ—Ñ–ª–µ–∫—Å—ñ—è, –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏) —Ç–∞ –≤–º—ñ–Ω–Ω—è –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö–Ω—ñ —Ä–∏–∑–∏–∫–∏.*

* * *

### **13 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–Ω–∞ –ø–æ—î–¥–Ω–∞—Ç–∏ Builder Pattern —ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è? –Ø–∫ —Ü–µ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–Ω–∞ —ñ —Ü–µ —î –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–æ—é —Ç–∞ –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è —ñ–º—É—Ç–∞–±–µ–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤.
>
> **–Ø–∫ —Ü–µ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è:**
>
> 1. –ö–ª–∞—Å –º–∞—î –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î `Builder`.
> 2. –ö–ª–∞—Å `Builder` –º–∞—î –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î –Ω–∞ –≤—Ö—ñ–¥ –µ–∫–∑–µ–º–ø–ª—è—Ä –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –∫–ª–∞—Å—É. –¶–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–∞—Ü—é—î —è–∫ "—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä" –±—ñ–ª–¥–µ—Ä–∞ –∑ —ñ—Å–Ω—É—é—á–æ–≥–æ –æ–±'—î–∫—Ç–∞.
> 3. –£ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–º—É –∫–ª–∞—Å—ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—É–±–ª—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ `toBuilder()`, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î —Ü–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±—ñ–ª–¥–µ—Ä–∞.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> public final class Message {
>     private final String sender, text;
>
>     private Message(Builder builder) {
>         this.sender = builder.sender;
>         this.text = builder.text;
>     }
>
>     // –ú–µ—Ç–æ–¥, —â–æ —Å—Ç–≤–æ—Ä—é—î –±—ñ–ª–¥–µ—Ä –∑ —ñ—Å–Ω—É—é—á–æ–≥–æ –æ–±'—î–∫—Ç–∞
>     public Builder toBuilder() {
>         return new Builder(this);
>     }
>
>     public static class Builder {
>         private String sender, text;
>
>         public Builder() {}
>
>         // "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è" –¥–ª—è –±—ñ–ª–¥–µ—Ä–∞
>         private Builder(Message message) {
>             this.sender = message.sender;
>             this.text = message.text;
>         }
>
>         // ... —Å–µ—Ç—Ç–µ—Ä–∏ ...
>         public Message build() { return new Message(this); }
>     }
> }
> ```
>
> **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ø—ñ—ó:**
> `Message copy = original.toBuilder().build();`
> **–î–ª—è –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –∫–æ–ø—ñ—ó:**
> `Message modifiedCopy = original.toBuilder().setText("New text").build();`
>
> –¶–µ–π –ø–∞—Ç–µ—Ä–Ω –ø–æ—î–¥–Ω—É—î –∑—Ä—É—á–Ω—ñ—Å—Ç—å –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å "–±—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫–∞".

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–í–º—ñ–Ω–Ω—è –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –≥–Ω—É—á–∫–æ—Å—Ç—ñ —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –∫–æ–¥—É.*

* * *

### **14 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–æ–º—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∫—Ä–∞—â–∏–π –∑–∞ `clone` –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –∫–ª–∞—Å–∞–º–∏ –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–±–∞–≥–∞—Ç–æ –±—ñ–ª—å—à –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—É —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø—Ä–∏ —É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—ñ.
>
> **–ü—Ä–æ–±–ª–µ–º–∏ `clone()` –≤ —ñ—î—Ä–∞—Ä—Ö—ñ—ó:**
>
> * –í—ñ–Ω –¥—É–∂–µ –∫—Ä–∏—Ö–∫–∏–π. –Ø–∫—â–æ —Ö–æ—á–∞ –± –æ–¥–∏–Ω –∫–ª–∞—Å –≤ –ª–∞–Ω—Ü—é–∂–∫—É –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –Ω–µ —Ä–µ–∞–ª—ñ–∑—É—î `Cloneable` –∞–±–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î `super.clone()`, –≤–µ—Å—å –º–µ—Ö–∞–Ω—ñ–∑–º –ª–∞–º–∞—î—Ç—å—Å—è.
> * –í—ñ–Ω –Ω–µ –º–æ–∂–µ –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–∏—Ç–∏ `final`-–ø–æ–ª—è.
> * `getClass() vs instanceof` —Å—Ç–≤–æ—Ä—é—î –¥–∏–ª–µ–º—É –º—ñ–∂ –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º —Å–∏–º–µ—Ç—Ä–∏—á–Ω–æ—Å—Ç—ñ —Ç–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –∫–ª–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞—â–∞–¥–∫—ñ–≤.
>
> **–ü–µ—Ä–µ–≤–∞–≥–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤ —ñ—î—Ä–∞—Ä—Ö–∞—Ö:**
>
> –ö–æ–∂–µ–Ω –ø—ñ–¥–∫–ª–∞—Å –º–æ–∂–µ –º–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å—É–ø–µ—Ä–∫–ª–∞—Å—É —á–µ—Ä–µ–∑ `super()`.
>
> ```java
> class SuperClass {
>     private int field;
>     public SuperClass(SuperClass other) {
>         this.field = other.field;
>     }
> }
>
> class SubClass extends SuperClass {
>     private int subField;
>     public SubClass(SubClass other) {
>         super(other); // –Ø–≤–Ω–æ —ñ –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–æ –∫–æ–ø—ñ—é—î–º–æ —Å—Ç–∞–Ω –±–∞—Ç—å–∫–∞
>         this.subField = other.subField;
>     }
> }
> ```
>
> –¶–µ —î –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–æ–∑–æ—Ä–∏–º, –±–µ–∑–ø–µ—á–Ω–∏–º –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —Ç–∏–ø—ñ–≤ —ñ –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ "–º–∞–≥—ñ—á–Ω–æ—ó" –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ `native`-–º–µ—Ç–æ–¥—É. –í–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç–µ –ø—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –æ–±'—î–∫—Ç–∞ –Ω–∞ –∫–æ–∂–Ω–æ–º—É —Ä—ñ–≤–Ω—ñ —ñ—î—Ä–∞—Ä—Ö—ñ—ó.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ —Ä—ñ–∑–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ –¥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –∑ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–º–∏ –º–µ—Ö–∞–Ω—ñ–∑–º–∞–º–∏ –û–û–ü, —Ç–∞–∫–∏–º–∏ —è–∫ —É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è.*

* * *

### **15 ‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

–ß–∏ –º–æ–∂–µ `clone()` –ø–æ—Ä—É—à–∏—Ç–∏ —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ –∫–ª–∞—Å—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—ñ–Ω —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π "–ø—Ä–∞–≤–∏–ª—å–Ω–æ"? –Ø–∫—â–æ —Ç–∞–∫, —Ç–æ —è–∫? ‚≠êÔ∏è‚≠êÔ∏è

> #### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**
>
> –¢–∞–∫, –º–æ–∂–µ. **–Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç** ‚Äî —Ü–µ —É–º–æ–≤–∞ –∞–±–æ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å, —è–∫–∞ –º–∞—î –±—É—Ç–∏ —ñ—Å—Ç–∏–Ω–Ω–æ—é –¥–ª—è –æ–±'—î–∫—Ç–∞ –ø—Ä–æ—Ç—è–≥–æ–º —É—Å—å–æ–≥–æ –π–æ–≥–æ –∂–∏—Ç—Ç—è. –ó–∞–∑–≤–∏—á–∞–π —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ.
>
> –û—Å–∫—ñ–ª—å–∫–∏ `clone()` **–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**, –≤—ñ–Ω –º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±'—î–∫—Ç, —è–∫–∏–π –ø–æ—Ä—É—à—É—î —Ü—ñ —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∏.
>
> **–ü—Ä–∏–∫–ª–∞–¥:**
>
> ```java
> // –ö–ª–∞—Å, —è–∫–∏–π –≤—ñ–¥—Å—Ç–µ–∂—É—î –≤—Å—ñ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏
> public class TrackedObject implements Cloneable {
>     private static final List<TrackedObject> instances = new ArrayList<>();
>     private final Date createdAt;
>
>     public TrackedObject() {
>         this.createdAt = new Date();
>         instances.add(this); // –Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç: –∫–æ–∂–µ–Ω –æ–±'—î–∫—Ç —Ä–µ—î—Å—Ç—Ä—É—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ
>     }
>
>     @Override
>     public TrackedObject clone() {
>         try {
>             return (TrackedObject) super.clone();
>         } catch (CloneNotSupportedException e) { throw new AssertionError(); }
>     }
> }
> ```
>
> –ö–æ–ª–∏ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ –æ–±'—î–∫—Ç —á–µ—Ä–µ–∑ `new TrackedObject()`, –≤—ñ–Ω –∫–æ—Ä–µ–∫—Ç–Ω–æ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ —Å–ø–∏—Å–∫—É `instances`.
>
> –ö–æ–ª–∏ –≤–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ `clone()`, —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π `TrackedObject`, –∞–ª–µ –π–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, —Ç–æ–º—É –≤—ñ–Ω **–Ω–µ –±—É–¥–µ –¥–æ–¥–∞–Ω–∏–π** —É —Å–ø–∏—Å–æ–∫ `instances`. **–Ü–Ω–≤–∞—Ä—ñ–∞–Ω—Ç –ø–æ—Ä—É—à–µ–Ω–æ**: —É –≤–∞—Å —î –µ–∫–∑–µ–º–ø–ª—è—Ä `TrackedObject`, —è–∫–∏–π –Ω–µ –≤—ñ–¥—Å—Ç–µ–∂—É—î—Ç—å—Å—è.
>
> –¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥, —è–∫ "–µ–∫—Å—Ç—Ä–∞–ª—ñ–Ω–≥–≤—ñ—Å—Ç–∏—á–Ω–µ" —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —á–µ—Ä–µ–∑ `clone()` –º–æ–∂–µ –æ–±—ñ–π—Ç–∏ –ª–æ–≥—ñ–∫—É, –∑–∞–∫–ª–∞–¥–µ–Ω—É –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏, —ñ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏.

#### **üìå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å:**

*–ó–¥–∞—Ç–Ω—ñ—Å—Ç—å –º–∏—Å–ª–∏—Ç–∏ –ø—Ä–æ –∫–ª–∞—Å –Ω–µ –ø—Ä–æ—Å—Ç–æ —è–∫ –ø—Ä–æ –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö, –∞ —è–∫ –ø—Ä–æ –æ–±'—î–∫—Ç –∑ –ø–µ–≤–Ω–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ç–∞ —ñ–Ω–≤–∞—Ä—ñ–∞–Ω—Ç–∞–º–∏. –†–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ `clone()` –º–æ–∂–µ –ø—ñ–¥—ñ—Ä–≤–∞—Ç–∏ —Ü—ñ –ø—Ä–∞–≤–∏–ª–∞.*
