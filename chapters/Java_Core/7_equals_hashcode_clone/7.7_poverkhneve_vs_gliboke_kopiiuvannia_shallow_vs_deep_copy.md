---
layout: default
title: "–ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ vs –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (Shallow vs Deep copy)"
parent: "`equals()`, `hashCode()`, `clone()`"
grand_parent: "Java Core"
nav_order: 7
---

# –ü–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ vs –≥–ª–∏–±–æ–∫–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è (Shallow vs Deep copy)

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: `Shallow copy` (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–µ) ‚Äì –∫–æ–ø—ñ—é—î –ø—Ä–∏–º—ñ—Ç–∏–≤–∏ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ (–≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ). `Deep copy` (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è) ‚Äì —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø—ñ—é—î –≤—Å—ñ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–±'—î–∫—Ç–∏, —Å—Ç–≤–æ—Ä—é—é—á–∏ –ø–æ–≤–Ω—É –Ω–µ–∑–∞–ª–µ–∂–Ω—É –∫–æ–ø—ñ—é.

* –ø–æ–Ω—è—Ç—Ç—è: Shallow copy, Deep copy, `clone()`, `defensive copy`.

* –ø—Ä–∏–∫–ª–∞–¥–∏: –ó–º—ñ–Ω–∞ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ `Address` —É `Person` –≤ `shallow copy` –≤–ø–ª–∏–≤–∞—î –Ω–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª, —Ç–æ–¥—ñ —è–∫ —É `deep copy` ‚Äì –Ω—ñ.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: `Shallow copy` —Ä–∏–∑–∏–∫–æ–≤–∞–Ω–∞ –¥–ª—è `mutable` –ø–æ–ª—ñ–≤, `Deep copy` –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω—É –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å. `Deep copy` —á–∞—Å—Ç–æ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –≤—Ä—É—á–Ω—É.

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –†—ñ–∑–Ω–∏—Ü—è, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ deep copy.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**Shallow copy** ‚Äî —Ü–µ –∫–æ–ø—ñ—è –æ–± º—î–∫—Ç–∞, –¥–µ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –≤—Å—ñ **–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤**, –∞–ª–µ –¥–ª—è –æ–± º—î–∫—Ç—ñ–≤ ‚Äî –ª–∏—à–µ **–ø–æ—Å–∏–ª–∞–Ω–Ω—è**, –∞ –Ω–µ —Å–∞–º—ñ –æ–±‚Äô—î–∫—Ç–∏.

**Deep copy** ‚Äî —Ü–µ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ –∫–æ–ø—ñ—è, —è–∫–∞ —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ –≤—Å—ñ—Ö –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –æ–± º—î–∫—Ç—ñ–≤**, —Ç–æ–±—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –¥—É–±–ª—é—î—Ç—å—Å—è –±–µ–∑ —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

**Shallow copy** ‚Äî –∫–æ–ø—ñ—è **"–≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è",** –∞–ª–µ —è–∫—â–æ —î –æ–±‚Äô—î–∫—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ ‚Äî –≤–æ–Ω–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è —Å–ø—ñ–ª—å–Ω–∏–º–∏.

**Deep copy** ‚Äî **—Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∫–ª–æ–Ω**: —ñ —Å–∞–º –æ–± º—î–∫—Ç, —ñ –≤—Å–µ, —â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –Ω—å–æ–≥–æ ‚Äî –Ω–æ–≤–µ, –Ω–µ–∑–∞–ª–µ–∂–Ω–µ.

---

## **üìä –í–∏–¥–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**

| –¢–∏–ø –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | –ü–æ–ª—è –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ | –û–± º—î–∫—Ç–Ω—ñ –ø–æ–ª—è (–ø–æ—Å–∏–ª–∞–Ω–Ω—è) | –ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å |
| ----- | ----- | ----- | ----- |
| **`Shallow copy`** | ‚úÖ –∫–æ–ø—ñ—é—é—Ç—å—Å—è | ‚ùå –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è | ‚ùå —á–∞—Å—Ç–∫–æ–≤–∞ |
| **`Deep copy`** | ‚úÖ –∫–æ–ø—ñ—é—é—Ç—å—Å—è | ‚úÖ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–æ–≤—ñ –æ–± º—î–∫—Ç–∏ | ‚úÖ –ø–æ–≤–Ω–∞ |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* –Ø–∫—â–æ —Ç–∏ –∫–ª–æ–Ω—É—î—à –æ–± º—î–∫—Ç **`User`**, —É —è–∫–æ–≥–æ —î —Å–ø–∏—Å–æ–∫ **`List<String> tags`**,  
  —ñ —Ç–∏ –∑—Ä–æ–±–∏–≤ **shallow copy** ‚Äî –æ–±–∏–¥–≤–∞ –æ–± º—î–∫—Ç–∏ **`user1`** —ñ **`user2`** –±—É–¥—É—Ç—å –ø–æ—Å–∏–ª–∞—Ç–∏—Å—å –Ω–∞ **—Ç–æ–π —Å–∞–º–∏–π —Å–ø–∏—Å–æ–∫**.
* –Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à, —â–æ–± —É **`user1`** —ñ **`user2`** –±—É–ª–∏ **—Ä—ñ–∑–Ω—ñ —Å–ø–∏—Å–∫–∏** ‚Äî —Ç—Ä–µ–±–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **deep copy** —ñ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Ä—É—á–Ω—É.
* **`Shallow`** ‚Äî –û–ö, —è–∫—â–æ –æ–±‚Äô—î–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ **`int`**, **`String`**, **`boolean`**, —Ç–æ–±—Ç–æ **immutable** —Ç–∏–ø–∏.
* **`Deep`** ‚Äî –ø–æ—Ç—Ä—ñ–±–µ–Ω, —è–∫—â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —î **–∑–º—ñ–Ω—é–≤–∞–Ω—ñ –æ–± º—î–∫—Ç–∏** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–ø–∏—Å–∫–∏, –º–∞—Å–∏–≤–∏, —ñ–Ω—à—ñ –∫–ª–∞—Å–∏).

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

‚úÖ **Shallow copy (–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è)**:–∏

```java
@Override
protected User clone() {
    try {
        return (User) super.clone();  // –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è
    } catch (CloneNotSupportedException e) {
        throw new RuntimeException(e);
    }
}
```

–Ø–∫—â–æ –ø–æ–ª–µ:

```java
private List<String> tags;
```

–¢–æ–¥—ñ:

```java
user1.clone().getTags() == user1.getTags(); // true -- –æ–¥–Ω–∞–∫–æ–≤–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
```

‚úÖ **Deep copy (–≥–ª–∏–±–æ–∫–∞ –∫–æ–ø—ñ—è)**:

```java
@Override
protected User clone() {
    try {
        User cloned = (User) super.clone();
        cloned.tags = new ArrayList<>(this.tags);  // –Ω–æ–≤–∞ –∫–æ–ø—ñ—è —Å–ø–∏—Å–∫—É
        return cloned;
    } catch (CloneNotSupportedException e) {
        throw new RuntimeException(e);
    }
}
```

---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Shallow copy | Deep copy |
| :---: | :---: | :---: |
| **–ö–æ–ø—ñ—é—î –ø—Ä–∏–º—ñ—Ç–∏–≤–∏** | ‚úÖ | ‚úÖ |
| **–ö–æ–ø—ñ—é—î –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–± º—î–∫—Ç–∏** | ‚ùå (–∫–æ–ø—ñ—é—î –ª–∏—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è) | ‚úÖ (—Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏) |
| **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** | ‚ùå | ‚úÖ |
| **–†–∏–∑–∏–∫ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–º—ñ–Ω** | –≤–∏—Å–æ–∫–∏–π | –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π |
| **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è `immutable`** | ‚úÖ | –Ω–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ |
| **–ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è `mutable`** | ‚ùå | ‚úÖ |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏ —î `super.clone()` deep copy?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ù—ñ. –¶–µ **–ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –∫–æ–ø—ñ—è** ‚Äî –ø–æ–ª—è —Ç–∏–ø—É **`int`**, **`String`** —Å–∫–æ–ø—ñ—é—é—Ç—å—Å—è, –∞ –≤–∫–ª–∞–¥–µ–Ω—ñ –æ–± º—î–∫—Ç–∏ –∑–∞–ª–∏—à–∞—Ç—å—Å—è —Å–ø—ñ–ª—å–Ω–∏–º–∏.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ deep copy –±–µ–∑ `clone()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
* –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É: –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—É –∫–æ–ø—ñ—é
* –£ —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Apache Commons SerializationUtils)

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

üß† **Shallow -> S \= Shared**  
üß† **Deep -> D \= Duplicate**

---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

**Shallow copy** ‚Äî —Ü–µ —à–≤–∏–¥–∫–∏–π —Å–ø–æ—Å—ñ–± –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–ø—ñ—é –æ–±'—î–∫—Ç–∞, –∞–ª–µ –∑ —Ä–∏–∑–∏–∫–æ–º, —â–æ –≤–∫–ª–∞–¥–µ–Ω—ñ –ø–æ–ª—è –∑–∞–ª–∏—à–∞—Ç—å—Å—è —Å–ø—ñ–ª—å–Ω–∏–º–∏.

**Deep copy** ‚Äî —Å–∫–ª–∞–¥–Ω—ñ—à–∏–π, –∞–ª–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ–≤–Ω—É –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∫–æ–ø—ñ—ó.

–Ø–∫—â–æ –≤ —Ç–≤–æ—î–º—É –æ–±‚Äô—î–∫—Ç—ñ —î –∑–º—ñ–Ω—é–≤–∞–Ω—ñ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (—Å–ø–∏—Å–∫–∏, –º–∞—Å–∏–≤–∏, –æ–± º—î–∫—Ç–∏) ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π deep copy –∞–±–æ —ñ–Ω—à—ñ –±–µ–∑–ø–µ—á–Ω—ñ —Å–ø–æ—Å–æ–±–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è.
