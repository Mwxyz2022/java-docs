---
layout: default
title: "–•–µ—à-–∫–æ–ª—ñ–∑—ñ—ó"
parent: "`equals()`, `hashCode()`, `clone()`"
grand_parent: "Java Core"
nav_order: 12
---

# –•–µ—à-–∫–æ–ª—ñ–∑—ñ—ó

* –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å: –•–µ—à-–∫–æ–ª—ñ–∑—ñ—è ‚Äì —Ü–µ —Å–∏—Ç—É–∞—Ü—ñ—è, –∫–æ–ª–∏ –¥–≤–∞ —Ä—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π `hashCode()`. –£ —Ö–µ—à-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö (`HashMap`, `HashSet`) —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–æ–Ω–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ –æ–¥–∏–Ω –±–∞–∫–µ—Ç, —ñ –¥–ª—è —ó—Ö —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `equals()`.

* –ø–æ–Ω—è—Ç—Ç—è: –•–µ—à-–∫–æ–ª—ñ–∑—ñ—è, `HashMap`, `HashSet`, "–≤—ñ–¥—Ä–æ" (bucket), –∑–≤'—è–∑–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫, —á–µ—Ä–≤–æ–Ω–æ-—á–æ—Ä–Ω–µ –¥–µ—Ä–µ–≤–æ.

* –ø—Ä–∏–∫–ª–∞–¥–∏: `key1.hashCode() == key2.hashCode()` –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö `key1` —Ç–∞ `key2`.

* –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏: –ö–æ–ª—ñ–∑—ñ—ó –¥–æ–ø—É—Å—Ç–∏–º—ñ, –∞–ª–µ —ó—Ö –≤–µ–ª–∏–∫–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∏–∂—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (O(1) –º–æ–∂–µ –¥–µ–≥—Ä–∞–¥—É–≤–∞—Ç–∏ –¥–æ O(N)). `HashMap` –≤–∏—Ä—ñ—à—É—î —ó—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–≤'—è–∑–∞–Ω–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ –∞–±–æ —á–µ—Ä–≤–æ–Ω–æ-—á–æ—Ä–Ω–∏—Ö –¥–µ—Ä–µ–≤ (–∑ Java 8+).

* —â–æ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ –Ω–∞ —Å–ø—ñ–≤–±–µ—Å—ñ–¥—ñ: –©–æ —Ü–µ, —è–∫ –≤–∏—Ä—ñ—à—É—é—Ç—å—Å—è –≤ `HashMap` (—Å–ø–∏—Å–æ–∫/–¥–µ—Ä–µ–≤–æ), —è–∫ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å.

### **‚úÖ –û—Ñ—ñ—Ü—ñ–π–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:**

**–•–µ—à-–∫–æ–ª—ñ–∑—ñ—è** ‚Äî —Ü–µ —Å–∏—Ç—É–∞—Ü—ñ—è, –∫–æ–ª–∏ **–¥–≤–∞ —Ä—ñ–∑–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏** –º–∞—é—Ç—å **–æ–¥–Ω–∞–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è `hashCode()`**. –£ —Ö–µ—à-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö, —Ç–∞–∫–∏—Ö —è–∫ **`HashMap`** —á–∏ **`HashSet`**, —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –æ–±–∏–¥–≤–∞ –æ–±‚Äô—î–∫—Ç–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ –æ–¥–Ω–µ –π —Ç–µ —Å–∞–º–µ "**`–≤—ñ–¥—Ä–æ`**", —ñ —Ç–æ–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –º–µ—Ç–æ–¥ **`equals()`** –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è.

### **üß† –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:**

–¶–µ —è–∫ –∫–æ–ª–∏ –¥–≤–æ—î —Ä—ñ–∑–Ω–∏—Ö –ª—é–¥–µ–π –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π –ø–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å. –í–æ–Ω–∏ –ø–æ—Ç—Ä–∞–ø–∏–ª–∏ –≤ –æ–¥–Ω—É –∫–æ—Ä–æ–±–∫—É, —ñ –ø–æ—à—Ç–∞—Ä—é —Ç—Ä–µ–±–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —â–µ –Ω–∞ —ñ–º º—è (**`equals`**), —â–æ–± —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è ‚Äî —Ö—Ç–æ —î —Ö—Ç–æ.

---

## **üìä –¢–∏–ø–∏ –æ–±'—î–∫—Ç—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ª—ñ–∑—ñ—é:**

| –¢–∏–ø | –û–ø–∏—Å |
| :---: | :---: |
| –†—ñ–∑–Ω—ñ –æ–±'—î–∫—Ç–∏ | –ê–ª–µ –∑ –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏ **`hashCode()`** ‚Äî **–∫–æ–ª—ñ–∑—ñ—è** |
| –û–¥–Ω–∞–∫–æ–≤—ñ –æ–±'—î–∫—Ç–∏ | –û–¥–Ω–∞–∫–æ–≤–∏–π —Ö–µ—à ‚Äî **—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —ñ –±–∞–∂–∞–Ω–æ** |

---

## **–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –ø–∞–ª—å—Ü—è—Ö (üí°)**

* **`hashCode()`** ‚Äî —Ü–µ **–∞–¥—Ä–µ—Å–∞** —É —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ñ. –Ø–∫—â–æ –≤–æ–Ω–∞ –æ–¥–Ω–∞–∫–æ–≤–∞ –¥–ª—è –∫—ñ–ª—å–∫–æ—Ö –æ–± º—î–∫—Ç—ñ–≤ ‚Äî –≤–∏–Ω–∏–∫–∞—î –∫–æ–ª—ñ–∑—ñ—è.
* Java –∑ —Ü–∏–º **–≤–º—ñ—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏** ‚Äî –≤ –æ–¥–Ω–æ–º—É –≤—ñ–¥—Ä—ñ –∑–±–µ—Ä—ñ–≥–∞—î —Å–ø–∏—Å–æ–∫ –æ–± º—î–∫—Ç—ñ–≤ —ñ –¥–æ–¥–∞—Ç–∫–æ–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —á–µ—Ä–µ–∑ **`equals()`**.
* –ê–ª–µ **—è–∫—â–æ —Ç–∞–∫–∏—Ö –∫–æ–ª—ñ–∑—ñ–π –±–∞–≥–∞—Ç–æ** ‚Äî –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞–¥–∞—î: –∑–∞–º—ñ—Å—Ç—å O(1) —Å—Ç–∞—î O(n).
* –¢–æ–º—É –≤–∞–∂–ª–∏–≤–æ —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ **`hashCode()`** —Ç–∞–∫, —â–æ–± –∑–Ω–∞—á–µ–Ω–Ω—è **–¥–æ–±—Ä–µ —Ä–æ–∑–ø–æ–¥—ñ–ª—è–ª–∏—Å—è**.

---

## **–ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (üß™)**

```java
public class BadHash {
    private String name;

    @Override
    public int hashCode() {
        return 42;  // –í–°–Ü –æ–± º—î–∫—Ç–∏ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ö–µ—à!
    }

    @Override
    public boolean equals(Object obj) {
        return obj instanceof BadHash && Objects.equals(name, ((BadHash)obj).name);
    }
}
```

üß™ –ù–∞—Å–ª—ñ–¥–∫–∏:

```java
Set<BadHash> set = new HashSet<>();
set.add(new BadHash("one"));
set.add(new BadHash("two"));
set.add(new BadHash("three"));
```

üîª –í—Å—ñ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç—å –≤ –æ–¥–Ω–µ –≤—ñ–¥—Ä–æ -> HashSet –ø—Ä–∞—Ü—é—î —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π —Å–ø–∏—Å–æ–∫ -> –ø–æ–≥—ñ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
---

## **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (‚öñÔ∏è)**

| –°–∏—Ç—É–∞—Ü—ñ—è | –†–µ–∑—É–ª—å—Ç–∞—Ç |
| ----- | ----- |
| –†—ñ–∑–Ω—ñ –æ–± º—î–∫—Ç–∏, —Ä—ñ–∑–Ω—ñ —Ö–µ—à—ñ | ‚úÖ –®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø |
| –†—ñ–∑–Ω—ñ –æ–± º—î–∫—Ç–∏, –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ö–µ—à | ‚ùå –ö–æ–ª—ñ–∑—ñ—è -> –ø–æ—Ç—Ä–µ–±–∞ –≤ **`equals()`** |
| –û–¥–Ω–∞–∫–æ–≤—ñ –æ–± º—î–∫—Ç–∏, —Ä—ñ–∑–Ω—ñ —Ö–µ—à—ñ | ‚ùå –ü–æ—Ä—É—à–µ–Ω–Ω—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É -> –ø–æ–º–∏–ª–∫–∏ –≤ **`HashMap`** |

---

## **FAQ ‚Äî –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è (‚ùì)**

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–æ–º—É –ø–æ–≥–∞–Ω–æ, –∫–æ–ª–∏ –≤—Å—ñ –æ–± º—î–∫—Ç–∏ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π `hashCode()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–ö–æ–ª–µ–∫—Ü—ñ—è **`HashMap`**/**`HashSet`** –≤—Ç—Ä–∞—á–∞—î —Å–µ–Ω—Å: –≤—Å—ñ –æ–± º—î–∫—Ç–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –≤ –æ–¥–Ω–µ ‚Äú–≤—ñ–¥—Ä–æ‚Äù, —ñ –¥–æ–≤–æ–¥–∏—Ç—å—Å—è –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —á–µ—Ä–µ–∑ **`equals()`**, —â–æ –∑–Ω–∏–∂—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–æ O(n).

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –ß–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∫–æ–ª—ñ–∑—ñ—ó –≤ `hashCode()`?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

–¢–∞–∫. Java –¥–æ–∑–≤–æ–ª—è—î –∫–æ–ª—ñ–∑—ñ—ó, –∞–ª–µ —ó—Ö —Ç—Ä–µ–±–∞ **–º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ö–æ—Ä–æ—à–∏—Ö —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ–π.

---

### **‚ùì –ü–∏—Ç–∞–Ω–Ω—è:**

 –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ `hashCode()` –∫—Ä–∞—â–µ?

### **üí¨ –í—ñ–¥–ø–æ–≤—ñ–¥—å:**

* –í–∫–ª—é—á–∞—Ç–∏ –≤ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–ª—è
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—Ç—ñ —á–∏—Å–ª–∞ (31, 17\)
* –£–Ω–∏–∫–∞—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **`return`** `1`)
* –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å **`Objects.hash(...)`** ‚Äî –≤—ñ–Ω –±–∞–ª–∞–Ω—Å—É—î —Ä–æ–∑–ø–æ–¥—ñ–ª

---

## **üß† –ú–Ω–µ–º–æ–Ω—ñ–∫–∞ –¥–ª—è –∑–∞–ø–∞–º‚Äô—è—Ç–æ–≤—É–≤–∞–Ω–Ω—è:**

üî¢ **`HashCode ‚â† ID`**

ü§ù **`HashCode -> —Ç—ñ–ª—å–∫–∏ ‚Äú–≤ —è–∫–µ –≤—ñ–¥—Ä–æ‚Äù`**

üîé **`equals() -> ‚Äú—á–∏ —Ü–µ —Å–∞–º–µ —Ç–æ–π?‚Äù`**

üéØ –ö–æ–ª—ñ–∑—ñ—ó ‚Äî **OK**, –∞–ª–µ **–º–µ–Ω—à–µ \= –∫—Ä–∞—â–µ**
---

## **üü© –ü—ñ–¥—Å—É–º–æ–∫:**

**–•–µ—à-–∫–æ–ª—ñ–∑—ñ—è** ‚Äî —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–µ —è–≤–∏—â–µ –≤ Java, –∫–æ–ª–∏ –¥–≤–∞ –æ–±‚Äô—î–∫—Ç–∏ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π **`hashCode()`**. –ê–ª–µ —è–∫—â–æ —ó—Ö –±–∞–≥–∞—Ç–æ ‚Äî –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Å–∏–ª—å–Ω–æ –ø–∞–¥–∞—î. –¢–æ–º—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è **`hashCode()`** –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —è–∫—ñ—Å–Ω–æ—é: –≤–∫–ª—é—á–∞—Ç–∏ –≤—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–ª—è, –º–∞—Ç–∏ —Ö–æ—Ä–æ—à–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª –∑–Ω–∞—á–µ–Ω—å —ñ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –∑ **`equals()`**.
